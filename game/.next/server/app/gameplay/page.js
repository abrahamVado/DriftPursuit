/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/gameplay/page";
exports.ids = ["app/gameplay/page"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fgameplay%2Fpage&page=%2Fgameplay%2Fpage&appPaths=%2Fgameplay%2Fpage&pagePath=private-next-app-dir%2Fgameplay%2Fpage.tsx&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fgameplay%2Fpage&page=%2Fgameplay%2Fpage&appPaths=%2Fgameplay%2Fpage&pagePath=private-next-app-dir%2Fgameplay%2Fpage.tsx&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/module.compiled.js?6a4d\");\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/app-render/interop-default */ \"(rsc)/./node_modules/next/dist/server/app-render/interop-default.js\");\n/* harmony import */ var next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/app-render/strip-flight-headers */ \"(rsc)/./node_modules/next/dist/server/app-render/strip-flight-headers.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/lib/experimental/ppr */ \"(rsc)/./node_modules/next/dist/server/lib/experimental/ppr.js\");\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/request/fallback-params */ \"(rsc)/./node_modules/next/dist/server/request/fallback-params.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/app-render/encryption-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption-utils.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/streaming-metadata */ \"(rsc)/./node_modules/next/dist/server/lib/streaming-metadata.js\");\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/app-render/action-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/action-utils.js\");\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/lib/server-action-request-meta */ \"(rsc)/./node_modules/next/dist/server/lib/server-action-request-meta.js\");\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/client/components/app-router-headers */ \"(rsc)/./node_modules/next/dist/client/components/app-router-headers.js\");\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/is-bot */ \"next/dist/shared/lib/router/utils/is-bot\");\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! next/dist/lib/fallback */ \"(rsc)/./node_modules/next/dist/lib/fallback.js\");\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! next/dist/server/render-result */ \"(rsc)/./node_modules/next/dist/server/render-result.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! next/dist/server/stream-utils/encoded-tags */ \"(rsc)/./node_modules/next/dist/server/stream-utils/encoded-tags.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! next/dist/server/send-payload */ \"(rsc)/./node_modules/next/dist/server/send-payload.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\");\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! next/dist/client/components/redirect-status-code */ \"(rsc)/./node_modules/next/dist/client/components/redirect-status-code.js\");\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"__next_app__\",\"routeModule\",\"handler\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nconst module0 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\"));\nconst module1 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\nconst module2 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/not-found.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/not-found.js\", 23));\nconst module3 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/forbidden.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/forbidden.js\", 23));\nconst module4 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/unauthorized.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/unauthorized.js\", 23));\nconst page5 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/gameplay/page.tsx */ \"(rsc)/./src/app/gameplay/page.tsx\"));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'gameplay',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page5, \"/app/src/app/gameplay/page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [module0, \"/app/src/app/layout.tsx\"],\n'global-error': [module1, \"next/dist/client/components/builtin/global-error.js\"],\n'not-found': [module2, \"next/dist/client/components/builtin/not-found.js\"],\n'forbidden': [module3, \"next/dist/client/components/builtin/forbidden.js\"],\n'unauthorized': [module4, \"next/dist/client/components/builtin/unauthorized.js\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"/app/src/app/gameplay/page.tsx\"];\n\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/gameplay/page\",\n        pathname: \"/gameplay\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    var _this;\n    let srcPage = \"/gameplay/page\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const initialPostponed = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'postponed');\n    // TODO: replace with more specific flags\n    const minimalMode = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'minimalMode');\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, query, params, parsedUrl, pageIsDynamic, buildManifest, nextFontManifest, reactLoadableManifest, serverActionsManifest, clientReferenceManifest, subresourceIntegrityManifest, prerenderManifest, isDraftMode, resolvedPathname, revalidateOnlyGenerated, routerServerContext, nextConfig, interceptionRoutePatterns } = prepareResult;\n    const pathname = parsedUrl.pathname || '/';\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__.normalizeAppPath)(srcPage);\n    let { isOnDemandRevalidate } = prepareResult;\n    const prerenderInfo = routeModule.match(pathname, prerenderManifest);\n    const isPrerendered = !!prerenderManifest.routes[resolvedPathname];\n    let isSSG = Boolean(prerenderInfo || isPrerendered || prerenderManifest.routes[normalizedSrcPage]);\n    const userAgent = req.headers['user-agent'] || '';\n    const botType = (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.getBotType)(userAgent);\n    const isHtmlBot = (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.isHtmlBotRequest)(req);\n    /**\n   * If true, this indicates that the request being made is for an app\n   * prefetch request.\n   */ const isPrefetchRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isPrefetchRSCRequest') ?? req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_ROUTER_PREFETCH_HEADER] === '1' // exclude runtime prefetches, which use '2'\n    ;\n    // NOTE: Don't delete headers[RSC] yet, it still needs to be used in renderToHTML later\n    const isRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isRSCRequest') ?? Boolean(req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_HEADER]);\n    const isPossibleServerAction = (0,next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__.getIsPossibleServerAction)(req);\n    /**\n   * If the route being rendered is an app page, and the ppr feature has been\n   * enabled, then the given route _could_ support PPR.\n   */ const couldSupportPPR = (0,next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__.checkIsAppPPREnabled)(nextConfig.experimental.ppr);\n    // When enabled, this will allow the use of the `?__nextppronly` query to\n    // enable debugging of the static shell.\n    const hasDebugStaticShellQuery =  false && 0;\n    // When enabled, this will allow the use of the `?__nextppronly` query\n    // to enable debugging of the fallback shell.\n    const hasDebugFallbackShellQuery = hasDebugStaticShellQuery && query.__nextppronly === 'fallback';\n    // This page supports PPR if it is marked as being `PARTIALLY_STATIC` in the\n    // prerender manifest and this is an app page.\n    const isRoutePPREnabled = couldSupportPPR && (((_this = prerenderManifest.routes[normalizedSrcPage] ?? prerenderManifest.dynamicRoutes[normalizedSrcPage]) == null ? void 0 : _this.renderingMode) === 'PARTIALLY_STATIC' || // Ideally we'd want to check the appConfig to see if this page has PPR\n    // enabled or not, but that would require plumbing the appConfig through\n    // to the server during development. We assume that the page supports it\n    // but only during development.\n    hasDebugStaticShellQuery && (routeModule.isDev === true || (routerServerContext == null ? void 0 : routerServerContext.experimentalTestProxy) === true));\n    const isDebugStaticShell = hasDebugStaticShellQuery && isRoutePPREnabled;\n    // We should enable debugging dynamic accesses when the static shell\n    // debugging has been enabled and we're also in development mode.\n    const isDebugDynamicAccesses = isDebugStaticShell && routeModule.isDev === true;\n    const isDebugFallbackShell = hasDebugFallbackShellQuery && isRoutePPREnabled;\n    // If we're in minimal mode, then try to get the postponed information from\n    // the request metadata. If available, use it for resuming the postponed\n    // render.\n    const minimalPostponed = isRoutePPREnabled ? initialPostponed : undefined;\n    // If PPR is enabled, and this is a RSC request (but not a prefetch), then\n    // we can use this fact to only generate the flight data for the request\n    // because we can't cache the HTML (as it's also dynamic).\n    const isDynamicRSCRequest = isRoutePPREnabled && isRSCRequest && !isPrefetchRSCRequest;\n    // Need to read this before it's stripped by stripFlightHeaders. We don't\n    // need to transfer it to the request meta because it's only read\n    // within this function; the static segment data should have already been\n    // generated, so we will always either return a static response or a 404.\n    const segmentPrefetchHeader = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'segmentPrefetchRSCRequest');\n    // TODO: investigate existing bug with shouldServeStreamingMetadata always\n    // being true for a revalidate due to modifying the base-server this.renderOpts\n    // when fixing this to correct logic it causes hydration issue since we set\n    // serveStreamingMetadata to true during export\n    let serveStreamingMetadata = !userAgent ? true : (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.shouldServeStreamingMetadata)(userAgent, nextConfig.htmlLimitedBots);\n    if (isHtmlBot && isRoutePPREnabled) {\n        isSSG = false;\n        serveStreamingMetadata = false;\n    }\n    // In development, we always want to generate dynamic HTML.\n    let supportsDynamicResponse = // If we're in development, we always support dynamic HTML, unless it's\n    // a data request, in which case we only produce static HTML.\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isSSG || // If this request has provided postponed data, it supports dynamic\n    // HTML.\n    typeof initialPostponed === 'string' || // If this is a dynamic RSC request, then this render supports dynamic\n    // HTML (it's dynamic).\n    isDynamicRSCRequest;\n    // When html bots request PPR page, perform the full dynamic rendering.\n    const shouldWaitOnAllReady = isHtmlBot && isRoutePPREnabled;\n    let ssgCacheKey = null;\n    if (!isDraftMode && isSSG && !supportsDynamicResponse && !isPossibleServerAction && !minimalPostponed && !isDynamicRSCRequest) {\n        ssgCacheKey = resolvedPathname;\n    }\n    // the staticPathKey differs from ssgCacheKey since\n    // ssgCacheKey is null in dev since we're always in \"dynamic\"\n    // mode in dev to bypass the cache, but we still need to honor\n    // dynamicParams = false in dev mode\n    let staticPathKey = ssgCacheKey;\n    if (!staticPathKey && routeModule.isDev) {\n        staticPathKey = resolvedPathname;\n    }\n    // If this is a request for an app path that should be statically generated\n    // and we aren't in the edge runtime, strip the flight headers so it will\n    // generate the static response.\n    if (!routeModule.isDev && !isDraftMode && isSSG && isRSCRequest && !isDynamicRSCRequest) {\n        (0,next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__.stripFlightHeaders)(req.headers);\n    }\n    const ComponentMod = {\n        ...next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__,\n        tree,\n        pages,\n        GlobalError: (next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default()),\n        handler,\n        routeModule,\n        __next_app__\n    };\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__.setReferenceManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: (0,next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__.createServerModuleMap)({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    try {\n        const varyHeader = routeModule.getVaryHeader(resolvedPathname, interceptionRoutePatterns);\n        res.setHeader('Vary', varyHeader);\n        const invokeRouteModule = async (span, context)=>{\n            const nextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextRequest(req);\n            const nextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextResponse(res);\n            // TODO: adapt for putting the RDC inside the postponed data\n            // If we're in dev, and this isn't a prefetch or a server action,\n            // we should seed the resume data cache.\n            if (true) {\n                if (nextConfig.experimental.cacheComponents && !isPrefetchRSCRequest && !context.renderOpts.isPossibleServerAction) {\n                    const warmup = await routeModule.warmup(nextReq, nextRes, context);\n                    // If the warmup is successful, we should use the resume data\n                    // cache from the warmup.\n                    if (warmup.metadata.renderResumeDataCache) {\n                        context.renderOpts.renderResumeDataCache = warmup.metadata.renderResumeDataCache;\n                    }\n                }\n            }\n            return routeModule.render(nextReq, nextRes, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const doRender = async ({ span, postponed, fallbackRouteParams })=>{\n            const context = {\n                query,\n                params,\n                page: normalizedSrcPage,\n                sharedContext: {\n                    buildId\n                },\n                serverComponentsHmrCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'serverComponentsHmrCache'),\n                fallbackRouteParams,\n                renderOpts: {\n                    App: ()=>null,\n                    Document: ()=>null,\n                    pageConfig: {},\n                    ComponentMod,\n                    Component: (0,next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__.interopDefault)(ComponentMod),\n                    params,\n                    routeModule,\n                    page: srcPage,\n                    postponed,\n                    shouldWaitOnAllReady,\n                    serveStreamingMetadata,\n                    supportsDynamicResponse: typeof postponed === 'string' || supportsDynamicResponse,\n                    buildManifest,\n                    nextFontManifest,\n                    reactLoadableManifest,\n                    subresourceIntegrityManifest,\n                    serverActionsManifest,\n                    clientReferenceManifest,\n                    setIsrStatus: routerServerContext == null ? void 0 : routerServerContext.setIsrStatus,\n                    dir:  true ? (__webpack_require__(/*! path */ \"path\").join)(/* turbopackIgnore: true */ process.cwd(), routeModule.relativeProjectDir) : 0,\n                    isDraftMode,\n                    isRevalidate: isSSG && !postponed && !isDynamicRSCRequest,\n                    botType,\n                    isOnDemandRevalidate,\n                    isPossibleServerAction,\n                    assetPrefix: nextConfig.assetPrefix,\n                    nextConfigOutput: nextConfig.output,\n                    crossOrigin: nextConfig.crossOrigin,\n                    trailingSlash: nextConfig.trailingSlash,\n                    previewProps: prerenderManifest.preview,\n                    deploymentId: nextConfig.deploymentId,\n                    enableTainting: nextConfig.experimental.taint,\n                    htmlLimitedBots: nextConfig.htmlLimitedBots,\n                    devtoolSegmentExplorer: nextConfig.experimental.devtoolSegmentExplorer,\n                    reactMaxHeadersLength: nextConfig.reactMaxHeadersLength,\n                    multiZoneDraftMode,\n                    incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'incrementalCache'),\n                    cacheLifeProfiles: nextConfig.experimental.cacheLife,\n                    basePath: nextConfig.basePath,\n                    serverActions: nextConfig.experimental.serverActions,\n                    ...isDebugStaticShell || isDebugDynamicAccesses ? {\n                        nextExport: true,\n                        supportsDynamicResponse: false,\n                        isStaticGeneration: true,\n                        isRevalidate: true,\n                        isDebugDynamicAccesses: isDebugDynamicAccesses\n                    } : {},\n                    experimental: {\n                        isRoutePPREnabled,\n                        expireTime: nextConfig.expireTime,\n                        staleTimes: nextConfig.experimental.staleTimes,\n                        cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                        clientSegmentCache: Boolean(nextConfig.experimental.clientSegmentCache),\n                        clientParamParsing: Boolean(nextConfig.experimental.clientParamParsing),\n                        dynamicOnHover: Boolean(nextConfig.experimental.dynamicOnHover),\n                        inlineCss: Boolean(nextConfig.experimental.inlineCss),\n                        authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n                        clientTraceMetadata: nextConfig.experimental.clientTraceMetadata || []\n                    },\n                    waitUntil: ctx.waitUntil,\n                    onClose: (cb)=>{\n                        res.on('close', cb);\n                    },\n                    onAfterTaskError: ()=>{},\n                    onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext),\n                    err: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'invokeError'),\n                    dev: routeModule.isDev\n                }\n            };\n            const result = await invokeRouteModule(span, context);\n            const { metadata } = result;\n            const { cacheControl, headers = {}, // Add any fetch tags that were on the page to the response headers.\n            fetchTags: cacheTags } = metadata;\n            if (cacheTags) {\n                headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n            }\n            // Pull any fetch metrics from the render onto the request.\n            ;\n            req.fetchMetrics = metadata.fetchMetrics;\n            // we don't throw static to dynamic errors in dev as isSSG\n            // is a best guess in dev since we don't have the prerender pass\n            // to know whether the path is actually static or not\n            if (isSSG && (cacheControl == null ? void 0 : cacheControl.revalidate) === 0 && !routeModule.isDev && !isRoutePPREnabled) {\n                const staticBailoutInfo = metadata.staticBailoutInfo;\n                const err = Object.defineProperty(new Error(`Page changed from static to dynamic at runtime ${resolvedPathname}${(staticBailoutInfo == null ? void 0 : staticBailoutInfo.description) ? `, reason: ${staticBailoutInfo.description}` : ``}` + `\\nsee more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E132\",\n                    enumerable: false,\n                    configurable: true\n                });\n                if (staticBailoutInfo == null ? void 0 : staticBailoutInfo.stack) {\n                    const stack = staticBailoutInfo.stack;\n                    err.stack = err.message + stack.substring(stack.indexOf('\\n'));\n                }\n                throw err;\n            }\n            return {\n                value: {\n                    kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE,\n                    html: result,\n                    headers,\n                    rscData: metadata.flightData,\n                    postponed: metadata.postponed,\n                    status: metadata.statusCode,\n                    segmentData: metadata.segmentData\n                },\n                cacheControl\n            };\n        };\n        const responseGenerator = async ({ hasResolved, previousCacheEntry, isRevalidating, span })=>{\n            const isProduction = routeModule.isDev === false;\n            const didRespond = hasResolved || res.writableEnded;\n            // skip on-demand revalidate if cache is not present and\n            // revalidate-if-generated is set\n            if (isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry && !minimalMode) {\n                if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n                    await routerServerContext.render404(req, res);\n                } else {\n                    res.statusCode = 404;\n                    res.end('This page could not be found');\n                }\n                return null;\n            }\n            let fallbackMode;\n            if (prerenderInfo) {\n                fallbackMode = (0,next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.parseFallbackField)(prerenderInfo.fallback);\n            }\n            // When serving a HTML bot request, we want to serve a blocking render and\n            // not the prerendered page. This ensures that the correct content is served\n            // to the bot in the head.\n            if (fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.PRERENDER && (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.isBot)(userAgent)) {\n                if (!isRoutePPREnabled || isHtmlBot) {\n                    fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n                }\n            }\n            if ((previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) === -1) {\n                isOnDemandRevalidate = true;\n            }\n            // TODO: adapt for PPR\n            // only allow on-demand revalidate for fallback: true/blocking\n            // or for prerendered fallback: false paths\n            if (isOnDemandRevalidate && (fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND || previousCacheEntry)) {\n                fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n            }\n            if (!minimalMode && fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER && staticPathKey && !didRespond && !isDraftMode && pageIsDynamic && (isProduction || !isPrerendered)) {\n                // if the page has dynamicParams: false and this pathname wasn't\n                // prerendered trigger the no fallback handling\n                if (// In development, fall through to render to handle missing\n                // getStaticPaths.\n                (isProduction || prerenderInfo) && // When fallback isn't present, abort this render so we 404\n                fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND) {\n                    throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError();\n                }\n                let fallbackResponse;\n                if (isRoutePPREnabled && !isRSCRequest) {\n                    const cacheKey = typeof (prerenderInfo == null ? void 0 : prerenderInfo.fallback) === 'string' ? prerenderInfo.fallback : isProduction ? normalizedSrcPage : null;\n                    // We use the response cache here to handle the revalidation and\n                    // management of the fallback shell.\n                    fallbackResponse = await routeModule.handleResponse({\n                        cacheKey,\n                        req,\n                        nextConfig,\n                        routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                        isFallback: true,\n                        prerenderManifest,\n                        isRoutePPREnabled,\n                        responseGenerator: async ()=>doRender({\n                                span,\n                                // We pass `undefined` as rendering a fallback isn't resumed\n                                // here.\n                                postponed: undefined,\n                                fallbackRouteParams: // If we're in production or we're debugging the fallback\n                                // shell then we should postpone when dynamic params are\n                                // accessed.\n                                isProduction || isDebugFallbackShell ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(normalizedSrcPage) : null\n                            }),\n                        waitUntil: ctx.waitUntil\n                    });\n                    // If the fallback response was set to null, then we should return null.\n                    if (fallbackResponse === null) return null;\n                    // Otherwise, if we did get a fallback response, we should return it.\n                    if (fallbackResponse) {\n                        // Remove the cache control from the response to prevent it from being\n                        // used in the surrounding cache.\n                        delete fallbackResponse.cacheControl;\n                        return fallbackResponse;\n                    }\n                }\n            }\n            // Only requests that aren't revalidating can be resumed. If we have the\n            // minimal postponed data, then we should resume the render with it.\n            const postponed = !isOnDemandRevalidate && !isRevalidating && minimalPostponed ? minimalPostponed : undefined;\n            // When we're in minimal mode, if we're trying to debug the static shell,\n            // we should just return nothing instead of resuming the dynamic render.\n            if ((isDebugStaticShell || isDebugDynamicAccesses) && typeof postponed !== 'undefined') {\n                return {\n                    cacheControl: {\n                        revalidate: 1,\n                        expire: undefined\n                    },\n                    value: {\n                        kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.PAGES,\n                        html: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                        pageData: {},\n                        headers: undefined,\n                        status: undefined\n                    }\n                };\n            }\n            // If this is a dynamic route with PPR enabled and the default route\n            // matches were set, then we should pass the fallback route params to\n            // the renderer as this is a fallback revalidation request.\n            const fallbackRouteParams = pageIsDynamic && isRoutePPREnabled && ((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'renderFallbackShell') || isDebugFallbackShell) ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(pathname) : null;\n            // Perform the render.\n            return doRender({\n                span,\n                postponed,\n                fallbackRouteParams\n            });\n        };\n        const handleResponse = async (span)=>{\n            var _cacheEntry_value, _cachedData_headers;\n            const cacheEntry = await routeModule.handleResponse({\n                cacheKey: ssgCacheKey,\n                responseGenerator: (c)=>responseGenerator({\n                        span,\n                        ...c\n                    }),\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                isOnDemandRevalidate,\n                isRoutePPREnabled,\n                req,\n                nextConfig,\n                prerenderManifest,\n                waitUntil: ctx.waitUntil\n            });\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            // In dev, we should not cache pages for any reason.\n            if (routeModule.isDev) {\n                res.setHeader('Cache-Control', 'no-store, must-revalidate');\n            }\n            if (!cacheEntry) {\n                if (ssgCacheKey) {\n                    // A cache entry might not be generated if a response is written\n                    // in `getInitialProps` or `getServerSideProps`, but those shouldn't\n                    // have a cache key. If we do have a cache key but we don't end up\n                    // with a cache entry, then either Next.js or the application has a\n                    // bug that needs fixing.\n                    throw Object.defineProperty(new Error('invariant: cache entry required but not generated'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E62\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                return null;\n            }\n            if (((_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant app-page handler received invalid cache entry ${(_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E707\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            const didPostpone = typeof cacheEntry.value.postponed === 'string';\n            if (isSSG && // We don't want to send a cache header for requests that contain dynamic\n            // data. If this is a Dynamic RSC request or wasn't a Prefetch RSC\n            // request, then we should set the cache header.\n            !isDynamicRSCRequest && (!didPostpone || isPrefetchRSCRequest)) {\n                if (!minimalMode) {\n                    // set x-nextjs-cache header to match the header\n                    // we set for the image-optimizer\n                    res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n                }\n                // Set a header used by the client router to signal the response is static\n                // and should respect the `static` cache staleTime value.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_IS_PRERENDER_HEADER, '1');\n            }\n            const { value: cachedData } = cacheEntry;\n            // Coerce the cache control parameter from the render.\n            let cacheControl;\n            // If this is a resume request in minimal mode it is streamed with dynamic\n            // content and should not be cached.\n            if (minimalPostponed) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (minimalMode && isRSCRequest && !isPrefetchRSCRequest && isRoutePPREnabled) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (!routeModule.isDev) {\n                // If this is a preview mode request, we shouldn't cache it\n                if (isDraftMode) {\n                    cacheControl = {\n                        revalidate: 0,\n                        expire: undefined\n                    };\n                } else if (!isSSG) {\n                    if (!res.getHeader('Cache-Control')) {\n                        cacheControl = {\n                            revalidate: 0,\n                            expire: undefined\n                        };\n                    }\n                } else if (cacheEntry.cacheControl) {\n                    // If the cache entry has a cache control with a revalidate value that's\n                    // a number, use it.\n                    if (typeof cacheEntry.cacheControl.revalidate === 'number') {\n                        var _cacheEntry_cacheControl;\n                        if (cacheEntry.cacheControl.revalidate < 1) {\n                            throw Object.defineProperty(new Error(`Invalid revalidate configuration provided: ${cacheEntry.cacheControl.revalidate} < 1`), \"__NEXT_ERROR_CODE\", {\n                                value: \"E22\",\n                                enumerable: false,\n                                configurable: true\n                            });\n                        }\n                        cacheControl = {\n                            revalidate: cacheEntry.cacheControl.revalidate,\n                            expire: ((_cacheEntry_cacheControl = cacheEntry.cacheControl) == null ? void 0 : _cacheEntry_cacheControl.expire) ?? nextConfig.expireTime\n                        };\n                    } else {\n                        cacheControl = {\n                            revalidate: next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.CACHE_ONE_YEAR,\n                            expire: undefined\n                        };\n                    }\n                }\n            }\n            cacheEntry.cacheControl = cacheControl;\n            if (typeof segmentPrefetchHeader === 'string' && (cachedData == null ? void 0 : cachedData.kind) === next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE && cachedData.segmentData) {\n                var _cachedData_headers1;\n                // This is a prefetch request issued by the client Segment Cache. These\n                // should never reach the application layer (lambda). We should either\n                // respond from the cache (HIT) or respond with 204 No Content (MISS).\n                // Set a header to indicate that PPR is enabled for this route. This\n                // lets the client distinguish between a regular cache miss and a cache\n                // miss due to PPR being disabled. In other contexts this header is used\n                // to indicate that the response contains dynamic data, but here we're\n                // only using it to indicate that the feature is enabled — the segment\n                // response itself contains whether the data is dynamic.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '2');\n                // Add the cache tags header to the response if it exists and we're in\n                // minimal mode while rendering a static page.\n                const tags = (_cachedData_headers1 = cachedData.headers) == null ? void 0 : _cachedData_headers1[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                    res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n                }\n                const matchedSegment = cachedData.segmentData.get(segmentPrefetchHeader);\n                if (matchedSegment !== undefined) {\n                    // Cache hit\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(matchedSegment, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                        cacheControl: cacheEntry.cacheControl\n                    });\n                }\n                // Cache miss. Either a cache entry for this route has not been generated\n                // (which technically should not be possible when PPR is enabled, because\n                // at a minimum there should always be a fallback entry) or there's no\n                // match for the requested segment. Respond with a 204 No Content. We\n                // don't bother to respond with 404, because these requests are only\n                // issued as part of a prefetch.\n                res.statusCode = 204;\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If there's a callback for `onCacheEntry`, call it with the cache entry\n            // and the revalidate options.\n            const onCacheEntry = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'onCacheEntry');\n            if (onCacheEntry) {\n                const finished = await onCacheEntry({\n                    ...cacheEntry,\n                    // TODO: remove this when upstream doesn't\n                    // always expect this value to be \"PAGE\"\n                    value: {\n                        ...cacheEntry.value,\n                        kind: 'PAGE'\n                    }\n                }, {\n                    url: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'initURL')\n                });\n                if (finished) {\n                    // TODO: maybe we have to end the request?\n                    return null;\n                }\n            }\n            // If the request has a postponed state and it's a resume request we\n            // should error.\n            if (didPostpone && minimalPostponed) {\n                throw Object.defineProperty(new Error('Invariant: postponed state should not be present on a resume request'), \"__NEXT_ERROR_CODE\", {\n                    value: \"E396\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (cachedData.headers) {\n                const headers = {\n                    ...cachedData.headers\n                };\n                if (!minimalMode || !isSSG) {\n                    delete headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                }\n                for (let [key, value] of Object.entries(headers)){\n                    if (typeof value === 'undefined') continue;\n                    if (Array.isArray(value)) {\n                        for (const v of value){\n                            res.appendHeader(key, v);\n                        }\n                    } else if (typeof value === 'number') {\n                        value = value.toString();\n                        res.appendHeader(key, value);\n                    } else {\n                        res.appendHeader(key, value);\n                    }\n                }\n            }\n            // Add the cache tags header to the response if it exists and we're in\n            // minimal mode while rendering a static page.\n            const tags = (_cachedData_headers = cachedData.headers) == null ? void 0 : _cachedData_headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n            if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n            }\n            // If the request is a data request, then we shouldn't set the status code\n            // from the response because it should always be 200. This should be gated\n            // behind the experimental PPR flag.\n            if (cachedData.status && (!isRSCRequest || !isRoutePPREnabled)) {\n                res.statusCode = cachedData.status;\n            }\n            // Redirect information is encoded in RSC payload, so we don't need to use redirect status codes\n            if (!minimalMode && cachedData.status && next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__.RedirectStatusCode[cachedData.status] && isRSCRequest) {\n                res.statusCode = 200;\n            }\n            // Mark that the request did postpone.\n            if (didPostpone) {\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '1');\n            }\n            // we don't go through this block when preview mode is true\n            // as preview mode is a dynamic request (bypasses cache) and doesn't\n            // generate both HTML and payloads in the same request so continue to just\n            // return the generated payload\n            if (isRSCRequest && !isDraftMode) {\n                // If this is a dynamic RSC request, then stream the response.\n                if (typeof cachedData.rscData === 'undefined') {\n                    if (cachedData.postponed) {\n                        throw Object.defineProperty(new Error('Invariant: Expected postponed to be undefined'), \"__NEXT_ERROR_CODE\", {\n                            value: \"E372\",\n                            enumerable: false,\n                            configurable: true\n                        });\n                    }\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: cachedData.html,\n                        // Dynamic RSC responses cannot be cached, even if they're\n                        // configured with `force-static` because we have no way of\n                        // distinguishing between `force-static` and pages that have no\n                        // postponed state.\n                        // TODO: distinguish `force-static` from pages with no postponed state (static)\n                        cacheControl: isDynamicRSCRequest ? {\n                            revalidate: 0,\n                            expire: undefined\n                        } : cacheEntry.cacheControl\n                    });\n                }\n                // As this isn't a prefetch request, we should serve the static flight\n                // data.\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(cachedData.rscData, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // This is a request for HTML data.\n            let body = cachedData.html;\n            // If there's no postponed state, we should just serve the HTML. This\n            // should also be the case for a resume request because it's completed\n            // as a server render (rather than a static render).\n            if (!didPostpone || minimalMode || isRSCRequest) {\n                // If we're in test mode, we should add a sentinel chunk to the response\n                // that's between the static and dynamic parts so we can compare the\n                // chunks and add assertions.\n                if (false) {}\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If we're debugging the static shell or the dynamic API accesses, we\n            // should just serve the HTML without resuming the render. The returned\n            // HTML will be the static shell so all the Dynamic API's will be used\n            // during static generation.\n            if (isDebugStaticShell || isDebugDynamicAccesses) {\n                // Since we're not resuming the render, we need to at least add the\n                // closing body and html tags to create valid HTML.\n                body.push(new ReadableStream({\n                    start (controller) {\n                        controller.enqueue(next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__.ENCODED_TAGS.CLOSED.BODY_AND_HTML);\n                        controller.close();\n                    }\n                }));\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: {\n                        revalidate: 0,\n                        expire: undefined\n                    }\n                });\n            }\n            // If we're in test mode, we should add a sentinel chunk to the response\n            // that's between the static and dynamic parts so we can compare the\n            // chunks and add assertions.\n            if (false) {}\n            // This request has postponed, so let's create a new transformer that the\n            // dynamic data can pipe to that will attach the dynamic data to the end\n            // of the response.\n            const transformer = new TransformStream();\n            body.push(transformer.readable);\n            // Perform the render again, but this time, provide the postponed state.\n            // We don't await because we want the result to start streaming now, and\n            // we've already chained the transformer's readable to the render result.\n            doRender({\n                span,\n                postponed: cachedData.postponed,\n                // This is a resume render, not a fallback render, so we don't need to\n                // set this.\n                fallbackRouteParams: null\n            }).then(async (result)=>{\n                var _result_value;\n                if (!result) {\n                    throw Object.defineProperty(new Error('Invariant: expected a result to be returned'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E463\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if (((_result_value = result.value) == null ? void 0 : _result_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                    var _result_value1;\n                    throw Object.defineProperty(new Error(`Invariant: expected a page response, got ${(_result_value1 = result.value) == null ? void 0 : _result_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                        value: \"E305\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                // Pipe the resume result to the transformer.\n                await result.value.html.pipeTo(transformer.writable);\n            }).catch((err)=>{\n                // An error occurred during piping or preparing the render, abort\n                // the transformers writer so we can terminate the stream.\n                transformer.writable.abort(err).catch((e)=>{\n                    console.error(\"couldn't abort transformer\", e);\n                });\n            });\n            return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                req,\n                res,\n                generateEtags: nextConfig.generateEtags,\n                poweredByHeader: nextConfig.poweredByHeader,\n                result: body,\n                // We don't want to cache the response if it has postponed data because\n                // the response being sent to the client it's dynamic parts are streamed\n                // to the client on the same request.\n                cacheControl: {\n                    revalidate: 0,\n                    expire: undefined\n                }\n            });\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            return await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: srcPage,\n                routeType: 'render',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__.getRevalidateReason)({\n                    isRevalidate: isSSG,\n                    isOnDemandRevalidate\n                })\n            }, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        throw err;\n    }\n}\n// TODO: omit this from production builds, only test builds should include it\n/**\n * Creates a readable stream that emits a PPR boundary sentinel.\n *\n * @returns A readable stream that emits a PPR boundary sentinel.\n */ function createPPRBoundarySentinel() {\n    return new ReadableStream({\n        start (controller) {\n            controller.enqueue(new TextEncoder().encode('<!-- PPR_BOUNDARY_SENTINEL -->'));\n            controller.close();\n        }\n    });\n}\n\n//# sourceMappingURL=app-page.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZnYW1lcGxheSUyRnBhZ2UmcGFnZT0lMkZnYW1lcGxheSUyRnBhZ2UmYXBwUGF0aHM9JTJGZ2FtZXBsYXklMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGZ2FtZXBsYXklMkZwYWdlLnRzeCZhcHBEaXI9JTJGYXBwJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZhcHAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0JBQXNCLG9KQUE0RDtBQUNsRixzQkFBc0IsdU9BQXdGO0FBQzlHLHNCQUFzQixpT0FBcUY7QUFDM0csc0JBQXNCLGlPQUFxRjtBQUMzRyxzQkFBc0IsdU9BQXdGO0FBQzlHLG9CQUFvQixrS0FBbUU7QUFHckY7QUFHQTtBQUMyRTtBQUNMO0FBQ1Q7QUFDTztBQUNPO0FBQ1M7QUFDRjtBQUNQO0FBQ0s7QUFDWTtBQUNXO0FBQ3hCO0FBQ0Y7QUFDYTtBQUMwRjtBQUN6RztBQUNYO0FBQ1E7QUFDaEI7QUFDaUQ7QUFDakM7QUFDVDtBQUNpQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLFNBQVM7QUFD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QTZCLDZGQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vZHVsZTAgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvc3JjL2FwcC9sYXlvdXQudHN4XCIpO1xuY29uc3QgbW9kdWxlMSA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZ2xvYmFsLWVycm9yLmpzXCIpO1xuY29uc3QgbW9kdWxlMiA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vbm90LWZvdW5kLmpzXCIpO1xuY29uc3QgbW9kdWxlMyA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZm9yYmlkZGVuLmpzXCIpO1xuY29uc3QgbW9kdWxlNCA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vdW5hdXRob3JpemVkLmpzXCIpO1xuY29uc3QgcGFnZTUgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvc3JjL2FwcC9nYW1lcGxheS9wYWdlLnRzeFwiKTtcbmltcG9ydCB7IEFwcFBhZ2VSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXBhZ2UvbW9kdWxlLmNvbXBpbGVkXCIgd2l0aCB7XG4gICAgJ3R1cmJvcGFjay10cmFuc2l0aW9uJzogJ25leHQtc3NyJ1xufTtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIiB3aXRoIHtcbiAgICAndHVyYm9wYWNrLXRyYW5zaXRpb24nOiAnbmV4dC1zZXJ2ZXItdXRpbGl0eSdcbn07XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgaW50ZXJvcERlZmF1bHQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2ludGVyb3AtZGVmYXVsdFwiO1xuaW1wb3J0IHsgc3RyaXBGbGlnaHRIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBwLXJlbmRlci9zdHJpcC1mbGlnaHQtaGVhZGVyc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IGNoZWNrSXNBcHBQUFJFbmFibGVkIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2V4cGVyaW1lbnRhbC9wcHJcIjtcbmltcG9ydCB7IGdldEZhbGxiYWNrUm91dGVQYXJhbXMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0L2ZhbGxiYWNrLXBhcmFtc1wiO1xuaW1wb3J0IHsgc2V0UmVmZXJlbmNlTWFuaWZlc3RzU2luZ2xldG9uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBwLXJlbmRlci9lbmNyeXB0aW9uLXV0aWxzXCI7XG5pbXBvcnQgeyBpc0h0bWxCb3RSZXF1ZXN0LCBzaG91bGRTZXJ2ZVN0cmVhbWluZ01ldGFkYXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3N0cmVhbWluZy1tZXRhZGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyTW9kdWxlTWFwIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBwLXJlbmRlci9hY3Rpb24tdXRpbHNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgZ2V0SXNQb3NzaWJsZVNlcnZlckFjdGlvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9zZXJ2ZXItYWN0aW9uLXJlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgUlNDX0hFQURFUiwgTkVYVF9ST1VURVJfUFJFRkVUQ0hfSEVBREVSLCBORVhUX0lTX1BSRVJFTkRFUl9IRUFERVIsIE5FWFRfRElEX1BPU1RQT05FX0hFQURFUiwgUlNDX0NPTlRFTlRfVFlQRV9IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2FwcC1yb3V0ZXItaGVhZGVyc1wiO1xuaW1wb3J0IHsgZ2V0Qm90VHlwZSwgaXNCb3QgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2lzLWJvdFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCB7IEZhbGxiYWNrTW9kZSwgcGFyc2VGYWxsYmFja0ZpZWxkIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvZmFsbGJhY2tcIjtcbmltcG9ydCBSZW5kZXJSZXN1bHQgZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVuZGVyLXJlc3VsdFwiO1xuaW1wb3J0IHsgQ0FDSEVfT05FX1lFQVIsIEhUTUxfQ09OVEVOVF9UWVBFX0hFQURFUiwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgRU5DT0RFRF9UQUdTIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc3RyZWFtLXV0aWxzL2VuY29kZWQtdGFnc1wiO1xuaW1wb3J0IHsgc2VuZFJlbmRlclJlc3VsdCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcGF5bG9hZFwiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG4vLyBXZSBpbmplY3QgdGhlIHRyZWUgYW5kIHBhZ2VzIGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCB0cmVlID0ge1xuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAnJyxcbiAgICAgICAge1xuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAnZ2FtZXBsYXknLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbJ19fUEFHRV9fJywge30sIHtcbiAgICAgICAgICBwYWdlOiBbcGFnZTUsIFwiL2FwcC9zcmMvYXBwL2dhbWVwbGF5L3BhZ2UudHN4XCJdLFxuICAgICAgICAgIFxuICAgICAgICB9XVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICB9XG4gICAgICBdXG4gICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICdsYXlvdXQnOiBbbW9kdWxlMCwgXCIvYXBwL3NyYy9hcHAvbGF5b3V0LnRzeFwiXSxcbidnbG9iYWwtZXJyb3InOiBbbW9kdWxlMSwgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9nbG9iYWwtZXJyb3IuanNcIl0sXG4nbm90LWZvdW5kJzogW21vZHVsZTIsIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vbm90LWZvdW5kLmpzXCJdLFxuJ2ZvcmJpZGRlbic6IFttb2R1bGUzLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9idWlsdGluL2ZvcmJpZGRlbi5qc1wiXSxcbid1bmF1dGhvcml6ZWQnOiBbbW9kdWxlNCwgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi91bmF1dGhvcml6ZWQuanNcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiL2FwcC9zcmMvYXBwL2dhbWVwbGF5L3BhZ2UudHN4XCJdO1xuZXhwb3J0IHsgdHJlZSwgcGFnZXMgfTtcbmltcG9ydCBHbG9iYWxFcnJvciBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZ2xvYmFsLWVycm9yLmpzXCIgd2l0aCB7XG4gICAgJ3R1cmJvcGFjay10cmFuc2l0aW9uJzogJ25leHQtc2VydmVyLXV0aWxpdHknXG59O1xuZXhwb3J0IHsgR2xvYmFsRXJyb3IgfTtcbmNvbnN0IF9fbmV4dF9hcHBfcmVxdWlyZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfX1xuY29uc3QgX19uZXh0X2FwcF9sb2FkX2NodW5rX18gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuZXhwb3J0IGNvbnN0IF9fbmV4dF9hcHBfXyA9IHtcbiAgICByZXF1aXJlOiBfX25leHRfYXBwX3JlcXVpcmVfXyxcbiAgICBsb2FkQ2h1bms6IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fXG59O1xuaW1wb3J0ICogYXMgZW50cnlCYXNlIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbmltcG9ydCB7IFJlZGlyZWN0U3RhdHVzQ29kZSB9IGZyb20gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvcmVkaXJlY3Qtc3RhdHVzLWNvZGVcIjtcbmV4cG9ydCAqIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFBhZ2VSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgIHBhZ2U6IFwiL2dhbWVwbGF5L3BhZ2VcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2dhbWVwbGF5XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJyxcbiAgICAgICAgYXBwUGF0aHM6IFtdXG4gICAgfSxcbiAgICB1c2VybGFuZDoge1xuICAgICAgICBsb2FkZXJUcmVlOiB0cmVlXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJydcbn0pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIHZhciBfdGhpcztcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2dhbWVwbGF5L3BhZ2VcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfSBlbHNlIGlmIChzcmNQYWdlID09PSAnL2luZGV4Jykge1xuICAgICAgICAvLyB3ZSBhbHdheXMgbm9ybWFsaXplIC9pbmRleCBzcGVjaWZpY2FsbHlcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcbiAgICB9XG4gICAgY29uc3QgbXVsdGlab25lRHJhZnRNb2RlID0gcHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERTtcbiAgICBjb25zdCBpbml0aWFsUG9zdHBvbmVkID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAncG9zdHBvbmVkJyk7XG4gICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIG1vcmUgc3BlY2lmaWMgZmxhZ3NcbiAgICBjb25zdCBtaW5pbWFsTW9kZSA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJyk7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHF1ZXJ5LCBwYXJhbXMsIHBhcnNlZFVybCwgcGFnZUlzRHluYW1pYywgYnVpbGRNYW5pZmVzdCwgbmV4dEZvbnRNYW5pZmVzdCwgcmVhY3RMb2FkYWJsZU1hbmlmZXN0LCBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QsIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LCBzdWJyZXNvdXJjZUludGVncml0eU1hbmlmZXN0LCBwcmVyZW5kZXJNYW5pZmVzdCwgaXNEcmFmdE1vZGUsIHJlc29sdmVkUGF0aG5hbWUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBuZXh0Q29uZmlnLCBpbnRlcmNlcHRpb25Sb3V0ZVBhdHRlcm5zIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IHBhdGhuYW1lID0gcGFyc2VkVXJsLnBhdGhuYW1lIHx8ICcvJztcbiAgICBjb25zdCBub3JtYWxpemVkU3JjUGFnZSA9IG5vcm1hbGl6ZUFwcFBhdGgoc3JjUGFnZSk7XG4gICAgbGV0IHsgaXNPbkRlbWFuZFJldmFsaWRhdGUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHJvdXRlTW9kdWxlLm1hdGNoKHBhdGhuYW1lLCBwcmVyZW5kZXJNYW5pZmVzdCk7XG4gICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9ICEhcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdO1xuICAgIGxldCBpc1NTRyA9IEJvb2xlYW4ocHJlcmVuZGVySW5mbyB8fCBpc1ByZXJlbmRlcmVkIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0pO1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IHJlcS5oZWFkZXJzWyd1c2VyLWFnZW50J10gfHwgJyc7XG4gICAgY29uc3QgYm90VHlwZSA9IGdldEJvdFR5cGUodXNlckFnZW50KTtcbiAgICBjb25zdCBpc0h0bWxCb3QgPSBpc0h0bWxCb3RSZXF1ZXN0KHJlcSk7XG4gICAgLyoqXG4gICAqIElmIHRydWUsIHRoaXMgaW5kaWNhdGVzIHRoYXQgdGhlIHJlcXVlc3QgYmVpbmcgbWFkZSBpcyBmb3IgYW4gYXBwXG4gICAqIHByZWZldGNoIHJlcXVlc3QuXG4gICAqLyBjb25zdCBpc1ByZWZldGNoUlNDUmVxdWVzdCA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2lzUHJlZmV0Y2hSU0NSZXF1ZXN0JykgPz8gcmVxLmhlYWRlcnNbTkVYVF9ST1VURVJfUFJFRkVUQ0hfSEVBREVSXSA9PT0gJzEnIC8vIGV4Y2x1ZGUgcnVudGltZSBwcmVmZXRjaGVzLCB3aGljaCB1c2UgJzInXG4gICAgO1xuICAgIC8vIE5PVEU6IERvbid0IGRlbGV0ZSBoZWFkZXJzW1JTQ10geWV0LCBpdCBzdGlsbCBuZWVkcyB0byBiZSB1c2VkIGluIHJlbmRlclRvSFRNTCBsYXRlclxuICAgIGNvbnN0IGlzUlNDUmVxdWVzdCA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2lzUlNDUmVxdWVzdCcpID8/IEJvb2xlYW4ocmVxLmhlYWRlcnNbUlNDX0hFQURFUl0pO1xuICAgIGNvbnN0IGlzUG9zc2libGVTZXJ2ZXJBY3Rpb24gPSBnZXRJc1Bvc3NpYmxlU2VydmVyQWN0aW9uKHJlcSk7XG4gICAgLyoqXG4gICAqIElmIHRoZSByb3V0ZSBiZWluZyByZW5kZXJlZCBpcyBhbiBhcHAgcGFnZSwgYW5kIHRoZSBwcHIgZmVhdHVyZSBoYXMgYmVlblxuICAgKiBlbmFibGVkLCB0aGVuIHRoZSBnaXZlbiByb3V0ZSBfY291bGRfIHN1cHBvcnQgUFBSLlxuICAgKi8gY29uc3QgY291bGRTdXBwb3J0UFBSID0gY2hlY2tJc0FwcFBQUkVuYWJsZWQobmV4dENvbmZpZy5leHBlcmltZW50YWwucHByKTtcbiAgICAvLyBXaGVuIGVuYWJsZWQsIHRoaXMgd2lsbCBhbGxvdyB0aGUgdXNlIG9mIHRoZSBgP19fbmV4dHBwcm9ubHlgIHF1ZXJ5IHRvXG4gICAgLy8gZW5hYmxlIGRlYnVnZ2luZyBvZiB0aGUgc3RhdGljIHNoZWxsLlxuICAgIGNvbnN0IGhhc0RlYnVnU3RhdGljU2hlbGxRdWVyeSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9FWFBFUklNRU5UQUxfU1RBVElDX1NIRUxMX0RFQlVHR0lORyA9PT0gJzEnICYmIHR5cGVvZiBxdWVyeS5fX25leHRwcHJvbmx5ICE9PSAndW5kZWZpbmVkJyAmJiBjb3VsZFN1cHBvcnRQUFI7XG4gICAgLy8gV2hlbiBlbmFibGVkLCB0aGlzIHdpbGwgYWxsb3cgdGhlIHVzZSBvZiB0aGUgYD9fX25leHRwcHJvbmx5YCBxdWVyeVxuICAgIC8vIHRvIGVuYWJsZSBkZWJ1Z2dpbmcgb2YgdGhlIGZhbGxiYWNrIHNoZWxsLlxuICAgIGNvbnN0IGhhc0RlYnVnRmFsbGJhY2tTaGVsbFF1ZXJ5ID0gaGFzRGVidWdTdGF0aWNTaGVsbFF1ZXJ5ICYmIHF1ZXJ5Ll9fbmV4dHBwcm9ubHkgPT09ICdmYWxsYmFjayc7XG4gICAgLy8gVGhpcyBwYWdlIHN1cHBvcnRzIFBQUiBpZiBpdCBpcyBtYXJrZWQgYXMgYmVpbmcgYFBBUlRJQUxMWV9TVEFUSUNgIGluIHRoZVxuICAgIC8vIHByZXJlbmRlciBtYW5pZmVzdCBhbmQgdGhpcyBpcyBhbiBhcHAgcGFnZS5cbiAgICBjb25zdCBpc1JvdXRlUFBSRW5hYmxlZCA9IGNvdWxkU3VwcG9ydFBQUiAmJiAoKChfdGhpcyA9IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gPz8gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0pID09IG51bGwgPyB2b2lkIDAgOiBfdGhpcy5yZW5kZXJpbmdNb2RlKSA9PT0gJ1BBUlRJQUxMWV9TVEFUSUMnIHx8IC8vIElkZWFsbHkgd2UnZCB3YW50IHRvIGNoZWNrIHRoZSBhcHBDb25maWcgdG8gc2VlIGlmIHRoaXMgcGFnZSBoYXMgUFBSXG4gICAgLy8gZW5hYmxlZCBvciBub3QsIGJ1dCB0aGF0IHdvdWxkIHJlcXVpcmUgcGx1bWJpbmcgdGhlIGFwcENvbmZpZyB0aHJvdWdoXG4gICAgLy8gdG8gdGhlIHNlcnZlciBkdXJpbmcgZGV2ZWxvcG1lbnQuIFdlIGFzc3VtZSB0aGF0IHRoZSBwYWdlIHN1cHBvcnRzIGl0XG4gICAgLy8gYnV0IG9ubHkgZHVyaW5nIGRldmVsb3BtZW50LlxuICAgIGhhc0RlYnVnU3RhdGljU2hlbGxRdWVyeSAmJiAocm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgKHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQuZXhwZXJpbWVudGFsVGVzdFByb3h5KSA9PT0gdHJ1ZSkpO1xuICAgIGNvbnN0IGlzRGVidWdTdGF0aWNTaGVsbCA9IGhhc0RlYnVnU3RhdGljU2hlbGxRdWVyeSAmJiBpc1JvdXRlUFBSRW5hYmxlZDtcbiAgICAvLyBXZSBzaG91bGQgZW5hYmxlIGRlYnVnZ2luZyBkeW5hbWljIGFjY2Vzc2VzIHdoZW4gdGhlIHN0YXRpYyBzaGVsbFxuICAgIC8vIGRlYnVnZ2luZyBoYXMgYmVlbiBlbmFibGVkIGFuZCB3ZSdyZSBhbHNvIGluIGRldmVsb3BtZW50IG1vZGUuXG4gICAgY29uc3QgaXNEZWJ1Z0R5bmFtaWNBY2Nlc3NlcyA9IGlzRGVidWdTdGF0aWNTaGVsbCAmJiByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZTtcbiAgICBjb25zdCBpc0RlYnVnRmFsbGJhY2tTaGVsbCA9IGhhc0RlYnVnRmFsbGJhY2tTaGVsbFF1ZXJ5ICYmIGlzUm91dGVQUFJFbmFibGVkO1xuICAgIC8vIElmIHdlJ3JlIGluIG1pbmltYWwgbW9kZSwgdGhlbiB0cnkgdG8gZ2V0IHRoZSBwb3N0cG9uZWQgaW5mb3JtYXRpb24gZnJvbVxuICAgIC8vIHRoZSByZXF1ZXN0IG1ldGFkYXRhLiBJZiBhdmFpbGFibGUsIHVzZSBpdCBmb3IgcmVzdW1pbmcgdGhlIHBvc3Rwb25lZFxuICAgIC8vIHJlbmRlci5cbiAgICBjb25zdCBtaW5pbWFsUG9zdHBvbmVkID0gaXNSb3V0ZVBQUkVuYWJsZWQgPyBpbml0aWFsUG9zdHBvbmVkIDogdW5kZWZpbmVkO1xuICAgIC8vIElmIFBQUiBpcyBlbmFibGVkLCBhbmQgdGhpcyBpcyBhIFJTQyByZXF1ZXN0IChidXQgbm90IGEgcHJlZmV0Y2gpLCB0aGVuXG4gICAgLy8gd2UgY2FuIHVzZSB0aGlzIGZhY3QgdG8gb25seSBnZW5lcmF0ZSB0aGUgZmxpZ2h0IGRhdGEgZm9yIHRoZSByZXF1ZXN0XG4gICAgLy8gYmVjYXVzZSB3ZSBjYW4ndCBjYWNoZSB0aGUgSFRNTCAoYXMgaXQncyBhbHNvIGR5bmFtaWMpLlxuICAgIGNvbnN0IGlzRHluYW1pY1JTQ1JlcXVlc3QgPSBpc1JvdXRlUFBSRW5hYmxlZCAmJiBpc1JTQ1JlcXVlc3QgJiYgIWlzUHJlZmV0Y2hSU0NSZXF1ZXN0O1xuICAgIC8vIE5lZWQgdG8gcmVhZCB0aGlzIGJlZm9yZSBpdCdzIHN0cmlwcGVkIGJ5IHN0cmlwRmxpZ2h0SGVhZGVycy4gV2UgZG9uJ3RcbiAgICAvLyBuZWVkIHRvIHRyYW5zZmVyIGl0IHRvIHRoZSByZXF1ZXN0IG1ldGEgYmVjYXVzZSBpdCdzIG9ubHkgcmVhZFxuICAgIC8vIHdpdGhpbiB0aGlzIGZ1bmN0aW9uOyB0aGUgc3RhdGljIHNlZ21lbnQgZGF0YSBzaG91bGQgaGF2ZSBhbHJlYWR5IGJlZW5cbiAgICAvLyBnZW5lcmF0ZWQsIHNvIHdlIHdpbGwgYWx3YXlzIGVpdGhlciByZXR1cm4gYSBzdGF0aWMgcmVzcG9uc2Ugb3IgYSA0MDQuXG4gICAgY29uc3Qgc2VnbWVudFByZWZldGNoSGVhZGVyID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAnc2VnbWVudFByZWZldGNoUlNDUmVxdWVzdCcpO1xuICAgIC8vIFRPRE86IGludmVzdGlnYXRlIGV4aXN0aW5nIGJ1ZyB3aXRoIHNob3VsZFNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgYWx3YXlzXG4gICAgLy8gYmVpbmcgdHJ1ZSBmb3IgYSByZXZhbGlkYXRlIGR1ZSB0byBtb2RpZnlpbmcgdGhlIGJhc2Utc2VydmVyIHRoaXMucmVuZGVyT3B0c1xuICAgIC8vIHdoZW4gZml4aW5nIHRoaXMgdG8gY29ycmVjdCBsb2dpYyBpdCBjYXVzZXMgaHlkcmF0aW9uIGlzc3VlIHNpbmNlIHdlIHNldFxuICAgIC8vIHNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgdG8gdHJ1ZSBkdXJpbmcgZXhwb3J0XG4gICAgbGV0IHNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgPSAhdXNlckFnZW50ID8gdHJ1ZSA6IHNob3VsZFNlcnZlU3RyZWFtaW5nTWV0YWRhdGEodXNlckFnZW50LCBuZXh0Q29uZmlnLmh0bWxMaW1pdGVkQm90cyk7XG4gICAgaWYgKGlzSHRtbEJvdCAmJiBpc1JvdXRlUFBSRW5hYmxlZCkge1xuICAgICAgICBpc1NTRyA9IGZhbHNlO1xuICAgICAgICBzZXJ2ZVN0cmVhbWluZ01ldGFkYXRhID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIEluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgd2FudCB0byBnZW5lcmF0ZSBkeW5hbWljIEhUTUwuXG4gICAgbGV0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTCwgdW5sZXNzIGl0J3NcbiAgICAvLyBhIGRhdGEgcmVxdWVzdCwgaW4gd2hpY2ggY2FzZSB3ZSBvbmx5IHByb2R1Y2Ugc3RhdGljIEhUTUwuXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc1NTRyB8fCAvLyBJZiB0aGlzIHJlcXVlc3QgaGFzIHByb3ZpZGVkIHBvc3Rwb25lZCBkYXRhLCBpdCBzdXBwb3J0cyBkeW5hbWljXG4gICAgLy8gSFRNTC5cbiAgICB0eXBlb2YgaW5pdGlhbFBvc3Rwb25lZCA9PT0gJ3N0cmluZycgfHwgLy8gSWYgdGhpcyBpcyBhIGR5bmFtaWMgUlNDIHJlcXVlc3QsIHRoZW4gdGhpcyByZW5kZXIgc3VwcG9ydHMgZHluYW1pY1xuICAgIC8vIEhUTUwgKGl0J3MgZHluYW1pYykuXG4gICAgaXNEeW5hbWljUlNDUmVxdWVzdDtcbiAgICAvLyBXaGVuIGh0bWwgYm90cyByZXF1ZXN0IFBQUiBwYWdlLCBwZXJmb3JtIHRoZSBmdWxsIGR5bmFtaWMgcmVuZGVyaW5nLlxuICAgIGNvbnN0IHNob3VsZFdhaXRPbkFsbFJlYWR5ID0gaXNIdG1sQm90ICYmIGlzUm91dGVQUFJFbmFibGVkO1xuICAgIGxldCBzc2dDYWNoZUtleSA9IG51bGw7XG4gICAgaWYgKCFpc0RyYWZ0TW9kZSAmJiBpc1NTRyAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgJiYgIWlzUG9zc2libGVTZXJ2ZXJBY3Rpb24gJiYgIW1pbmltYWxQb3N0cG9uZWQgJiYgIWlzRHluYW1pY1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgc3NnQ2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgIH1cbiAgICAvLyB0aGUgc3RhdGljUGF0aEtleSBkaWZmZXJzIGZyb20gc3NnQ2FjaGVLZXkgc2luY2VcbiAgICAvLyBzc2dDYWNoZUtleSBpcyBudWxsIGluIGRldiBzaW5jZSB3ZSdyZSBhbHdheXMgaW4gXCJkeW5hbWljXCJcbiAgICAvLyBtb2RlIGluIGRldiB0byBieXBhc3MgdGhlIGNhY2hlLCBidXQgd2Ugc3RpbGwgbmVlZCB0byBob25vclxuICAgIC8vIGR5bmFtaWNQYXJhbXMgPSBmYWxzZSBpbiBkZXYgbW9kZVxuICAgIGxldCBzdGF0aWNQYXRoS2V5ID0gc3NnQ2FjaGVLZXk7XG4gICAgaWYgKCFzdGF0aWNQYXRoS2V5ICYmIHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgIHN0YXRpY1BhdGhLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgIH1cbiAgICAvLyBJZiB0aGlzIGlzIGEgcmVxdWVzdCBmb3IgYW4gYXBwIHBhdGggdGhhdCBzaG91bGQgYmUgc3RhdGljYWxseSBnZW5lcmF0ZWRcbiAgICAvLyBhbmQgd2UgYXJlbid0IGluIHRoZSBlZGdlIHJ1bnRpbWUsIHN0cmlwIHRoZSBmbGlnaHQgaGVhZGVycyBzbyBpdCB3aWxsXG4gICAgLy8gZ2VuZXJhdGUgdGhlIHN0YXRpYyByZXNwb25zZS5cbiAgICBpZiAoIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSAmJiBpc1NTRyAmJiBpc1JTQ1JlcXVlc3QgJiYgIWlzRHluYW1pY1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgc3RyaXBGbGlnaHRIZWFkZXJzKHJlcS5oZWFkZXJzKTtcbiAgICB9XG4gICAgY29uc3QgQ29tcG9uZW50TW9kID0ge1xuICAgICAgICAuLi5lbnRyeUJhc2UsXG4gICAgICAgIHRyZWUsXG4gICAgICAgIHBhZ2VzLFxuICAgICAgICBHbG9iYWxFcnJvcixcbiAgICAgICAgaGFuZGxlcixcbiAgICAgICAgcm91dGVNb2R1bGUsXG4gICAgICAgIF9fbmV4dF9hcHBfX1xuICAgIH07XG4gICAgLy8gQmVmb3JlIHJlbmRlcmluZyAod2hpY2ggaW5pdGlhbGl6ZXMgY29tcG9uZW50IHRyZWUgbW9kdWxlcyksIHdlIGhhdmUgdG9cbiAgICAvLyBzZXQgdGhlIHJlZmVyZW5jZSBtYW5pZmVzdHMgdG8gb3VyIGdsb2JhbCBzdG9yZSBzbyBTZXJ2ZXIgQWN0aW9uJ3NcbiAgICAvLyBlbmNyeXB0aW9uIHV0aWwgY2FuIGFjY2VzcyB0byB0aGVtIGF0IHRoZSB0b3AgbGV2ZWwgb2YgdGhlIHBhZ2UgbW9kdWxlLlxuICAgIGlmIChzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QgJiYgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QpIHtcbiAgICAgICAgc2V0UmVmZXJlbmNlTWFuaWZlc3RzU2luZ2xldG9uKHtcbiAgICAgICAgICAgIHBhZ2U6IHNyY1BhZ2UsXG4gICAgICAgICAgICBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCxcbiAgICAgICAgICAgIHNlcnZlckFjdGlvbnNNYW5pZmVzdCxcbiAgICAgICAgICAgIHNlcnZlck1vZHVsZU1hcDogY3JlYXRlU2VydmVyTW9kdWxlTWFwKHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3RcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdmFyeUhlYWRlciA9IHJvdXRlTW9kdWxlLmdldFZhcnlIZWFkZXIocmVzb2x2ZWRQYXRobmFtZSwgaW50ZXJjZXB0aW9uUm91dGVQYXR0ZXJucyk7XG4gICAgICAgIHJlcy5zZXRIZWFkZXIoJ1ZhcnknLCB2YXJ5SGVhZGVyKTtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3BhbiwgY29udGV4dCk9PntcbiAgICAgICAgICAgIGNvbnN0IG5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgICAgICAgICBjb25zdCBuZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICAgICAgICAgIC8vIFRPRE86IGFkYXB0IGZvciBwdXR0aW5nIHRoZSBSREMgaW5zaWRlIHRoZSBwb3N0cG9uZWQgZGF0YVxuICAgICAgICAgICAgLy8gSWYgd2UncmUgaW4gZGV2LCBhbmQgdGhpcyBpc24ndCBhIHByZWZldGNoIG9yIGEgc2VydmVyIGFjdGlvbixcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBzZWVkIHRoZSByZXN1bWUgZGF0YSBjYWNoZS5cbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMgJiYgIWlzUHJlZmV0Y2hSU0NSZXF1ZXN0ICYmICFjb250ZXh0LnJlbmRlck9wdHMuaXNQb3NzaWJsZVNlcnZlckFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXJtdXAgPSBhd2FpdCByb3V0ZU1vZHVsZS53YXJtdXAobmV4dFJlcSwgbmV4dFJlcywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB3YXJtdXAgaXMgc3VjY2Vzc2Z1bCwgd2Ugc2hvdWxkIHVzZSB0aGUgcmVzdW1lIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgZnJvbSB0aGUgd2FybXVwLlxuICAgICAgICAgICAgICAgICAgICBpZiAod2FybXVwLm1ldGFkYXRhLnJlbmRlclJlc3VtZURhdGFDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZW5kZXJPcHRzLnJlbmRlclJlc3VtZURhdGFDYWNoZSA9IHdhcm11cC5tZXRhZGF0YS5yZW5kZXJSZXN1bWVEYXRhQ2FjaGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUucmVuZGVyKG5leHRSZXEsIG5leHRSZXMsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZG9SZW5kZXIgPSBhc3luYyAoeyBzcGFuLCBwb3N0cG9uZWQsIGZhbGxiYWNrUm91dGVQYXJhbXMgfSk9PntcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIHBhZ2U6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2VydmVyQ29tcG9uZW50c0htckNhY2hlOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdzZXJ2ZXJDb21wb25lbnRzSG1yQ2FjaGUnKSxcbiAgICAgICAgICAgICAgICBmYWxsYmFja1JvdXRlUGFyYW1zLFxuICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgQXBwOiAoKT0+bnVsbCxcbiAgICAgICAgICAgICAgICAgICAgRG9jdW1lbnQ6ICgpPT5udWxsLFxuICAgICAgICAgICAgICAgICAgICBwYWdlQ29uZmlnOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50TW9kLFxuICAgICAgICAgICAgICAgICAgICBDb21wb25lbnQ6IGludGVyb3BEZWZhdWx0KENvbXBvbmVudE1vZCksXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgcm91dGVNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHBvc3Rwb25lZCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkV2FpdE9uQWxsUmVhZHksXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlU3RyZWFtaW5nTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlOiB0eXBlb2YgcG9zdHBvbmVkID09PSAnc3RyaW5nJyB8fCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEZvbnRNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RMb2FkYWJsZU1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBzdWJyZXNvdXJjZUludGVncml0eU1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBzZXRJc3JTdGF0dXM6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQuc2V0SXNyU3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBkaXI6IHByb2Nlc3MuZW52Lk5FWFRfUlVOVElNRSA9PT0gJ25vZGVqcycgPyByZXF1aXJlKCdwYXRoJykuam9pbigvKiB0dXJib3BhY2tJZ25vcmU6IHRydWUgKi8gcHJvY2Vzcy5jd2QoKSwgcm91dGVNb2R1bGUucmVsYXRpdmVQcm9qZWN0RGlyKSA6IGAke3Byb2Nlc3MuY3dkKCl9LyR7cm91dGVNb2R1bGUucmVsYXRpdmVQcm9qZWN0RGlyfWAsXG4gICAgICAgICAgICAgICAgICAgIGlzRHJhZnRNb2RlLFxuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGU6IGlzU1NHICYmICFwb3N0cG9uZWQgJiYgIWlzRHluYW1pY1JTQ1JlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGJvdFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlU2VydmVyQWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBhc3NldFByZWZpeDogbmV4dENvbmZpZy5hc3NldFByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgbmV4dENvbmZpZ091dHB1dDogbmV4dENvbmZpZy5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBuZXh0Q29uZmlnLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICB0cmFpbGluZ1NsYXNoOiBuZXh0Q29uZmlnLnRyYWlsaW5nU2xhc2gsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICAgICAgZGVwbG95bWVudElkOiBuZXh0Q29uZmlnLmRlcGxveW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlVGFpbnRpbmc6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLnRhaW50LFxuICAgICAgICAgICAgICAgICAgICBodG1sTGltaXRlZEJvdHM6IG5leHRDb25maWcuaHRtbExpbWl0ZWRCb3RzLFxuICAgICAgICAgICAgICAgICAgICBkZXZ0b29sU2VnbWVudEV4cGxvcmVyOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5kZXZ0b29sU2VnbWVudEV4cGxvcmVyLFxuICAgICAgICAgICAgICAgICAgICByZWFjdE1heEhlYWRlcnNMZW5ndGg6IG5leHRDb25maWcucmVhY3RNYXhIZWFkZXJzTGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGUsXG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlTGlmZSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZVBhdGg6IG5leHRDb25maWcuYmFzZVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckFjdGlvbnM6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLnNlcnZlckFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIC4uLmlzRGVidWdTdGF0aWNTaGVsbCB8fCBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEV4cG9ydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVidWdEeW5hbWljQWNjZXNzZXM6IGlzRGVidWdEeW5hbWljQWNjZXNzZXNcbiAgICAgICAgICAgICAgICAgICAgfSA6IHt9LFxuICAgICAgICAgICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlVGltZTogbmV4dENvbmZpZy5leHBpcmVUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhbGVUaW1lczogbmV4dENvbmZpZy5leHBlcmltZW50YWwuc3RhbGVUaW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50U2VnbWVudENhY2hlOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNsaWVudFNlZ21lbnRDYWNoZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRQYXJhbVBhcnNpbmc6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2xpZW50UGFyYW1QYXJzaW5nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNPbkhvdmVyOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmR5bmFtaWNPbkhvdmVyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNzczogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5pbmxpbmVDc3MpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aEludGVycnVwdHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuYXV0aEludGVycnVwdHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50VHJhY2VNZXRhZGF0YTogbmV4dENvbmZpZy5leHBlcmltZW50YWwuY2xpZW50VHJhY2VNZXRhZGF0YSB8fCBbXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6ICgpPT57fSxcbiAgICAgICAgICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgIGVycjogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW52b2tlRXJyb3InKSxcbiAgICAgICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShzcGFuLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IHsgbWV0YWRhdGEgfSA9IHJlc3VsdDtcbiAgICAgICAgICAgIGNvbnN0IHsgY2FjaGVDb250cm9sLCBoZWFkZXJzID0ge30sIC8vIEFkZCBhbnkgZmV0Y2ggdGFncyB0aGF0IHdlcmUgb24gdGhlIHBhZ2UgdG8gdGhlIHJlc3BvbnNlIGhlYWRlcnMuXG4gICAgICAgICAgICBmZXRjaFRhZ3M6IGNhY2hlVGFncyB9ID0gbWV0YWRhdGE7XG4gICAgICAgICAgICBpZiAoY2FjaGVUYWdzKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXSA9IGNhY2hlVGFncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFB1bGwgYW55IGZldGNoIG1ldHJpY3MgZnJvbSB0aGUgcmVuZGVyIG9udG8gdGhlIHJlcXVlc3QuXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICByZXEuZmV0Y2hNZXRyaWNzID0gbWV0YWRhdGEuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgdGhyb3cgc3RhdGljIHRvIGR5bmFtaWMgZXJyb3JzIGluIGRldiBhcyBpc1NTR1xuICAgICAgICAgICAgLy8gaXMgYSBiZXN0IGd1ZXNzIGluIGRldiBzaW5jZSB3ZSBkb24ndCBoYXZlIHRoZSBwcmVyZW5kZXIgcGFzc1xuICAgICAgICAgICAgLy8gdG8ga25vdyB3aGV0aGVyIHRoZSBwYXRoIGlzIGFjdHVhbGx5IHN0YXRpYyBvciBub3RcbiAgICAgICAgICAgIGlmIChpc1NTRyAmJiAoY2FjaGVDb250cm9sID09IG51bGwgPyB2b2lkIDAgOiBjYWNoZUNvbnRyb2wucmV2YWxpZGF0ZSkgPT09IDAgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc1JvdXRlUFBSRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRpY0JhaWxvdXRJbmZvID0gbWV0YWRhdGEuc3RhdGljQmFpbG91dEluZm87XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgUGFnZSBjaGFuZ2VkIGZyb20gc3RhdGljIHRvIGR5bmFtaWMgYXQgcnVudGltZSAke3Jlc29sdmVkUGF0aG5hbWV9JHsoc3RhdGljQmFpbG91dEluZm8gPT0gbnVsbCA/IHZvaWQgMCA6IHN0YXRpY0JhaWxvdXRJbmZvLmRlc2NyaXB0aW9uKSA/IGAsIHJlYXNvbjogJHtzdGF0aWNCYWlsb3V0SW5mby5kZXNjcmlwdGlvbn1gIDogYGB9YCArIGBcXG5zZWUgbW9yZSBoZXJlIGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2FwcC1zdGF0aWMtdG8tZHluYW1pYy1lcnJvcmApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTEzMlwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRpY0JhaWxvdXRJbmZvID09IG51bGwgPyB2b2lkIDAgOiBzdGF0aWNCYWlsb3V0SW5mby5zdGFjaykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFjayA9IHN0YXRpY0JhaWxvdXRJbmZvLnN0YWNrO1xuICAgICAgICAgICAgICAgICAgICBlcnIuc3RhY2sgPSBlcnIubWVzc2FnZSArIHN0YWNrLnN1YnN0cmluZyhzdGFjay5pbmRleE9mKCdcXG4nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICAgICAgICAgICAgICBodG1sOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHJzY0RhdGE6IG1ldGFkYXRhLmZsaWdodERhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBvc3Rwb25lZDogbWV0YWRhdGEucG9zdHBvbmVkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IG1ldGFkYXRhLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnREYXRhOiBtZXRhZGF0YS5zZWdtZW50RGF0YVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FjaGVDb250cm9sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IGhhc1Jlc29sdmVkLCBwcmV2aW91c0NhY2hlRW50cnksIGlzUmV2YWxpZGF0aW5nLCBzcGFuIH0pPT57XG4gICAgICAgICAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSByb3V0ZU1vZHVsZS5pc0RldiA9PT0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBkaWRSZXNwb25kID0gaGFzUmVzb2x2ZWQgfHwgcmVzLndyaXRhYmxlRW5kZWQ7XG4gICAgICAgICAgICAvLyBza2lwIG9uLWRlbWFuZCByZXZhbGlkYXRlIGlmIGNhY2hlIGlzIG5vdCBwcmVzZW50IGFuZFxuICAgICAgICAgICAgLy8gcmV2YWxpZGF0ZS1pZi1nZW5lcmF0ZWQgaXMgc2V0XG4gICAgICAgICAgICBpZiAoaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQgJiYgIXByZXZpb3VzQ2FjaGVFbnRyeSAmJiAhbWluaW1hbE1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5yZW5kZXI0MDQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVyU2VydmVyQ29udGV4dC5yZW5kZXI0MDQocmVxLCByZXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGZhbGxiYWNrTW9kZTtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICAgICAgZmFsbGJhY2tNb2RlID0gcGFyc2VGYWxsYmFja0ZpZWxkKHByZXJlbmRlckluZm8uZmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2hlbiBzZXJ2aW5nIGEgSFRNTCBib3QgcmVxdWVzdCwgd2Ugd2FudCB0byBzZXJ2ZSBhIGJsb2NraW5nIHJlbmRlciBhbmRcbiAgICAgICAgICAgIC8vIG5vdCB0aGUgcHJlcmVuZGVyZWQgcGFnZS4gVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGNvcnJlY3QgY29udGVudCBpcyBzZXJ2ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBib3QgaW4gdGhlIGhlYWQuXG4gICAgICAgICAgICBpZiAoZmFsbGJhY2tNb2RlID09PSBGYWxsYmFja01vZGUuUFJFUkVOREVSICYmIGlzQm90KHVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzUm91dGVQUFJFbmFibGVkIHx8IGlzSHRtbEJvdCkge1xuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja01vZGUgPSBGYWxsYmFja01vZGUuQkxPQ0tJTkdfU1RBVElDX1JFTkRFUjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE86IGFkYXB0IGZvciBQUFJcbiAgICAgICAgICAgIC8vIG9ubHkgYWxsb3cgb24tZGVtYW5kIHJldmFsaWRhdGUgZm9yIGZhbGxiYWNrOiB0cnVlL2Jsb2NraW5nXG4gICAgICAgICAgICAvLyBvciBmb3IgcHJlcmVuZGVyZWQgZmFsbGJhY2s6IGZhbHNlIHBhdGhzXG4gICAgICAgICAgICBpZiAoaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgKGZhbGxiYWNrTW9kZSAhPT0gRmFsbGJhY2tNb2RlLk5PVF9GT1VORCB8fCBwcmV2aW91c0NhY2hlRW50cnkpKSB7XG4gICAgICAgICAgICAgICAgZmFsbGJhY2tNb2RlID0gRmFsbGJhY2tNb2RlLkJMT0NLSU5HX1NUQVRJQ19SRU5ERVI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1pbmltYWxNb2RlICYmIGZhbGxiYWNrTW9kZSAhPT0gRmFsbGJhY2tNb2RlLkJMT0NLSU5HX1NUQVRJQ19SRU5ERVIgJiYgc3RhdGljUGF0aEtleSAmJiAhZGlkUmVzcG9uZCAmJiAhaXNEcmFmdE1vZGUgJiYgcGFnZUlzRHluYW1pYyAmJiAoaXNQcm9kdWN0aW9uIHx8ICFpc1ByZXJlbmRlcmVkKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwYWdlIGhhcyBkeW5hbWljUGFyYW1zOiBmYWxzZSBhbmQgdGhpcyBwYXRobmFtZSB3YXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBwcmVyZW5kZXJlZCB0cmlnZ2VyIHRoZSBubyBmYWxsYmFjayBoYW5kbGluZ1xuICAgICAgICAgICAgICAgIGlmICgvLyBJbiBkZXZlbG9wbWVudCwgZmFsbCB0aHJvdWdoIHRvIHJlbmRlciB0byBoYW5kbGUgbWlzc2luZ1xuICAgICAgICAgICAgICAgIC8vIGdldFN0YXRpY1BhdGhzLlxuICAgICAgICAgICAgICAgIChpc1Byb2R1Y3Rpb24gfHwgcHJlcmVuZGVySW5mbykgJiYgLy8gV2hlbiBmYWxsYmFjayBpc24ndCBwcmVzZW50LCBhYm9ydCB0aGlzIHJlbmRlciBzbyB3ZSA0MDRcbiAgICAgICAgICAgICAgICBmYWxsYmFja01vZGUgPT09IEZhbGxiYWNrTW9kZS5OT1RfRk9VTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZmFsbGJhY2tSZXNwb25zZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNSb3V0ZVBQUkVuYWJsZWQgJiYgIWlzUlNDUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IHR5cGVvZiAocHJlcmVuZGVySW5mbyA9PSBudWxsID8gdm9pZCAwIDogcHJlcmVuZGVySW5mby5mYWxsYmFjaykgPT09ICdzdHJpbmcnID8gcHJlcmVuZGVySW5mby5mYWxsYmFjayA6IGlzUHJvZHVjdGlvbiA/IG5vcm1hbGl6ZWRTcmNQYWdlIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSByZXNwb25zZSBjYWNoZSBoZXJlIHRvIGhhbmRsZSB0aGUgcmV2YWxpZGF0aW9uIGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyBtYW5hZ2VtZW50IG9mIHRoZSBmYWxsYmFjayBzaGVsbC5cbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tSZXNwb25zZSA9IGF3YWl0IHJvdXRlTW9kdWxlLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcjogYXN5bmMgKCk9PmRvUmVuZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgcGFzcyBgdW5kZWZpbmVkYCBhcyByZW5kZXJpbmcgYSBmYWxsYmFjayBpc24ndCByZXN1bWVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rwb25lZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1JvdXRlUGFyYW1zOiAvLyBJZiB3ZSdyZSBpbiBwcm9kdWN0aW9uIG9yIHdlJ3JlIGRlYnVnZ2luZyB0aGUgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hlbGwgdGhlbiB3ZSBzaG91bGQgcG9zdHBvbmUgd2hlbiBkeW5hbWljIHBhcmFtcyBhcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXNzZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJvZHVjdGlvbiB8fCBpc0RlYnVnRmFsbGJhY2tTaGVsbCA/IGdldEZhbGxiYWNrUm91dGVQYXJhbXMobm9ybWFsaXplZFNyY1BhZ2UpIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZmFsbGJhY2sgcmVzcG9uc2Ugd2FzIHNldCB0byBudWxsLCB0aGVuIHdlIHNob3VsZCByZXR1cm4gbnVsbC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrUmVzcG9uc2UgPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGlmIHdlIGRpZCBnZXQgYSBmYWxsYmFjayByZXNwb25zZSwgd2Ugc2hvdWxkIHJldHVybiBpdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgY2FjaGUgY29udHJvbCBmcm9tIHRoZSByZXNwb25zZSB0byBwcmV2ZW50IGl0IGZyb20gYmVpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZWQgaW4gdGhlIHN1cnJvdW5kaW5nIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZhbGxiYWNrUmVzcG9uc2UuY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPbmx5IHJlcXVlc3RzIHRoYXQgYXJlbid0IHJldmFsaWRhdGluZyBjYW4gYmUgcmVzdW1lZC4gSWYgd2UgaGF2ZSB0aGVcbiAgICAgICAgICAgIC8vIG1pbmltYWwgcG9zdHBvbmVkIGRhdGEsIHRoZW4gd2Ugc2hvdWxkIHJlc3VtZSB0aGUgcmVuZGVyIHdpdGggaXQuXG4gICAgICAgICAgICBjb25zdCBwb3N0cG9uZWQgPSAhaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgIWlzUmV2YWxpZGF0aW5nICYmIG1pbmltYWxQb3N0cG9uZWQgPyBtaW5pbWFsUG9zdHBvbmVkIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSdyZSBpbiBtaW5pbWFsIG1vZGUsIGlmIHdlJ3JlIHRyeWluZyB0byBkZWJ1ZyB0aGUgc3RhdGljIHNoZWxsLFxuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIGp1c3QgcmV0dXJuIG5vdGhpbmcgaW5zdGVhZCBvZiByZXN1bWluZyB0aGUgZHluYW1pYyByZW5kZXIuXG4gICAgICAgICAgICBpZiAoKGlzRGVidWdTdGF0aWNTaGVsbCB8fCBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzKSAmJiB0eXBlb2YgcG9zdHBvbmVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuUEFHRVMsXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBSZW5kZXJSZXN1bHQuRU1QVFksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlRGF0YToge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBkeW5hbWljIHJvdXRlIHdpdGggUFBSIGVuYWJsZWQgYW5kIHRoZSBkZWZhdWx0IHJvdXRlXG4gICAgICAgICAgICAvLyBtYXRjaGVzIHdlcmUgc2V0LCB0aGVuIHdlIHNob3VsZCBwYXNzIHRoZSBmYWxsYmFjayByb3V0ZSBwYXJhbXMgdG9cbiAgICAgICAgICAgIC8vIHRoZSByZW5kZXJlciBhcyB0aGlzIGlzIGEgZmFsbGJhY2sgcmV2YWxpZGF0aW9uIHJlcXVlc3QuXG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1JvdXRlUGFyYW1zID0gcGFnZUlzRHluYW1pYyAmJiBpc1JvdXRlUFBSRW5hYmxlZCAmJiAoZ2V0UmVxdWVzdE1ldGEocmVxLCAncmVuZGVyRmFsbGJhY2tTaGVsbCcpIHx8IGlzRGVidWdGYWxsYmFja1NoZWxsKSA/IGdldEZhbGxiYWNrUm91dGVQYXJhbXMocGF0aG5hbWUpIDogbnVsbDtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHJlbmRlci5cbiAgICAgICAgICAgIHJldHVybiBkb1JlbmRlcih7XG4gICAgICAgICAgICAgICAgc3BhbixcbiAgICAgICAgICAgICAgICBwb3N0cG9uZWQsXG4gICAgICAgICAgICAgICAgZmFsbGJhY2tSb3V0ZVBhcmFtc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUsIF9jYWNoZWREYXRhX2hlYWRlcnM7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIGNhY2hlS2V5OiBzc2dDYWNoZUtleSxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcjogKGMpPT5yZXNwb25zZUdlbmVyYXRvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZCxcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJbiBkZXYsIHdlIHNob3VsZCBub3QgY2FjaGUgcGFnZXMgZm9yIGFueSByZWFzb24uXG4gICAgICAgICAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ25vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgIGlmIChzc2dDYWNoZUtleSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBIGNhY2hlIGVudHJ5IG1pZ2h0IG5vdCBiZSBnZW5lcmF0ZWQgaWYgYSByZXNwb25zZSBpcyB3cml0dGVuXG4gICAgICAgICAgICAgICAgICAgIC8vIGluIGBnZXRJbml0aWFsUHJvcHNgIG9yIGBnZXRTZXJ2ZXJTaWRlUHJvcHNgLCBidXQgdGhvc2Ugc2hvdWxkbid0XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBjYWNoZSBrZXkuIElmIHdlIGRvIGhhdmUgYSBjYWNoZSBrZXkgYnV0IHdlIGRvbid0IGVuZCB1cFxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGEgY2FjaGUgZW50cnksIHRoZW4gZWl0aGVyIE5leHQuanMgb3IgdGhlIGFwcGxpY2F0aW9uIGhhcyBhXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1ZyB0aGF0IG5lZWRzIGZpeGluZy5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcignaW52YXJpYW50OiBjYWNoZSBlbnRyeSByZXF1aXJlZCBidXQgbm90IGdlbmVyYXRlZCcpLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU2MlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUEFHRSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50IGFwcC1wYWdlIGhhbmRsZXIgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAkeyhfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzA3XCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRpZFBvc3Rwb25lID0gdHlwZW9mIGNhY2hlRW50cnkudmFsdWUucG9zdHBvbmVkID09PSAnc3RyaW5nJztcbiAgICAgICAgICAgIGlmIChpc1NTRyAmJiAvLyBXZSBkb24ndCB3YW50IHRvIHNlbmQgYSBjYWNoZSBoZWFkZXIgZm9yIHJlcXVlc3RzIHRoYXQgY29udGFpbiBkeW5hbWljXG4gICAgICAgICAgICAvLyBkYXRhLiBJZiB0aGlzIGlzIGEgRHluYW1pYyBSU0MgcmVxdWVzdCBvciB3YXNuJ3QgYSBQcmVmZXRjaCBSU0NcbiAgICAgICAgICAgIC8vIHJlcXVlc3QsIHRoZW4gd2Ugc2hvdWxkIHNldCB0aGUgY2FjaGUgaGVhZGVyLlxuICAgICAgICAgICAgIWlzRHluYW1pY1JTQ1JlcXVlc3QgJiYgKCFkaWRQb3N0cG9uZSB8fCBpc1ByZWZldGNoUlNDUmVxdWVzdCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1pbmltYWxNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB4LW5leHRqcy1jYWNoZSBoZWFkZXIgdG8gbWF0Y2ggdGhlIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBzZXQgZm9yIHRoZSBpbWFnZS1vcHRpbWl6ZXJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSA/ICdSRVZBTElEQVRFRCcgOiBjYWNoZUVudHJ5LmlzTWlzcyA/ICdNSVNTJyA6IGNhY2hlRW50cnkuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNldCBhIGhlYWRlciB1c2VkIGJ5IHRoZSBjbGllbnQgcm91dGVyIHRvIHNpZ25hbCB0aGUgcmVzcG9uc2UgaXMgc3RhdGljXG4gICAgICAgICAgICAgICAgLy8gYW5kIHNob3VsZCByZXNwZWN0IHRoZSBgc3RhdGljYCBjYWNoZSBzdGFsZVRpbWUgdmFsdWUuXG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihORVhUX0lTX1BSRVJFTkRFUl9IRUFERVIsICcxJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBjYWNoZWREYXRhIH0gPSBjYWNoZUVudHJ5O1xuICAgICAgICAgICAgLy8gQ29lcmNlIHRoZSBjYWNoZSBjb250cm9sIHBhcmFtZXRlciBmcm9tIHRoZSByZW5kZXIuXG4gICAgICAgICAgICBsZXQgY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHJlc3VtZSByZXF1ZXN0IGluIG1pbmltYWwgbW9kZSBpdCBpcyBzdHJlYW1lZCB3aXRoIGR5bmFtaWNcbiAgICAgICAgICAgIC8vIGNvbnRlbnQgYW5kIHNob3VsZCBub3QgYmUgY2FjaGVkLlxuICAgICAgICAgICAgaWYgKG1pbmltYWxQb3N0cG9uZWQpIHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWluaW1hbE1vZGUgJiYgaXNSU0NSZXF1ZXN0ICYmICFpc1ByZWZldGNoUlNDUmVxdWVzdCAmJiBpc1JvdXRlUFBSRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmICghcm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgcHJldmlldyBtb2RlIHJlcXVlc3QsIHdlIHNob3VsZG4ndCBjYWNoZSBpdFxuICAgICAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1NTRykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5nZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjYWNoZSBlbnRyeSBoYXMgYSBjYWNoZSBjb250cm9sIHdpdGggYSByZXZhbGlkYXRlIHZhbHVlIHRoYXQnc1xuICAgICAgICAgICAgICAgICAgICAvLyBhIG51bWJlciwgdXNlIGl0LlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhY2hlRW50cnkuY2FjaGVDb250cm9sLnJldmFsaWRhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sLnJldmFsaWRhdGUgPCAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YWxpZCByZXZhbGlkYXRlIGNvbmZpZ3VyYXRpb24gcHJvdmlkZWQ6ICR7Y2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wucmV2YWxpZGF0ZX0gPCAxYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMjJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sLnJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiAoKF9jYWNoZUVudHJ5X2NhY2hlQ29udHJvbCA9IGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfY2FjaGVDb250cm9sLmV4cGlyZSkgPz8gbmV4dENvbmZpZy5leHBpcmVUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IENBQ0hFX09ORV9ZRUFSLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wgPSBjYWNoZUNvbnRyb2w7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlZ21lbnRQcmVmZXRjaEhlYWRlciA9PT0gJ3N0cmluZycgJiYgKGNhY2hlZERhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGNhY2hlZERhdGEua2luZCkgPT09IENhY2hlZFJvdXRlS2luZC5BUFBfUEFHRSAmJiBjYWNoZWREYXRhLnNlZ21lbnREYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZWREYXRhX2hlYWRlcnMxO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBwcmVmZXRjaCByZXF1ZXN0IGlzc3VlZCBieSB0aGUgY2xpZW50IFNlZ21lbnQgQ2FjaGUuIFRoZXNlXG4gICAgICAgICAgICAgICAgLy8gc2hvdWxkIG5ldmVyIHJlYWNoIHRoZSBhcHBsaWNhdGlvbiBsYXllciAobGFtYmRhKS4gV2Ugc2hvdWxkIGVpdGhlclxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbmQgZnJvbSB0aGUgY2FjaGUgKEhJVCkgb3IgcmVzcG9uZCB3aXRoIDIwNCBObyBDb250ZW50IChNSVNTKS5cbiAgICAgICAgICAgICAgICAvLyBTZXQgYSBoZWFkZXIgdG8gaW5kaWNhdGUgdGhhdCBQUFIgaXMgZW5hYmxlZCBmb3IgdGhpcyByb3V0ZS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGxldHMgdGhlIGNsaWVudCBkaXN0aW5ndWlzaCBiZXR3ZWVuIGEgcmVndWxhciBjYWNoZSBtaXNzIGFuZCBhIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gbWlzcyBkdWUgdG8gUFBSIGJlaW5nIGRpc2FibGVkLiBJbiBvdGhlciBjb250ZXh0cyB0aGlzIGhlYWRlciBpcyB1c2VkXG4gICAgICAgICAgICAgICAgLy8gdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVzcG9uc2UgY29udGFpbnMgZHluYW1pYyBkYXRhLCBidXQgaGVyZSB3ZSdyZVxuICAgICAgICAgICAgICAgIC8vIG9ubHkgdXNpbmcgaXQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZmVhdHVyZSBpcyBlbmFibGVkIOKAlCB0aGUgc2VnbWVudFxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNlIGl0c2VsZiBjb250YWlucyB3aGV0aGVyIHRoZSBkYXRhIGlzIGR5bmFtaWMuXG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihORVhUX0RJRF9QT1NUUE9ORV9IRUFERVIsICcyJyk7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjYWNoZSB0YWdzIGhlYWRlciB0byB0aGUgcmVzcG9uc2UgaWYgaXQgZXhpc3RzIGFuZCB3ZSdyZSBpblxuICAgICAgICAgICAgICAgIC8vIG1pbmltYWwgbW9kZSB3aGlsZSByZW5kZXJpbmcgYSBzdGF0aWMgcGFnZS5cbiAgICAgICAgICAgICAgICBjb25zdCB0YWdzID0gKF9jYWNoZWREYXRhX2hlYWRlcnMxID0gY2FjaGVkRGF0YS5oZWFkZXJzKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlZERhdGFfaGVhZGVyczFbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl07XG4gICAgICAgICAgICAgICAgaWYgKG1pbmltYWxNb2RlICYmIGlzU1NHICYmIHRhZ3MgJiYgdHlwZW9mIHRhZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoTkVYVF9DQUNIRV9UQUdTX0hFQURFUiwgdGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRTZWdtZW50ID0gY2FjaGVkRGF0YS5zZWdtZW50RGF0YS5nZXQoc2VnbWVudFByZWZldGNoSGVhZGVyKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFNlZ21lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWNoZSBoaXRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogUmVuZGVyUmVzdWx0LmZyb21TdGF0aWMobWF0Y2hlZFNlZ21lbnQsIFJTQ19DT05URU5UX1RZUEVfSEVBREVSKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENhY2hlIG1pc3MuIEVpdGhlciBhIGNhY2hlIGVudHJ5IGZvciB0aGlzIHJvdXRlIGhhcyBub3QgYmVlbiBnZW5lcmF0ZWRcbiAgICAgICAgICAgICAgICAvLyAod2hpY2ggdGVjaG5pY2FsbHkgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSB3aGVuIFBQUiBpcyBlbmFibGVkLCBiZWNhdXNlXG4gICAgICAgICAgICAgICAgLy8gYXQgYSBtaW5pbXVtIHRoZXJlIHNob3VsZCBhbHdheXMgYmUgYSBmYWxsYmFjayBlbnRyeSkgb3IgdGhlcmUncyBub1xuICAgICAgICAgICAgICAgIC8vIG1hdGNoIGZvciB0aGUgcmVxdWVzdGVkIHNlZ21lbnQuIFJlc3BvbmQgd2l0aCBhIDIwNCBObyBDb250ZW50LiBXZVxuICAgICAgICAgICAgICAgIC8vIGRvbid0IGJvdGhlciB0byByZXNwb25kIHdpdGggNDA0LCBiZWNhdXNlIHRoZXNlIHJlcXVlc3RzIGFyZSBvbmx5XG4gICAgICAgICAgICAgICAgLy8gaXNzdWVkIGFzIHBhcnQgb2YgYSBwcmVmZXRjaC5cbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDIwNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogUmVuZGVyUmVzdWx0LkVNUFRZLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgY2FsbGJhY2sgZm9yIGBvbkNhY2hlRW50cnlgLCBjYWxsIGl0IHdpdGggdGhlIGNhY2hlIGVudHJ5XG4gICAgICAgICAgICAvLyBhbmQgdGhlIHJldmFsaWRhdGUgb3B0aW9ucy5cbiAgICAgICAgICAgIGNvbnN0IG9uQ2FjaGVFbnRyeSA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ29uQ2FjaGVFbnRyeScpO1xuICAgICAgICAgICAgaWYgKG9uQ2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmlzaGVkID0gYXdhaXQgb25DYWNoZUVudHJ5KHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGVFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgd2hlbiB1cHN0cmVhbSBkb2Vzbid0XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBleHBlY3QgdGhpcyB2YWx1ZSB0byBiZSBcIlBBR0VcIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGVFbnRyeS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdQQUdFJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luaXRVUkwnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBtYXliZSB3ZSBoYXZlIHRvIGVuZCB0aGUgcmVxdWVzdD9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaGFzIGEgcG9zdHBvbmVkIHN0YXRlIGFuZCBpdCdzIGEgcmVzdW1lIHJlcXVlc3Qgd2VcbiAgICAgICAgICAgIC8vIHNob3VsZCBlcnJvci5cbiAgICAgICAgICAgIGlmIChkaWRQb3N0cG9uZSAmJiBtaW5pbWFsUG9zdHBvbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcignSW52YXJpYW50OiBwb3N0cG9uZWQgc3RhdGUgc2hvdWxkIG5vdCBiZSBwcmVzZW50IG9uIGEgcmVzdW1lIHJlcXVlc3QnKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzOTZcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhY2hlZERhdGEuaGVhZGVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNhY2hlZERhdGEuaGVhZGVyc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKCFtaW5pbWFsTW9kZSB8fCAhaXNTU0cpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5hcHBlbmRIZWFkZXIoa2V5LCB2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuYXBwZW5kSGVhZGVyKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmFwcGVuZEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgY2FjaGUgdGFncyBoZWFkZXIgdG8gdGhlIHJlc3BvbnNlIGlmIGl0IGV4aXN0cyBhbmQgd2UncmUgaW5cbiAgICAgICAgICAgIC8vIG1pbmltYWwgbW9kZSB3aGlsZSByZW5kZXJpbmcgYSBzdGF0aWMgcGFnZS5cbiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSAoX2NhY2hlZERhdGFfaGVhZGVycyA9IGNhY2hlZERhdGEuaGVhZGVycykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZWREYXRhX2hlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl07XG4gICAgICAgICAgICBpZiAobWluaW1hbE1vZGUgJiYgaXNTU0cgJiYgdGFncyAmJiB0eXBlb2YgdGFncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIsIHRhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgYSBkYXRhIHJlcXVlc3QsIHRoZW4gd2Ugc2hvdWxkbid0IHNldCB0aGUgc3RhdHVzIGNvZGVcbiAgICAgICAgICAgIC8vIGZyb20gdGhlIHJlc3BvbnNlIGJlY2F1c2UgaXQgc2hvdWxkIGFsd2F5cyBiZSAyMDAuIFRoaXMgc2hvdWxkIGJlIGdhdGVkXG4gICAgICAgICAgICAvLyBiZWhpbmQgdGhlIGV4cGVyaW1lbnRhbCBQUFIgZmxhZy5cbiAgICAgICAgICAgIGlmIChjYWNoZWREYXRhLnN0YXR1cyAmJiAoIWlzUlNDUmVxdWVzdCB8fCAhaXNSb3V0ZVBQUkVuYWJsZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSBjYWNoZWREYXRhLnN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlZGlyZWN0IGluZm9ybWF0aW9uIGlzIGVuY29kZWQgaW4gUlNDIHBheWxvYWQsIHNvIHdlIGRvbid0IG5lZWQgdG8gdXNlIHJlZGlyZWN0IHN0YXR1cyBjb2Rlc1xuICAgICAgICAgICAgaWYgKCFtaW5pbWFsTW9kZSAmJiBjYWNoZWREYXRhLnN0YXR1cyAmJiBSZWRpcmVjdFN0YXR1c0NvZGVbY2FjaGVkRGF0YS5zdGF0dXNdICYmIGlzUlNDUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFyayB0aGF0IHRoZSByZXF1ZXN0IGRpZCBwb3N0cG9uZS5cbiAgICAgICAgICAgIGlmIChkaWRQb3N0cG9uZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoTkVYVF9ESURfUE9TVFBPTkVfSEVBREVSLCAnMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgZ28gdGhyb3VnaCB0aGlzIGJsb2NrIHdoZW4gcHJldmlldyBtb2RlIGlzIHRydWVcbiAgICAgICAgICAgIC8vIGFzIHByZXZpZXcgbW9kZSBpcyBhIGR5bmFtaWMgcmVxdWVzdCAoYnlwYXNzZXMgY2FjaGUpIGFuZCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSBib3RoIEhUTUwgYW5kIHBheWxvYWRzIGluIHRoZSBzYW1lIHJlcXVlc3Qgc28gY29udGludWUgdG8ganVzdFxuICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBnZW5lcmF0ZWQgcGF5bG9hZFxuICAgICAgICAgICAgaWYgKGlzUlNDUmVxdWVzdCAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgZHluYW1pYyBSU0MgcmVxdWVzdCwgdGhlbiBzdHJlYW0gdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FjaGVkRGF0YS5yc2NEYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVkRGF0YS5wb3N0cG9uZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoJ0ludmFyaWFudDogRXhwZWN0ZWQgcG9zdHBvbmVkIHRvIGJlIHVuZGVmaW5lZCcpLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMzcyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBjYWNoZWREYXRhLmh0bWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEeW5hbWljIFJTQyByZXNwb25zZXMgY2Fubm90IGJlIGNhY2hlZCwgZXZlbiBpZiB0aGV5J3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25maWd1cmVkIHdpdGggYGZvcmNlLXN0YXRpY2AgYmVjYXVzZSB3ZSBoYXZlIG5vIHdheSBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzdGluZ3Vpc2hpbmcgYmV0d2VlbiBgZm9yY2Utc3RhdGljYCBhbmQgcGFnZXMgdGhhdCBoYXZlIG5vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3N0cG9uZWQgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBkaXN0aW5ndWlzaCBgZm9yY2Utc3RhdGljYCBmcm9tIHBhZ2VzIHdpdGggbm8gcG9zdHBvbmVkIHN0YXRlIChzdGF0aWMpXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGlzRHluYW1pY1JTQ1JlcXVlc3QgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBcyB0aGlzIGlzbid0IGEgcHJlZmV0Y2ggcmVxdWVzdCwgd2Ugc2hvdWxkIHNlcnZlIHRoZSBzdGF0aWMgZmxpZ2h0XG4gICAgICAgICAgICAgICAgLy8gZGF0YS5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogUmVuZGVyUmVzdWx0LmZyb21TdGF0aWMoY2FjaGVkRGF0YS5yc2NEYXRhLCBSU0NfQ09OVEVOVF9UWVBFX0hFQURFUiksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSByZXF1ZXN0IGZvciBIVE1MIGRhdGEuXG4gICAgICAgICAgICBsZXQgYm9keSA9IGNhY2hlZERhdGEuaHRtbDtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gcG9zdHBvbmVkIHN0YXRlLCB3ZSBzaG91bGQganVzdCBzZXJ2ZSB0aGUgSFRNTC4gVGhpc1xuICAgICAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgdGhlIGNhc2UgZm9yIGEgcmVzdW1lIHJlcXVlc3QgYmVjYXVzZSBpdCdzIGNvbXBsZXRlZFxuICAgICAgICAgICAgLy8gYXMgYSBzZXJ2ZXIgcmVuZGVyIChyYXRoZXIgdGhhbiBhIHN0YXRpYyByZW5kZXIpLlxuICAgICAgICAgICAgaWYgKCFkaWRQb3N0cG9uZSB8fCBtaW5pbWFsTW9kZSB8fCBpc1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiB0ZXN0IG1vZGUsIHdlIHNob3VsZCBhZGQgYSBzZW50aW5lbCBjaHVuayB0byB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0J3MgYmV0d2VlbiB0aGUgc3RhdGljIGFuZCBkeW5hbWljIHBhcnRzIHNvIHdlIGNhbiBjb21wYXJlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNodW5rcyBhbmQgYWRkIGFzc2VydGlvbnMuXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9URVNUX01PREUgJiYgbWluaW1hbE1vZGUgJiYgaXNSb3V0ZVBQUkVuYWJsZWQgJiYgYm9keS5jb250ZW50VHlwZSA9PT0gSFRNTF9DT05URU5UX1RZUEVfSEVBREVSKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFzIHdlJ3JlIGluIG1pbmltYWwgbW9kZSwgdGhlIHN0YXRpYyBwYXJ0IHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0cmVhbWVkIGZpcnN0LiBUaGUgb25seSBwYXJ0IHRoYXQgdGhpcyBzdHJlYW1zIGlzIHRoZSBkeW5hbWljIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gd2Ugc2hvdWxkIEZJUlNUIHN0cmVhbSB0aGUgc2VudGluZWwgYW5kIFRIRU4gdGhlIGR5bmFtaWMgcGFydC5cbiAgICAgICAgICAgICAgICAgICAgYm9keS51bnNoaWZ0KGNyZWF0ZVBQUkJvdW5kYXJ5U2VudGluZWwoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBib2R5LFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBkZWJ1Z2dpbmcgdGhlIHN0YXRpYyBzaGVsbCBvciB0aGUgZHluYW1pYyBBUEkgYWNjZXNzZXMsIHdlXG4gICAgICAgICAgICAvLyBzaG91bGQganVzdCBzZXJ2ZSB0aGUgSFRNTCB3aXRob3V0IHJlc3VtaW5nIHRoZSByZW5kZXIuIFRoZSByZXR1cm5lZFxuICAgICAgICAgICAgLy8gSFRNTCB3aWxsIGJlIHRoZSBzdGF0aWMgc2hlbGwgc28gYWxsIHRoZSBEeW5hbWljIEFQSSdzIHdpbGwgYmUgdXNlZFxuICAgICAgICAgICAgLy8gZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLlxuICAgICAgICAgICAgaWYgKGlzRGVidWdTdGF0aWNTaGVsbCB8fCBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gU2luY2Ugd2UncmUgbm90IHJlc3VtaW5nIHRoZSByZW5kZXIsIHdlIG5lZWQgdG8gYXQgbGVhc3QgYWRkIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcgYm9keSBhbmQgaHRtbCB0YWdzIHRvIGNyZWF0ZSB2YWxpZCBIVE1MLlxuICAgICAgICAgICAgICAgIGJvZHkucHVzaChuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgICAgICBzdGFydCAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKEVOQ09ERURfVEFHUy5DTE9TRUQuQk9EWV9BTkRfSFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGJvZHksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGluIHRlc3QgbW9kZSwgd2Ugc2hvdWxkIGFkZCBhIHNlbnRpbmVsIGNodW5rIHRvIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgLy8gdGhhdCdzIGJldHdlZW4gdGhlIHN0YXRpYyBhbmQgZHluYW1pYyBwYXJ0cyBzbyB3ZSBjYW4gY29tcGFyZSB0aGVcbiAgICAgICAgICAgIC8vIGNodW5rcyBhbmQgYWRkIGFzc2VydGlvbnMuXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuX19ORVhUX1RFU1RfTU9ERSkge1xuICAgICAgICAgICAgICAgIGJvZHkucHVzaChjcmVhdGVQUFJCb3VuZGFyeVNlbnRpbmVsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyByZXF1ZXN0IGhhcyBwb3N0cG9uZWQsIHNvIGxldCdzIGNyZWF0ZSBhIG5ldyB0cmFuc2Zvcm1lciB0aGF0IHRoZVxuICAgICAgICAgICAgLy8gZHluYW1pYyBkYXRhIGNhbiBwaXBlIHRvIHRoYXQgd2lsbCBhdHRhY2ggdGhlIGR5bmFtaWMgZGF0YSB0byB0aGUgZW5kXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lciA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oKTtcbiAgICAgICAgICAgIGJvZHkucHVzaCh0cmFuc2Zvcm1lci5yZWFkYWJsZSk7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSByZW5kZXIgYWdhaW4sIGJ1dCB0aGlzIHRpbWUsIHByb3ZpZGUgdGhlIHBvc3Rwb25lZCBzdGF0ZS5cbiAgICAgICAgICAgIC8vIFdlIGRvbid0IGF3YWl0IGJlY2F1c2Ugd2Ugd2FudCB0aGUgcmVzdWx0IHRvIHN0YXJ0IHN0cmVhbWluZyBub3csIGFuZFxuICAgICAgICAgICAgLy8gd2UndmUgYWxyZWFkeSBjaGFpbmVkIHRoZSB0cmFuc2Zvcm1lcidzIHJlYWRhYmxlIHRvIHRoZSByZW5kZXIgcmVzdWx0LlxuICAgICAgICAgICAgZG9SZW5kZXIoe1xuICAgICAgICAgICAgICAgIHNwYW4sXG4gICAgICAgICAgICAgICAgcG9zdHBvbmVkOiBjYWNoZWREYXRhLnBvc3Rwb25lZCxcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgcmVzdW1lIHJlbmRlciwgbm90IGEgZmFsbGJhY2sgcmVuZGVyLCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoaXMuXG4gICAgICAgICAgICAgICAgZmFsbGJhY2tSb3V0ZVBhcmFtczogbnVsbFxuICAgICAgICAgICAgfSkudGhlbihhc3luYyAocmVzdWx0KT0+e1xuICAgICAgICAgICAgICAgIHZhciBfcmVzdWx0X3ZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoJ0ludmFyaWFudDogZXhwZWN0ZWQgYSByZXN1bHQgdG8gYmUgcmV0dXJuZWQnKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNDYzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCgoX3Jlc3VsdF92YWx1ZSA9IHJlc3VsdC52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9yZXN1bHRfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUEFHRSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3Jlc3VsdF92YWx1ZTE7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogZXhwZWN0ZWQgYSBwYWdlIHJlc3BvbnNlLCBnb3QgJHsoX3Jlc3VsdF92YWx1ZTEgPSByZXN1bHQudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfcmVzdWx0X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzMDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQaXBlIHRoZSByZXN1bWUgcmVzdWx0IHRvIHRoZSB0cmFuc2Zvcm1lci5cbiAgICAgICAgICAgICAgICBhd2FpdCByZXN1bHQudmFsdWUuaHRtbC5waXBlVG8odHJhbnNmb3JtZXIud3JpdGFibGUpO1xuICAgICAgICAgICAgfSkuY2F0Y2goKGVycik9PntcbiAgICAgICAgICAgICAgICAvLyBBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgcGlwaW5nIG9yIHByZXBhcmluZyB0aGUgcmVuZGVyLCBhYm9ydFxuICAgICAgICAgICAgICAgIC8vIHRoZSB0cmFuc2Zvcm1lcnMgd3JpdGVyIHNvIHdlIGNhbiB0ZXJtaW5hdGUgdGhlIHN0cmVhbS5cbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lci53cml0YWJsZS5hYm9ydChlcnIpLmNhdGNoKChlKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiY291bGRuJ3QgYWJvcnQgdHJhbnNmb3JtZXJcIiwgZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogYm9keSxcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGNhY2hlIHRoZSByZXNwb25zZSBpZiBpdCBoYXMgcG9zdHBvbmVkIGRhdGEgYmVjYXVzZVxuICAgICAgICAgICAgICAgIC8vIHRoZSByZXNwb25zZSBiZWluZyBzZW50IHRvIHRoZSBjbGllbnQgaXQncyBkeW5hbWljIHBhcnRzIGFyZSBzdHJlYW1lZFxuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBjbGllbnQgb24gdGhlIHNhbWUgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3JlcS51cmx9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBoYW5kbGVSZXNwb25zZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIE5vRmFsbGJhY2tFcnJvcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyZW5kZXInLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGU6IGlzU1NHLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn1cbi8vIFRPRE86IG9taXQgdGhpcyBmcm9tIHByb2R1Y3Rpb24gYnVpbGRzLCBvbmx5IHRlc3QgYnVpbGRzIHNob3VsZCBpbmNsdWRlIGl0XG4vKipcbiAqIENyZWF0ZXMgYSByZWFkYWJsZSBzdHJlYW0gdGhhdCBlbWl0cyBhIFBQUiBib3VuZGFyeSBzZW50aW5lbC5cbiAqXG4gKiBAcmV0dXJucyBBIHJlYWRhYmxlIHN0cmVhbSB0aGF0IGVtaXRzIGEgUFBSIGJvdW5kYXJ5IHNlbnRpbmVsLlxuICovIGZ1bmN0aW9uIGNyZWF0ZVBQUkJvdW5kYXJ5U2VudGluZWwoKSB7XG4gICAgcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgIHN0YXJ0IChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKCc8IS0tIFBQUl9CT1VOREFSWV9TRU5USU5FTCAtLT4nKSk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXBhZ2UuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fgameplay%2Fpage&page=%2Fgameplay%2Fpage&appPaths=%2Fgameplay%2Fpage&pagePath=private-next-app-dir%2Fgameplay%2Fpage.tsx&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fbuiltin%2Fglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fframework%2Fboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fgenerate%2Ficon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fbuiltin%2Fglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fframework%2Fboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fgenerate%2Ficon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(rsc)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(rsc)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(rsc)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(rsc)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(rsc)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(rsc)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(rsc)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(rsc)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmJ1aWx0aW4lMkZnbG9iYWwtZXJyb3IuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXBhZ2UuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGaHR0cC1hY2Nlc3MtZmFsbGJhY2slMkZlcnJvci1ib3VuZGFyeS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZhcHAlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZsYXlvdXQtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRm1ldGFkYXRhJTJGYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZhcHAlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmxpYiUyRmZyYW1ld29yayUyRmJvdW5kYXJ5LWNvbXBvbmVudHMuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZsaWIlMkZtZXRhZGF0YSUyRmdlbmVyYXRlJTJGaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGbmV4dC1kZXZ0b29scyUyRnVzZXJzcGFjZSUyRmFwcCUyRnNlZ21lbnQtZXhwbG9yZXItbm9kZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsc1BBQTBHO0FBQzFHO0FBQ0Esb09BQWlHO0FBQ2pHO0FBQ0EsME9BQW9HO0FBQ3BHO0FBQ0Esb1JBQXlIO0FBQ3pIO0FBQ0Esd09BQW1HO0FBQ25HO0FBQ0EsNFBBQTZHO0FBQzdHO0FBQ0Esc1FBQWtIO0FBQ2xIO0FBQ0EsNE9BQXFHO0FBQ3JHO0FBQ0Esd09BQW1HO0FBQ25HO0FBQ0EsNFFBQXFIIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9nbG9iYWwtZXJyb3IuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9jbGllbnQtcGFnZS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2FwcC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1zZWdtZW50LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvaHR0cC1hY2Nlc3MtZmFsbGJhY2svZXJyb3ItYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9sYXlvdXQtcm91dGVyLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbWV0YWRhdGEvYXN5bmMtbWV0YWRhdGEuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9yZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvbGliL2ZyYW1ld29yay9ib3VuZGFyeS1jb21wb25lbnRzLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvbGliL21ldGFkYXRhL2dlbmVyYXRlL2ljb24tbWFyay5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2FwcC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L25leHQtZGV2dG9vbHMvdXNlcnNwYWNlL2FwcC9zZWdtZW50LWV4cGxvcmVyLW5vZGUuanNcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fbuiltin%2Fglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fframework%2Fboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fgenerate%2Ficon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fsrc%2Fapp%2Fgameplay%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fsrc%2Fapp%2Fgameplay%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/gameplay/page.tsx */ \"(rsc)/./src/app/gameplay/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRnNyYyUyRmFwcCUyRmdhbWVwbGF5JTJGcGFnZS50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLGtLQUFtRSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2FwcC9zcmMvYXBwL2dhbWVwbGF5L3BhZ2UudHN4XCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fsrc%2Fapp%2Fgameplay%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/gameplay/page.tsx":
/*!***********************************!*\
  !*** ./src/app/gameplay/page.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server.js\");\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__);\n// This file is generated by the Webpack next-flight-loader.\n\nconst dynamic = (0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call dynamic() from the server but dynamic is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"/app/src/app/gameplay/page.tsx\",\n\"dynamic\",\n);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"/app/src/app/gameplay/page.tsx\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"/app/src/app/gameplay/page.tsx\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2dhbWVwbGF5L3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSIsInNvdXJjZXMiOlsiX05fRS8uL3NyYy9hcHAvZ2FtZXBsYXkvcGFnZS50c3gvX19uZXh0anMtaW50ZXJuYWwtcHJveHkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgYnkgdGhlIFdlYnBhY2sgbmV4dC1mbGlnaHQtbG9hZGVyLlxuaW1wb3J0IHsgcmVnaXN0ZXJDbGllbnRSZWZlcmVuY2UgfSBmcm9tIFwicmVhY3Qtc2VydmVyLWRvbS13ZWJwYWNrL3NlcnZlclwiO1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSByZWdpc3RlckNsaWVudFJlZmVyZW5jZShcbmZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gY2FsbCBkeW5hbWljKCkgZnJvbSB0aGUgc2VydmVyIGJ1dCBkeW5hbWljIGlzIG9uIHRoZSBjbGllbnQuIEl0J3Mgbm90IHBvc3NpYmxlIHRvIGludm9rZSBhIGNsaWVudCBmdW5jdGlvbiBmcm9tIHRoZSBzZXJ2ZXIsIGl0IGNhbiBvbmx5IGJlIHJlbmRlcmVkIGFzIGEgQ29tcG9uZW50IG9yIHBhc3NlZCB0byBwcm9wcyBvZiBhIENsaWVudCBDb21wb25lbnQuXCIpOyB9LFxuXCIvYXBwL3NyYy9hcHAvZ2FtZXBsYXkvcGFnZS50c3hcIixcblwiZHluYW1pY1wiLFxuKTtleHBvcnQgZGVmYXVsdCByZWdpc3RlckNsaWVudFJlZmVyZW5jZShcbmZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gY2FsbCB0aGUgZGVmYXVsdCBleHBvcnQgb2YgXFxcIi9hcHAvc3JjL2FwcC9nYW1lcGxheS9wYWdlLnRzeFxcXCIgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQncyBvbiB0aGUgY2xpZW50LiBJdCdzIG5vdCBwb3NzaWJsZSB0byBpbnZva2UgYSBjbGllbnQgZnVuY3Rpb24gZnJvbSB0aGUgc2VydmVyLCBpdCBjYW4gb25seSBiZSByZW5kZXJlZCBhcyBhIENvbXBvbmVudCBvciBwYXNzZWQgdG8gcHJvcHMgb2YgYSBDbGllbnQgQ29tcG9uZW50LlwiKTsgfSxcblwiL2FwcC9zcmMvYXBwL2dhbWVwbGF5L3BhZ2UudHN4XCIsXG5cImRlZmF1bHRcIixcbik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/gameplay/page.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n\nconst metadata = {\n    title: \"Infinite World • Three.js + Next.js\",\n    description: \"Procedural infinite world with vehicles, enemies, and bosses\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            style: {\n                margin: 0,\n                background: \"#0a0d12\",\n                color: \"#e6f1ff\"\n            },\n            children: children\n        }, void 0, false, {\n            fileName: \"/app/src/app/layout.tsx\",\n            lineNumber: 9,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/app/src/app/layout.tsx\",\n        lineNumber: 8,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxNQUFNQSxXQUFXO0lBQ3RCQyxPQUFPO0lBQ1BDLGFBQWE7QUFDZixFQUFFO0FBRWEsU0FBU0MsV0FBVyxFQUFFQyxRQUFRLEVBQWlDO0lBQzVFLHFCQUNFLDhEQUFDQztRQUFLQyxNQUFLO2tCQUNULDRFQUFDQztZQUFLQyxPQUFPO2dCQUFFQyxRQUFRO2dCQUFHQyxZQUFZO2dCQUFXQyxPQUFPO1lBQVU7c0JBQy9EUDs7Ozs7Ozs7Ozs7QUFJVCIsInNvdXJjZXMiOlsiL2FwcC9zcmMvYXBwL2xheW91dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG1ldGFkYXRhID0ge1xuICB0aXRsZTogXCJJbmZpbml0ZSBXb3JsZCDigKIgVGhyZWUuanMgKyBOZXh0LmpzXCIsXG4gIGRlc2NyaXB0aW9uOiBcIlByb2NlZHVyYWwgaW5maW5pdGUgd29ybGQgd2l0aCB2ZWhpY2xlcywgZW5lbWllcywgYW5kIGJvc3Nlc1wiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vdExheW91dCh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSB7XG4gIHJldHVybiAoXG4gICAgPGh0bWwgbGFuZz1cImVuXCI+XG4gICAgICA8Ym9keSBzdHlsZT17eyBtYXJnaW46IDAsIGJhY2tncm91bmQ6IFwiIzBhMGQxMlwiLCBjb2xvcjogXCIjZTZmMWZmXCIgfX0+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvYm9keT5cbiAgICA8L2h0bWw+XG4gICk7XG59XG4iXSwibmFtZXMiOlsibWV0YWRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiUm9vdExheW91dCIsImNoaWxkcmVuIiwiaHRtbCIsImxhbmciLCJib2R5Iiwic3R5bGUiLCJtYXJnaW4iLCJiYWNrZ3JvdW5kIiwiY29sb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fbuiltin%2Fglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fframework%2Fboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fgenerate%2Ficon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fbuiltin%2Fglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fframework%2Fboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fgenerate%2Ficon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(ssr)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(ssr)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(ssr)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(ssr)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(ssr)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(ssr)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmJ1aWx0aW4lMkZnbG9iYWwtZXJyb3IuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXBhZ2UuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGaHR0cC1hY2Nlc3MtZmFsbGJhY2slMkZlcnJvci1ib3VuZGFyeS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZhcHAlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZsYXlvdXQtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRm1ldGFkYXRhJTJGYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZhcHAlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmxpYiUyRmZyYW1ld29yayUyRmJvdW5kYXJ5LWNvbXBvbmVudHMuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGYXBwJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZsaWIlMkZtZXRhZGF0YSUyRmdlbmVyYXRlJTJGaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGbmV4dC1kZXZ0b29scyUyRnVzZXJzcGFjZSUyRmFwcCUyRnNlZ21lbnQtZXhwbG9yZXItbm9kZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsc1BBQTBHO0FBQzFHO0FBQ0Esb09BQWlHO0FBQ2pHO0FBQ0EsME9BQW9HO0FBQ3BHO0FBQ0Esb1JBQXlIO0FBQ3pIO0FBQ0Esd09BQW1HO0FBQ25HO0FBQ0EsNFBBQTZHO0FBQzdHO0FBQ0Esc1FBQWtIO0FBQ2xIO0FBQ0EsNE9BQXFHO0FBQ3JHO0FBQ0Esa09BQW1HO0FBQ25HO0FBQ0EsNFFBQXFIIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9nbG9iYWwtZXJyb3IuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9jbGllbnQtcGFnZS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2FwcC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1zZWdtZW50LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvaHR0cC1hY2Nlc3MtZmFsbGJhY2svZXJyb3ItYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9sYXlvdXQtcm91dGVyLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbWV0YWRhdGEvYXN5bmMtbWV0YWRhdGEuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9hcHAvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9yZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvbGliL2ZyYW1ld29yay9ib3VuZGFyeS1jb21wb25lbnRzLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvYXBwL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvbGliL21ldGFkYXRhL2dlbmVyYXRlL2ljb24tbWFyay5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2FwcC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L25leHQtZGV2dG9vbHMvdXNlcnNwYWNlL2FwcC9zZWdtZW50LWV4cGxvcmVyLW5vZGUuanNcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fbuiltin%2Fglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fmetadata%2Fasync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fframework%2Fboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fgenerate%2Ficon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fapp%2Fnode_modules%2Fnext%2Fdist%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fsrc%2Fapp%2Fgameplay%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fsrc%2Fapp%2Fgameplay%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/gameplay/page.tsx */ \"(ssr)/./src/app/gameplay/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmFwcCUyRnNyYyUyRmFwcCUyRmdhbWVwbGF5JTJGcGFnZS50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLGtLQUFtRSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2FwcC9zcmMvYXBwL2dhbWVwbGF5L3BhZ2UudHN4XCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fapp%2Fsrc%2Fapp%2Fgameplay%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./src/app/gameplay/page.tsx":
/*!***********************************!*\
  !*** ./src/app/gameplay/page.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GameplayPage),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _engine_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/engine/bootstrap */ \"(ssr)/./src/engine/bootstrap.ts\");\n/* harmony import */ var _lib_brokerClient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/brokerClient */ \"(ssr)/./src/lib/brokerClient.ts\");\n/* harmony import */ var _components_HUD__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/HUD */ \"(ssr)/./src/components/HUD.tsx\");\n/* harmony import */ var _components_LoadingOverlay__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/LoadingOverlay */ \"(ssr)/./src/components/LoadingOverlay.tsx\");\n/* __next_internal_client_entry_do_not_use__ dynamic,default auto */ \n\n\n\n\n\nconst dynamic = 'force-dynamic';\nfunction GameplayPage() {\n    const mountRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const apiRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [ready, setReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GameplayPage.useEffect\": ()=>{\n            if (!mountRef.current) return;\n            //1.- Bootstrap the local scene graph and retain the exposed API for downstream broker synchronisation.\n            const { api, dispose } = (0,_engine_bootstrap__WEBPACK_IMPORTED_MODULE_2__.initGame)(mountRef.current, _engine_bootstrap__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_SCENE_OPTS, {\n                \"GameplayPage.useEffect\": ()=>setReady(true)\n            }[\"GameplayPage.useEffect\"]);\n            apiRef.current = api;\n            //2.- Connect to the broker so authoritative world diffs can steer the HUD and server-side actors.\n            const broker = (0,_lib_brokerClient__WEBPACK_IMPORTED_MODULE_3__.createBrokerClient)({\n                clientId: 'pilot-local'\n            });\n            const unsubscribe = broker.onWorldDiff({\n                \"GameplayPage.useEffect.unsubscribe\": (diff)=>{\n                    apiRef.current?.ingestWorldDiff(diff);\n                }\n            }[\"GameplayPage.useEffect.unsubscribe\"]);\n            //3.- Stream the player's latest inputs back to the broker on a short cadence.\n            let stopped = false;\n            let intentTimer = null;\n            const pumpIntent = {\n                \"GameplayPage.useEffect.pumpIntent\": ()=>{\n                    if (stopped) return;\n                    const snapshot = apiRef.current?.sampleIntent();\n                    if (snapshot) {\n                        broker.sendIntent(snapshot);\n                    }\n                    intentTimer = setTimeout(pumpIntent, 100);\n                }\n            }[\"GameplayPage.useEffect.pumpIntent\"];\n            pumpIntent();\n            return ({\n                \"GameplayPage.useEffect\": ()=>{\n                    stopped = true;\n                    if (intentTimer) clearTimeout(intentTimer);\n                    unsubscribe();\n                    broker.close();\n                    dispose();\n                }\n            })[\"GameplayPage.useEffect\"];\n        }\n    }[\"GameplayPage.useEffect\"], []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            position: 'fixed',\n            inset: 0,\n            overflow: 'hidden'\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: mountRef,\n                style: {\n                    position: 'absolute',\n                    inset: 0\n                }\n            }, void 0, false, {\n                fileName: \"/app/src/app/gameplay/page.tsx\",\n                lineNumber: 53,\n                columnNumber: 7\n            }, this),\n            !ready && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingOverlay__WEBPACK_IMPORTED_MODULE_5__.LoadingOverlay, {}, void 0, false, {\n                fileName: \"/app/src/app/gameplay/page.tsx\",\n                lineNumber: 54,\n                columnNumber: 18\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_HUD__WEBPACK_IMPORTED_MODULE_4__.HUD, {\n                getState: ()=>apiRef.current?.getState(),\n                actions: ()=>apiRef.current?.actions\n            }, void 0, false, {\n                fileName: \"/app/src/app/gameplay/page.tsx\",\n                lineNumber: 55,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/app/src/app/gameplay/page.tsx\",\n        lineNumber: 52,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2dhbWVwbGF5L3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBRW1EO0FBQzRCO0FBQ3hCO0FBQ2pCO0FBQ3NCO0FBRXJELE1BQU1RLFVBQVUsZ0JBQWU7QUFFdkIsU0FBU0M7SUFDdEIsTUFBTUMsV0FBV1QsNkNBQU1BLENBQWlCO0lBQ3hDLE1BQU1VLFNBQVNWLDZDQUFNQSxDQUFpQjtJQUN0QyxNQUFNLENBQUNXLE9BQU9DLFNBQVMsR0FBR1gsK0NBQVFBLENBQUM7SUFFbkNGLGdEQUFTQTtrQ0FBQztZQUNSLElBQUksQ0FBQ1UsU0FBU0ksT0FBTyxFQUFFO1lBRXZCLHVHQUF1RztZQUN2RyxNQUFNLEVBQUVDLEdBQUcsRUFBRUMsT0FBTyxFQUFFLEdBQUdiLDJEQUFRQSxDQUFDTyxTQUFTSSxPQUFPLEVBQUVWLGlFQUFrQkE7MENBQUUsSUFBTVMsU0FBUzs7WUFDdkZGLE9BQU9HLE9BQU8sR0FBR0M7WUFFakIsa0dBQWtHO1lBQ2xHLE1BQU1FLFNBQVNaLHFFQUFrQkEsQ0FBQztnQkFBRWEsVUFBVTtZQUFjO1lBQzVELE1BQU1DLGNBQWNGLE9BQU9HLFdBQVc7c0RBQUMsQ0FBQ0M7b0JBQ3RDVixPQUFPRyxPQUFPLEVBQUVRLGdCQUFnQkQ7Z0JBQ2xDOztZQUVBLDhFQUE4RTtZQUM5RSxJQUFJRSxVQUFVO1lBQ2QsSUFBSUMsY0FBb0Q7WUFDeEQsTUFBTUM7cURBQWE7b0JBQ2pCLElBQUlGLFNBQVM7b0JBQ2IsTUFBTUcsV0FBV2YsT0FBT0csT0FBTyxFQUFFYTtvQkFDakMsSUFBSUQsVUFBVTt3QkFDWlQsT0FBT1csVUFBVSxDQUFDRjtvQkFDcEI7b0JBQ0FGLGNBQWNLLFdBQVdKLFlBQVk7Z0JBQ3ZDOztZQUNBQTtZQUVBOzBDQUFPO29CQUNMRixVQUFVO29CQUNWLElBQUlDLGFBQWFNLGFBQWFOO29CQUM5Qkw7b0JBQ0FGLE9BQU9jLEtBQUs7b0JBQ1pmO2dCQUNGOztRQUNGO2lDQUFHLEVBQUU7SUFFTCxxQkFDRSw4REFBQ2dCO1FBQUlDLE9BQU87WUFBRUMsVUFBVTtZQUFTQyxPQUFPO1lBQUdDLFVBQVU7UUFBUzs7MEJBQzVELDhEQUFDSjtnQkFBSUssS0FBSzNCO2dCQUFVdUIsT0FBTztvQkFBRUMsVUFBVTtvQkFBWUMsT0FBTztnQkFBRTs7Ozs7O1lBQzNELENBQUN2Qix1QkFBUyw4REFBQ0wsc0VBQWNBOzs7OzswQkFDMUIsOERBQUNELGdEQUFHQTtnQkFBQ2dDLFVBQVUsSUFBTTNCLE9BQU9HLE9BQU8sRUFBRXdCO2dCQUFZQyxTQUFTLElBQU01QixPQUFPRyxPQUFPLEVBQUV5Qjs7Ozs7Ozs7Ozs7O0FBR3RGIiwic291cmNlcyI6WyIvYXBwL3NyYy9hcHAvZ2FtZXBsYXkvcGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgaW5pdEdhbWUsIHR5cGUgR2FtZUFQSSwgREVGQVVMVF9TQ0VORV9PUFRTIH0gZnJvbSAnQC9lbmdpbmUvYm9vdHN0cmFwJ1xuaW1wb3J0IHsgY3JlYXRlQnJva2VyQ2xpZW50IH0gZnJvbSAnQC9saWIvYnJva2VyQ2xpZW50J1xuaW1wb3J0IHsgSFVEIH0gZnJvbSAnQC9jb21wb25lbnRzL0hVRCdcbmltcG9ydCB7IExvYWRpbmdPdmVybGF5IH0gZnJvbSAnQC9jb21wb25lbnRzL0xvYWRpbmdPdmVybGF5J1xuXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHYW1lcGxheVBhZ2UoKSB7XG4gIGNvbnN0IG1vdW50UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBhcGlSZWYgPSB1c2VSZWY8R2FtZUFQSSB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtyZWFkeSwgc2V0UmVhZHldID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1vdW50UmVmLmN1cnJlbnQpIHJldHVyblxuXG4gICAgLy8xLi0gQm9vdHN0cmFwIHRoZSBsb2NhbCBzY2VuZSBncmFwaCBhbmQgcmV0YWluIHRoZSBleHBvc2VkIEFQSSBmb3IgZG93bnN0cmVhbSBicm9rZXIgc3luY2hyb25pc2F0aW9uLlxuICAgIGNvbnN0IHsgYXBpLCBkaXNwb3NlIH0gPSBpbml0R2FtZShtb3VudFJlZi5jdXJyZW50LCBERUZBVUxUX1NDRU5FX09QVFMsICgpID0+IHNldFJlYWR5KHRydWUpKVxuICAgIGFwaVJlZi5jdXJyZW50ID0gYXBpXG5cbiAgICAvLzIuLSBDb25uZWN0IHRvIHRoZSBicm9rZXIgc28gYXV0aG9yaXRhdGl2ZSB3b3JsZCBkaWZmcyBjYW4gc3RlZXIgdGhlIEhVRCBhbmQgc2VydmVyLXNpZGUgYWN0b3JzLlxuICAgIGNvbnN0IGJyb2tlciA9IGNyZWF0ZUJyb2tlckNsaWVudCh7IGNsaWVudElkOiAncGlsb3QtbG9jYWwnIH0pXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBicm9rZXIub25Xb3JsZERpZmYoKGRpZmYpID0+IHtcbiAgICAgIGFwaVJlZi5jdXJyZW50Py5pbmdlc3RXb3JsZERpZmYoZGlmZilcbiAgICB9KVxuXG4gICAgLy8zLi0gU3RyZWFtIHRoZSBwbGF5ZXIncyBsYXRlc3QgaW5wdXRzIGJhY2sgdG8gdGhlIGJyb2tlciBvbiBhIHNob3J0IGNhZGVuY2UuXG4gICAgbGV0IHN0b3BwZWQgPSBmYWxzZVxuICAgIGxldCBpbnRlbnRUaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbFxuICAgIGNvbnN0IHB1bXBJbnRlbnQgPSAoKSA9PiB7XG4gICAgICBpZiAoc3RvcHBlZCkgcmV0dXJuXG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGFwaVJlZi5jdXJyZW50Py5zYW1wbGVJbnRlbnQoKVxuICAgICAgaWYgKHNuYXBzaG90KSB7XG4gICAgICAgIGJyb2tlci5zZW5kSW50ZW50KHNuYXBzaG90KVxuICAgICAgfVxuICAgICAgaW50ZW50VGltZXIgPSBzZXRUaW1lb3V0KHB1bXBJbnRlbnQsIDEwMClcbiAgICB9XG4gICAgcHVtcEludGVudCgpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3RvcHBlZCA9IHRydWVcbiAgICAgIGlmIChpbnRlbnRUaW1lcikgY2xlYXJUaW1lb3V0KGludGVudFRpbWVyKVxuICAgICAgdW5zdWJzY3JpYmUoKVxuICAgICAgYnJva2VyLmNsb3NlKClcbiAgICAgIGRpc3Bvc2UoKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAnZml4ZWQnLCBpbnNldDogMCwgb3ZlcmZsb3c6ICdoaWRkZW4nIH19PlxuICAgICAgPGRpdiByZWY9e21vdW50UmVmfSBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgaW5zZXQ6IDAgfX0gLz5cbiAgICAgIHshcmVhZHkgJiYgPExvYWRpbmdPdmVybGF5IC8+fVxuICAgICAgPEhVRCBnZXRTdGF0ZT17KCkgPT4gYXBpUmVmLmN1cnJlbnQ/LmdldFN0YXRlKCl9IGFjdGlvbnM9eygpID0+IGFwaVJlZi5jdXJyZW50Py5hY3Rpb25zfSAvPlxuICAgIDwvZGl2PlxuICApXG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJpbml0R2FtZSIsIkRFRkFVTFRfU0NFTkVfT1BUUyIsImNyZWF0ZUJyb2tlckNsaWVudCIsIkhVRCIsIkxvYWRpbmdPdmVybGF5IiwiZHluYW1pYyIsIkdhbWVwbGF5UGFnZSIsIm1vdW50UmVmIiwiYXBpUmVmIiwicmVhZHkiLCJzZXRSZWFkeSIsImN1cnJlbnQiLCJhcGkiLCJkaXNwb3NlIiwiYnJva2VyIiwiY2xpZW50SWQiLCJ1bnN1YnNjcmliZSIsIm9uV29ybGREaWZmIiwiZGlmZiIsImluZ2VzdFdvcmxkRGlmZiIsInN0b3BwZWQiLCJpbnRlbnRUaW1lciIsInB1bXBJbnRlbnQiLCJzbmFwc2hvdCIsInNhbXBsZUludGVudCIsInNlbmRJbnRlbnQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY2xvc2UiLCJkaXYiLCJzdHlsZSIsInBvc2l0aW9uIiwiaW5zZXQiLCJvdmVyZmxvdyIsInJlZiIsImdldFN0YXRlIiwiYWN0aW9ucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/gameplay/page.tsx\n");

/***/ }),

/***/ "(ssr)/./src/camera/chaseCam.ts":
/*!********************************!*\
  !*** ./src/camera/chaseCam.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createChaseCam: () => (/* binding */ createChaseCam)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction createChaseCam(camera) {\n    const offset = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 10, -20);\n    const lookOffset = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 4, 0);\n    const tmp = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const lerp = (a, b, t)=>a + (b - a) * t;\n    return {\n        update (dt, target) {\n            tmp.copy(target.position).add(target.getWorldDirection(new three__WEBPACK_IMPORTED_MODULE_0__.Vector3()).multiplyScalar(-offset.z));\n            tmp.y = target.position.y + offset.y;\n            camera.position.x = lerp(camera.position.x, tmp.x, 1 - Math.exp(-6 * dt));\n            camera.position.y = lerp(camera.position.y, tmp.y, 1 - Math.exp(-6 * dt));\n            camera.position.z = lerp(camera.position.z, tmp.z, 1 - Math.exp(-6 * dt));\n            const look = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3().copy(target.position).add(lookOffset);\n            camera.lookAt(look);\n            camera.fov = 70 + Math.min(20, (target.userData.speed || 0) * 0.05);\n            camera.updateProjectionMatrix();\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY2FtZXJhL2NoYXNlQ2FtLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCO0FBRXZCLFNBQVNDLGVBQWVDLE1BQStCO0lBQzVELE1BQU1DLFNBQVMsSUFBSUgsMENBQWEsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUN6QyxNQUFNSyxhQUFhLElBQUlMLDBDQUFhLENBQUMsR0FBRyxHQUFHO0lBQzNDLE1BQU1NLE1BQU0sSUFBSU4sMENBQWE7SUFDN0IsTUFBTU8sT0FBTyxDQUFDQyxHQUFTQyxHQUFTQyxJQUFXRixJQUFFLENBQUNDLElBQUVELENBQUFBLElBQUdFO0lBRW5ELE9BQU87UUFDTEMsUUFBT0MsRUFBVSxFQUFFQyxNQUFzQjtZQUN2Q1AsSUFBSVEsSUFBSSxDQUFDRCxPQUFPRSxRQUFRLEVBQUVDLEdBQUcsQ0FBQ0gsT0FBT0ksaUJBQWlCLENBQUMsSUFBSWpCLDBDQUFhLElBQUlrQixjQUFjLENBQUMsQ0FBQ2YsT0FBT2dCLENBQUM7WUFDcEdiLElBQUljLENBQUMsR0FBR1AsT0FBT0UsUUFBUSxDQUFDSyxDQUFDLEdBQUdqQixPQUFPaUIsQ0FBQztZQUNwQ2xCLE9BQU9hLFFBQVEsQ0FBQ00sQ0FBQyxHQUFHZCxLQUFLTCxPQUFPYSxRQUFRLENBQUNNLENBQUMsRUFBRWYsSUFBSWUsQ0FBQyxFQUFFLElBQUlDLEtBQUtDLEdBQUcsQ0FBQyxDQUFDLElBQUVYO1lBQ25FVixPQUFPYSxRQUFRLENBQUNLLENBQUMsR0FBR2IsS0FBS0wsT0FBT2EsUUFBUSxDQUFDSyxDQUFDLEVBQUVkLElBQUljLENBQUMsRUFBRSxJQUFJRSxLQUFLQyxHQUFHLENBQUMsQ0FBQyxJQUFFWDtZQUNuRVYsT0FBT2EsUUFBUSxDQUFDSSxDQUFDLEdBQUdaLEtBQUtMLE9BQU9hLFFBQVEsQ0FBQ0ksQ0FBQyxFQUFFYixJQUFJYSxDQUFDLEVBQUUsSUFBSUcsS0FBS0MsR0FBRyxDQUFDLENBQUMsSUFBRVg7WUFDbkUsTUFBTVksT0FBTyxJQUFJeEIsMENBQWEsR0FBR2MsSUFBSSxDQUFDRCxPQUFPRSxRQUFRLEVBQUVDLEdBQUcsQ0FBQ1g7WUFDM0RILE9BQU91QixNQUFNLENBQUNEO1lBQ2R0QixPQUFPd0IsR0FBRyxHQUFHLEtBQUtKLEtBQUtLLEdBQUcsQ0FBQyxJQUFJLENBQUNkLE9BQU9lLFFBQVEsQ0FBQ0MsS0FBSyxJQUFFLEtBQUc7WUFDMUQzQixPQUFPNEIsc0JBQXNCO1FBQy9CO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvY2FtZXJhL2NoYXNlQ2FtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhc2VDYW0oY2FtZXJhOiBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSkge1xuICBjb25zdCBvZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAxMCwgLTIwKVxuICBjb25zdCBsb29rT2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgNCwgMClcbiAgY29uc3QgdG1wID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICBjb25zdCBsZXJwID0gKGE6bnVtYmVyLGI6bnVtYmVyLHQ6bnVtYmVyKT0+YSsoYi1hKSp0XG5cbiAgcmV0dXJuIHtcbiAgICB1cGRhdGUoZHQ6IG51bWJlciwgdGFyZ2V0OiBUSFJFRS5PYmplY3QzRCkge1xuICAgICAgdG1wLmNvcHkodGFyZ2V0LnBvc2l0aW9uKS5hZGQodGFyZ2V0LmdldFdvcmxkRGlyZWN0aW9uKG5ldyBUSFJFRS5WZWN0b3IzKCkpLm11bHRpcGx5U2NhbGFyKC1vZmZzZXQueikpXG4gICAgICB0bXAueSA9IHRhcmdldC5wb3NpdGlvbi55ICsgb2Zmc2V0LnlcbiAgICAgIGNhbWVyYS5wb3NpdGlvbi54ID0gbGVycChjYW1lcmEucG9zaXRpb24ueCwgdG1wLngsIDEgLSBNYXRoLmV4cCgtNipkdCkpXG4gICAgICBjYW1lcmEucG9zaXRpb24ueSA9IGxlcnAoY2FtZXJhLnBvc2l0aW9uLnksIHRtcC55LCAxIC0gTWF0aC5leHAoLTYqZHQpKVxuICAgICAgY2FtZXJhLnBvc2l0aW9uLnogPSBsZXJwKGNhbWVyYS5wb3NpdGlvbi56LCB0bXAueiwgMSAtIE1hdGguZXhwKC02KmR0KSlcbiAgICAgIGNvbnN0IGxvb2sgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmNvcHkodGFyZ2V0LnBvc2l0aW9uKS5hZGQobG9va09mZnNldClcbiAgICAgIGNhbWVyYS5sb29rQXQobG9vaylcbiAgICAgIGNhbWVyYS5mb3YgPSA3MCArIE1hdGgubWluKDIwLCAodGFyZ2V0LnVzZXJEYXRhLnNwZWVkfHwwKSowLjA1KVxuICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIlRIUkVFIiwiY3JlYXRlQ2hhc2VDYW0iLCJjYW1lcmEiLCJvZmZzZXQiLCJWZWN0b3IzIiwibG9va09mZnNldCIsInRtcCIsImxlcnAiLCJhIiwiYiIsInQiLCJ1cGRhdGUiLCJkdCIsInRhcmdldCIsImNvcHkiLCJwb3NpdGlvbiIsImFkZCIsImdldFdvcmxkRGlyZWN0aW9uIiwibXVsdGlwbHlTY2FsYXIiLCJ6IiwieSIsIngiLCJNYXRoIiwiZXhwIiwibG9vayIsImxvb2tBdCIsImZvdiIsIm1pbiIsInVzZXJEYXRhIiwic3BlZWQiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/camera/chaseCam.ts\n");

/***/ }),

/***/ "(ssr)/./src/components/HUD.tsx":
/*!********************************!*\
  !*** ./src/components/HUD.tsx ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HUD: () => (/* binding */ HUD)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ HUD auto */ \n\nfunction HUD({ getState, actions }) {\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(undefined);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"HUD.useEffect\": ()=>{\n            let raf = 0;\n            const loop = {\n                \"HUD.useEffect.loop\": ()=>{\n                    setState(getState());\n                    raf = requestAnimationFrame(loop);\n                }\n            }[\"HUD.useEffect.loop\"];\n            loop();\n            return ({\n                \"HUD.useEffect\": ()=>cancelAnimationFrame(raf)\n            })[\"HUD.useEffect\"];\n        }\n    }[\"HUD.useEffect\"], [\n        getState\n    ]);\n    // ---------- Toolbar wiring ----------\n    const acts = actions?.();\n    const hotkeys = [\n        '1',\n        '2',\n        '3',\n        '4',\n        '5',\n        '6',\n        '7',\n        '8'\n    ];\n    const labels = [\n        'Missile',\n        'Laser',\n        'Bomb',\n        'Gatling',\n        'Shield',\n        'Heal',\n        'Dash',\n        'Ult'\n    ];\n    const laserMax = 4000 // ms (design)\n    ;\n    const cooldownPct = [\n        0,\n        Math.max(0, Math.min(1, (state?.laserCooldown ?? 0) / laserMax)),\n        0,\n        0,\n        0,\n        0,\n        0,\n        0\n    ];\n    const counts = [\n        state?.missiles ?? 0,\n        Math.ceil((state?.laserCooldown ?? 0) / 1000),\n        state?.bombArmed ? 1 : 0,\n        state?.ammo ?? 0,\n        0,\n        0,\n        0,\n        0\n    ];\n    function trigger(i) {\n        if (acts?.activateSpecial) return acts.activateSpecial(i);\n        switch(i){\n            case 0:\n                return acts?.fireMissile?.();\n            case 1:\n                return acts?.fireLaser?.();\n            case 2:\n                return acts?.dropBomb?.();\n            case 3:\n                return acts?.firePrimary?.();\n            case 4:\n                return acts?.shield?.();\n            case 5:\n                return acts?.heal?.();\n            case 6:\n                return acts?.dash?.();\n            case 7:\n                return acts?.ultimate?.();\n        }\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"HUD.useEffect\": ()=>{\n            const onKey = {\n                \"HUD.useEffect.onKey\": (e)=>{\n                    const idx = hotkeys.indexOf(e.key);\n                    if (idx >= 0) {\n                        e.preventDefault();\n                        trigger(idx);\n                    }\n                }\n            }[\"HUD.useEffect.onKey\"];\n            window.addEventListener('keydown', onKey);\n            return ({\n                \"HUD.useEffect\": ()=>window.removeEventListener('keydown', onKey)\n            })[\"HUD.useEffect\"];\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"HUD.useEffect\"], [\n        acts\n    ]);\n    // ---------- UI ----------\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            position: 'absolute',\n            inset: 0,\n            pointerEvents: 'none'\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    left: 16,\n                    top: 12,\n                    display: 'grid',\n                    gap: 6,\n                    fontFamily: 'monospace'\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"SPD: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: state?.speed?.toFixed?.(0) ?? '--'\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 97,\n                                columnNumber: 19\n                            }, this),\n                            \" m/s\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 97,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"ALT: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: state?.altitude?.toFixed?.(0) ?? '--'\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 98,\n                                columnNumber: 19\n                            }, this),\n                            \" m AGL\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 98,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"STAGE: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: state?.stage ?? 1\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 99,\n                                columnNumber: 21\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 99,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"SCORE: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: state?.score ?? 0\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 100,\n                                columnNumber: 21\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 100,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/app/src/components/HUD.tsx\",\n                lineNumber: 96,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    right: 16,\n                    top: 12,\n                    textAlign: 'right',\n                    fontFamily: 'monospace'\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"WEAPON: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: state?.weapon ?? 'GATLING'\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 105,\n                                columnNumber: 22\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 105,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"AMMO: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: state?.ammo ?? 0\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 106,\n                                columnNumber: 20\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 106,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"MIS: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: state?.missiles ?? 0\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 107,\n                                columnNumber: 19\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 107,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"LASER CD: \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"b\", {\n                                children: Math.max(0, (state?.laserCooldown ?? 0) / 1000).toFixed(1)\n                            }, void 0, false, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 108,\n                                columnNumber: 24\n                            }, this),\n                            \"s\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 108,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/app/src/components/HUD.tsx\",\n                lineNumber: 104,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    inset: 0,\n                    display: 'grid',\n                    placeItems: 'center',\n                    opacity: 0.85\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        width: 18,\n                        height: 18,\n                        border: '2px solid #8cf',\n                        borderRadius: 4,\n                        boxShadow: '0 0 12px #9df',\n                        transform: 'translateY(-8px)'\n                    }\n                }, void 0, false, {\n                    fileName: \"/app/src/components/HUD.tsx\",\n                    lineNumber: 113,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/app/src/components/HUD.tsx\",\n                lineNumber: 112,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    left: '50%',\n                    top: '50%',\n                    transform: 'translate(-50%, -50%) translateY(32px)',\n                    fontSize: 12,\n                    opacity: .6\n                },\n                children: \"move: mouse • throttle: W/S • roll: Q/E • yaw: A/D • boost: Shift • fire: Space • bomb: F • 1..8 specials\"\n            }, void 0, false, {\n                fileName: \"/app/src/components/HUD.tsx\",\n                lineNumber: 120,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    left: '50%',\n                    bottom: 36,\n                    transform: 'translateX(-50%)',\n                    pointerEvents: 'auto',\n                    fontFamily: 'monospace'\n                },\n                \"aria-label\": \"Special toolbar\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        padding: '8px 12px',\n                        background: '#3a2a1b',\n                        border: '3px solid #493b2a',\n                        borderRadius: 12,\n                        boxShadow: 'inset 0 0 0 2px #0008, 0 8px 0 #0006, 0 0 14px #000c'\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            display: 'flex',\n                            gap: 10\n                        },\n                        children: Array.from({\n                            length: 8\n                        }).map((_, i)=>{\n                            const cd = Math.max(0, Math.min(1, cooldownPct[i] || 0));\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>trigger(i),\n                                title: `${labels[i]}  [${hotkeys[i]}]`,\n                                style: {\n                                    position: 'relative',\n                                    width: 64,\n                                    height: 64,\n                                    borderRadius: 10,\n                                    cursor: 'pointer',\n                                    background: '#1a2230',\n                                    border: '3px solid #0e1219',\n                                    boxShadow: 'inset 0 0 0 2px #0007, 0 4px 0 #0006, 0 0 10px #000b',\n                                    color: '#fff',\n                                    textShadow: '1px 1px 0 #000a',\n                                    pointerEvents: 'auto'\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        style: {\n                                            position: 'absolute',\n                                            left: 6,\n                                            top: 4,\n                                            fontSize: 12,\n                                            fontWeight: 700,\n                                            color: '#8de1ff',\n                                            background: '#2d3e53',\n                                            border: '2px solid #101922',\n                                            borderRadius: 6,\n                                            padding: '1px 5px'\n                                        },\n                                        children: hotkeys[i]\n                                    }, void 0, false, {\n                                        fileName: \"/app/src/components/HUD.tsx\",\n                                        lineNumber: 155,\n                                        columnNumber: 19\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        style: {\n                                            fontSize: 12,\n                                            opacity: .9\n                                        },\n                                        children: labels[i]\n                                    }, void 0, false, {\n                                        fileName: \"/app/src/components/HUD.tsx\",\n                                        lineNumber: 162,\n                                        columnNumber: 19\n                                    }, this),\n                                    typeof counts[i] === 'number' ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        style: {\n                                            position: 'absolute',\n                                            right: 6,\n                                            bottom: 4,\n                                            fontWeight: 700\n                                        },\n                                        children: counts[i]\n                                    }, void 0, false, {\n                                        fileName: \"/app/src/components/HUD.tsx\",\n                                        lineNumber: 166,\n                                        columnNumber: 21\n                                    }, this) : null,\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        style: {\n                                            position: 'absolute',\n                                            left: 0,\n                                            right: 0,\n                                            bottom: 0,\n                                            height: `${cd * 100}%`,\n                                            background: 'linear-gradient(#0008,#0000 30%), repeating-linear-gradient(135deg,#0004 0 6px,#0000 6px 12px)',\n                                            borderBottomLeftRadius: 7,\n                                            borderBottomRightRadius: 7,\n                                            pointerEvents: 'none'\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/app/src/components/HUD.tsx\",\n                                        lineNumber: 172,\n                                        columnNumber: 19\n                                    }, this)\n                                ]\n                            }, i, true, {\n                                fileName: \"/app/src/components/HUD.tsx\",\n                                lineNumber: 143,\n                                columnNumber: 17\n                            }, this);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/app/src/components/HUD.tsx\",\n                        lineNumber: 139,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/app/src/components/HUD.tsx\",\n                    lineNumber: 132,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/app/src/components/HUD.tsx\",\n                lineNumber: 125,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/app/src/components/HUD.tsx\",\n        lineNumber: 94,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9IVUQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUMyQztBQWNwQyxTQUFTRSxJQUFJLEVBQ2xCQyxRQUFRLEVBQ1JDLE9BQU8sRUFjUjtJQUNDLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHTCwrQ0FBUUEsQ0FBdUJNO0lBRXpEUCxnREFBU0E7eUJBQUM7WUFDUixJQUFJUSxNQUFNO1lBQ1YsTUFBTUM7c0NBQU87b0JBQ1hILFNBQVNIO29CQUNUSyxNQUFNRSxzQkFBc0JEO2dCQUM5Qjs7WUFDQUE7WUFDQTtpQ0FBTyxJQUFNRSxxQkFBcUJIOztRQUNwQzt3QkFBRztRQUFDTDtLQUFTO0lBRWIsdUNBQXVDO0lBQ3ZDLE1BQU1TLE9BQU9SO0lBQ2IsTUFBTVMsVUFBVTtRQUFDO1FBQUk7UUFBSTtRQUFJO1FBQUk7UUFBSTtRQUFJO1FBQUk7S0FBSTtJQUNqRCxNQUFNQyxTQUFVO1FBQUM7UUFBVTtRQUFRO1FBQU87UUFBVTtRQUFTO1FBQU87UUFBTztLQUFNO0lBRWpGLE1BQU1DLFdBQVcsS0FBSyxjQUFjOztJQUNwQyxNQUFNQyxjQUFjO1FBQ2xCO1FBQ0FDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxHQUFHLENBQUMsR0FBRyxDQUFDZCxPQUFPZSxpQkFBaUIsS0FBS0w7UUFDdEQ7UUFBRztRQUFHO1FBQUc7UUFBRztRQUFHO0tBQ2hCO0lBRUQsTUFBTU0sU0FBbUI7UUFDdkJoQixPQUFPaUIsWUFBWTtRQUNuQkwsS0FBS00sSUFBSSxDQUFDLENBQUNsQixPQUFPZSxpQkFBaUIsS0FBSztRQUN4Q2YsT0FBT21CLFlBQVksSUFBSTtRQUN2Qm5CLE9BQU9vQixRQUFRO1FBQ2Y7UUFBRztRQUFHO1FBQUc7S0FDVjtJQUVELFNBQVNDLFFBQVFDLENBQVM7UUFDeEIsSUFBSWYsTUFBTWdCLGlCQUFpQixPQUFPaEIsS0FBS2dCLGVBQWUsQ0FBQ0Q7UUFDdkQsT0FBUUE7WUFDTixLQUFLO2dCQUFHLE9BQU9mLE1BQU1pQjtZQUNyQixLQUFLO2dCQUFHLE9BQU9qQixNQUFNa0I7WUFDckIsS0FBSztnQkFBRyxPQUFPbEIsTUFBTW1CO1lBQ3JCLEtBQUs7Z0JBQUcsT0FBT25CLE1BQU1vQjtZQUNyQixLQUFLO2dCQUFHLE9BQU9wQixNQUFNcUI7WUFDckIsS0FBSztnQkFBRyxPQUFPckIsTUFBTXNCO1lBQ3JCLEtBQUs7Z0JBQUcsT0FBT3RCLE1BQU11QjtZQUNyQixLQUFLO2dCQUFHLE9BQU92QixNQUFNd0I7UUFDdkI7SUFDRjtJQUVBcEMsZ0RBQVNBO3lCQUFDO1lBQ1IsTUFBTXFDO3VDQUFRLENBQUNDO29CQUNiLE1BQU1DLE1BQU0xQixRQUFRMkIsT0FBTyxDQUFDRixFQUFFRyxHQUFHO29CQUNqQyxJQUFJRixPQUFPLEdBQUc7d0JBQ1pELEVBQUVJLGNBQWM7d0JBQ2hCaEIsUUFBUWE7b0JBQ1Y7Z0JBQ0Y7O1lBQ0FJLE9BQU9DLGdCQUFnQixDQUFDLFdBQVdQO1lBQ25DO2lDQUFPLElBQU1NLE9BQU9FLG1CQUFtQixDQUFDLFdBQVdSOztRQUNuRCx1REFBdUQ7UUFDekQ7d0JBQUc7UUFBQ3pCO0tBQUs7SUFFVCwyQkFBMkI7SUFDM0IscUJBQ0UsOERBQUNrQztRQUFJQyxPQUFPO1lBQUVDLFVBQVM7WUFBWUMsT0FBTTtZQUFHQyxlQUFjO1FBQU87OzBCQUUvRCw4REFBQ0o7Z0JBQUlDLE9BQU87b0JBQUVDLFVBQVM7b0JBQVlHLE1BQUs7b0JBQUlDLEtBQUk7b0JBQUlDLFNBQVE7b0JBQVFDLEtBQUk7b0JBQUdDLFlBQVc7Z0JBQVk7O2tDQUNoRyw4REFBQ1Q7OzRCQUFJOzBDQUFLLDhEQUFDVTswQ0FBR25ELE9BQU9vRCxPQUFPQyxVQUFVLE1BQU07Ozs7Ozs0QkFBUzs7Ozs7OztrQ0FDckQsOERBQUNaOzs0QkFBSTswQ0FBSyw4REFBQ1U7MENBQUduRCxPQUFPc0QsVUFBVUQsVUFBVSxNQUFNOzs7Ozs7NEJBQVM7Ozs7Ozs7a0NBQ3hELDhEQUFDWjs7NEJBQUk7MENBQU8sOERBQUNVOzBDQUFHbkQsT0FBT3VELFNBQVM7Ozs7Ozs7Ozs7OztrQ0FDaEMsOERBQUNkOzs0QkFBSTswQ0FBTyw4REFBQ1U7MENBQUduRCxPQUFPd0QsU0FBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQUlsQyw4REFBQ2Y7Z0JBQUlDLE9BQU87b0JBQUVDLFVBQVM7b0JBQVljLE9BQU07b0JBQUlWLEtBQUk7b0JBQUlXLFdBQVU7b0JBQVNSLFlBQVc7Z0JBQVk7O2tDQUM3Riw4REFBQ1Q7OzRCQUFJOzBDQUFRLDhEQUFDVTswQ0FBR25ELE9BQU8yRCxVQUFVOzs7Ozs7Ozs7Ozs7a0NBQ2xDLDhEQUFDbEI7OzRCQUFJOzBDQUFNLDhEQUFDVTswQ0FBR25ELE9BQU9vQixRQUFROzs7Ozs7Ozs7Ozs7a0NBQzlCLDhEQUFDcUI7OzRCQUFJOzBDQUFLLDhEQUFDVTswQ0FBR25ELE9BQU9pQixZQUFZOzs7Ozs7Ozs7Ozs7a0NBQ2pDLDhEQUFDd0I7OzRCQUFJOzBDQUFVLDhEQUFDVTswQ0FBR3ZDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHLENBQUNiLE9BQU9lLGlCQUFpQixLQUFHLE1BQU1zQyxPQUFPLENBQUM7Ozs7Ozs0QkFBTzs7Ozs7Ozs7Ozs7OzswQkFJbEYsOERBQUNaO2dCQUFJQyxPQUFPO29CQUFFQyxVQUFTO29CQUFZQyxPQUFNO29CQUFHSSxTQUFRO29CQUFRWSxZQUFXO29CQUFVQyxTQUFRO2dCQUFLOzBCQUM1Riw0RUFBQ3BCO29CQUFJQyxPQUFPO3dCQUNWb0IsT0FBTTt3QkFBSUMsUUFBTzt3QkFBSUMsUUFBTzt3QkFBa0JDLGNBQWE7d0JBQzNEQyxXQUFVO3dCQUFpQkMsV0FBVTtvQkFDdkM7Ozs7Ozs7Ozs7OzBCQUlGLDhEQUFDMUI7Z0JBQUlDLE9BQU87b0JBQUVDLFVBQVM7b0JBQVlHLE1BQUs7b0JBQU9DLEtBQUk7b0JBQU9vQixXQUFVO29CQUEwQ0MsVUFBUztvQkFBSVAsU0FBUTtnQkFBRzswQkFBRzs7Ozs7OzBCQUt6SSw4REFBQ3BCO2dCQUNDQyxPQUFPO29CQUNMQyxVQUFTO29CQUFZRyxNQUFLO29CQUFPdUIsUUFBTztvQkFBSUYsV0FBVTtvQkFDdER0QixlQUFjO29CQUFRSyxZQUFXO2dCQUNuQztnQkFDQW9CLGNBQVc7MEJBRVgsNEVBQUM3QjtvQkFDQ0MsT0FBTzt3QkFDTDZCLFNBQVE7d0JBQ1JDLFlBQVc7d0JBQVdSLFFBQU87d0JBQXFCQyxjQUFhO3dCQUMvREMsV0FBVTtvQkFDWjs4QkFFQSw0RUFBQ3pCO3dCQUFJQyxPQUFPOzRCQUFFTSxTQUFROzRCQUFRQyxLQUFJO3dCQUFHO2tDQUNsQ3dCLE1BQU1DLElBQUksQ0FBQzs0QkFBQ0MsUUFBTzt3QkFBQyxHQUFHQyxHQUFHLENBQUMsQ0FBQ0MsR0FBR3ZEOzRCQUM5QixNQUFNd0QsS0FBS2xFLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxHQUFHLENBQUMsR0FBR0gsV0FBVyxDQUFDVyxFQUFFLElBQUk7NEJBQ3JELHFCQUNFLDhEQUFDeUQ7Z0NBRUNDLFNBQVMsSUFBTTNELFFBQVFDO2dDQUN2QjJELE9BQU8sR0FBR3hFLE1BQU0sQ0FBQ2EsRUFBRSxDQUFDLEdBQUcsRUFBRWQsT0FBTyxDQUFDYyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dDQUN0Q29CLE9BQU87b0NBQ0xDLFVBQVM7b0NBQVltQixPQUFNO29DQUFJQyxRQUFPO29DQUFJRSxjQUFhO29DQUFJaUIsUUFBTztvQ0FDbEVWLFlBQVc7b0NBQVdSLFFBQU87b0NBQzdCRSxXQUFVO29DQUNWaUIsT0FBTTtvQ0FBUUMsWUFBVztvQ0FBbUJ2QyxlQUFjO2dDQUM1RDs7a0RBR0EsOERBQUN3Qzt3Q0FBSzNDLE9BQU87NENBQ1hDLFVBQVM7NENBQVlHLE1BQUs7NENBQUdDLEtBQUk7NENBQUdxQixVQUFTOzRDQUFJa0IsWUFBVzs0Q0FDNURILE9BQU07NENBQVdYLFlBQVc7NENBQVdSLFFBQU87NENBQzlDQyxjQUFhOzRDQUFHTSxTQUFRO3dDQUMxQjtrREFBSS9ELE9BQU8sQ0FBQ2MsRUFBRTs7Ozs7O2tEQUdkLDhEQUFDK0Q7d0NBQUszQyxPQUFPOzRDQUFFMEIsVUFBUzs0Q0FBSVAsU0FBUTt3Q0FBRztrREFBSXBELE1BQU0sQ0FBQ2EsRUFBRTs7Ozs7O29DQUduRCxPQUFPTixNQUFNLENBQUNNLEVBQUUsS0FBSyx5QkFDcEIsOERBQUMrRDt3Q0FBSzNDLE9BQU87NENBQUVDLFVBQVM7NENBQVljLE9BQU07NENBQUdZLFFBQU87NENBQUdpQixZQUFXO3dDQUFJO2tEQUNuRXRFLE1BQU0sQ0FBQ00sRUFBRTs7Ozs7K0NBRVY7a0RBR0osOERBQUNtQjt3Q0FBSUMsT0FBTzs0Q0FDVkMsVUFBUzs0Q0FBWUcsTUFBSzs0Q0FBR1csT0FBTTs0Q0FBR1ksUUFBTzs0Q0FDN0NOLFFBQVEsR0FBR2UsS0FBRyxJQUFJLENBQUMsQ0FBQzs0Q0FDcEJOLFlBQVk7NENBQ1plLHdCQUF1Qjs0Q0FBR0MseUJBQXdCOzRDQUNsRDNDLGVBQWM7d0NBQ2hCOzs7Ozs7OytCQWxDS3ZCOzs7Ozt3QkFxQ1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNWiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvY29tcG9uZW50cy9IVUQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuXG50eXBlIEh1ZFN0YXRlID0ge1xuICBzcGVlZDogbnVtYmVyXG4gIGFsdGl0dWRlOiBudW1iZXJcbiAgc3RhZ2U6IG51bWJlclxuICBzY29yZTogbnVtYmVyXG4gIHdlYXBvbjogc3RyaW5nXG4gIGFtbW86IG51bWJlclxuICBtaXNzaWxlczogbnVtYmVyXG4gIGxhc2VyQ29vbGRvd246IG51bWJlclxuICBib21iQXJtZWQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEhVRCh7XG4gIGdldFN0YXRlLFxuICBhY3Rpb25zLFxufToge1xuICBnZXRTdGF0ZTogKCkgPT4gSHVkU3RhdGUgfCB1bmRlZmluZWRcbiAgYWN0aW9uczogKCkgPT4ge1xuICAgIGFjdGl2YXRlU3BlY2lhbD86IChpbmRleDogbnVtYmVyKSA9PiB2b2lkXG4gICAgZmlyZU1pc3NpbGU/OiAoKSA9PiB2b2lkXG4gICAgZmlyZUxhc2VyPzogKCkgPT4gdm9pZFxuICAgIGRyb3BCb21iPzogKCkgPT4gdm9pZFxuICAgIGZpcmVQcmltYXJ5PzogKCkgPT4gdm9pZFxuICAgIHNoaWVsZD86ICgpID0+IHZvaWRcbiAgICBoZWFsPzogKCkgPT4gdm9pZFxuICAgIGRhc2g/OiAoKSA9PiB2b2lkXG4gICAgdWx0aW1hdGU/OiAoKSA9PiB2b2lkXG4gIH1cbn0pIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxIdWRTdGF0ZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHJhZiA9IDBcbiAgICBjb25zdCBsb29wID0gKCkgPT4ge1xuICAgICAgc2V0U3RhdGUoZ2V0U3RhdGUoKSlcbiAgICAgIHJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKVxuICAgIH1cbiAgICBsb29wKClcbiAgICByZXR1cm4gKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmKVxuICB9LCBbZ2V0U3RhdGVdKVxuXG4gIC8vIC0tLS0tLS0tLS0gVG9vbGJhciB3aXJpbmcgLS0tLS0tLS0tLVxuICBjb25zdCBhY3RzID0gYWN0aW9ucz8uKClcbiAgY29uc3QgaG90a2V5cyA9IFsnMScsJzInLCczJywnNCcsJzUnLCc2JywnNycsJzgnXVxuICBjb25zdCBsYWJlbHMgID0gWydNaXNzaWxlJywnTGFzZXInLCdCb21iJywnR2F0bGluZycsJ1NoaWVsZCcsJ0hlYWwnLCdEYXNoJywnVWx0J11cblxuICBjb25zdCBsYXNlck1heCA9IDQwMDAgLy8gbXMgKGRlc2lnbilcbiAgY29uc3QgY29vbGRvd25QY3QgPSBbXG4gICAgMCxcbiAgICBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCAoc3RhdGU/Lmxhc2VyQ29vbGRvd24gPz8gMCkgLyBsYXNlck1heCkpLCAvLyBzbG90IDIgKExhc2VyKVxuICAgIDAsIDAsIDAsIDAsIDAsIDAsXG4gIF1cblxuICBjb25zdCBjb3VudHM6IG51bWJlcltdID0gW1xuICAgIHN0YXRlPy5taXNzaWxlcyA/PyAwLCAgICAgICAgICAvLyAxIE1pc3NpbGVcbiAgICBNYXRoLmNlaWwoKHN0YXRlPy5sYXNlckNvb2xkb3duID8/IDApIC8gMTAwMCksIC8vIDIgTGFzZXIgKHNlY29uZHMgbGVmdClcbiAgICBzdGF0ZT8uYm9tYkFybWVkID8gMSA6IDAsICAgICAgLy8gMyBCb21iIGFybWVkXG4gICAgc3RhdGU/LmFtbW8gPz8gMCwgICAgICAgICAgICAgIC8vIDQgR2F0bGluZyBhbW1vXG4gICAgMCwgMCwgMCwgMCwgICAgICAgICAgICAgICAgICAgIC8vIDUuLjggbWlzY1xuICBdXG5cbiAgZnVuY3Rpb24gdHJpZ2dlcihpOiBudW1iZXIpIHtcbiAgICBpZiAoYWN0cz8uYWN0aXZhdGVTcGVjaWFsKSByZXR1cm4gYWN0cy5hY3RpdmF0ZVNwZWNpYWwoaSlcbiAgICBzd2l0Y2ggKGkpIHtcbiAgICAgIGNhc2UgMDogcmV0dXJuIGFjdHM/LmZpcmVNaXNzaWxlPy4oKVxuICAgICAgY2FzZSAxOiByZXR1cm4gYWN0cz8uZmlyZUxhc2VyPy4oKVxuICAgICAgY2FzZSAyOiByZXR1cm4gYWN0cz8uZHJvcEJvbWI/LigpXG4gICAgICBjYXNlIDM6IHJldHVybiBhY3RzPy5maXJlUHJpbWFyeT8uKClcbiAgICAgIGNhc2UgNDogcmV0dXJuIGFjdHM/LnNoaWVsZD8uKClcbiAgICAgIGNhc2UgNTogcmV0dXJuIGFjdHM/LmhlYWw/LigpXG4gICAgICBjYXNlIDY6IHJldHVybiBhY3RzPy5kYXNoPy4oKVxuICAgICAgY2FzZSA3OiByZXR1cm4gYWN0cz8udWx0aW1hdGU/LigpXG4gICAgfVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvbktleSA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBpZHggPSBob3RrZXlzLmluZGV4T2YoZS5rZXkpXG4gICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIHRyaWdnZXIoaWR4KVxuICAgICAgfVxuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5KVxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5KVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2FjdHNdKVxuXG4gIC8vIC0tLS0tLS0tLS0gVUkgLS0tLS0tLS0tLVxuICByZXR1cm4gKFxuICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246J2Fic29sdXRlJywgaW5zZXQ6MCwgcG9pbnRlckV2ZW50czonbm9uZScgfX0+XG4gICAgICB7LyogVEwgc3RhdHMgKi99XG4gICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOidhYnNvbHV0ZScsIGxlZnQ6MTYsIHRvcDoxMiwgZGlzcGxheTonZ3JpZCcsIGdhcDo2LCBmb250RmFtaWx5Oidtb25vc3BhY2UnIH19PlxuICAgICAgICA8ZGl2PlNQRDogPGI+e3N0YXRlPy5zcGVlZD8udG9GaXhlZD8uKDApID8/ICctLSd9PC9iPiBtL3M8L2Rpdj5cbiAgICAgICAgPGRpdj5BTFQ6IDxiPntzdGF0ZT8uYWx0aXR1ZGU/LnRvRml4ZWQ/LigwKSA/PyAnLS0nfTwvYj4gbSBBR0w8L2Rpdj5cbiAgICAgICAgPGRpdj5TVEFHRTogPGI+e3N0YXRlPy5zdGFnZSA/PyAxfTwvYj48L2Rpdj5cbiAgICAgICAgPGRpdj5TQ09SRTogPGI+e3N0YXRlPy5zY29yZSA/PyAwfTwvYj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogVFIgd2VhcG9uIHJlYWRvdXRzICovfVxuICAgICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjonYWJzb2x1dGUnLCByaWdodDoxNiwgdG9wOjEyLCB0ZXh0QWxpZ246J3JpZ2h0JywgZm9udEZhbWlseTonbW9ub3NwYWNlJyB9fT5cbiAgICAgICAgPGRpdj5XRUFQT046IDxiPntzdGF0ZT8ud2VhcG9uID8/ICdHQVRMSU5HJ308L2I+PC9kaXY+XG4gICAgICAgIDxkaXY+QU1NTzogPGI+e3N0YXRlPy5hbW1vID8/IDB9PC9iPjwvZGl2PlxuICAgICAgICA8ZGl2Pk1JUzogPGI+e3N0YXRlPy5taXNzaWxlcyA/PyAwfTwvYj48L2Rpdj5cbiAgICAgICAgPGRpdj5MQVNFUiBDRDogPGI+e01hdGgubWF4KDAsIChzdGF0ZT8ubGFzZXJDb29sZG93biA/PyAwKS8xMDAwKS50b0ZpeGVkKDEpfTwvYj5zPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIENlbnRlciByZXRpY2xlICovfVxuICAgICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjonYWJzb2x1dGUnLCBpbnNldDowLCBkaXNwbGF5OidncmlkJywgcGxhY2VJdGVtczonY2VudGVyJywgb3BhY2l0eTowLjg1IH19PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgd2lkdGg6MTgsIGhlaWdodDoxOCwgYm9yZGVyOicycHggc29saWQgIzhjZicsIGJvcmRlclJhZGl1czo0LFxuICAgICAgICAgIGJveFNoYWRvdzonMCAwIDEycHggIzlkZicsIHRyYW5zZm9ybTondHJhbnNsYXRlWSgtOHB4KSdcbiAgICAgICAgfX0vPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBIZWxwIGhpbnQgKi99XG4gICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOidhYnNvbHV0ZScsIGxlZnQ6JzUwJScsIHRvcDonNTAlJywgdHJhbnNmb3JtOid0cmFuc2xhdGUoLTUwJSwgLTUwJSkgdHJhbnNsYXRlWSgzMnB4KScsIGZvbnRTaXplOjEyLCBvcGFjaXR5Oi42IH19PlxuICAgICAgICBtb3ZlOiBtb3VzZSDigKIgdGhyb3R0bGU6IFcvUyDigKIgcm9sbDogUS9FIOKAoiB5YXc6IEEvRCDigKIgYm9vc3Q6IFNoaWZ0IOKAoiBmaXJlOiBTcGFjZSDigKIgYm9tYjogRiDigKIgMS4uOCBzcGVjaWFsc1xuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBCb3R0b20tY2VudGVyIHRvb2xiYXIgKDggc3BlY2lhbHMpICovfVxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHBvc2l0aW9uOidhYnNvbHV0ZScsIGxlZnQ6JzUwJScsIGJvdHRvbTozNiwgdHJhbnNmb3JtOid0cmFuc2xhdGVYKC01MCUpJyxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOidhdXRvJywgZm9udEZhbWlseTonbW9ub3NwYWNlJ1xuICAgICAgICB9fVxuICAgICAgICBhcmlhLWxhYmVsPVwiU3BlY2lhbCB0b29sYmFyXCJcbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBwYWRkaW5nOic4cHggMTJweCcsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOicjM2EyYTFiJywgYm9yZGVyOiczcHggc29saWQgIzQ5M2IyYScsIGJvcmRlclJhZGl1czoxMixcbiAgICAgICAgICAgIGJveFNoYWRvdzonaW5zZXQgMCAwIDAgMnB4ICMwMDA4LCAwIDhweCAwICMwMDA2LCAwIDAgMTRweCAjMDAwYydcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OidmbGV4JywgZ2FwOjEwIH19PlxuICAgICAgICAgICAge0FycmF5LmZyb20oe2xlbmd0aDo4fSkubWFwKChfLCBpKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNkID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgY29vbGRvd25QY3RbaV0gfHwgMCkpXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdHJpZ2dlcihpKX1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHtsYWJlbHNbaV19ICBbJHtob3RrZXlzW2ldfV1gfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246J3JlbGF0aXZlJywgd2lkdGg6NjQsIGhlaWdodDo2NCwgYm9yZGVyUmFkaXVzOjEwLCBjdXJzb3I6J3BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOicjMWEyMjMwJywgYm9yZGVyOiczcHggc29saWQgIzBlMTIxOScsXG4gICAgICAgICAgICAgICAgICAgIGJveFNoYWRvdzonaW5zZXQgMCAwIDAgMnB4ICMwMDA3LCAwIDRweCAwICMwMDA2LCAwIDAgMTBweCAjMDAwYicsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOicjZmZmJywgdGV4dFNoYWRvdzonMXB4IDFweCAwICMwMDBhJywgcG9pbnRlckV2ZW50czonYXV0bydcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgey8qIGhvdGtleSBiYWRnZSAqL31cbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOidhYnNvbHV0ZScsIGxlZnQ6NiwgdG9wOjQsIGZvbnRTaXplOjEyLCBmb250V2VpZ2h0OjcwMCxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6JyM4ZGUxZmYnLCBiYWNrZ3JvdW5kOicjMmQzZTUzJywgYm9yZGVyOicycHggc29saWQgIzEwMTkyMicsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czo2LCBwYWRkaW5nOicxcHggNXB4J1xuICAgICAgICAgICAgICAgICAgfX0+e2hvdGtleXNbaV19PC9zcGFuPlxuXG4gICAgICAgICAgICAgICAgICB7LyogbGFiZWwgb3IgcmVwbGFjZSB3aXRoIGFuIGljb24gbGF0ZXIgKi99XG4gICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBmb250U2l6ZToxMiwgb3BhY2l0eTouOSB9fT57bGFiZWxzW2ldfTwvc3Bhbj5cblxuICAgICAgICAgICAgICAgICAgey8qIGNvdW50IChhbW1vIC8gc2VjcykgKi99XG4gICAgICAgICAgICAgICAgICB7dHlwZW9mIGNvdW50c1tpXSA9PT0gJ251bWJlcicgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IHBvc2l0aW9uOidhYnNvbHV0ZScsIHJpZ2h0OjYsIGJvdHRvbTo0LCBmb250V2VpZ2h0OjcwMCB9fT5cbiAgICAgICAgICAgICAgICAgICAgICB7Y291bnRzW2ldfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgICAgICAgICAgey8qIGNvb2xkb3duIHZlaWwgKGZpbGxzIGZyb20gYm90dG9tKSAqL31cbiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246J2Fic29sdXRlJywgbGVmdDowLCByaWdodDowLCBib3R0b206MCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBgJHtjZCoxMDB9JWAsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoIzAwMDgsIzAwMDAgMzAlKSwgcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCgxMzVkZWcsIzAwMDQgMCA2cHgsIzAwMDAgNnB4IDEycHgpJyxcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czo3LCBib3JkZXJCb3R0b21SaWdodFJhZGl1czo3LFxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOidub25lJ1xuICAgICAgICAgICAgICAgICAgfX0vPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiSFVEIiwiZ2V0U3RhdGUiLCJhY3Rpb25zIiwic3RhdGUiLCJzZXRTdGF0ZSIsInVuZGVmaW5lZCIsInJhZiIsImxvb3AiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImFjdHMiLCJob3RrZXlzIiwibGFiZWxzIiwibGFzZXJNYXgiLCJjb29sZG93blBjdCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJsYXNlckNvb2xkb3duIiwiY291bnRzIiwibWlzc2lsZXMiLCJjZWlsIiwiYm9tYkFybWVkIiwiYW1tbyIsInRyaWdnZXIiLCJpIiwiYWN0aXZhdGVTcGVjaWFsIiwiZmlyZU1pc3NpbGUiLCJmaXJlTGFzZXIiLCJkcm9wQm9tYiIsImZpcmVQcmltYXJ5Iiwic2hpZWxkIiwiaGVhbCIsImRhc2giLCJ1bHRpbWF0ZSIsIm9uS2V5IiwiZSIsImlkeCIsImluZGV4T2YiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGl2Iiwic3R5bGUiLCJwb3NpdGlvbiIsImluc2V0IiwicG9pbnRlckV2ZW50cyIsImxlZnQiLCJ0b3AiLCJkaXNwbGF5IiwiZ2FwIiwiZm9udEZhbWlseSIsImIiLCJzcGVlZCIsInRvRml4ZWQiLCJhbHRpdHVkZSIsInN0YWdlIiwic2NvcmUiLCJyaWdodCIsInRleHRBbGlnbiIsIndlYXBvbiIsInBsYWNlSXRlbXMiLCJvcGFjaXR5Iiwid2lkdGgiLCJoZWlnaHQiLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJib3hTaGFkb3ciLCJ0cmFuc2Zvcm0iLCJmb250U2l6ZSIsImJvdHRvbSIsImFyaWEtbGFiZWwiLCJwYWRkaW5nIiwiYmFja2dyb3VuZCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIm1hcCIsIl8iLCJjZCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJ0aXRsZSIsImN1cnNvciIsImNvbG9yIiwidGV4dFNoYWRvdyIsInNwYW4iLCJmb250V2VpZ2h0IiwiYm9yZGVyQm90dG9tTGVmdFJhZGl1cyIsImJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/HUD.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/LoadingOverlay.tsx":
/*!*******************************************!*\
  !*** ./src/components/LoadingOverlay.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LoadingOverlay: () => (/* binding */ LoadingOverlay)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ LoadingOverlay auto */ \nfunction LoadingOverlay() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeItems: 'center',\n            background: 'linear-gradient(180deg,#0a0d12,#090c11 40%, #0b0f15)'\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            style: {\n                textAlign: 'center'\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        fontSize: 28,\n                        letterSpacing: 2\n                    },\n                    children: \"Spooling Up The War Machine...\"\n                }, void 0, false, {\n                    fileName: \"/app/src/components/LoadingOverlay.tsx\",\n                    lineNumber: 9,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        opacity: 0.7,\n                        marginTop: 8\n                    },\n                    children: \"Initializing terrain, vehicles, and enemies\"\n                }, void 0, false, {\n                    fileName: \"/app/src/components/LoadingOverlay.tsx\",\n                    lineNumber: 10,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/app/src/components/LoadingOverlay.tsx\",\n            lineNumber: 8,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/app/src/components/LoadingOverlay.tsx\",\n        lineNumber: 4,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9Mb2FkaW5nT3ZlcmxheS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNPLFNBQVNBO0lBQ2QscUJBQ0UsOERBQUNDO1FBQUlDLE9BQU87WUFDVkMsVUFBUztZQUFZQyxPQUFNO1lBQUdDLFNBQVE7WUFBUUMsWUFBVztZQUN6REMsWUFBVztRQUNiO2tCQUNFLDRFQUFDTjtZQUFJQyxPQUFPO2dCQUFDTSxXQUFVO1lBQVE7OzhCQUM3Qiw4REFBQ1A7b0JBQUlDLE9BQU87d0JBQUNPLFVBQVM7d0JBQUlDLGVBQWM7b0JBQUM7OEJBQUc7Ozs7Ozs4QkFDNUMsOERBQUNUO29CQUFJQyxPQUFPO3dCQUFDUyxTQUFRO3dCQUFLQyxXQUFVO29CQUFDOzhCQUFHOzs7Ozs7Ozs7Ozs7Ozs7OztBQUloRCIsInNvdXJjZXMiOlsiL2FwcC9zcmMvY29tcG9uZW50cy9Mb2FkaW5nT3ZlcmxheS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5leHBvcnQgZnVuY3Rpb24gTG9hZGluZ092ZXJsYXkoKSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17e1xuICAgICAgcG9zaXRpb246J2Fic29sdXRlJywgaW5zZXQ6MCwgZGlzcGxheTonZ3JpZCcsIHBsYWNlSXRlbXM6J2NlbnRlcicsXG4gICAgICBiYWNrZ3JvdW5kOidsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCMwYTBkMTIsIzA5MGMxMSA0MCUsICMwYjBmMTUpJ1xuICAgIH19PlxuICAgICAgPGRpdiBzdHlsZT17e3RleHRBbGlnbjonY2VudGVyJ319PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MjgsIGxldHRlclNwYWNpbmc6Mn19PlNwb29saW5nIFVwIFRoZSBXYXIgTWFjaGluZS4uLjwvZGl2PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7b3BhY2l0eTowLjcsIG1hcmdpblRvcDo4fX0+SW5pdGlhbGl6aW5nIHRlcnJhaW4sIHZlaGljbGVzLCBhbmQgZW5lbWllczwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJMb2FkaW5nT3ZlcmxheSIsImRpdiIsInN0eWxlIiwicG9zaXRpb24iLCJpbnNldCIsImRpc3BsYXkiLCJwbGFjZUl0ZW1zIiwiYmFja2dyb3VuZCIsInRleHRBbGlnbiIsImZvbnRTaXplIiwibGV0dGVyU3BhY2luZyIsIm9wYWNpdHkiLCJtYXJnaW5Ub3AiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/LoadingOverlay.tsx\n");

/***/ }),

/***/ "(ssr)/./src/enemies/stellated-octahedron/behavior.ts":
/*!******************************************************!*\
  !*** ./src/enemies/stellated-octahedron/behavior.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEnemy: () => (/* binding */ createEnemy),\n/* harmony export */   updateEnemies: () => (/* binding */ updateEnemies)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_utils_BufferGeometryUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/utils/BufferGeometryUtils.js */ \"(ssr)/./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js\");\n/* harmony import */ var _engine_difficulty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/engine/difficulty */ \"(ssr)/./src/engine/difficulty.ts\");\n\n\n\nfunction disposeMeshLike(object) {\n    // 1. Traverse any composed mesh tree and release GPU buffers and materials.\n    const disposedMaterials = new Set();\n    object.traverse((child)=>{\n        if (!(child instanceof three__WEBPACK_IMPORTED_MODULE_1__.Mesh)) return;\n        child.geometry.dispose();\n        const material = child.material;\n        if (Array.isArray(material)) {\n            for (const mat of material){\n                if (!disposedMaterials.has(mat)) {\n                    mat.dispose?.();\n                    disposedMaterials.add(mat);\n                }\n            }\n        } else if (!disposedMaterials.has(material)) {\n            material.dispose?.();\n            disposedMaterials.add(material);\n        }\n    });\n}\nfunction buildStellatedOctahedron(size = 6, variant = 'pursuer') {\n    const group = new three__WEBPACK_IMPORTED_MODULE_1__.Group();\n    // 1. Generate two tetrahedron geometries and mirror one to reproduce the stellated octahedron shell.\n    const primary = new three__WEBPACK_IMPORTED_MODULE_1__.TetrahedronGeometry(size * 0.8, 1); // Higher detail for sharper edges\n    const mirrored = primary.clone();\n    mirrored.rotateX(Math.PI);\n    mirrored.rotateZ(Math.PI / 2);\n    // 2. Merge both buffer geometries using the supported helper to avoid the removed Geometry.merge API.\n    const merged = (0,three_examples_jsm_utils_BufferGeometryUtils_js__WEBPACK_IMPORTED_MODULE_2__.mergeGeometries)([\n        primary,\n        mirrored\n    ], false);\n    if (!merged) throw new Error('Failed to merge stellated octahedron geometry');\n    // 3. Dispose the temporary parts.\n    primary.dispose();\n    mirrored.dispose();\n    // Enhanced body material: Dynamic based on variant for visual distinction\n    let bodyColor = 0xff5533; // Base orange-red\n    let emissive = 0x220000;\n    let roughness = 0.6;\n    let metalness = 0.2;\n    switch(variant){\n        case 'strafer':\n            bodyColor = 0x00ff88; // Neon green for agile flanker\n            emissive = 0x004400;\n            roughness = 0.4;\n            metalness = 0.4;\n            break;\n        case 'sentry':\n            bodyColor = 0x8b0000; // Dark red for stationary turret\n            emissive = 0x440000;\n            roughness = 0.8;\n            metalness = 0.1;\n            break;\n    }\n    const bodyMaterial = new three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial({\n        color: bodyColor,\n        metalness,\n        roughness,\n        emissive,\n        emissiveIntensity: 0.3 // Pulsing glow potential\n    });\n    const body = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(merged, bodyMaterial);\n    group.add(body);\n    // Add menacing spikes: Procedural, variant-specific count and style for danger\n    const spikeGeometry = new three__WEBPACK_IMPORTED_MODULE_1__.ConeGeometry(0.4, 2, 5);\n    const spikeMaterial = new three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial({\n        color: 0x111111,\n        roughness: 0.1,\n        metalness: 0.95 // Razor-sharp reflection\n    });\n    const spikeCount = variant === 'sentry' ? 8 : variant === 'strafer' ? 12 : 6; // More for aggressive variants\n    for(let i = 0; i < spikeCount; i++){\n        const angle = i / spikeCount * Math.PI * 2;\n        const radius = size * 0.7;\n        const heightOffset = (Math.random() - 0.5) * 0.5;\n        const spikePos = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(Math.cos(angle) * radius, heightOffset, Math.sin(angle) * radius);\n        const spike = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(spikeGeometry, spikeMaterial);\n        spike.position.copy(spikePos);\n        // Orient spikes radially outward\n        spike.lookAt(spikePos.clone().multiplyScalar(2));\n        spike.rotateX(Math.PI); // Flip to point out\n        group.add(spike);\n        // Secondary barbs on spikes for extra threat\n        if (Math.random() > 0.3) {\n            const barb = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(new three__WEBPACK_IMPORTED_MODULE_1__.BoxGeometry(0.2, 0.2, 1.5), spikeMaterial);\n            barb.position.copy(spikePos.clone().add(new three__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 0, -1)));\n            barb.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, 0);\n            group.add(barb);\n        }\n    }\n    // Glowing core: Emissive sphere for a volatile energy heart\n    const coreGeometry = new three__WEBPACK_IMPORTED_MODULE_1__.SphereGeometry(size * 0.3, 12, 8);\n    const coreMaterial = new three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial({\n        color: 0xff0000,\n        emissive: 0xff0000,\n        emissiveIntensity: 0.6,\n        transparent: true,\n        opacity: 0.8\n    });\n    const core = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(coreGeometry, coreMaterial);\n    core.position.set(0, 0, 0);\n    group.add(core);\n    // Variant-specific accents\n    if (variant === 'strafer') {\n        // Side vents for speed implication\n        const ventGeometry = new three__WEBPACK_IMPORTED_MODULE_1__.BoxGeometry(1.5, 0.3, 3);\n        const ventMaterial = new three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial({\n            color: 0x00ff88,\n            emissive: 0x004400\n        });\n        const leftVent = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(ventGeometry, ventMaterial);\n        leftVent.position.set(-size * 0.6, 0, 0);\n        group.add(leftVent);\n        const rightVent = leftVent.clone();\n        rightVent.position.set(size * 0.6, 0, 0);\n        group.add(rightVent);\n    } else if (variant === 'sentry') {\n        // Turret base for grounded feel\n        const baseGeometry = new three__WEBPACK_IMPORTED_MODULE_1__.CylinderGeometry(size * 0.9, size * 1.1, 0.5, 8);\n        const baseMaterial = new three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial({\n            color: 0x333333,\n            roughness: 0.9\n        });\n        const base = new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(baseGeometry, baseMaterial);\n        base.position.set(0, -size * 0.6, 0);\n        group.add(base);\n    }\n    // Animation hook: Subtle idle rotation and pulse\n    group.userData = {\n        originalEmissive: bodyMaterial.emissive.clone(),\n        pulseTime: 0,\n        variant\n    };\n    return group;\n}\nfunction createEnemy(scene, position, options = {}) {\n    // 1. Materialise the mesh, position it, and append it to the active scene graph.\n    const mesh = buildStellatedOctahedron(5, options.variant);\n    mesh.position.copy(position);\n    scene.add(mesh);\n    const vel = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3();\n    const dir = new three__WEBPACK_IMPORTED_MODULE_1__.Vector3();\n    const difficulty = options.difficulty ?? (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_0__.getDifficultyState)();\n    const hpBase = 40 * difficulty.enemyHpMultiplier;\n    const acceleration = 18 + difficulty.enemyDpsMultiplier * 6 + (options.variant === 'strafer' ? 4 : 0);\n    const maxSpeed = 36 + difficulty.enemyDpsMultiplier * 8 + (options.variant === 'strafer' ? 10 : 0);\n    const obj = {\n        mesh,\n        hp: hpBase,\n        difficulty,\n        target: undefined,\n        update (dt) {\n            // Enhanced update: Add idle animation and variant-specific behaviors\n            const userData = mesh.userData;\n            userData.pulseTime += dt;\n            // Pulse emissive for threat\n            const pulse = 0.2 + Math.sin(userData.pulseTime * 3) * 0.1;\n            if (mesh.children[0]?.material) {\n                mesh.children[0].material.emissiveIntensity = 0.3 + pulse * 0.2;\n            }\n            if (userData.variant === 'sentry') {\n                // Sentry: Slow turret rotation only when targeting\n                if (this.target) mesh.rotation.y += dt * 0.5;\n            } else {\n                // Others: Gentle idle spin\n                mesh.rotation.y += dt * 0.01;\n            }\n            if (this.target) {\n                dir.copy(this.target.position).sub(mesh.position);\n                const distance = dir.length() || 1;\n                dir.normalize();\n                const aimAssist = three__WEBPACK_IMPORTED_MODULE_1__.MathUtils.lerp(0.6, 1, difficulty.enemyAccuracy);\n                vel.addScaledVector(dir, acceleration * aimAssist * dt);\n                (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_0__.applyEnvironmentVectorAttenuation)(vel);\n                const clamped = Math.min(maxSpeed, maxSpeed * (distance > 180 ? 1.1 : 1));\n                vel.clampLength(0, clamped);\n                mesh.position.addScaledVector(vel, dt);\n                mesh.lookAt(this.target.position);\n                // Strafer: Zigzag pattern for evasion\n                if (userData.variant === 'strafer' && Math.random() < 0.02) {\n                    vel.add(new three__WEBPACK_IMPORTED_MODULE_1__.Vector3((Math.random() - 0.5) * 20, 0, 0));\n                }\n            }\n        },\n        onDeath () {\n            scene.remove(mesh);\n            disposeMeshLike(mesh);\n        }\n    };\n    // 2. Track the enemy so the wave manager can iterate and update per frame.\n    ;\n    scene.__enemies ??= [];\n    ;\n    scene.__enemies.push(obj);\n    return obj;\n}\nfunction updateEnemies(scene, dt, difficulty) {\n    // 1. Advance each tracked enemy AI using the shared scene registry.\n    const arr = scene.__enemies;\n    if (!arr) return;\n    for (const e of arr){\n        e.difficulty = difficulty;\n        e.update(dt);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvZW5lbWllcy9zdGVsbGF0ZWQtb2N0YWhlZHJvbi9iZWhhdmlvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUErQjtBQUNtRDtBQUNVO0FBUTVGLFNBQVNJLGdCQUFnQkMsTUFBc0I7SUFDN0MsNEVBQTRFO0lBQzVFLE1BQU1DLG9CQUFvQixJQUFJQztJQUM5QkYsT0FBT0csUUFBUSxDQUFDLENBQUNDO1FBQ2YsSUFBSSxDQUFFQSxDQUFBQSxpQkFBaUJULHVDQUFVLEdBQUc7UUFDcENTLE1BQU1FLFFBQVEsQ0FBQ0MsT0FBTztRQUN0QixNQUFNQyxXQUFXSixNQUFNSSxRQUFRO1FBQy9CLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsV0FBVztZQUMzQixLQUFLLE1BQU1HLE9BQU9ILFNBQVU7Z0JBQzFCLElBQUksQ0FBQ1Asa0JBQWtCVyxHQUFHLENBQUNELE1BQU07b0JBQy9CQSxJQUFJSixPQUFPO29CQUNYTixrQkFBa0JZLEdBQUcsQ0FBQ0Y7Z0JBQ3hCO1lBQ0Y7UUFDRixPQUFPLElBQUksQ0FBQ1Ysa0JBQWtCVyxHQUFHLENBQUNKLFdBQVc7WUFDM0NBLFNBQVNELE9BQU87WUFDaEJOLGtCQUFrQlksR0FBRyxDQUFDTDtRQUN4QjtJQUNGO0FBQ0Y7QUFFQSxTQUFTTSx5QkFBeUJDLE9BQU8sQ0FBQyxFQUFFQyxVQUFVLFNBQVM7SUFDN0QsTUFBTUMsUUFBUSxJQUFJdEIsd0NBQVc7SUFFN0IscUdBQXFHO0lBQ3JHLE1BQU13QixVQUFVLElBQUl4QixzREFBeUIsQ0FBQ29CLE9BQU8sS0FBSyxJQUFJLGtDQUFrQztJQUNoRyxNQUFNTSxXQUFXRixRQUFRRyxLQUFLO0lBQzlCRCxTQUFTRSxPQUFPLENBQUNDLEtBQUtDLEVBQUU7SUFDeEJKLFNBQVNLLE9BQU8sQ0FBQ0YsS0FBS0MsRUFBRSxHQUFHO0lBQzNCLHNHQUFzRztJQUN0RyxNQUFNRSxTQUFTL0IsZ0dBQWVBLENBQUM7UUFBQ3VCO1FBQVNFO0tBQVMsRUFBRTtJQUNwRCxJQUFJ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QixPQUFPQTtBQUNUO0FBRU8sU0FBU3lCLGNBQWNwQyxLQUFrQixFQUFFZ0IsRUFBVSxFQUFFWCxVQUFrQztJQUM5RixvRUFBb0U7SUFDcEUsTUFBTWdDLE1BQU0sTUFBZUgsU0FBUztJQUNwQyxJQUFJLENBQUNHLEtBQUs7SUFDVixLQUFLLE1BQU1DLEtBQUtELElBQUs7UUFDbkJDLEVBQUVqQyxVQUFVLEdBQUdBO1FBQ2ZpQyxFQUFFdkIsTUFBTSxDQUFDQztJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL2VuZW1pZXMvc3RlbGxhdGVkLW9jdGFoZWRyb24vYmVoYXZpb3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgbWVyZ2VHZW9tZXRyaWVzIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL3V0aWxzL0J1ZmZlckdlb21ldHJ5VXRpbHMuanMnO1xuaW1wb3J0IHsgYXBwbHlFbnZpcm9ubWVudFZlY3RvckF0dGVudWF0aW9uLCBnZXREaWZmaWN1bHR5U3RhdGUgfSBmcm9tICdAL2VuZ2luZS9kaWZmaWN1bHR5JztcblxuZXhwb3J0IHR5cGUgRW5lbXlEaWZmaWN1bHR5Q29udGV4dCA9IFJldHVyblR5cGU8dHlwZW9mIGdldERpZmZpY3VsdHlTdGF0ZT47XG5leHBvcnQgdHlwZSBFbmVteU9wdGlvbnMgPSB7XG4gIGRpZmZpY3VsdHk/OiBFbmVteURpZmZpY3VsdHlDb250ZXh0O1xuICB2YXJpYW50PzogJ3B1cnN1ZXInIHwgJ3N0cmFmZXInIHwgJ3NlbnRyeSc7XG59O1xuXG5mdW5jdGlvbiBkaXNwb3NlTWVzaExpa2Uob2JqZWN0OiBUSFJFRS5PYmplY3QzRCkge1xuICAvLyAxLiBUcmF2ZXJzZSBhbnkgY29tcG9zZWQgbWVzaCB0cmVlIGFuZCByZWxlYXNlIEdQVSBidWZmZXJzIGFuZCBtYXRlcmlhbHMuXG4gIGNvbnN0IGRpc3Bvc2VkTWF0ZXJpYWxzID0gbmV3IFNldDxUSFJFRS5NYXRlcmlhbD4oKTtcbiAgb2JqZWN0LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgIGlmICghKGNoaWxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaCkpIHJldHVybjtcbiAgICBjaGlsZC5nZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgY29uc3QgbWF0ZXJpYWwgPSBjaGlsZC5tYXRlcmlhbDtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRlcmlhbCkpIHtcbiAgICAgIGZvciAoY29uc3QgbWF0IG9mIG1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghZGlzcG9zZWRNYXRlcmlhbHMuaGFzKG1hdCkpIHtcbiAgICAgICAgICBtYXQuZGlzcG9zZT8uKCk7XG4gICAgICAgICAgZGlzcG9zZWRNYXRlcmlhbHMuYWRkKG1hdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFkaXNwb3NlZE1hdGVyaWFscy5oYXMobWF0ZXJpYWwpKSB7XG4gICAgICBtYXRlcmlhbC5kaXNwb3NlPy4oKTtcbiAgICAgIGRpc3Bvc2VkTWF0ZXJpYWxzLmFkZChtYXRlcmlhbCk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gYnVpbGRTdGVsbGF0ZWRPY3RhaGVkcm9uKHNpemUgPSA2LCB2YXJpYW50ID0gJ3B1cnN1ZXInKSB7XG4gIGNvbnN0IGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgLy8gMS4gR2VuZXJhdGUgdHdvIHRldHJhaGVkcm9uIGdlb21ldHJpZXMgYW5kIG1pcnJvciBvbmUgdG8gcmVwcm9kdWNlIHRoZSBzdGVsbGF0ZWQgb2N0YWhlZHJvbiBzaGVsbC5cbiAgY29uc3QgcHJpbWFyeSA9IG5ldyBUSFJFRS5UZXRyYWhlZHJvbkdlb21ldHJ5KHNpemUgKiAwLjgsIDEpOyAvLyBIaWdoZXIgZGV0YWlsIGZvciBzaGFycGVyIGVkZ2VzXG4gIGNvbnN0IG1pcnJvcmVkID0gcHJpbWFyeS5jbG9uZSgpO1xuICBtaXJyb3JlZC5yb3RhdGVYKE1hdGguUEkpO1xuICBtaXJyb3JlZC5yb3RhdGVaKE1hdGguUEkgLyAyKTtcbiAgLy8gMi4gTWVyZ2UgYm90aCBidWZmZXIgZ2VvbWV0cmllcyB1c2luZyB0aGUgc3VwcG9ydGVkIGhlbHBlciB0byBhdm9pZCB0aGUgcmVtb3ZlZCBHZW9tZXRyeS5tZXJnZSBBUEkuXG4gIGNvbnN0IG1lcmdlZCA9IG1lcmdlR2VvbWV0cmllcyhbcHJpbWFyeSwgbWlycm9yZWRdLCBmYWxzZSk7XG4gIGlmICghbWVyZ2VkKSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBtZXJnZSBzdGVsbGF0ZWQgb2N0YWhlZHJvbiBnZW9tZXRyeScpO1xuICAvLyAzLiBEaXNwb3NlIHRoZSB0ZW1wb3JhcnkgcGFydHMuXG4gIHByaW1hcnkuZGlzcG9zZSgpO1xuICBtaXJyb3JlZC5kaXNwb3NlKCk7XG5cbiAgLy8gRW5oYW5jZWQgYm9keSBtYXRlcmlhbDogRHluYW1pYyBiYXNlZCBvbiB2YXJpYW50IGZvciB2aXN1YWwgZGlzdGluY3Rpb25cbiAgbGV0IGJvZHlDb2xvciA9IDB4ZmY1NTMzOyAvLyBCYXNlIG9yYW5nZS1yZWRcbiAgbGV0IGVtaXNzaXZlID0gMHgyMjAwMDA7XG4gIGxldCByb3VnaG5lc3MgPSAwLjY7XG4gIGxldCBtZXRhbG5lc3MgPSAwLjI7XG4gIHN3aXRjaCAodmFyaWFudCkge1xuICAgIGNhc2UgJ3N0cmFmZXInOlxuICAgICAgYm9keUNvbG9yID0gMHgwMGZmODg7IC8vIE5lb24gZ3JlZW4gZm9yIGFnaWxlIGZsYW5rZXJcbiAgICAgIGVtaXNzaXZlID0gMHgwMDQ0MDA7XG4gICAgICByb3VnaG5lc3MgPSAwLjQ7XG4gICAgICBtZXRhbG5lc3MgPSAwLjQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdzZW50cnknOlxuICAgICAgYm9keUNvbG9yID0gMHg4YjAwMDA7IC8vIERhcmsgcmVkIGZvciBzdGF0aW9uYXJ5IHR1cnJldFxuICAgICAgZW1pc3NpdmUgPSAweDQ0MDAwMDtcbiAgICAgIHJvdWdobmVzcyA9IDAuODtcbiAgICAgIG1ldGFsbmVzcyA9IDAuMTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIGNvbnN0IGJvZHlNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgY29sb3I6IGJvZHlDb2xvcixcbiAgICBtZXRhbG5lc3MsXG4gICAgcm91Z2huZXNzLFxuICAgIGVtaXNzaXZlLFxuICAgIGVtaXNzaXZlSW50ZW5zaXR5OiAwLjMgLy8gUHVsc2luZyBnbG93IHBvdGVudGlhbFxuICB9KTtcbiAgY29uc3QgYm9keSA9IG5ldyBUSFJFRS5NZXNoKG1lcmdlZCwgYm9keU1hdGVyaWFsKTtcbiAgZ3JvdXAuYWRkKGJvZHkpO1xuXG4gIC8vIEFkZCBtZW5hY2luZyBzcGlrZXM6IFByb2NlZHVyYWwsIHZhcmlhbnQtc3BlY2lmaWMgY291bnQgYW5kIHN0eWxlIGZvciBkYW5nZXJcbiAgY29uc3Qgc3Bpa2VHZW9tZXRyeSA9IG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoMC40LCAyLCA1KTtcbiAgY29uc3Qgc3Bpa2VNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgY29sb3I6IDB4MTExMTExLFxuICAgIHJvdWdobmVzczogMC4xLFxuICAgIG1ldGFsbmVzczogMC45NSAvLyBSYXpvci1zaGFycCByZWZsZWN0aW9uXG4gIH0pO1xuICBjb25zdCBzcGlrZUNvdW50ID0gdmFyaWFudCA9PT0gJ3NlbnRyeScgPyA4IDogdmFyaWFudCA9PT0gJ3N0cmFmZXInID8gMTIgOiA2OyAvLyBNb3JlIGZvciBhZ2dyZXNzaXZlIHZhcmlhbnRzXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3Bpa2VDb3VudDsgaSsrKSB7XG4gICAgY29uc3QgYW5nbGUgPSAoaSAvIHNwaWtlQ291bnQpICogTWF0aC5QSSAqIDI7XG4gICAgY29uc3QgcmFkaXVzID0gc2l6ZSAqIDAuNztcbiAgICBjb25zdCBoZWlnaHRPZmZzZXQgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAwLjU7XG4gICAgY29uc3Qgc3Bpa2VQb3MgPSBuZXcgVEhSRUUuVmVjdG9yMyhcbiAgICAgIE1hdGguY29zKGFuZ2xlKSAqIHJhZGl1cyxcbiAgICAgIGhlaWdodE9mZnNldCxcbiAgICAgIE1hdGguc2luKGFuZ2xlKSAqIHJhZGl1c1xuICAgICk7XG4gICAgY29uc3Qgc3Bpa2UgPSBuZXcgVEhSRUUuTWVzaChzcGlrZUdlb21ldHJ5LCBzcGlrZU1hdGVyaWFsKTtcbiAgICBzcGlrZS5wb3NpdGlvbi5jb3B5KHNwaWtlUG9zKTtcbiAgICAvLyBPcmllbnQgc3Bpa2VzIHJhZGlhbGx5IG91dHdhcmRcbiAgICBzcGlrZS5sb29rQXQoc3Bpa2VQb3MuY2xvbmUoKS5tdWx0aXBseVNjYWxhcigyKSk7XG4gICAgc3Bpa2Uucm90YXRlWChNYXRoLlBJKTsgLy8gRmxpcCB0byBwb2ludCBvdXRcbiAgICBncm91cC5hZGQoc3Bpa2UpO1xuXG4gICAgLy8gU2Vjb25kYXJ5IGJhcmJzIG9uIHNwaWtlcyBmb3IgZXh0cmEgdGhyZWF0XG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjMpIHtcbiAgICAgIGNvbnN0IGJhcmIgPSBuZXcgVEhSRUUuTWVzaChcbiAgICAgICAgbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuMiwgMC4yLCAxLjUpLFxuICAgICAgICBzcGlrZU1hdGVyaWFsXG4gICAgICApO1xuICAgICAgYmFyYi5wb3NpdGlvbi5jb3B5KHNwaWtlUG9zLmNsb25lKCkuYWRkKG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIC0xKSkpO1xuICAgICAgYmFyYi5yb3RhdGlvbi5zZXQoTWF0aC5yYW5kb20oKSAqIE1hdGguUEksIE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJLCAwKTtcbiAgICAgIGdyb3VwLmFkZChiYXJiKTtcbiAgICB9XG4gIH1cblxuICAvLyBHbG93aW5nIGNvcmU6IEVtaXNzaXZlIHNwaGVyZSBmb3IgYSB2b2xhdGlsZSBlbmVyZ3kgaGVhcnRcbiAgY29uc3QgY29yZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KHNpemUgKiAwLjMsIDEyLCA4KTtcbiAgY29uc3QgY29yZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICBjb2xvcjogMHhmZjAwMDAsXG4gICAgZW1pc3NpdmU6IDB4ZmYwMDAwLFxuICAgIGVtaXNzaXZlSW50ZW5zaXR5OiAwLjYsXG4gICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgb3BhY2l0eTogMC44XG4gIH0pO1xuICBjb25zdCBjb3JlID0gbmV3IFRIUkVFLk1lc2goY29yZUdlb21ldHJ5LCBjb3JlTWF0ZXJpYWwpO1xuICBjb3JlLnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcbiAgZ3JvdXAuYWRkKGNvcmUpO1xuXG4gIC8vIFZhcmlhbnQtc3BlY2lmaWMgYWNjZW50c1xuICBpZiAodmFyaWFudCA9PT0gJ3N0cmFmZXInKSB7XG4gICAgLy8gU2lkZSB2ZW50cyBmb3Igc3BlZWQgaW1wbGljYXRpb25cbiAgICBjb25zdCB2ZW50R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMS41LCAwLjMsIDMpO1xuICAgIGNvbnN0IHZlbnRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiAweDAwZmY4OCwgZW1pc3NpdmU6IDB4MDA0NDAwIH0pO1xuICAgIGNvbnN0IGxlZnRWZW50ID0gbmV3IFRIUkVFLk1lc2godmVudEdlb21ldHJ5LCB2ZW50TWF0ZXJpYWwpO1xuICAgIGxlZnRWZW50LnBvc2l0aW9uLnNldCgtc2l6ZSAqIDAuNiwgMCwgMCk7XG4gICAgZ3JvdXAuYWRkKGxlZnRWZW50KTtcbiAgICBjb25zdCByaWdodFZlbnQgPSBsZWZ0VmVudC5jbG9uZSgpO1xuICAgIHJpZ2h0VmVudC5wb3NpdGlvbi5zZXQoc2l6ZSAqIDAuNiwgMCwgMCk7XG4gICAgZ3JvdXAuYWRkKHJpZ2h0VmVudCk7XG4gIH0gZWxzZSBpZiAodmFyaWFudCA9PT0gJ3NlbnRyeScpIHtcbiAgICAvLyBUdXJyZXQgYmFzZSBmb3IgZ3JvdW5kZWQgZmVlbFxuICAgIGNvbnN0IGJhc2VHZW9tZXRyeSA9IG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KHNpemUgKiAwLjksIHNpemUgKiAxLjEsIDAuNSwgOCk7XG4gICAgY29uc3QgYmFzZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4MzMzMzMzLCByb3VnaG5lc3M6IDAuOSB9KTtcbiAgICBjb25zdCBiYXNlID0gbmV3IFRIUkVFLk1lc2goYmFzZUdlb21ldHJ5LCBiYXNlTWF0ZXJpYWwpO1xuICAgIGJhc2UucG9zaXRpb24uc2V0KDAsIC1zaXplICogMC42LCAwKTtcbiAgICBncm91cC5hZGQoYmFzZSk7XG4gIH1cblxuICAvLyBBbmltYXRpb24gaG9vazogU3VidGxlIGlkbGUgcm90YXRpb24gYW5kIHB1bHNlXG4gIGdyb3VwLnVzZXJEYXRhID0ge1xuICAgIG9yaWdpbmFsRW1pc3NpdmU6IGJvZHlNYXRlcmlhbC5lbWlzc2l2ZS5jbG9uZSgpLFxuICAgIHB1bHNlVGltZTogMCxcbiAgICB2YXJpYW50XG4gIH07XG5cbiAgcmV0dXJuIGdyb3VwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRW5lbXkoc2NlbmU6IFRIUkVFLlNjZW5lLCBwb3NpdGlvbjogVEhSRUUuVmVjdG9yMywgb3B0aW9uczogRW5lbXlPcHRpb25zID0ge30pIHtcbiAgLy8gMS4gTWF0ZXJpYWxpc2UgdGhlIG1lc2gsIHBvc2l0aW9uIGl0LCBhbmQgYXBwZW5kIGl0IHRvIHRoZSBhY3RpdmUgc2NlbmUgZ3JhcGguXG4gIGNvbnN0IG1lc2ggPSBidWlsZFN0ZWxsYXRlZE9jdGFoZWRyb24oNSwgb3B0aW9ucy52YXJpYW50KTtcbiAgbWVzaC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgc2NlbmUuYWRkKG1lc2gpO1xuXG4gIGNvbnN0IHZlbCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIGNvbnN0IGRpciA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIGNvbnN0IGRpZmZpY3VsdHkgPSBvcHRpb25zLmRpZmZpY3VsdHkgPz8gZ2V0RGlmZmljdWx0eVN0YXRlKCk7XG4gIGNvbnN0IGhwQmFzZSA9IDQwICogZGlmZmljdWx0eS5lbmVteUhwTXVsdGlwbGllcjtcbiAgY29uc3QgYWNjZWxlcmF0aW9uID0gMTggKyBkaWZmaWN1bHR5LmVuZW15RHBzTXVsdGlwbGllciAqIDYgKyAob3B0aW9ucy52YXJpYW50ID09PSAnc3RyYWZlcicgPyA0IDogMCk7XG4gIGNvbnN0IG1heFNwZWVkID0gMzYgKyBkaWZmaWN1bHR5LmVuZW15RHBzTXVsdGlwbGllciAqIDggKyAob3B0aW9ucy52YXJpYW50ID09PSAnc3RyYWZlcicgPyAxMCA6IDApO1xuXG4gIGNvbnN0IG9iaiA9IHtcbiAgICBtZXNoLFxuICAgIGhwOiBocEJhc2UsXG4gICAgZGlmZmljdWx0eSxcbiAgICB0YXJnZXQ6IHVuZGVmaW5lZCBhcyBUSFJFRS5PYmplY3QzRCB8IHVuZGVmaW5lZCxcbiAgICB1cGRhdGUoZHQ6IG51bWJlcikge1xuICAgICAgLy8gRW5oYW5jZWQgdXBkYXRlOiBBZGQgaWRsZSBhbmltYXRpb24gYW5kIHZhcmlhbnQtc3BlY2lmaWMgYmVoYXZpb3JzXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IG1lc2gudXNlckRhdGE7XG4gICAgICB1c2VyRGF0YS5wdWxzZVRpbWUgKz0gZHQ7XG4gICAgICAvLyBQdWxzZSBlbWlzc2l2ZSBmb3IgdGhyZWF0XG4gICAgICBjb25zdCBwdWxzZSA9IDAuMiArIE1hdGguc2luKHVzZXJEYXRhLnB1bHNlVGltZSAqIDMpICogMC4xO1xuICAgICAgaWYgKG1lc2guY2hpbGRyZW5bMF0/Lm1hdGVyaWFsKSB7IC8vIEJvZHlcbiAgICAgICAgKG1lc2guY2hpbGRyZW5bMF0ubWF0ZXJpYWwgYXMgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwpLmVtaXNzaXZlSW50ZW5zaXR5ID0gMC4zICsgcHVsc2UgKiAwLjI7XG4gICAgICB9XG4gICAgICBpZiAodXNlckRhdGEudmFyaWFudCA9PT0gJ3NlbnRyeScpIHtcbiAgICAgICAgLy8gU2VudHJ5OiBTbG93IHR1cnJldCByb3RhdGlvbiBvbmx5IHdoZW4gdGFyZ2V0aW5nXG4gICAgICAgIGlmICh0aGlzLnRhcmdldCkgbWVzaC5yb3RhdGlvbi55ICs9IGR0ICogMC41O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJzOiBHZW50bGUgaWRsZSBzcGluXG4gICAgICAgIG1lc2gucm90YXRpb24ueSArPSBkdCAqIDAuMDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICBkaXIuY29weSh0aGlzLnRhcmdldC5wb3NpdGlvbikuc3ViKG1lc2gucG9zaXRpb24pO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGRpci5sZW5ndGgoKSB8fCAxO1xuICAgICAgICBkaXIubm9ybWFsaXplKCk7XG4gICAgICAgIGNvbnN0IGFpbUFzc2lzdCA9IFRIUkVFLk1hdGhVdGlscy5sZXJwKDAuNiwgMSwgZGlmZmljdWx0eS5lbmVteUFjY3VyYWN5KTtcbiAgICAgICAgdmVsLmFkZFNjYWxlZFZlY3RvcihkaXIsIGFjY2VsZXJhdGlvbiAqIGFpbUFzc2lzdCAqIGR0KTtcbiAgICAgICAgYXBwbHlFbnZpcm9ubWVudFZlY3RvckF0dGVudWF0aW9uKHZlbCk7XG4gICAgICAgIGNvbnN0IGNsYW1wZWQgPSBNYXRoLm1pbihtYXhTcGVlZCwgbWF4U3BlZWQgKiAoZGlzdGFuY2UgPiAxODAgPyAxLjEgOiAxKSk7XG4gICAgICAgIHZlbC5jbGFtcExlbmd0aCgwLCBjbGFtcGVkKTtcbiAgICAgICAgbWVzaC5wb3NpdGlvbi5hZGRTY2FsZWRWZWN0b3IodmVsLCBkdCk7XG4gICAgICAgIG1lc2gubG9va0F0KHRoaXMudGFyZ2V0LnBvc2l0aW9uKTtcblxuICAgICAgICAvLyBTdHJhZmVyOiBaaWd6YWcgcGF0dGVybiBmb3IgZXZhc2lvblxuICAgICAgICBpZiAodXNlckRhdGEudmFyaWFudCA9PT0gJ3N0cmFmZXInICYmIE1hdGgucmFuZG9tKCkgPCAwLjAyKSB7XG4gICAgICAgICAgdmVsLmFkZChuZXcgVEhSRUUuVmVjdG9yMygoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyMCwgMCwgMCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBvbkRlYXRoKCkge1xuICAgICAgc2NlbmUucmVtb3ZlKG1lc2gpO1xuICAgICAgZGlzcG9zZU1lc2hMaWtlKG1lc2gpO1xuICAgIH1cbiAgfTtcblxuICAvLyAyLiBUcmFjayB0aGUgZW5lbXkgc28gdGhlIHdhdmUgbWFuYWdlciBjYW4gaXRlcmF0ZSBhbmQgdXBkYXRlIHBlciBmcmFtZS5cbiAgOyhzY2VuZSBhcyBhbnkpLl9fZW5lbWllcyA/Pz0gW107XG4gIDsoc2NlbmUgYXMgYW55KS5fX2VuZW1pZXMucHVzaChvYmopO1xuICByZXR1cm4gb2JqO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRW5lbWllcyhzY2VuZTogVEhSRUUuU2NlbmUsIGR0OiBudW1iZXIsIGRpZmZpY3VsdHk6IEVuZW15RGlmZmljdWx0eUNvbnRleHQpIHtcbiAgLy8gMS4gQWR2YW5jZSBlYWNoIHRyYWNrZWQgZW5lbXkgQUkgdXNpbmcgdGhlIHNoYXJlZCBzY2VuZSByZWdpc3RyeS5cbiAgY29uc3QgYXJyID0gKHNjZW5lIGFzIGFueSkuX19lbmVtaWVzIGFzIGFueVtdIHwgdW5kZWZpbmVkO1xuICBpZiAoIWFycikgcmV0dXJuO1xuICBmb3IgKGNvbnN0IGUgb2YgYXJyKSB7XG4gICAgZS5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eTtcbiAgICBlLnVwZGF0ZShkdCk7XG4gIH1cbn0iXSwibmFtZXMiOlsiVEhSRUUiLCJtZXJnZUdlb21ldHJpZXMiLCJhcHBseUVudmlyb25tZW50VmVjdG9yQXR0ZW51YXRpb24iLCJnZXREaWZmaWN1bHR5U3RhdGUiLCJkaXNwb3NlTWVzaExpa2UiLCJvYmplY3QiLCJkaXNwb3NlZE1hdGVyaWFscyIsIlNldCIsInRyYXZlcnNlIiwiY2hpbGQiLCJNZXNoIiwiZ2VvbWV0cnkiLCJkaXNwb3NlIiwibWF0ZXJpYWwiLCJBcnJheSIsImlzQXJyYXkiLCJtYXQiLCJoYXMiLCJhZGQiLCJidWlsZFN0ZWxsYXRlZE9jdGFoZWRyb24iLCJzaXplIiwidmFyaWFudCIsImdyb3VwIiwiR3JvdXAiLCJwcmltYXJ5IiwiVGV0cmFoZWRyb25HZW9tZXRyeSIsIm1pcnJvcmVkIiwiY2xvbmUiLCJyb3RhdGVYIiwiTWF0aCIsIlBJIiwicm90YXRlWiIsIm1lcmdlZCIsIkVycm9yIiwiYm9keUNvbG9yIiwiZW1pc3NpdmUiLCJyb3VnaG5lc3MiLCJtZXRhbG5lc3MiLCJib2R5TWF0ZXJpYWwiLCJNZXNoU3RhbmRhcmRNYXRlcmlhbCIsImNvbG9yIiwiZW1pc3NpdmVJbnRlbnNpdHkiLCJib2R5Iiwic3Bpa2VHZW9tZXRyeSIsIkNvbmVHZW9tZXRyeSIsInNwaWtlTWF0ZXJpYWwiLCJzcGlrZUNvdW50IiwiaSIsImFuZ2xlIiwicmFkaXVzIiwiaGVpZ2h0T2Zmc2V0IiwicmFuZG9tIiwic3Bpa2VQb3MiLCJWZWN0b3IzIiwiY29zIiwic2luIiwic3Bpa2UiLCJwb3NpdGlvbiIsImNvcHkiLCJsb29rQXQiLCJtdWx0aXBseVNjYWxhciIsImJhcmIiLCJCb3hHZW9tZXRyeSIsInJvdGF0aW9uIiwic2V0IiwiY29yZUdlb21ldHJ5IiwiU3BoZXJlR2VvbWV0cnkiLCJjb3JlTWF0ZXJpYWwiLCJ0cmFuc3BhcmVudCIsIm9wYWNpdHkiLCJjb3JlIiwidmVudEdlb21ldHJ5IiwidmVudE1hdGVyaWFsIiwibGVmdFZlbnQiLCJyaWdodFZlbnQiLCJiYXNlR2VvbWV0cnkiLCJDeWxpbmRlckdlb21ldHJ5IiwiYmFzZU1hdGVyaWFsIiwiYmFzZSIsInVzZXJEYXRhIiwib3JpZ2luYWxFbWlzc2l2ZSIsInB1bHNlVGltZSIsImNyZWF0ZUVuZW15Iiwic2NlbmUiLCJvcHRpb25zIiwibWVzaCIsInZlbCIsImRpciIsImRpZmZpY3VsdHkiLCJocEJhc2UiLCJlbmVteUhwTXVsdGlwbGllciIsImFjY2VsZXJhdGlvbiIsImVuZW15RHBzTXVsdGlwbGllciIsIm1heFNwZWVkIiwib2JqIiwiaHAiLCJ0YXJnZXQiLCJ1bmRlZmluZWQiLCJ1cGRhdGUiLCJkdCIsInB1bHNlIiwiY2hpbGRyZW4iLCJ5Iiwic3ViIiwiZGlzdGFuY2UiLCJsZW5ndGgiLCJub3JtYWxpemUiLCJhaW1Bc3Npc3QiLCJNYXRoVXRpbHMiLCJsZXJwIiwiZW5lbXlBY2N1cmFjeSIsImFkZFNjYWxlZFZlY3RvciIsImNsYW1wZWQiLCJtaW4iLCJjbGFtcExlbmd0aCIsIm9uRGVhdGgiLCJyZW1vdmUiLCJfX2VuZW1pZXMiLCJwdXNoIiwidXBkYXRlRW5lbWllcyIsImFyciIsImUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/enemies/stellated-octahedron/behavior.ts\n");

/***/ }),

/***/ "(ssr)/./src/engine/bootstrap.ts":
/*!*********************************!*\
  !*** ./src/engine/bootstrap.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SCENE_OPTS: () => (/* binding */ DEFAULT_SCENE_OPTS),\n/* harmony export */   initGame: () => (/* binding */ initGame)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _world_chunks_streamer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/world/chunks/streamer */ \"(ssr)/./src/world/chunks/streamer.ts\");\n/* harmony import */ var _camera_chaseCam__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/camera/chaseCam */ \"(ssr)/./src/camera/chaseCam.ts\");\n/* harmony import */ var _vehicles_shared_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/vehicles/shared/player */ \"(ssr)/./src/vehicles/shared/player.ts\");\n/* harmony import */ var _ui_inputMap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/ui/inputMap */ \"(ssr)/./src/ui/inputMap.ts\");\n/* harmony import */ var _spawn_corridor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/spawn/corridor */ \"(ssr)/./src/spawn/corridor.ts\");\n/* harmony import */ var _spawn_spawnTable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/spawn/spawnTable */ \"(ssr)/./src/spawn/spawnTable.ts\");\n/* harmony import */ var _engine_difficulty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/engine/difficulty */ \"(ssr)/./src/engine/difficulty.ts\");\n/* __next_internal_client_entry_do_not_use__ DEFAULT_SCENE_OPTS,initGame auto */ \n\n\n\n\n\n\n\nconst DEFAULT_SCENE_OPTS = {\n    fogColor: 0x0a0d12,\n    fogNear: 150,\n    fogFar: 1500,\n    ambient: 0x364a6b,\n    hemiSky: 0x8cc9ff,\n    hemiGround: 0x101418\n};\nfunction initGame(container, opts = DEFAULT_SCENE_OPTS, onReady) {\n    const scene = new three__WEBPACK_IMPORTED_MODULE_7__.Scene();\n    scene.fog = new three__WEBPACK_IMPORTED_MODULE_7__.Fog(opts.fogColor, opts.fogNear, opts.fogFar);\n    const renderer = new three__WEBPACK_IMPORTED_MODULE_7__.WebGLRenderer({\n        antialias: true\n    });\n    renderer.setPixelRatio(Math.min(devicePixelRatio, 2));\n    renderer.setSize(container.clientWidth, container.clientHeight);\n    renderer.outputColorSpace = three__WEBPACK_IMPORTED_MODULE_7__.SRGBColorSpace;\n    container.appendChild(renderer.domElement);\n    const camera = new three__WEBPACK_IMPORTED_MODULE_7__.PerspectiveCamera(70, container.clientWidth / container.clientHeight, 0.1, 5000);\n    camera.position.set(0, 20, 60);\n    // Lights\n    scene.add(new three__WEBPACK_IMPORTED_MODULE_7__.AmbientLight(opts.ambient, 0.7));\n    const hemi = new three__WEBPACK_IMPORTED_MODULE_7__.HemisphereLight(opts.hemiSky, opts.hemiGround, 0.8);\n    scene.add(hemi);\n    const sun = new three__WEBPACK_IMPORTED_MODULE_7__.DirectionalLight(0xffffff, 0.8);\n    sun.position.set(200, 300, 100);\n    scene.add(sun);\n    // Systems\n    const input = (0,_ui_inputMap__WEBPACK_IMPORTED_MODULE_3__.createInput)(container);\n    const chase = (0,_camera_chaseCam__WEBPACK_IMPORTED_MODULE_1__.createChaseCam)(camera);\n    const streamer = (0,_world_chunks_streamer__WEBPACK_IMPORTED_MODULE_0__.createStreamer)(scene);\n    // Player (Arrowhead by default)\n    const player = (0,_vehicles_shared_player__WEBPACK_IMPORTED_MODULE_2__.createPlayer)('arrowhead', scene);\n    // Spawn corridor and spawner\n    const corridor = (0,_spawn_corridor__WEBPACK_IMPORTED_MODULE_4__.createCorridor)(scene);\n    const spawner = (0,_spawn_spawnTable__WEBPACK_IMPORTED_MODULE_5__.createSpawner)(scene, player, streamer);\n    // Resize\n    const onResize = ()=>{\n        renderer.setSize(container.clientWidth, container.clientHeight);\n        camera.aspect = container.clientWidth / container.clientHeight;\n        camera.updateProjectionMatrix();\n    };\n    addEventListener('resize', onResize);\n    // Loop\n    let last = performance.now();\n    let stage = 1;\n    let score = 0;\n    let latestTick = 0;\n    let readyFired = false;\n    let difficultyState = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_6__.getDifficultyState)();\n    const unsubscribeDifficulty = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_6__.onDifficultyChange)((next)=>{\n        //1.- Persist the latest difficulty values so telemetry queries remain in sync with global scaling.\n        difficultyState = next;\n    });\n    function frame(now) {\n        const dt = Math.min(0.05, (now - last) / 1000);\n        last = now;\n        // Input → player control\n        player.controller.update(dt, input, streamer.queryHeight);\n        // Stream world around the player\n        streamer.update(player.group.position);\n        // Spawning / encounters\n        spawner.update(dt, stage);\n        // Camera\n        chase.update(dt, player.group);\n        // Render\n        renderer.render(scene, camera);\n        if (!readyFired) {\n            onReady?.();\n            readyFired = true;\n        }\n        requestAnimationFrame(frame);\n    }\n    requestAnimationFrame(frame);\n    const api = {\n        actions: {\n            cycleVehicle: player.cycleVehicle,\n            setVehicle: player.setVehicle\n        },\n        getState: ()=>({\n                speed: player.controller.speed,\n                altitude: Math.max(0, player.group.position.y - streamer.queryHeight(player.group.position.x, player.group.position.z)),\n                stage,\n                score,\n                weapon: player.controller.weaponName,\n                ammo: player.controller.ammo,\n                missiles: player.controller.missiles,\n                laserCooldown: player.controller.laserCooldownMs,\n                bombArmed: player.controller.bombArmed,\n                ability: player.controller.weaponName,\n                shieldActive: player.controller.shieldActive,\n                dashActive: player.controller.dashActive,\n                ultimateActive: player.controller.ultimateActive,\n                hull: player.controller.hull,\n                difficulty: difficultyState\n            }),\n        ingestWorldDiff: (diff)=>{\n            //1.- Ignore stale or unrelated payloads so the local scene only reacts to advancing authoritative ticks.\n            if (!diff || diff.type !== 'world_diff' || typeof diff.tick !== 'number' || diff.tick <= latestTick) {\n                return;\n            }\n            latestTick = diff.tick;\n            //2.- Fold HUD-centric metadata into the aggregated score and stage trackers.\n            if (Array.isArray(diff.events)) {\n                for (const event of diff.events){\n                    const metadata = event?.metadata;\n                    if (!metadata) continue;\n                    const scoreDelta = Number(metadata.score_delta ?? metadata.score);\n                    if (!Number.isNaN(scoreDelta)) {\n                        score += scoreDelta;\n                    }\n                    const stageValue = Number(metadata.stage ?? metadata.stage_index);\n                    if (!Number.isNaN(stageValue) && stageValue > 0) {\n                        if (stageValue > stage) {\n                            //1.- Treat forward stage jumps as boss clears and escalate the shared difficulty profile.\n                            difficultyState = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_6__.applyBossDefeat)(stageValue);\n                        }\n                        stage = stageValue;\n                    }\n                }\n            }\n        },\n        sampleIntent: ()=>{\n            //3.- Translate the instantaneous input map into the broker intent schema fields.\n            const throttle = input.pressed('KeyW') ? 1 : input.pressed('KeyS') ? -1 : 0;\n            const brake = input.pressed('Space') || throttle < 0 ? 1 : 0;\n            const steer = (input.pressed('KeyD') ? 1 : 0) - (input.pressed('KeyA') ? 1 : 0);\n            const handbrake = input.pressed('KeyF') || input.pressed('KeyC');\n            const boost = input.pressed('ShiftLeft') || input.pressed('ShiftRight');\n            return {\n                throttle,\n                brake,\n                steer,\n                handbrake,\n                gear: 1,\n                boost\n            };\n        }\n    };\n    function dispose() {\n        removeEventListener('resize', onResize);\n        renderer.dispose();\n        container.removeChild(renderer.domElement);\n        input.dispose();\n        streamer.dispose?.();\n        spawner.dispose?.();\n        unsubscribeDifficulty?.();\n    }\n    return {\n        api,\n        dispose\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPLENBQUMsVUFBVSxDQUFDLElBQUk7WUFDMUUsTUFBTUMsUUFBUXRFLE1BQU1xRSxPQUFPLENBQUMsWUFBWUQsV0FBVyxJQUFJLElBQUk7WUFDM0QsTUFBTUcsUUFBUSxDQUFDdkUsTUFBTXFFLE9BQU8sQ0FBQyxVQUFVLElBQUksS0FBTXJFLENBQUFBLE1BQU1xRSxPQUFPLENBQUMsVUFBVSxJQUFJO1lBQzdFLE1BQU1HLFlBQVl4RSxNQUFNcUUsT0FBTyxDQUFDLFdBQVdyRSxNQUFNcUUsT0FBTyxDQUFDO1lBQ3pELE1BQU1JLFFBQVF6RSxNQUFNcUUsT0FBTyxDQUFDLGdCQUFnQnJFLE1BQU1xRSxPQUFPLENBQUM7WUFFMUQsT0FBTztnQkFDTEQ7Z0JBQ0FFO2dCQUNBQztnQkFDQUM7Z0JBQ0FFLE1BQU07Z0JBQ05EO1lBQ0Y7UUFDRjtJQUNGO0lBRUEsU0FBU0U7UUFDUEMsb0JBQW9CLFVBQVV0RTtRQUM5QjlCLFNBQVNtRyxPQUFPO1FBQ2hCMUcsVUFBVTRHLFdBQVcsQ0FBQ3JHLFNBQVNhLFVBQVU7UUFDekNXLE1BQU0yRSxPQUFPO1FBQ2J6RSxTQUFTeUUsT0FBTztRQUNoQnRFLFFBQVFzRSxPQUFPO1FBQ2Z6RDtJQUNGO0lBRUEsT0FBTztRQUFFVTtRQUFLK0M7SUFBUTtBQUN4QiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvZW5naW5lL2Jvb3RzdHJhcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgY3JlYXRlU3RyZWFtZXIgfSBmcm9tICdAL3dvcmxkL2NodW5rcy9zdHJlYW1lcidcbmltcG9ydCB7IGNyZWF0ZUNoYXNlQ2FtIH0gZnJvbSAnQC9jYW1lcmEvY2hhc2VDYW0nXG5pbXBvcnQgeyBjcmVhdGVQbGF5ZXIgfSBmcm9tICdAL3ZlaGljbGVzL3NoYXJlZC9wbGF5ZXInXG5pbXBvcnQgeyBjcmVhdGVJbnB1dCB9IGZyb20gJ0AvdWkvaW5wdXRNYXAnXG5pbXBvcnQgeyBjcmVhdGVDb3JyaWRvciB9IGZyb20gJ0Avc3Bhd24vY29ycmlkb3InXG5pbXBvcnQgeyBjcmVhdGVTcGF3bmVyIH0gZnJvbSAnQC9zcGF3bi9zcGF3blRhYmxlJ1xuaW1wb3J0IHsgYXBwbHlCb3NzRGVmZWF0LCBnZXREaWZmaWN1bHR5U3RhdGUsIG9uRGlmZmljdWx0eUNoYW5nZSB9IGZyb20gJ0AvZW5naW5lL2RpZmZpY3VsdHknXG5pbXBvcnQgdHlwZSB7IEJyb2tlckludGVudFNuYXBzaG90LCBCcm9rZXJXb3JsZERpZmZFbnZlbG9wZSB9IGZyb20gJ0AvbGliL2Jyb2tlckNsaWVudCdcblxuZXhwb3J0IHR5cGUgR2FtZUFQSSA9IHtcbiAgYWN0aW9uczogYW55XG4gIGdldFN0YXRlOiAoKSA9PiB7XG4gICAgc3BlZWQ6IG51bWJlclxuICAgIGFsdGl0dWRlOiBudW1iZXJcbiAgICBzdGFnZTogbnVtYmVyXG4gICAgc2NvcmU6IG51bWJlclxuICAgIHdlYXBvbjogc3RyaW5nXG4gICAgYW1tbzogbnVtYmVyXG4gICAgbWlzc2lsZXM6IG51bWJlclxuICAgIGxhc2VyQ29vbGRvd246IG51bWJlclxuICAgIGJvbWJBcm1lZDogYm9vbGVhblxuICAgIGFiaWxpdHk6IHN0cmluZ1xuICAgIHNoaWVsZEFjdGl2ZTogYm9vbGVhblxuICAgIGRhc2hBY3RpdmU6IGJvb2xlYW5cbiAgICB1bHRpbWF0ZUFjdGl2ZTogYm9vbGVhblxuICAgIGh1bGw6IG51bWJlclxuICAgIGRpZmZpY3VsdHk6IFJldHVyblR5cGU8dHlwZW9mIGdldERpZmZpY3VsdHlTdGF0ZT5cbiAgfVxuICBpbmdlc3RXb3JsZERpZmY6IChkaWZmOiBCcm9rZXJXb3JsZERpZmZFbnZlbG9wZSkgPT4gdm9pZFxuICBzYW1wbGVJbnRlbnQ6ICgpID0+IEJyb2tlckludGVudFNuYXBzaG90XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NDRU5FX09QVFMgPSB7XG4gIGZvZ0NvbG9yOiAweDBhMGQxMixcbiAgZm9nTmVhcjogMTUwLFxuICBmb2dGYXI6IDE1MDAsXG4gIGFtYmllbnQ6IDB4MzY0YTZiLFxuICBoZW1pU2t5OiAweDhjYzlmZixcbiAgaGVtaUdyb3VuZDogMHgxMDE0MThcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRHYW1lKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIG9wdHMgPSBERUZBVUxUX1NDRU5FX09QVFMsIG9uUmVhZHk/OiAoKSA9PiB2b2lkKSB7XG4gIGNvbnN0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKClcbiAgc2NlbmUuZm9nID0gbmV3IFRIUkVFLkZvZyhvcHRzLmZvZ0NvbG9yLCBvcHRzLmZvZ05lYXIsIG9wdHMuZm9nRmFyKVxuXG4gIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSlcbiAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhNYXRoLm1pbihkZXZpY2VQaXhlbFJhdGlvLCAyKSlcbiAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXIuY2xpZW50V2lkdGgsIGNvbnRhaW5lci5jbGllbnRIZWlnaHQpXG4gIHJlbmRlcmVyLm91dHB1dENvbG9yU3BhY2UgPSBUSFJFRS5TUkdCQ29sb3JTcGFjZVxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudClcblxuICBjb25zdCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzAsIGNvbnRhaW5lci5jbGllbnRXaWR0aCAvIGNvbnRhaW5lci5jbGllbnRIZWlnaHQsIDAuMSwgNTAwMClcbiAgY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAyMCwgNjApXG5cbiAgLy8gTGlnaHRzXG4gIHNjZW5lLmFkZChuZXcgVEhSRUUuQW1iaWVudExpZ2h0KG9wdHMuYW1iaWVudCwgMC43KSlcbiAgY29uc3QgaGVtaSA9IG5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQob3B0cy5oZW1pU2t5LCBvcHRzLmhlbWlHcm91bmQsIDAuOClcbiAgc2NlbmUuYWRkKGhlbWkpXG4gIGNvbnN0IHN1biA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmLCAwLjgpXG4gIHN1bi5wb3NpdGlvbi5zZXQoMjAwLCAzMDAsIDEwMClcbiAgc2NlbmUuYWRkKHN1bilcblxuICAvLyBTeXN0ZW1zXG4gIGNvbnN0IGlucHV0ID0gY3JlYXRlSW5wdXQoY29udGFpbmVyKVxuICBjb25zdCBjaGFzZSA9IGNyZWF0ZUNoYXNlQ2FtKGNhbWVyYSlcbiAgY29uc3Qgc3RyZWFtZXIgPSBjcmVhdGVTdHJlYW1lcihzY2VuZSlcblxuICAvLyBQbGF5ZXIgKEFycm93aGVhZCBieSBkZWZhdWx0KVxuICBjb25zdCBwbGF5ZXIgPSBjcmVhdGVQbGF5ZXIoJ2Fycm93aGVhZCcsIHNjZW5lKVxuXG4gIC8vIFNwYXduIGNvcnJpZG9yIGFuZCBzcGF3bmVyXG4gIGNvbnN0IGNvcnJpZG9yID0gY3JlYXRlQ29ycmlkb3Ioc2NlbmUpXG4gIGNvbnN0IHNwYXduZXIgPSBjcmVhdGVTcGF3bmVyKHNjZW5lLCBwbGF5ZXIsIHN0cmVhbWVyKVxuXG4gIC8vIFJlc2l6ZVxuICBjb25zdCBvblJlc2l6ZSA9ICgpID0+IHtcbiAgICByZW5kZXJlci5zZXRTaXplKGNvbnRhaW5lci5jbGllbnRXaWR0aCwgY29udGFpbmVyLmNsaWVudEhlaWdodClcbiAgICBjYW1lcmEuYXNwZWN0ID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC8gY29udGFpbmVyLmNsaWVudEhlaWdodFxuICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KClcbiAgfVxuICBhZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSlcblxuICAvLyBMb29wXG4gIGxldCBsYXN0ID0gcGVyZm9ybWFuY2Uubm93KClcbiAgbGV0IHN0YWdlID0gMVxuICBsZXQgc2NvcmUgPSAwXG4gIGxldCBsYXRlc3RUaWNrID0gMFxuICBsZXQgcmVhZHlGaXJlZCA9IGZhbHNlXG4gIGxldCBkaWZmaWN1bHR5U3RhdGUgPSBnZXREaWZmaWN1bHR5U3RhdGUoKVxuICBjb25zdCB1bnN1YnNjcmliZURpZmZpY3VsdHkgPSBvbkRpZmZpY3VsdHlDaGFuZ2UoKG5leHQpID0+IHtcbiAgICAvLzEuLSBQZXJzaXN0IHRoZSBsYXRlc3QgZGlmZmljdWx0eSB2YWx1ZXMgc28gdGVsZW1ldHJ5IHF1ZXJpZXMgcmVtYWluIGluIHN5bmMgd2l0aCBnbG9iYWwgc2NhbGluZy5cbiAgICBkaWZmaWN1bHR5U3RhdGUgPSBuZXh0XG4gIH0pXG5cbiAgZnVuY3Rpb24gZnJhbWUobm93OiBudW1iZXIpIHtcbiAgICBjb25zdCBkdCA9IE1hdGgubWluKDAuMDUsIChub3cgLSBsYXN0KSAvIDEwMDApXG4gICAgbGFzdCA9IG5vd1xuXG4gICAgLy8gSW5wdXQg4oaSIHBsYXllciBjb250cm9sXG4gICAgcGxheWVyLmNvbnRyb2xsZXIudXBkYXRlKGR0LCBpbnB1dCwgc3RyZWFtZXIucXVlcnlIZWlnaHQpXG5cbiAgICAvLyBTdHJlYW0gd29ybGQgYXJvdW5kIHRoZSBwbGF5ZXJcbiAgICBzdHJlYW1lci51cGRhdGUocGxheWVyLmdyb3VwLnBvc2l0aW9uKVxuXG4gICAgLy8gU3Bhd25pbmcgLyBlbmNvdW50ZXJzXG4gICAgc3Bhd25lci51cGRhdGUoZHQsIHN0YWdlKVxuXG4gICAgLy8gQ2FtZXJhXG4gICAgY2hhc2UudXBkYXRlKGR0LCBwbGF5ZXIuZ3JvdXApXG5cbiAgICAvLyBSZW5kZXJcbiAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSlcblxuICAgIGlmICghcmVhZHlGaXJlZCkgeyBvblJlYWR5Py4oKTsgcmVhZHlGaXJlZCA9IHRydWUgfVxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmcmFtZSlcbiAgfVxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnJhbWUpXG5cbiAgY29uc3QgYXBpOiBHYW1lQVBJID0ge1xuICAgIGFjdGlvbnM6IHtcbiAgICAgIGN5Y2xlVmVoaWNsZTogcGxheWVyLmN5Y2xlVmVoaWNsZSxcbiAgICAgIHNldFZlaGljbGU6IHBsYXllci5zZXRWZWhpY2xlLFxuICAgIH0sXG4gICAgZ2V0U3RhdGU6ICgpID0+ICh7XG4gICAgICBzcGVlZDogcGxheWVyLmNvbnRyb2xsZXIuc3BlZWQsXG4gICAgICBhbHRpdHVkZTogTWF0aC5tYXgoMCwgcGxheWVyLmdyb3VwLnBvc2l0aW9uLnkgLSBzdHJlYW1lci5xdWVyeUhlaWdodChwbGF5ZXIuZ3JvdXAucG9zaXRpb24ueCwgcGxheWVyLmdyb3VwLnBvc2l0aW9uLnopKSxcbiAgICAgIHN0YWdlLFxuICAgICAgc2NvcmUsXG4gICAgICB3ZWFwb246IHBsYXllci5jb250cm9sbGVyLndlYXBvbk5hbWUsXG4gICAgICBhbW1vOiBwbGF5ZXIuY29udHJvbGxlci5hbW1vLFxuICAgICAgbWlzc2lsZXM6IHBsYXllci5jb250cm9sbGVyLm1pc3NpbGVzLFxuICAgICAgbGFzZXJDb29sZG93bjogcGxheWVyLmNvbnRyb2xsZXIubGFzZXJDb29sZG93bk1zLFxuICAgICAgYm9tYkFybWVkOiBwbGF5ZXIuY29udHJvbGxlci5ib21iQXJtZWQsXG4gICAgICBhYmlsaXR5OiBwbGF5ZXIuY29udHJvbGxlci53ZWFwb25OYW1lLFxuICAgICAgc2hpZWxkQWN0aXZlOiBwbGF5ZXIuY29udHJvbGxlci5zaGllbGRBY3RpdmUsXG4gICAgICBkYXNoQWN0aXZlOiBwbGF5ZXIuY29udHJvbGxlci5kYXNoQWN0aXZlLFxuICAgICAgdWx0aW1hdGVBY3RpdmU6IHBsYXllci5jb250cm9sbGVyLnVsdGltYXRlQWN0aXZlLFxuICAgICAgaHVsbDogcGxheWVyLmNvbnRyb2xsZXIuaHVsbCxcbiAgICAgIGRpZmZpY3VsdHk6IGRpZmZpY3VsdHlTdGF0ZVxuICAgIH0pLFxuICAgIGluZ2VzdFdvcmxkRGlmZjogKGRpZmYpID0+IHtcbiAgICAgIC8vMS4tIElnbm9yZSBzdGFsZSBvciB1bnJlbGF0ZWQgcGF5bG9hZHMgc28gdGhlIGxvY2FsIHNjZW5lIG9ubHkgcmVhY3RzIHRvIGFkdmFuY2luZyBhdXRob3JpdGF0aXZlIHRpY2tzLlxuICAgICAgaWYgKCFkaWZmIHx8IGRpZmYudHlwZSAhPT0gJ3dvcmxkX2RpZmYnIHx8IHR5cGVvZiBkaWZmLnRpY2sgIT09ICdudW1iZXInIHx8IGRpZmYudGljayA8PSBsYXRlc3RUaWNrKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgbGF0ZXN0VGljayA9IGRpZmYudGlja1xuXG4gICAgICAvLzIuLSBGb2xkIEhVRC1jZW50cmljIG1ldGFkYXRhIGludG8gdGhlIGFnZ3JlZ2F0ZWQgc2NvcmUgYW5kIHN0YWdlIHRyYWNrZXJzLlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGlmZi5ldmVudHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZGlmZi5ldmVudHMpIHtcbiAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGV2ZW50Py5tZXRhZGF0YVxuICAgICAgICAgIGlmICghbWV0YWRhdGEpIGNvbnRpbnVlXG4gICAgICAgICAgY29uc3Qgc2NvcmVEZWx0YSA9IE51bWJlcihtZXRhZGF0YS5zY29yZV9kZWx0YSA/PyBtZXRhZGF0YS5zY29yZSlcbiAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihzY29yZURlbHRhKSkge1xuICAgICAgICAgICAgc2NvcmUgKz0gc2NvcmVEZWx0YVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzdGFnZVZhbHVlID0gTnVtYmVyKG1ldGFkYXRhLnN0YWdlID8/IG1ldGFkYXRhLnN0YWdlX2luZGV4KVxuICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKHN0YWdlVmFsdWUpICYmIHN0YWdlVmFsdWUgPiAwKSB7XG4gICAgICAgICAgICBpZiAoc3RhZ2VWYWx1ZSA+IHN0YWdlKSB7XG4gICAgICAgICAgICAgIC8vMS4tIFRyZWF0IGZvcndhcmQgc3RhZ2UganVtcHMgYXMgYm9zcyBjbGVhcnMgYW5kIGVzY2FsYXRlIHRoZSBzaGFyZWQgZGlmZmljdWx0eSBwcm9maWxlLlxuICAgICAgICAgICAgICBkaWZmaWN1bHR5U3RhdGUgPSBhcHBseUJvc3NEZWZlYXQoc3RhZ2VWYWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YWdlID0gc3RhZ2VWYWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgc2FtcGxlSW50ZW50OiAoKSA9PiB7XG4gICAgICAvLzMuLSBUcmFuc2xhdGUgdGhlIGluc3RhbnRhbmVvdXMgaW5wdXQgbWFwIGludG8gdGhlIGJyb2tlciBpbnRlbnQgc2NoZW1hIGZpZWxkcy5cbiAgICAgIGNvbnN0IHRocm90dGxlID0gaW5wdXQucHJlc3NlZCgnS2V5VycpID8gMSA6IGlucHV0LnByZXNzZWQoJ0tleVMnKSA/IC0xIDogMFxuICAgICAgY29uc3QgYnJha2UgPSBpbnB1dC5wcmVzc2VkKCdTcGFjZScpIHx8IHRocm90dGxlIDwgMCA/IDEgOiAwXG4gICAgICBjb25zdCBzdGVlciA9IChpbnB1dC5wcmVzc2VkKCdLZXlEJykgPyAxIDogMCkgLSAoaW5wdXQucHJlc3NlZCgnS2V5QScpID8gMSA6IDApXG4gICAgICBjb25zdCBoYW5kYnJha2UgPSBpbnB1dC5wcmVzc2VkKCdLZXlGJykgfHwgaW5wdXQucHJlc3NlZCgnS2V5QycpXG4gICAgICBjb25zdCBib29zdCA9IGlucHV0LnByZXNzZWQoJ1NoaWZ0TGVmdCcpIHx8IGlucHV0LnByZXNzZWQoJ1NoaWZ0UmlnaHQnKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aHJvdHRsZSxcbiAgICAgICAgYnJha2UsXG4gICAgICAgIHN0ZWVyLFxuICAgICAgICBoYW5kYnJha2UsXG4gICAgICAgIGdlYXI6IDEsXG4gICAgICAgIGJvb3N0XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSlcbiAgICByZW5kZXJlci5kaXNwb3NlKClcbiAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudClcbiAgICBpbnB1dC5kaXNwb3NlKClcbiAgICBzdHJlYW1lci5kaXNwb3NlPy4oKVxuICAgIHNwYXduZXIuZGlzcG9zZT8uKClcbiAgICB1bnN1YnNjcmliZURpZmZpY3VsdHk/LigpXG4gIH1cblxuICByZXR1cm4geyBhcGksIGRpc3Bvc2UgfVxufVxuIl0sIm5hbWVzIjpbIlRIUkVFIiwiY3JlYXRlU3RyZWFtZXIiLCJjcmVhdGVDaGFzZUNhbSIsImNyZWF0ZVBsYXllciIsImNyZWF0ZUlucHV0IiwiY3JlYXRlQ29ycmlkb3IiLCJjcmVhdGVTcGF3bmVyIiwiYXBwbHlCb3NzRGVmZWF0IiwiZ2V0RGlmZmljdWx0eVN0YXRlIiwib25EaWZmaWN1bHR5Q2hhbmdlIiwiREVGQVVMVF9TQ0VORV9PUFRTIiwiZm9nQ29sb3IiLCJmb2dOZWFyIiwiZm9nRmFyIiwiYW1iaWVudCIsImhlbWlTa3kiLCJoZW1pR3JvdW5kIiwiaW5pdEdhbWUiLCJjb250YWluZXIiLCJvcHRzIiwib25SZWFkeSIsInNjZW5lIiwiU2NlbmUiLCJmb2ciLCJGb2ciLCJyZW5kZXJlciIsIldlYkdMUmVuZGVyZXIiLCJhbnRpYWxpYXMiLCJzZXRQaXhlbFJhdGlvIiwiTWF0aCIsIm1pbiIsImRldmljZVBpeGVsUmF0aW8iLCJzZXRTaXplIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJvdXRwdXRDb2xvclNwYWNlIiwiU1JHQkNvbG9yU3BhY2UiLCJhcHBlbmRDaGlsZCIsImRvbUVsZW1lbnQiLCJjYW1lcmEiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsInBvc2l0aW9uIiwic2V0IiwiYWRkIiwiQW1iaWVudExpZ2h0IiwiaGVtaSIsIkhlbWlzcGhlcmVMaWdodCIsInN1biIsIkRpcmVjdGlvbmFsTGlnaHQiLCJpbnB1dCIsImNoYXNlIiwic3RyZWFtZXIiLCJwbGF5ZXIiLCJjb3JyaWRvciIsInNwYXduZXIiLCJvblJlc2l6ZSIsImFzcGVjdCIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJhZGRFdmVudExpc3RlbmVyIiwibGFzdCIsInBlcmZvcm1hbmNlIiwibm93Iiwic3RhZ2UiLCJzY29yZSIsImxhdGVzdFRpY2siLCJyZWFkeUZpcmVkIiwiZGlmZmljdWx0eVN0YXRlIiwidW5zdWJzY3JpYmVEaWZmaWN1bHR5IiwibmV4dCIsImZyYW1lIiwiZHQiLCJjb250cm9sbGVyIiwidXBkYXRlIiwicXVlcnlIZWlnaHQiLCJncm91cCIsInJlbmRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImFwaSIsImFjdGlvbnMiLCJjeWNsZVZlaGljbGUiLCJzZXRWZWhpY2xlIiwiZ2V0U3RhdGUiLCJzcGVlZCIsImFsdGl0dWRlIiwibWF4IiwieSIsIngiLCJ6Iiwid2VhcG9uIiwid2VhcG9uTmFtZSIsImFtbW8iLCJtaXNzaWxlcyIsImxhc2VyQ29vbGRvd24iLCJsYXNlckNvb2xkb3duTXMiLCJib21iQXJtZWQiLCJhYmlsaXR5Iiwic2hpZWxkQWN0aXZlIiwiZGFzaEFjdGl2ZSIsInVsdGltYXRlQWN0aXZlIiwiaHVsbCIsImRpZmZpY3VsdHkiLCJpbmdlc3RXb3JsZERpZmYiLCJkaWZmIiwidHlwZSIsInRpY2siLCJBcnJheSIsImlzQXJyYXkiLCJldmVudHMiLCJldmVudCIsIm1ldGFkYXRhIiwic2NvcmVEZWx0YSIsIk51bWJlciIsInNjb3JlX2RlbHRhIiwiaXNOYU4iLCJzdGFnZVZhbHVlIiwic3RhZ2VfaW5kZXgiLCJzYW1wbGVJbnRlbnQiLCJ0aHJvdHRsZSIsInByZXNzZWQiLCJicmFrZSIsInN0ZWVyIiwiaGFuZGJyYWtlIiwiYm9vc3QiLCJnZWFyIiwiZGlzcG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVDaGlsZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/engine/bootstrap.ts\n");

/***/ }),

/***/ "(ssr)/./src/engine/difficulty.ts":
/*!**********************************!*\
  !*** ./src/engine/difficulty.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyBossDefeat: () => (/* binding */ applyBossDefeat),\n/* harmony export */   applyEnvironmentVectorAttenuation: () => (/* binding */ applyEnvironmentVectorAttenuation),\n/* harmony export */   getDifficultyState: () => (/* binding */ getDifficultyState),\n/* harmony export */   onDifficultyChange: () => (/* binding */ onDifficultyChange),\n/* harmony export */   resetDifficultyState: () => (/* binding */ resetDifficultyState)\n/* harmony export */ });\nconst BASE_STATE = {\n    enemyHpMultiplier: 1,\n    enemyDpsMultiplier: 1,\n    spawnIntervalMultiplier: 1,\n    enemyAccuracy: 0.55,\n    unlockedAddTypes: 1,\n    bossClears: 0,\n    lastClearedStage: 0,\n    environment: {\n        propDensity: 0.6,\n        windStrength: 0.4,\n        canyonWidth: 1\n    }\n};\nlet state = structuredClone(BASE_STATE);\nconst listeners = new Set();\nfunction cloneState() {\n    //1.- Provide callers with a defensive copy so internal difficulty bookkeeping remains encapsulated.\n    return {\n        enemyHpMultiplier: state.enemyHpMultiplier,\n        enemyDpsMultiplier: state.enemyDpsMultiplier,\n        spawnIntervalMultiplier: state.spawnIntervalMultiplier,\n        enemyAccuracy: state.enemyAccuracy,\n        unlockedAddTypes: state.unlockedAddTypes,\n        bossClears: state.bossClears,\n        lastClearedStage: state.lastClearedStage,\n        environment: {\n            ...state.environment\n        }\n    };\n}\nfunction emit() {\n    //1.- Notify every subscriber using the freshly cloned snapshot to prevent accidental mutation.\n    const snapshot = cloneState();\n    for (const listener of listeners){\n        listener(snapshot);\n    }\n}\nfunction getDifficultyState() {\n    //1.- Surface the current state without exposing the mutable singleton to consumers.\n    return cloneState();\n}\nfunction onDifficultyChange(listener) {\n    //1.- Register listeners lazily and hand back an unsubscribe hook for lifecycle management.\n    listeners.add(listener);\n    return ()=>listeners.delete(listener);\n}\nfunction applyBossDefeat(stage) {\n    //1.- Increment the defeat counter before computing the compound scaling adjustments.\n    state.bossClears += 1;\n    state.lastClearedStage = Math.max(state.lastClearedStage, stage);\n    //2.- Increase enemy durability and damage output multiplicatively to keep pressure scaling noticeable.\n    const hpScalar = 1 + 0.08 + stage * 0.015;\n    const dpsScalar = 1 + 0.05 + stage * 0.01;\n    state.enemyHpMultiplier = Math.min(6, state.enemyHpMultiplier * hpScalar);\n    state.enemyDpsMultiplier = Math.min(5, state.enemyDpsMultiplier * dpsScalar);\n    //3.- Tighten spawn intervals while ensuring they do not collapse entirely.\n    state.spawnIntervalMultiplier = Math.max(0.32, state.spawnIntervalMultiplier * 0.9);\n    //4.- Improve AI accuracy and unlock extra add archetypes gradually.\n    state.enemyAccuracy = Math.min(0.98, state.enemyAccuracy + 0.04 + stage * 0.005);\n    const unlocked = 1 + Math.floor(state.bossClears / 2);\n    state.unlockedAddTypes = Math.min(3, Math.max(state.unlockedAddTypes, unlocked));\n    //5.- Enrich the world ambience so victories feel impactful in the overworld streaming logic.\n    state.environment.propDensity = Math.min(3, state.environment.propDensity + 0.18 + stage * 0.02);\n    state.environment.windStrength = Math.min(4, state.environment.windStrength + 0.16 + stage * 0.01);\n    state.environment.canyonWidth = Math.min(3.2, state.environment.canyonWidth + 0.12 + stage * 0.008);\n    //6.- Emit the updated snapshot to listeners and provide the caller the same information for chaining.\n    emit();\n    return cloneState();\n}\nfunction resetDifficultyState() {\n    //1.- Restore baseline values primarily for deterministic testing scenarios.\n    state = structuredClone(BASE_STATE);\n    emit();\n}\nfunction applyEnvironmentVectorAttenuation(vec) {\n    //1.- Adjust a direction vector to simulate wind influence according to the current scaling knobs.\n    const { windStrength } = state.environment;\n    vec.multiplyScalar(1 + windStrength * 0.05);\n    return vec;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvZW5naW5lL2RpZmZpY3VsdHkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFxQkEsTUFBTUEsYUFBOEI7SUFDbENDLG1CQUFtQjtJQUNuQkMsb0JBQW9CO0lBQ3BCQyx5QkFBeUI7SUFDekJDLGVBQWU7SUFDZkMsa0JBQWtCO0lBQ2xCQyxZQUFZO0lBQ1pDLGtCQUFrQjtJQUNsQkMsYUFBYTtRQUNYQyxhQUFhO1FBQ2JDLGNBQWM7UUFDZEMsYUFBYTtJQUNmO0FBQ0Y7QUFFQSxJQUFJQyxRQUF5QkMsZ0JBQWdCYjtBQUM3QyxNQUFNYyxZQUFZLElBQUlDO0FBRXRCLFNBQVNDO0lBQ1Asb0dBQW9HO0lBQ3BHLE9BQU87UUFDTGYsbUJBQW1CVyxNQUFNWCxpQkFBaUI7UUFDMUNDLG9CQUFvQlUsTUFBTVYsa0JBQWtCO1FBQzVDQyx5QkFBeUJTLE1BQU1ULHVCQUF1QjtRQUN0REMsZUFBZVEsTUFBTVIsYUFBYTtRQUNsQ0Msa0JBQWtCTyxNQUFNUCxnQkFBZ0I7UUFDeENDLFlBQVlNLE1BQU1OLFVBQVU7UUFDNUJDLGtCQUFrQkssTUFBTUwsZ0JBQWdCO1FBQ3hDQyxhQUFhO1lBQUUsR0FBR0ksTUFBTUosV0FBVztRQUFDO0lBQ3RDO0FBQ0Y7QUFFQSxTQUFTUztJQUNQLCtGQUErRjtJQUMvRixNQUFNQyxXQUFXRjtJQUNqQixLQUFLLE1BQU1HLFlBQVlMLFVBQVc7UUFDaENLLFNBQVNEO0lBQ1g7QUFDRjtBQUVPLFNBQVNFO0lBQ2Qsb0ZBQW9GO0lBQ3BGLE9BQU9KO0FBQ1Q7QUFFTyxTQUFTSyxtQkFBbUJGLFFBQTRCO0lBQzdELDJGQUEyRjtJQUMzRkwsVUFBVVEsR0FBRyxDQUFDSDtJQUNkLE9BQU8sSUFBTUwsVUFBVVMsTUFBTSxDQUFDSjtBQUNoQztBQUVPLFNBQVNLLGdCQUFnQkMsS0FBYTtJQUMzQyxxRkFBcUY7SUFDckZiLE1BQU1OLFVBQVUsSUFBSTtJQUNwQk0sTUFBTUwsZ0JBQWdCLEdBQUdtQixLQUFLQyxHQUFHLENBQUNmLE1BQU1MLGdCQUFnQixFQUFFa0I7SUFFMUQsdUdBQXVHO0lBQ3ZHLE1BQU1HLFdBQVcsSUFBSSxPQUFPSCxRQUFRO0lBQ3BDLE1BQU1JLFlBQVksSUFBSSxPQUFPSixRQUFRO0lBQ3JDYixNQUFNWCxpQkFBaUIsR0FBR3lCLEtBQUtJLEdBQUcsQ0FBQyxHQUFHbEIsTUFBTVgsaUJBQWlCLEdBQUcyQjtJQUNoRWhCLE1BQU1WLGtCQUFrQixHQUFHd0IsS0FBS0ksR0FBRyxDQUFDLEdBQUdsQixNQUFNVixrQkFBa0IsR0FBRzJCO0lBRWxFLDJFQUEyRTtJQUMzRWpCLE1BQU1ULHVCQUF1QixHQUFHdUIsS0FBS0MsR0FBRyxDQUFDLE1BQU1mLE1BQU1ULHVCQUF1QixHQUFHO0lBRS9FLG9FQUFvRTtJQUNwRVMsTUFBTVIsYUFBYSxHQUFHc0IsS0FBS0ksR0FBRyxDQUFDLE1BQU1sQixNQUFNUixhQUFhLEdBQUcsT0FBT3FCLFFBQVE7SUFDMUUsTUFBTU0sV0FBVyxJQUFJTCxLQUFLTSxLQUFLLENBQUNwQixNQUFNTixVQUFVLEdBQUc7SUFDbkRNLE1BQU1QLGdCQUFnQixHQUFHcUIsS0FBS0ksR0FBRyxDQUFDLEdBQUdKLEtBQUtDLEdBQUcsQ0FBQ2YsTUFBTVAsZ0JBQWdCLEVBQUUwQjtJQUV0RSw2RkFBNkY7SUFDN0ZuQixNQUFNSixXQUFXLENBQUNDLFdBQVcsR0FBR2lCLEtBQUtJLEdBQUcsQ0FBQyxHQUFHbEIsTUFBTUosV0FBVyxDQUFDQyxXQUFXLEdBQUcsT0FBT2dCLFFBQVE7SUFDM0ZiLE1BQU1KLFdBQVcsQ0FBQ0UsWUFBWSxHQUFHZ0IsS0FBS0ksR0FBRyxDQUFDLEdBQUdsQixNQUFNSixXQUFXLENBQUNFLFlBQVksR0FBRyxPQUFPZSxRQUFRO0lBQzdGYixNQUFNSixXQUFXLENBQUNHLFdBQVcsR0FBR2UsS0FBS0ksR0FBRyxDQUFDLEtBQUtsQixNQUFNSixXQUFXLENBQUNHLFdBQVcsR0FBRyxPQUFPYyxRQUFRO0lBRTdGLHNHQUFzRztJQUN0R1I7SUFDQSxPQUFPRDtBQUNUO0FBRU8sU0FBU2lCO0lBQ2QsNEVBQTRFO0lBQzVFckIsUUFBUUMsZ0JBQWdCYjtJQUN4QmlCO0FBQ0Y7QUFFTyxTQUFTaUIsa0NBQWtDQyxHQUFZO0lBQzVELGtHQUFrRztJQUNsRyxNQUFNLEVBQUV6QixZQUFZLEVBQUUsR0FBR0UsTUFBTUosV0FBVztJQUMxQzJCLElBQUlDLGNBQWMsQ0FBQyxJQUFJMUIsZUFBZTtJQUN0QyxPQUFPeUI7QUFDVCIsInNvdXJjZXMiOlsiL2FwcC9zcmMvZW5naW5lL2RpZmZpY3VsdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnXG5cbmV4cG9ydCB0eXBlIERpZmZpY3VsdHlFbnZpcm9ubWVudFN0YXRlID0ge1xuICBwcm9wRGVuc2l0eTogbnVtYmVyXG4gIHdpbmRTdHJlbmd0aDogbnVtYmVyXG4gIGNhbnlvbldpZHRoOiBudW1iZXJcbn1cblxuZXhwb3J0IHR5cGUgRGlmZmljdWx0eVN0YXRlID0ge1xuICBlbmVteUhwTXVsdGlwbGllcjogbnVtYmVyXG4gIGVuZW15RHBzTXVsdGlwbGllcjogbnVtYmVyXG4gIHNwYXduSW50ZXJ2YWxNdWx0aXBsaWVyOiBudW1iZXJcbiAgZW5lbXlBY2N1cmFjeTogbnVtYmVyXG4gIHVubG9ja2VkQWRkVHlwZXM6IG51bWJlclxuICBib3NzQ2xlYXJzOiBudW1iZXJcbiAgbGFzdENsZWFyZWRTdGFnZTogbnVtYmVyXG4gIGVudmlyb25tZW50OiBEaWZmaWN1bHR5RW52aXJvbm1lbnRTdGF0ZVxufVxuXG50eXBlIERpZmZpY3VsdHlMaXN0ZW5lciA9IChzdGF0ZTogRGlmZmljdWx0eVN0YXRlKSA9PiB2b2lkXG5cbmNvbnN0IEJBU0VfU1RBVEU6IERpZmZpY3VsdHlTdGF0ZSA9IHtcbiAgZW5lbXlIcE11bHRpcGxpZXI6IDEsXG4gIGVuZW15RHBzTXVsdGlwbGllcjogMSxcbiAgc3Bhd25JbnRlcnZhbE11bHRpcGxpZXI6IDEsXG4gIGVuZW15QWNjdXJhY3k6IDAuNTUsXG4gIHVubG9ja2VkQWRkVHlwZXM6IDEsXG4gIGJvc3NDbGVhcnM6IDAsXG4gIGxhc3RDbGVhcmVkU3RhZ2U6IDAsXG4gIGVudmlyb25tZW50OiB7XG4gICAgcHJvcERlbnNpdHk6IDAuNixcbiAgICB3aW5kU3RyZW5ndGg6IDAuNCxcbiAgICBjYW55b25XaWR0aDogMVxuICB9XG59XG5cbmxldCBzdGF0ZTogRGlmZmljdWx0eVN0YXRlID0gc3RydWN0dXJlZENsb25lKEJBU0VfU1RBVEUpXG5jb25zdCBsaXN0ZW5lcnMgPSBuZXcgU2V0PERpZmZpY3VsdHlMaXN0ZW5lcj4oKVxuXG5mdW5jdGlvbiBjbG9uZVN0YXRlKCk6IERpZmZpY3VsdHlTdGF0ZSB7XG4gIC8vMS4tIFByb3ZpZGUgY2FsbGVycyB3aXRoIGEgZGVmZW5zaXZlIGNvcHkgc28gaW50ZXJuYWwgZGlmZmljdWx0eSBib29ra2VlcGluZyByZW1haW5zIGVuY2Fwc3VsYXRlZC5cbiAgcmV0dXJuIHtcbiAgICBlbmVteUhwTXVsdGlwbGllcjogc3RhdGUuZW5lbXlIcE11bHRpcGxpZXIsXG4gICAgZW5lbXlEcHNNdWx0aXBsaWVyOiBzdGF0ZS5lbmVteURwc011bHRpcGxpZXIsXG4gICAgc3Bhd25JbnRlcnZhbE11bHRpcGxpZXI6IHN0YXRlLnNwYXduSW50ZXJ2YWxNdWx0aXBsaWVyLFxuICAgIGVuZW15QWNjdXJhY3k6IHN0YXRlLmVuZW15QWNjdXJhY3ksXG4gICAgdW5sb2NrZWRBZGRUeXBlczogc3RhdGUudW5sb2NrZWRBZGRUeXBlcyxcbiAgICBib3NzQ2xlYXJzOiBzdGF0ZS5ib3NzQ2xlYXJzLFxuICAgIGxhc3RDbGVhcmVkU3RhZ2U6IHN0YXRlLmxhc3RDbGVhcmVkU3RhZ2UsXG4gICAgZW52aXJvbm1lbnQ6IHsgLi4uc3RhdGUuZW52aXJvbm1lbnQgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXQoKTogdm9pZCB7XG4gIC8vMS4tIE5vdGlmeSBldmVyeSBzdWJzY3JpYmVyIHVzaW5nIHRoZSBmcmVzaGx5IGNsb25lZCBzbmFwc2hvdCB0byBwcmV2ZW50IGFjY2lkZW50YWwgbXV0YXRpb24uXG4gIGNvbnN0IHNuYXBzaG90ID0gY2xvbmVTdGF0ZSgpXG4gIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XG4gICAgbGlzdGVuZXIoc25hcHNob3QpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERpZmZpY3VsdHlTdGF0ZSgpOiBEaWZmaWN1bHR5U3RhdGUge1xuICAvLzEuLSBTdXJmYWNlIHRoZSBjdXJyZW50IHN0YXRlIHdpdGhvdXQgZXhwb3NpbmcgdGhlIG11dGFibGUgc2luZ2xldG9uIHRvIGNvbnN1bWVycy5cbiAgcmV0dXJuIGNsb25lU3RhdGUoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gb25EaWZmaWN1bHR5Q2hhbmdlKGxpc3RlbmVyOiBEaWZmaWN1bHR5TGlzdGVuZXIpOiAoKSA9PiB2b2lkIHtcbiAgLy8xLi0gUmVnaXN0ZXIgbGlzdGVuZXJzIGxhemlseSBhbmQgaGFuZCBiYWNrIGFuIHVuc3Vic2NyaWJlIGhvb2sgZm9yIGxpZmVjeWNsZSBtYW5hZ2VtZW50LlxuICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKVxuICByZXR1cm4gKCkgPT4gbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Qm9zc0RlZmVhdChzdGFnZTogbnVtYmVyKTogRGlmZmljdWx0eVN0YXRlIHtcbiAgLy8xLi0gSW5jcmVtZW50IHRoZSBkZWZlYXQgY291bnRlciBiZWZvcmUgY29tcHV0aW5nIHRoZSBjb21wb3VuZCBzY2FsaW5nIGFkanVzdG1lbnRzLlxuICBzdGF0ZS5ib3NzQ2xlYXJzICs9IDFcbiAgc3RhdGUubGFzdENsZWFyZWRTdGFnZSA9IE1hdGgubWF4KHN0YXRlLmxhc3RDbGVhcmVkU3RhZ2UsIHN0YWdlKVxuXG4gIC8vMi4tIEluY3JlYXNlIGVuZW15IGR1cmFiaWxpdHkgYW5kIGRhbWFnZSBvdXRwdXQgbXVsdGlwbGljYXRpdmVseSB0byBrZWVwIHByZXNzdXJlIHNjYWxpbmcgbm90aWNlYWJsZS5cbiAgY29uc3QgaHBTY2FsYXIgPSAxICsgMC4wOCArIHN0YWdlICogMC4wMTVcbiAgY29uc3QgZHBzU2NhbGFyID0gMSArIDAuMDUgKyBzdGFnZSAqIDAuMDFcbiAgc3RhdGUuZW5lbXlIcE11bHRpcGxpZXIgPSBNYXRoLm1pbig2LCBzdGF0ZS5lbmVteUhwTXVsdGlwbGllciAqIGhwU2NhbGFyKVxuICBzdGF0ZS5lbmVteURwc011bHRpcGxpZXIgPSBNYXRoLm1pbig1LCBzdGF0ZS5lbmVteURwc011bHRpcGxpZXIgKiBkcHNTY2FsYXIpXG5cbiAgLy8zLi0gVGlnaHRlbiBzcGF3biBpbnRlcnZhbHMgd2hpbGUgZW5zdXJpbmcgdGhleSBkbyBub3QgY29sbGFwc2UgZW50aXJlbHkuXG4gIHN0YXRlLnNwYXduSW50ZXJ2YWxNdWx0aXBsaWVyID0gTWF0aC5tYXgoMC4zMiwgc3RhdGUuc3Bhd25JbnRlcnZhbE11bHRpcGxpZXIgKiAwLjkpXG5cbiAgLy80Li0gSW1wcm92ZSBBSSBhY2N1cmFjeSBhbmQgdW5sb2NrIGV4dHJhIGFkZCBhcmNoZXR5cGVzIGdyYWR1YWxseS5cbiAgc3RhdGUuZW5lbXlBY2N1cmFjeSA9IE1hdGgubWluKDAuOTgsIHN0YXRlLmVuZW15QWNjdXJhY3kgKyAwLjA0ICsgc3RhZ2UgKiAwLjAwNSlcbiAgY29uc3QgdW5sb2NrZWQgPSAxICsgTWF0aC5mbG9vcihzdGF0ZS5ib3NzQ2xlYXJzIC8gMilcbiAgc3RhdGUudW5sb2NrZWRBZGRUeXBlcyA9IE1hdGgubWluKDMsIE1hdGgubWF4KHN0YXRlLnVubG9ja2VkQWRkVHlwZXMsIHVubG9ja2VkKSlcblxuICAvLzUuLSBFbnJpY2ggdGhlIHdvcmxkIGFtYmllbmNlIHNvIHZpY3RvcmllcyBmZWVsIGltcGFjdGZ1bCBpbiB0aGUgb3ZlcndvcmxkIHN0cmVhbWluZyBsb2dpYy5cbiAgc3RhdGUuZW52aXJvbm1lbnQucHJvcERlbnNpdHkgPSBNYXRoLm1pbigzLCBzdGF0ZS5lbnZpcm9ubWVudC5wcm9wRGVuc2l0eSArIDAuMTggKyBzdGFnZSAqIDAuMDIpXG4gIHN0YXRlLmVudmlyb25tZW50LndpbmRTdHJlbmd0aCA9IE1hdGgubWluKDQsIHN0YXRlLmVudmlyb25tZW50LndpbmRTdHJlbmd0aCArIDAuMTYgKyBzdGFnZSAqIDAuMDEpXG4gIHN0YXRlLmVudmlyb25tZW50LmNhbnlvbldpZHRoID0gTWF0aC5taW4oMy4yLCBzdGF0ZS5lbnZpcm9ubWVudC5jYW55b25XaWR0aCArIDAuMTIgKyBzdGFnZSAqIDAuMDA4KVxuXG4gIC8vNi4tIEVtaXQgdGhlIHVwZGF0ZWQgc25hcHNob3QgdG8gbGlzdGVuZXJzIGFuZCBwcm92aWRlIHRoZSBjYWxsZXIgdGhlIHNhbWUgaW5mb3JtYXRpb24gZm9yIGNoYWluaW5nLlxuICBlbWl0KClcbiAgcmV0dXJuIGNsb25lU3RhdGUoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXREaWZmaWN1bHR5U3RhdGUoKTogdm9pZCB7XG4gIC8vMS4tIFJlc3RvcmUgYmFzZWxpbmUgdmFsdWVzIHByaW1hcmlseSBmb3IgZGV0ZXJtaW5pc3RpYyB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgc3RhdGUgPSBzdHJ1Y3R1cmVkQ2xvbmUoQkFTRV9TVEFURSlcbiAgZW1pdCgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUVudmlyb25tZW50VmVjdG9yQXR0ZW51YXRpb24odmVjOiBWZWN0b3IzKTogVmVjdG9yMyB7XG4gIC8vMS4tIEFkanVzdCBhIGRpcmVjdGlvbiB2ZWN0b3IgdG8gc2ltdWxhdGUgd2luZCBpbmZsdWVuY2UgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHNjYWxpbmcga25vYnMuXG4gIGNvbnN0IHsgd2luZFN0cmVuZ3RoIH0gPSBzdGF0ZS5lbnZpcm9ubWVudFxuICB2ZWMubXVsdGlwbHlTY2FsYXIoMSArIHdpbmRTdHJlbmd0aCAqIDAuMDUpXG4gIHJldHVybiB2ZWNcbn1cbiJdLCJuYW1lcyI6WyJCQVNFX1NUQVRFIiwiZW5lbXlIcE11bHRpcGxpZXIiLCJlbmVteURwc011bHRpcGxpZXIiLCJzcGF3bkludGVydmFsTXVsdGlwbGllciIsImVuZW15QWNjdXJhY3kiLCJ1bmxvY2tlZEFkZFR5cGVzIiwiYm9zc0NsZWFycyIsImxhc3RDbGVhcmVkU3RhZ2UiLCJlbnZpcm9ubWVudCIsInByb3BEZW5zaXR5Iiwid2luZFN0cmVuZ3RoIiwiY2FueW9uV2lkdGgiLCJzdGF0ZSIsInN0cnVjdHVyZWRDbG9uZSIsImxpc3RlbmVycyIsIlNldCIsImNsb25lU3RhdGUiLCJlbWl0Iiwic25hcHNob3QiLCJsaXN0ZW5lciIsImdldERpZmZpY3VsdHlTdGF0ZSIsIm9uRGlmZmljdWx0eUNoYW5nZSIsImFkZCIsImRlbGV0ZSIsImFwcGx5Qm9zc0RlZmVhdCIsInN0YWdlIiwiTWF0aCIsIm1heCIsImhwU2NhbGFyIiwiZHBzU2NhbGFyIiwibWluIiwidW5sb2NrZWQiLCJmbG9vciIsInJlc2V0RGlmZmljdWx0eVN0YXRlIiwiYXBwbHlFbnZpcm9ubWVudFZlY3RvckF0dGVudWF0aW9uIiwidmVjIiwibXVsdGlwbHlTY2FsYXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/engine/difficulty.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/brokerClient.ts":
/*!*********************************!*\
  !*** ./src/lib/brokerClient.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTENT_SCHEMA_VERSION: () => (/* binding */ INTENT_SCHEMA_VERSION),\n/* harmony export */   OBSERVER_SCHEMA_VERSION: () => (/* binding */ OBSERVER_SCHEMA_VERSION),\n/* harmony export */   createBrokerClient: () => (/* binding */ createBrokerClient)\n/* harmony export */ });\n/* harmony import */ var _brokerConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./brokerConfig */ \"(ssr)/./src/lib/brokerConfig.ts\");\n\nconst INTENT_SCHEMA_VERSION = \"0.1.0\";\nconst OBSERVER_SCHEMA_VERSION = \"0.1.0\";\nclass BrokerClientImpl {\n    constructor(options = {}){\n        this.socket = null;\n        this.listeners = new Set();\n        this.reconnectTimer = null;\n        this.shouldReconnect = true;\n        this.state = \"idle\";\n        this.intentQueue = [];\n        this.sequenceId = 0;\n        //1.- Capture runtime options while falling back to predictable defaults for client id and retry cadence.\n        this.clientId = options.clientId?.trim() || \"pilot-local\";\n        this.baseDelay = Math.max(250, options.reconnectDelayMs ?? 1000);\n        this.backoffMs = this.baseDelay;\n        this.openSocket();\n    }\n    url() {\n        //2.- Resolve the configured broker URL, translating docker hostnames for browser contexts when required.\n        const { wsUrl } = (0,_brokerConfig__WEBPACK_IMPORTED_MODULE_0__.getBrokerConfig)();\n        return (0,_brokerConfig__WEBPACK_IMPORTED_MODULE_0__.resolveBrowserUrl)(wsUrl);\n    }\n    openSocket() {\n        //3.- Establish a fresh WebSocket connection while recording the new lifecycle state.\n        this.clearTimer();\n        this.state = \"connecting\";\n        this.socket = new WebSocket(this.url());\n        this.attachHandlers(this.socket);\n    }\n    attachHandlers(socket) {\n        //4.- Wire connection lifecycle callbacks that manage handshake, message routing, and reconnection.\n        socket.addEventListener(\"open\", ()=>{\n            this.state = \"open\";\n            this.backoffMs = this.baseDelay;\n            this.sendHandshake();\n            this.flushQueue();\n        });\n        socket.addEventListener(\"message\", (event)=>{\n            this.handleMessage(event.data);\n        });\n        socket.addEventListener(\"close\", ()=>{\n            this.state = \"closed\";\n            if (!this.shouldReconnect) {\n                return;\n            }\n            this.scheduleReconnect();\n        });\n        socket.addEventListener(\"error\", ()=>{\n            socket.close();\n        });\n    }\n    sendHandshake() {\n        //5.- Identify the observer to the broker so downstream services associate the websocket with a pilot session.\n        const handshake = {\n            type: \"observer_state\",\n            id: this.clientId,\n            schema_version: OBSERVER_SCHEMA_VERSION,\n            observer_id: this.clientId,\n            role: \"pilot\"\n        };\n        this.sendRaw(JSON.stringify(handshake));\n    }\n    flushQueue() {\n        //6.- Drain buffered payloads now that the websocket is writable again.\n        if (!this.socket || this.socket.readyState !== WebSocket.OPEN) {\n            return;\n        }\n        for (const payload of this.intentQueue.splice(0)){\n            this.socket.send(payload);\n        }\n    }\n    scheduleReconnect() {\n        //7.- Apply exponential backoff to avoid thundering herds when reconnecting after broker restarts.\n        this.clearTimer();\n        this.reconnectTimer = setTimeout(()=>{\n            this.backoffMs = Math.min(this.backoffMs * 2, 16000);\n            this.openSocket();\n        }, this.backoffMs);\n    }\n    clearTimer() {\n        //8.- Cancel any queued reconnect attempt prior to opening a fresh socket.\n        if (this.reconnectTimer) {\n            clearTimeout(this.reconnectTimer);\n            this.reconnectTimer = null;\n        }\n    }\n    handleMessage(raw) {\n        //9.- Parse inbound JSON payloads and forward recognised world diffs to subscribers.\n        if (typeof raw !== \"string\") {\n            return;\n        }\n        try {\n            const parsed = JSON.parse(raw);\n            if (parsed?.type !== \"world_diff\" || typeof parsed.tick !== \"number\") {\n                return;\n            }\n            for (const listener of this.listeners){\n                listener(parsed);\n            }\n        } catch  {\n        // Ignore malformed payloads.\n        }\n    }\n    sendRaw(payload) {\n        //10.- Transmit immediately when connected or queue for delivery once the broker handshake completes.\n        if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n            this.socket.send(payload);\n            return;\n        }\n        this.intentQueue.push(payload);\n    }\n    onWorldDiff(listener) {\n        //11.- Register subscribers so gameplay systems can react to authoritative state updates.\n        this.listeners.add(listener);\n        return ()=>this.listeners.delete(listener);\n    }\n    sendIntent(snapshot) {\n        //12.- Increment the intent sequence and forward the latest control frame to the broker.\n        this.sequenceId += 1;\n        const envelope = {\n            type: \"intent\",\n            id: this.clientId,\n            schema_version: INTENT_SCHEMA_VERSION,\n            controller_id: this.clientId,\n            sequence_id: this.sequenceId,\n            throttle: snapshot.throttle,\n            brake: snapshot.brake,\n            steer: snapshot.steer,\n            handbrake: snapshot.handbrake,\n            gear: snapshot.gear,\n            boost: snapshot.boost\n        };\n        this.sendRaw(JSON.stringify(envelope));\n    }\n    connectionState() {\n        //13.- Expose lifecycle status for diagnostics overlays or tests.\n        return this.state;\n    }\n    close() {\n        //14.- Terminate the websocket regardless of whether the handshake completed while suppressing future reconnect attempts during teardown.\n        this.shouldReconnect = false;\n        this.clearTimer();\n        this.listeners.clear();\n        const socket = this.socket;\n        if (socket && (socket.readyState === WebSocket.OPEN || socket.readyState === WebSocket.CONNECTING)) {\n            socket.close();\n        }\n        this.socket = null;\n        this.state = \"closed\";\n    }\n}\nfunction createBrokerClient(options = {}) {\n    //15.- Provide a lightweight facade so React hooks receive a stable API surface.\n    const impl = new BrokerClientImpl(options);\n    return {\n        onWorldDiff: (listener)=>impl.onWorldDiff(listener),\n        sendIntent: (snapshot)=>impl.sendIntent(snapshot),\n        connectionState: ()=>impl.connectionState(),\n        close: ()=>impl.close()\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzFDVSxpQkFBaUIsSUFBTUksS0FBS0osZUFBZTtRQUMzQ3RDLE9BQU8sSUFBTTBDLEtBQUsxQyxLQUFLO0lBQ3pCO0FBQ0YiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL2xpYi9icm9rZXJDbGllbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QnJva2VyQ29uZmlnLCByZXNvbHZlQnJvd3NlclVybCB9IGZyb20gXCIuL2Jyb2tlckNvbmZpZ1wiO1xuXG5leHBvcnQgY29uc3QgSU5URU5UX1NDSEVNQV9WRVJTSU9OID0gXCIwLjEuMFwiO1xuZXhwb3J0IGNvbnN0IE9CU0VSVkVSX1NDSEVNQV9WRVJTSU9OID0gXCIwLjEuMFwiO1xuXG5leHBvcnQgdHlwZSBCcm9rZXJHYW1lRXZlbnQgPSB7XG4gIGV2ZW50SWQ/OiBzdHJpbmc7XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgdHlwZT86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIEJyb2tlcldvcmxkRGlmZkVudmVsb3BlID0ge1xuICB0eXBlOiBcIndvcmxkX2RpZmZcIjtcbiAgdGljazogbnVtYmVyO1xuICB2ZWhpY2xlcz86IHtcbiAgICB1cGRhdGVkPzogQXJyYXk8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+O1xuICAgIHJlbW92ZWQ/OiBzdHJpbmdbXTtcbiAgfTtcbiAgcHJvamVjdGlsZXM/OiB7XG4gICAgdXBkYXRlZD86IEFycmF5PFJlY29yZDxzdHJpbmcsIHVua25vd24+PjtcbiAgICByZW1vdmVkPzogc3RyaW5nW107XG4gIH07XG4gIGV2ZW50cz86IEJyb2tlckdhbWVFdmVudFtdO1xufTtcblxuZXhwb3J0IHR5cGUgQnJva2VySW50ZW50U25hcHNob3QgPSB7XG4gIHRocm90dGxlOiBudW1iZXI7XG4gIGJyYWtlOiBudW1iZXI7XG4gIHN0ZWVyOiBudW1iZXI7XG4gIGhhbmRicmFrZTogYm9vbGVhbjtcbiAgZ2VhcjogbnVtYmVyO1xuICBib29zdDogYm9vbGVhbjtcbn07XG5cbnR5cGUgV29ybGREaWZmTGlzdGVuZXIgPSAoZGlmZjogQnJva2VyV29ybGREaWZmRW52ZWxvcGUpID0+IHZvaWQ7XG5cbnR5cGUgQnJva2VyQ2xpZW50T3B0aW9ucyA9IHtcbiAgY2xpZW50SWQ/OiBzdHJpbmc7XG4gIHJlY29ubmVjdERlbGF5TXM/OiBudW1iZXI7XG59O1xuXG50eXBlIENvbm5lY3Rpb25TdGF0ZSA9IFwiaWRsZVwiIHwgXCJjb25uZWN0aW5nXCIgfCBcIm9wZW5cIiB8IFwiY2xvc2VkXCI7XG5cbmNsYXNzIEJyb2tlckNsaWVudEltcGwge1xuICBwcml2YXRlIHJlYWRvbmx5IGNsaWVudElkOiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgYmFzZURlbGF5OiBudW1iZXI7XG4gIHByaXZhdGUgc29ja2V0OiBXZWJTb2NrZXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsaXN0ZW5lcnMgPSBuZXcgU2V0PFdvcmxkRGlmZkxpc3RlbmVyPigpO1xuICBwcml2YXRlIHJlY29ubmVjdFRpbWVyOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJhY2tvZmZNczogbnVtYmVyO1xuICBwcml2YXRlIHNob3VsZFJlY29ubmVjdCA9IHRydWU7XG4gIHByaXZhdGUgc3RhdGU6IENvbm5lY3Rpb25TdGF0ZSA9IFwiaWRsZVwiO1xuICBwcml2YXRlIGludGVudFF1ZXVlOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIHNlcXVlbmNlSWQgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEJyb2tlckNsaWVudE9wdGlvbnMgPSB7fSkge1xuICAgIC8vMS4tIENhcHR1cmUgcnVudGltZSBvcHRpb25zIHdoaWxlIGZhbGxpbmcgYmFjayB0byBwcmVkaWN0YWJsZSBkZWZhdWx0cyBmb3IgY2xpZW50IGlkIGFuZCByZXRyeSBjYWRlbmNlLlxuICAgIHRoaXMuY2xpZW50SWQgPSBvcHRpb25zLmNsaWVudElkPy50cmltKCkgfHwgXCJwaWxvdC1sb2NhbFwiO1xuICAgIHRoaXMuYmFzZURlbGF5ID0gTWF0aC5tYXgoMjUwLCBvcHRpb25zLnJlY29ubmVjdERlbGF5TXMgPz8gMTAwMCk7XG4gICAgdGhpcy5iYWNrb2ZmTXMgPSB0aGlzLmJhc2VEZWxheTtcbiAgICB0aGlzLm9wZW5Tb2NrZXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXJsKCk6IHN0cmluZyB7XG4gICAgLy8yLi0gUmVzb2x2ZSB0aGUgY29uZmlndXJlZCBicm9rZXIgVVJMLCB0cmFuc2xhdGluZyBkb2NrZXIgaG9zdG5hbWVzIGZvciBicm93c2VyIGNvbnRleHRzIHdoZW4gcmVxdWlyZWQuXG4gICAgY29uc3QgeyB3c1VybCB9ID0gZ2V0QnJva2VyQ29uZmlnKCk7XG4gICAgcmV0dXJuIHJlc29sdmVCcm93c2VyVXJsKHdzVXJsKTtcbiAgfVxuXG4gIHByaXZhdGUgb3BlblNvY2tldCgpIHtcbiAgICAvLzMuLSBFc3RhYmxpc2ggYSBmcmVzaCBXZWJTb2NrZXQgY29ubmVjdGlvbiB3aGlsZSByZWNvcmRpbmcgdGhlIG5ldyBsaWZlY3ljbGUgc3RhdGUuXG4gICAgdGhpcy5jbGVhclRpbWVyKCk7XG4gICAgdGhpcy5zdGF0ZSA9IFwiY29ubmVjdGluZ1wiO1xuICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnVybCgpKTtcbiAgICB0aGlzLmF0dGFjaEhhbmRsZXJzKHRoaXMuc29ja2V0KTtcbiAgfVxuXG4gIHByaXZhdGUgYXR0YWNoSGFuZGxlcnMoc29ja2V0OiBXZWJTb2NrZXQpIHtcbiAgICAvLzQuLSBXaXJlIGNvbm5lY3Rpb24gbGlmZWN5Y2xlIGNhbGxiYWNrcyB0aGF0IG1hbmFnZSBoYW5kc2hha2UsIG1lc3NhZ2Ugcm91dGluZywgYW5kIHJlY29ubmVjdGlvbi5cbiAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZSA9IFwib3BlblwiO1xuICAgICAgdGhpcy5iYWNrb2ZmTXMgPSB0aGlzLmJhc2VEZWxheTtcbiAgICAgIHRoaXMuc2VuZEhhbmRzaGFrZSgpO1xuICAgICAgdGhpcy5mbHVzaFF1ZXVlKCk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZU1lc3NhZ2UoZXZlbnQuZGF0YSk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgaWYgKCF0aGlzLnNob3VsZFJlY29ubmVjdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnNjaGVkdWxlUmVjb25uZWN0KCk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsICgpID0+IHtcbiAgICAgIHNvY2tldC5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZW5kSGFuZHNoYWtlKCkge1xuICAgIC8vNS4tIElkZW50aWZ5IHRoZSBvYnNlcnZlciB0byB0aGUgYnJva2VyIHNvIGRvd25zdHJlYW0gc2VydmljZXMgYXNzb2NpYXRlIHRoZSB3ZWJzb2NrZXQgd2l0aCBhIHBpbG90IHNlc3Npb24uXG4gICAgY29uc3QgaGFuZHNoYWtlID0ge1xuICAgICAgdHlwZTogXCJvYnNlcnZlcl9zdGF0ZVwiLFxuICAgICAgaWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICBzY2hlbWFfdmVyc2lvbjogT0JTRVJWRVJfU0NIRU1BX1ZFUlNJT04sXG4gICAgICBvYnNlcnZlcl9pZDogdGhpcy5jbGllbnRJZCxcbiAgICAgIHJvbGU6IFwicGlsb3RcIixcbiAgICB9O1xuICAgIHRoaXMuc2VuZFJhdyhKU09OLnN0cmluZ2lmeShoYW5kc2hha2UpKTtcbiAgfVxuXG4gIHByaXZhdGUgZmx1c2hRdWV1ZSgpIHtcbiAgICAvLzYuLSBEcmFpbiBidWZmZXJlZCBwYXlsb2FkcyBub3cgdGhhdCB0aGUgd2Vic29ja2V0IGlzIHdyaXRhYmxlIGFnYWluLlxuICAgIGlmICghdGhpcy5zb2NrZXQgfHwgdGhpcy5zb2NrZXQucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBwYXlsb2FkIG9mIHRoaXMuaW50ZW50UXVldWUuc3BsaWNlKDApKSB7XG4gICAgICB0aGlzLnNvY2tldC5zZW5kKHBheWxvYWQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2NoZWR1bGVSZWNvbm5lY3QoKSB7XG4gICAgLy83Li0gQXBwbHkgZXhwb25lbnRpYWwgYmFja29mZiB0byBhdm9pZCB0aHVuZGVyaW5nIGhlcmRzIHdoZW4gcmVjb25uZWN0aW5nIGFmdGVyIGJyb2tlciByZXN0YXJ0cy5cbiAgICB0aGlzLmNsZWFyVGltZXIoKTtcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmJhY2tvZmZNcyA9IE1hdGgubWluKHRoaXMuYmFja29mZk1zICogMiwgMTYwMDApO1xuICAgICAgdGhpcy5vcGVuU29ja2V0KCk7XG4gICAgfSwgdGhpcy5iYWNrb2ZmTXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhclRpbWVyKCkge1xuICAgIC8vOC4tIENhbmNlbCBhbnkgcXVldWVkIHJlY29ubmVjdCBhdHRlbXB0IHByaW9yIHRvIG9wZW5pbmcgYSBmcmVzaCBzb2NrZXQuXG4gICAgaWYgKHRoaXMucmVjb25uZWN0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlY29ubmVjdFRpbWVyKTtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTWVzc2FnZShyYXc6IHVua25vd24pIHtcbiAgICAvLzkuLSBQYXJzZSBpbmJvdW5kIEpTT04gcGF5bG9hZHMgYW5kIGZvcndhcmQgcmVjb2duaXNlZCB3b3JsZCBkaWZmcyB0byBzdWJzY3JpYmVycy5cbiAgICBpZiAodHlwZW9mIHJhdyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyYXcpIGFzIFBhcnRpYWw8QnJva2VyV29ybGREaWZmRW52ZWxvcGU+O1xuICAgICAgaWYgKHBhcnNlZD8udHlwZSAhPT0gXCJ3b3JsZF9kaWZmXCIgfHwgdHlwZW9mIHBhcnNlZC50aWNrICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5saXN0ZW5lcnMpIHtcbiAgICAgICAgbGlzdGVuZXIocGFyc2VkIGFzIEJyb2tlcldvcmxkRGlmZkVudmVsb3BlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElnbm9yZSBtYWxmb3JtZWQgcGF5bG9hZHMuXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZW5kUmF3KHBheWxvYWQ6IHN0cmluZykge1xuICAgIC8vMTAuLSBUcmFuc21pdCBpbW1lZGlhdGVseSB3aGVuIGNvbm5lY3RlZCBvciBxdWV1ZSBmb3IgZGVsaXZlcnkgb25jZSB0aGUgYnJva2VyIGhhbmRzaGFrZSBjb21wbGV0ZXMuXG4gICAgaWYgKHRoaXMuc29ja2V0ICYmIHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aGlzLnNvY2tldC5zZW5kKHBheWxvYWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmludGVudFF1ZXVlLnB1c2gocGF5bG9hZCk7XG4gIH1cblxuICBvbldvcmxkRGlmZihsaXN0ZW5lcjogV29ybGREaWZmTGlzdGVuZXIpOiAoKSA9PiB2b2lkIHtcbiAgICAvLzExLi0gUmVnaXN0ZXIgc3Vic2NyaWJlcnMgc28gZ2FtZXBsYXkgc3lzdGVtcyBjYW4gcmVhY3QgdG8gYXV0aG9yaXRhdGl2ZSBzdGF0ZSB1cGRhdGVzLlxuICAgIHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG4gIH1cblxuICBzZW5kSW50ZW50KHNuYXBzaG90OiBCcm9rZXJJbnRlbnRTbmFwc2hvdCkge1xuICAgIC8vMTIuLSBJbmNyZW1lbnQgdGhlIGludGVudCBzZXF1ZW5jZSBhbmQgZm9yd2FyZCB0aGUgbGF0ZXN0IGNvbnRyb2wgZnJhbWUgdG8gdGhlIGJyb2tlci5cbiAgICB0aGlzLnNlcXVlbmNlSWQgKz0gMTtcbiAgICBjb25zdCBlbnZlbG9wZSA9IHtcbiAgICAgIHR5cGU6IFwiaW50ZW50XCIsXG4gICAgICBpZDogdGhpcy5jbGllbnRJZCxcbiAgICAgIHNjaGVtYV92ZXJzaW9uOiBJTlRFTlRfU0NIRU1BX1ZFUlNJT04sXG4gICAgICBjb250cm9sbGVyX2lkOiB0aGlzLmNsaWVudElkLFxuICAgICAgc2VxdWVuY2VfaWQ6IHRoaXMuc2VxdWVuY2VJZCxcbiAgICAgIHRocm90dGxlOiBzbmFwc2hvdC50aHJvdHRsZSxcbiAgICAgIGJyYWtlOiBzbmFwc2hvdC5icmFrZSxcbiAgICAgIHN0ZWVyOiBzbmFwc2hvdC5zdGVlcixcbiAgICAgIGhhbmRicmFrZTogc25hcHNob3QuaGFuZGJyYWtlLFxuICAgICAgZ2Vhcjogc25hcHNob3QuZ2VhcixcbiAgICAgIGJvb3N0OiBzbmFwc2hvdC5ib29zdCxcbiAgICB9O1xuICAgIHRoaXMuc2VuZFJhdyhKU09OLnN0cmluZ2lmeShlbnZlbG9wZSkpO1xuICB9XG5cbiAgY29ubmVjdGlvblN0YXRlKCk6IENvbm5lY3Rpb25TdGF0ZSB7XG4gICAgLy8xMy4tIEV4cG9zZSBsaWZlY3ljbGUgc3RhdHVzIGZvciBkaWFnbm9zdGljcyBvdmVybGF5cyBvciB0ZXN0cy5cbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vMTQuLSBUZXJtaW5hdGUgdGhlIHdlYnNvY2tldCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGhhbmRzaGFrZSBjb21wbGV0ZWQgd2hpbGUgc3VwcHJlc3NpbmcgZnV0dXJlIHJlY29ubmVjdCBhdHRlbXB0cyBkdXJpbmcgdGVhcmRvd24uXG4gICAgdGhpcy5zaG91bGRSZWNvbm5lY3QgPSBmYWxzZTtcbiAgICB0aGlzLmNsZWFyVGltZXIoKTtcbiAgICB0aGlzLmxpc3RlbmVycy5jbGVhcigpO1xuICAgIGNvbnN0IHNvY2tldCA9IHRoaXMuc29ja2V0O1xuICAgIGlmIChcbiAgICAgIHNvY2tldCAmJlxuICAgICAgKHNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTiB8fCBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpXG4gICAgKSB7XG4gICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICB9XG4gICAgdGhpcy5zb2NrZXQgPSBudWxsO1xuICAgIHRoaXMuc3RhdGUgPSBcImNsb3NlZFwiO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIEJyb2tlckNsaWVudCA9IHtcbiAgb25Xb3JsZERpZmY6IChsaXN0ZW5lcjogV29ybGREaWZmTGlzdGVuZXIpID0+ICgpID0+IHZvaWQ7XG4gIHNlbmRJbnRlbnQ6IChzbmFwc2hvdDogQnJva2VySW50ZW50U25hcHNob3QpID0+IHZvaWQ7XG4gIGNvbm5lY3Rpb25TdGF0ZTogKCkgPT4gQ29ubmVjdGlvblN0YXRlO1xuICBjbG9zZTogKCkgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCcm9rZXJDbGllbnQob3B0aW9uczogQnJva2VyQ2xpZW50T3B0aW9ucyA9IHt9KTogQnJva2VyQ2xpZW50IHtcbiAgLy8xNS4tIFByb3ZpZGUgYSBsaWdodHdlaWdodCBmYWNhZGUgc28gUmVhY3QgaG9va3MgcmVjZWl2ZSBhIHN0YWJsZSBBUEkgc3VyZmFjZS5cbiAgY29uc3QgaW1wbCA9IG5ldyBCcm9rZXJDbGllbnRJbXBsKG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIG9uV29ybGREaWZmOiAobGlzdGVuZXIpID0+IGltcGwub25Xb3JsZERpZmYobGlzdGVuZXIpLFxuICAgIHNlbmRJbnRlbnQ6IChzbmFwc2hvdCkgPT4gaW1wbC5zZW5kSW50ZW50KHNuYXBzaG90KSxcbiAgICBjb25uZWN0aW9uU3RhdGU6ICgpID0+IGltcGwuY29ubmVjdGlvblN0YXRlKCksXG4gICAgY2xvc2U6ICgpID0+IGltcGwuY2xvc2UoKSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRCcm9rZXJDb25maWciLCJyZXNvbHZlQnJvd3NlclVybCIsIklOVEVOVF9TQ0hFTUFfVkVSU0lPTiIsIk9CU0VSVkVSX1NDSEVNQV9WRVJTSU9OIiwiQnJva2VyQ2xpZW50SW1wbCIsIm9wdGlvbnMiLCJzb2NrZXQiLCJsaXN0ZW5lcnMiLCJTZXQiLCJyZWNvbm5lY3RUaW1lciIsInNob3VsZFJlY29ubmVjdCIsInN0YXRlIiwiaW50ZW50UXVldWUiLCJzZXF1ZW5jZUlkIiwiY2xpZW50SWQiLCJ0cmltIiwiYmFzZURlbGF5IiwiTWF0aCIsIm1heCIsInJlY29ubmVjdERlbGF5TXMiLCJiYWNrb2ZmTXMiLCJvcGVuU29ja2V0IiwidXJsIiwid3NVcmwiLCJjbGVhclRpbWVyIiwiV2ViU29ja2V0IiwiYXR0YWNoSGFuZGxlcnMiLCJhZGRFdmVudExpc3RlbmVyIiwic2VuZEhhbmRzaGFrZSIsImZsdXNoUXVldWUiLCJldmVudCIsImhhbmRsZU1lc3NhZ2UiLCJkYXRhIiwic2NoZWR1bGVSZWNvbm5lY3QiLCJjbG9zZSIsImhhbmRzaGFrZSIsInR5cGUiLCJpZCIsInNjaGVtYV92ZXJzaW9uIiwib2JzZXJ2ZXJfaWQiLCJyb2xlIiwic2VuZFJhdyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInBheWxvYWQiLCJzcGxpY2UiLCJzZW5kIiwic2V0VGltZW91dCIsIm1pbiIsImNsZWFyVGltZW91dCIsInJhdyIsInBhcnNlZCIsInBhcnNlIiwidGljayIsImxpc3RlbmVyIiwicHVzaCIsIm9uV29ybGREaWZmIiwiYWRkIiwiZGVsZXRlIiwic2VuZEludGVudCIsInNuYXBzaG90IiwiZW52ZWxvcGUiLCJjb250cm9sbGVyX2lkIiwic2VxdWVuY2VfaWQiLCJ0aHJvdHRsZSIsImJyYWtlIiwic3RlZXIiLCJoYW5kYnJha2UiLCJnZWFyIiwiYm9vc3QiLCJjb25uZWN0aW9uU3RhdGUiLCJjbGVhciIsIkNPTk5FQ1RJTkciLCJjcmVhdGVCcm9rZXJDbGllbnQiLCJpbXBsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/brokerClient.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/brokerConfig.ts":
/*!*********************************!*\
  !*** ./src/lib/brokerConfig.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_HTTP_URL: () => (/* binding */ DEFAULT_HTTP_URL),\n/* harmony export */   DEFAULT_WS_URL: () => (/* binding */ DEFAULT_WS_URL),\n/* harmony export */   getBrokerConfig: () => (/* binding */ getBrokerConfig),\n/* harmony export */   resolveBrowserUrl: () => (/* binding */ resolveBrowserUrl)\n/* harmony export */ });\nconst DEFAULT_WS_URL = \"ws://localhost:43127/ws\";\nconst DEFAULT_HTTP_URL = \"http://localhost:43127\";\nfunction getBrokerConfig() {\n    //1.- Pull the WebSocket endpoint from the public runtime env with a localhost fallback.\n    const wsUrl = \"ws://localhost:43127/ws\"?.trim() || DEFAULT_WS_URL;\n    //2.- Pull the HTTP endpoint used for diagnostics polling with a localhost fallback.\n    const httpUrl = \"http://localhost:43127\"?.trim() || DEFAULT_HTTP_URL;\n    return {\n        wsUrl,\n        httpUrl\n    };\n}\nfunction resolveBrowserUrl(url) {\n    //3.- Normalise broker hostnames so assets served via Docker map to the viewer's origin.\n    try {\n        const parsed = new URL(url);\n        if (false) {}\n        return parsed.toString();\n    } catch  {\n        return url;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2Jyb2tlckNvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBS08sTUFBTUEsaUJBQWlCLDBCQUEwQjtBQUNqRCxNQUFNQyxtQkFBbUIseUJBQXlCO0FBRWxELFNBQVNDO0lBQ2Qsd0ZBQXdGO0lBQ3hGLE1BQU1DLFFBQVFDLHlCQUFxQyxFQUFFRyxVQUFVUDtJQUMvRCxvRkFBb0Y7SUFDcEYsTUFBTVEsVUFBVUosd0JBQXVDLEVBQUVHLFVBQVVOO0lBRW5FLE9BQU87UUFBRUU7UUFBT0s7SUFBUTtBQUMxQjtBQUVPLFNBQVNFLGtCQUFrQkMsR0FBVztJQUMzQyx3RkFBd0Y7SUFDeEYsSUFBSTtRQUNGLE1BQU1DLFNBQVMsSUFBSUMsSUFBSUY7UUFFdkIsSUFBSSxLQUE2RCxFQUFFLEVBR2xFO1FBRUQsT0FBT0MsT0FBT00sUUFBUTtJQUN4QixFQUFFLE9BQU07UUFDTixPQUFPUDtJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL2xpYi9icm9rZXJDb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgQnJva2VyQ29uZmlnID0ge1xuICB3c1VybDogc3RyaW5nO1xuICBodHRwVXJsOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9XU19VUkwgPSBcIndzOi8vbG9jYWxob3N0OjQzMTI3L3dzXCI7XG5leHBvcnQgY29uc3QgREVGQVVMVF9IVFRQX1VSTCA9IFwiaHR0cDovL2xvY2FsaG9zdDo0MzEyN1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnJva2VyQ29uZmlnKCk6IEJyb2tlckNvbmZpZyB7XG4gIC8vMS4tIFB1bGwgdGhlIFdlYlNvY2tldCBlbmRwb2ludCBmcm9tIHRoZSBwdWJsaWMgcnVudGltZSBlbnYgd2l0aCBhIGxvY2FsaG9zdCBmYWxsYmFjay5cbiAgY29uc3Qgd3NVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CUk9LRVJfV1NfVVJMPy50cmltKCkgfHwgREVGQVVMVF9XU19VUkw7XG4gIC8vMi4tIFB1bGwgdGhlIEhUVFAgZW5kcG9pbnQgdXNlZCBmb3IgZGlhZ25vc3RpY3MgcG9sbGluZyB3aXRoIGEgbG9jYWxob3N0IGZhbGxiYWNrLlxuICBjb25zdCBodHRwVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQlJPS0VSX0hUVFBfVVJMPy50cmltKCkgfHwgREVGQVVMVF9IVFRQX1VSTDtcblxuICByZXR1cm4geyB3c1VybCwgaHR0cFVybCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUJyb3dzZXJVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLzMuLSBOb3JtYWxpc2UgYnJva2VyIGhvc3RuYW1lcyBzbyBhc3NldHMgc2VydmVkIHZpYSBEb2NrZXIgbWFwIHRvIHRoZSB2aWV3ZXIncyBvcmlnaW4uXG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgcGFyc2VkLmhvc3RuYW1lID09PSBcImJyb2tlclwiKSB7XG4gICAgICBjb25zdCByZXBsYWNlbWVudCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSB8fCBcImxvY2FsaG9zdFwiO1xuICAgICAgcGFyc2VkLmhvc3RuYW1lID0gcmVwbGFjZW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlZC50b1N0cmluZygpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9XU19VUkwiLCJERUZBVUxUX0hUVFBfVVJMIiwiZ2V0QnJva2VyQ29uZmlnIiwid3NVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQlJPS0VSX1dTX1VSTCIsInRyaW0iLCJodHRwVXJsIiwiTkVYVF9QVUJMSUNfQlJPS0VSX0hUVFBfVVJMIiwicmVzb2x2ZUJyb3dzZXJVcmwiLCJ1cmwiLCJwYXJzZWQiLCJVUkwiLCJob3N0bmFtZSIsInJlcGxhY2VtZW50Iiwid2luZG93IiwibG9jYXRpb24iLCJ0b1N0cmluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/brokerConfig.ts\n");

/***/ }),

/***/ "(ssr)/./src/spawn/corridor.ts":
/*!*******************************!*\
  !*** ./src/spawn/corridor.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCorridor: () => (/* binding */ createCorridor)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction createCorridor(scene) {\n    const len = 1000;\n    const width = 80;\n    const height = 60;\n    const geo = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(width, height, len);\n    const mat = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0x1a1f29,\n        metalness: 0.1,\n        roughness: 0.8\n    });\n    const tunnel = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geo, mat);\n    tunnel.position.set(0, 80, -len / 2 - 100);\n    tunnel.receiveShadow = true;\n    tunnel.castShadow = false;\n    scene.add(tunnel);\n    return {\n        tunnel\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvc3Bhd24vY29ycmlkb3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEI7QUFDdkIsU0FBU0MsZUFBZUMsS0FBa0I7SUFDL0MsTUFBTUMsTUFBTTtJQUNaLE1BQU1DLFFBQVE7SUFDZCxNQUFNQyxTQUFTO0lBQ2YsTUFBTUMsTUFBTSxJQUFJTiw4Q0FBaUIsQ0FBQ0ksT0FBT0MsUUFBUUY7SUFDakQsTUFBTUssTUFBTSxJQUFJUix1REFBMEIsQ0FBQztRQUFFVSxPQUFPO1FBQVVDLFdBQVc7UUFBS0MsV0FBVztJQUFJO0lBQzdGLE1BQU1DLFNBQVMsSUFBSWIsdUNBQVUsQ0FBQ00sS0FBS0U7SUFDbkNLLE9BQU9FLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDYixNQUFJLElBQUk7SUFDcENVLE9BQU9JLGFBQWEsR0FBRztJQUN2QkosT0FBT0ssVUFBVSxHQUFHO0lBQ3BCaEIsTUFBTWlCLEdBQUcsQ0FBQ047SUFDVixPQUFPO1FBQUVBO0lBQU87QUFDbEIiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3NwYXduL2NvcnJpZG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvcnJpZG9yKHNjZW5lOiBUSFJFRS5TY2VuZSl7XG4gIGNvbnN0IGxlbiA9IDEwMDBcbiAgY29uc3Qgd2lkdGggPSA4MFxuICBjb25zdCBoZWlnaHQgPSA2MFxuICBjb25zdCBnZW8gPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkod2lkdGgsIGhlaWdodCwgbGVuKVxuICBjb25zdCBtYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHgxYTFmMjksIG1ldGFsbmVzczogMC4xLCByb3VnaG5lc3M6IDAuOCB9KVxuICBjb25zdCB0dW5uZWwgPSBuZXcgVEhSRUUuTWVzaChnZW8sIG1hdClcbiAgdHVubmVsLnBvc2l0aW9uLnNldCgwLCA4MCwgLWxlbi8yIC0gMTAwKVxuICB0dW5uZWwucmVjZWl2ZVNoYWRvdyA9IHRydWVcbiAgdHVubmVsLmNhc3RTaGFkb3cgPSBmYWxzZVxuICBzY2VuZS5hZGQodHVubmVsKVxuICByZXR1cm4geyB0dW5uZWwgfVxufVxuIl0sIm5hbWVzIjpbIlRIUkVFIiwiY3JlYXRlQ29ycmlkb3IiLCJzY2VuZSIsImxlbiIsIndpZHRoIiwiaGVpZ2h0IiwiZ2VvIiwiQm94R2VvbWV0cnkiLCJtYXQiLCJNZXNoU3RhbmRhcmRNYXRlcmlhbCIsImNvbG9yIiwibWV0YWxuZXNzIiwicm91Z2huZXNzIiwidHVubmVsIiwiTWVzaCIsInBvc2l0aW9uIiwic2V0IiwicmVjZWl2ZVNoYWRvdyIsImNhc3RTaGFkb3ciLCJhZGQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/spawn/corridor.ts\n");

/***/ }),

/***/ "(ssr)/./src/spawn/spawnTable.ts":
/*!*********************************!*\
  !*** ./src/spawn/spawnTable.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSpawner: () => (/* binding */ createSpawner)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _enemies_stellated_octahedron_behavior__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/enemies/stellated-octahedron/behavior */ \"(ssr)/./src/enemies/stellated-octahedron/behavior.ts\");\n/* harmony import */ var _engine_difficulty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/engine/difficulty */ \"(ssr)/./src/engine/difficulty.ts\");\n\n\n\nfunction createSpawner(scene, player, streamer) {\n    let t = 0;\n    let difficulty = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_1__.getDifficultyState)();\n    const unsubscribe = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_1__.onDifficultyChange)((next)=>{\n        //1.- Store the fresh difficulty snapshot to keep cadence, density, and unlocks in sync.\n        difficulty = next;\n    });\n    function spawnWave(center) {\n        //1.- Create one or more adds using offsets that widen with each difficulty unlock.\n        const count = difficulty.unlockedAddTypes >= 3 ? 3 : difficulty.unlockedAddTypes === 2 ? 2 : 1;\n        for(let i = 0; i < count; i++){\n            const spread = 60 + i * 20;\n            const offset = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3((Math.random() - 0.5) * spread, 0, (Math.random() - 0.5) * spread);\n            const pos = center.clone().add(offset);\n            pos.y = streamer.queryHeight(pos.x, pos.z) + 30 + Math.random() * 50;\n            const enemy = (0,_enemies_stellated_octahedron_behavior__WEBPACK_IMPORTED_MODULE_0__.createEnemy)(scene, pos, {\n                difficulty\n            });\n            enemy.target = player.group;\n        }\n    }\n    return {\n        update (dt, stage) {\n            //1.- Ensure previously spawned enemies pursue their assigned targets before handling cadence logic.\n            (0,_enemies_stellated_octahedron_behavior__WEBPACK_IMPORTED_MODULE_0__.updateEnemies)(scene, dt, difficulty);\n            t += dt;\n            const interval = Math.max(0.45, (2.8 - stage * 0.18) * difficulty.spawnIntervalMultiplier);\n            if (t > interval) {\n                t = 0;\n                const pos = player.group.position.clone().addScaledVector(player.group.getWorldDirection(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3()), -220);\n                spawnWave(pos);\n            }\n        },\n        dispose () {\n            //1.- Release the difficulty subscription when the spawner lifecycle concludes.\n            unsubscribe?.();\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvc3Bhd24vc3Bhd25UYWJsZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThCO0FBQ3NEO0FBQ1I7QUFFckUsU0FBU0ssY0FBY0MsS0FBa0IsRUFBRUMsTUFBVyxFQUFFQyxRQUFhO0lBQzFFLElBQUlDLElBQUk7SUFDUixJQUFJQyxhQUFhUCxzRUFBa0JBO0lBQ25DLE1BQU1RLGNBQWNQLHNFQUFrQkEsQ0FBQyxDQUFDUTtRQUN0Qyx3RkFBd0Y7UUFDeEZGLGFBQWFFO0lBQ2Y7SUFFQSxTQUFTQyxVQUFVQyxNQUFxQjtRQUN0QyxtRkFBbUY7UUFDbkYsTUFBTUMsUUFBUUwsV0FBV00sZ0JBQWdCLElBQUksSUFBSSxJQUFJTixXQUFXTSxnQkFBZ0IsS0FBSyxJQUFJLElBQUk7UUFDN0YsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlGLE9BQU9FLElBQUs7WUFDOUIsTUFBTUMsU0FBUyxLQUFLRCxJQUFJO1lBQ3hCLE1BQU1FLFNBQVMsSUFBSW5CLDBDQUFhLENBQUMsQ0FBQ3FCLEtBQUtDLE1BQU0sS0FBSyxHQUFFLElBQUtKLFFBQVEsR0FBRyxDQUFDRyxLQUFLQyxNQUFNLEtBQUssR0FBRSxJQUFLSjtZQUM1RixNQUFNSyxNQUFNVCxPQUFPVSxLQUFLLEdBQUdDLEdBQUcsQ0FBQ047WUFDL0JJLElBQUlHLENBQUMsR0FBR2xCLFNBQVNtQixXQUFXLENBQUNKLElBQUlLLENBQUMsRUFBQ0wsSUFBSU0sQ0FBQyxJQUFJLEtBQUtSLEtBQUtDLE1BQU0sS0FBSztZQUNqRSxNQUFNUSxRQUFRN0IsbUZBQVdBLENBQUNLLE9BQU9pQixLQUFLO2dCQUFFYjtZQUFXO1lBQ25Eb0IsTUFBTUMsTUFBTSxHQUFHeEIsT0FBT3lCLEtBQUs7UUFDN0I7SUFDRjtJQUVBLE9BQU87UUFDTEMsUUFBT0MsRUFBUyxFQUFFQyxLQUFZO1lBQzVCLG9HQUFvRztZQUNwR2pDLHFGQUFhQSxDQUFDSSxPQUFPNEIsSUFBSXhCO1lBQ3pCRCxLQUFLeUI7WUFDTCxNQUFNRSxXQUFXZixLQUFLZ0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNRixRQUFRLElBQUcsSUFBS3pCLFdBQVc0Qix1QkFBdUI7WUFDekYsSUFBSTdCLElBQUkyQixVQUFTO2dCQUNmM0IsSUFBSTtnQkFDSixNQUFNYyxNQUFNaEIsT0FBT3lCLEtBQUssQ0FBQ08sUUFBUSxDQUFDZixLQUFLLEdBQUdnQixlQUFlLENBQUNqQyxPQUFPeUIsS0FBSyxDQUFDUyxpQkFBaUIsQ0FBQyxJQUFJekMsMENBQWEsS0FBSyxDQUFDO2dCQUNoSGEsVUFBVVU7WUFDWjtRQUNGO1FBQ0FtQjtZQUNFLCtFQUErRTtZQUMvRS9CO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvYXBwL3NyYy9zcGF3bi9zcGF3blRhYmxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgY3JlYXRlRW5lbXksIHVwZGF0ZUVuZW1pZXMgfSBmcm9tICdAL2VuZW1pZXMvc3RlbGxhdGVkLW9jdGFoZWRyb24vYmVoYXZpb3InXG5pbXBvcnQgeyBnZXREaWZmaWN1bHR5U3RhdGUsIG9uRGlmZmljdWx0eUNoYW5nZSB9IGZyb20gJ0AvZW5naW5lL2RpZmZpY3VsdHknXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGF3bmVyKHNjZW5lOiBUSFJFRS5TY2VuZSwgcGxheWVyOiBhbnksIHN0cmVhbWVyOiBhbnkpe1xuICBsZXQgdCA9IDBcbiAgbGV0IGRpZmZpY3VsdHkgPSBnZXREaWZmaWN1bHR5U3RhdGUoKVxuICBjb25zdCB1bnN1YnNjcmliZSA9IG9uRGlmZmljdWx0eUNoYW5nZSgobmV4dCkgPT4ge1xuICAgIC8vMS4tIFN0b3JlIHRoZSBmcmVzaCBkaWZmaWN1bHR5IHNuYXBzaG90IHRvIGtlZXAgY2FkZW5jZSwgZGVuc2l0eSwgYW5kIHVubG9ja3MgaW4gc3luYy5cbiAgICBkaWZmaWN1bHR5ID0gbmV4dFxuICB9KVxuXG4gIGZ1bmN0aW9uIHNwYXduV2F2ZShjZW50ZXI6IFRIUkVFLlZlY3RvcjMpe1xuICAgIC8vMS4tIENyZWF0ZSBvbmUgb3IgbW9yZSBhZGRzIHVzaW5nIG9mZnNldHMgdGhhdCB3aWRlbiB3aXRoIGVhY2ggZGlmZmljdWx0eSB1bmxvY2suXG4gICAgY29uc3QgY291bnQgPSBkaWZmaWN1bHR5LnVubG9ja2VkQWRkVHlwZXMgPj0gMyA/IDMgOiBkaWZmaWN1bHR5LnVubG9ja2VkQWRkVHlwZXMgPT09IDIgPyAyIDogMVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgY29uc3Qgc3ByZWFkID0gNjAgKyBpICogMjBcbiAgICAgIGNvbnN0IG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNwcmVhZCwgMCwgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogc3ByZWFkKVxuICAgICAgY29uc3QgcG9zID0gY2VudGVyLmNsb25lKCkuYWRkKG9mZnNldClcbiAgICAgIHBvcy55ID0gc3RyZWFtZXIucXVlcnlIZWlnaHQocG9zLngscG9zLnopICsgMzAgKyBNYXRoLnJhbmRvbSgpICogNTBcbiAgICAgIGNvbnN0IGVuZW15ID0gY3JlYXRlRW5lbXkoc2NlbmUsIHBvcywgeyBkaWZmaWN1bHR5IH0pXG4gICAgICBlbmVteS50YXJnZXQgPSBwbGF5ZXIuZ3JvdXBcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHVwZGF0ZShkdDpudW1iZXIsIHN0YWdlOm51bWJlcil7XG4gICAgICAvLzEuLSBFbnN1cmUgcHJldmlvdXNseSBzcGF3bmVkIGVuZW1pZXMgcHVyc3VlIHRoZWlyIGFzc2lnbmVkIHRhcmdldHMgYmVmb3JlIGhhbmRsaW5nIGNhZGVuY2UgbG9naWMuXG4gICAgICB1cGRhdGVFbmVtaWVzKHNjZW5lLCBkdCwgZGlmZmljdWx0eSlcbiAgICAgIHQgKz0gZHRcbiAgICAgIGNvbnN0IGludGVydmFsID0gTWF0aC5tYXgoMC40NSwgKDIuOCAtIHN0YWdlICogMC4xOCkgKiBkaWZmaWN1bHR5LnNwYXduSW50ZXJ2YWxNdWx0aXBsaWVyKVxuICAgICAgaWYgKHQgPiBpbnRlcnZhbCl7XG4gICAgICAgIHQgPSAwXG4gICAgICAgIGNvbnN0IHBvcyA9IHBsYXllci5ncm91cC5wb3NpdGlvbi5jbG9uZSgpLmFkZFNjYWxlZFZlY3RvcihwbGF5ZXIuZ3JvdXAuZ2V0V29ybGREaXJlY3Rpb24obmV3IFRIUkVFLlZlY3RvcjMoKSksIC0yMjApXG4gICAgICAgIHNwYXduV2F2ZShwb3MpXG4gICAgICB9XG4gICAgfSxcbiAgICBkaXNwb3NlKCl7XG4gICAgICAvLzEuLSBSZWxlYXNlIHRoZSBkaWZmaWN1bHR5IHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBzcGF3bmVyIGxpZmVjeWNsZSBjb25jbHVkZXMuXG4gICAgICB1bnN1YnNjcmliZT8uKClcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJUSFJFRSIsImNyZWF0ZUVuZW15IiwidXBkYXRlRW5lbWllcyIsImdldERpZmZpY3VsdHlTdGF0ZSIsIm9uRGlmZmljdWx0eUNoYW5nZSIsImNyZWF0ZVNwYXduZXIiLCJzY2VuZSIsInBsYXllciIsInN0cmVhbWVyIiwidCIsImRpZmZpY3VsdHkiLCJ1bnN1YnNjcmliZSIsIm5leHQiLCJzcGF3bldhdmUiLCJjZW50ZXIiLCJjb3VudCIsInVubG9ja2VkQWRkVHlwZXMiLCJpIiwic3ByZWFkIiwib2Zmc2V0IiwiVmVjdG9yMyIsIk1hdGgiLCJyYW5kb20iLCJwb3MiLCJjbG9uZSIsImFkZCIsInkiLCJxdWVyeUhlaWdodCIsIngiLCJ6IiwiZW5lbXkiLCJ0YXJnZXQiLCJncm91cCIsInVwZGF0ZSIsImR0Iiwic3RhZ2UiLCJpbnRlcnZhbCIsIm1heCIsInNwYXduSW50ZXJ2YWxNdWx0aXBsaWVyIiwicG9zaXRpb24iLCJhZGRTY2FsZWRWZWN0b3IiLCJnZXRXb3JsZERpcmVjdGlvbiIsImRpc3Bvc2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/spawn/spawnTable.ts\n");

/***/ }),

/***/ "(ssr)/./src/ui/inputMap.ts":
/*!****************************!*\
  !*** ./src/ui/inputMap.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInput: () => (/* binding */ createInput)\n/* harmony export */ });\nfunction createInput(container) {\n    const keys = new Set();\n    const mouse = {\n        x: 0,\n        y: 0\n    };\n    const pressed = (code)=>keys.has(code);\n    const onKeyDown = (e)=>keys.add(e.code);\n    const onKeyUp = (e)=>keys.delete(e.code);\n    const onMouseMove = (e)=>{\n        const rect = container.getBoundingClientRect();\n        mouse.x = (e.clientX - rect.left) / rect.width * 2 - 1;\n        mouse.y = -((e.clientY - rect.top) / rect.height * 2 - 1);\n    };\n    container.tabIndex = 0;\n    container.addEventListener('mousemove', onMouseMove);\n    addEventListener('keydown', onKeyDown);\n    addEventListener('keyup', onKeyUp);\n    return {\n        pressed,\n        mouse,\n        dispose () {\n            container.removeEventListener('mousemove', onMouseMove);\n            removeEventListener('keydown', onKeyDown);\n            removeEventListener('keyup', onKeyUp);\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdWkvaW5wdXRNYXAudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLFNBQVNBLFlBQVlDLFNBQXNCO0lBQ2hELE1BQU1DLE9BQU8sSUFBSUM7SUFDakIsTUFBTUMsUUFBUTtRQUFFQyxHQUFHO1FBQUdDLEdBQUc7SUFBRTtJQUMzQixNQUFNQyxVQUFVLENBQUNDLE9BQWlCTixLQUFLTyxHQUFHLENBQUNEO0lBRTNDLE1BQU1FLFlBQVksQ0FBQ0MsSUFBcUJULEtBQUtVLEdBQUcsQ0FBQ0QsRUFBRUgsSUFBSTtJQUN2RCxNQUFNSyxVQUFVLENBQUNGLElBQXFCVCxLQUFLWSxNQUFNLENBQUNILEVBQUVILElBQUk7SUFDeEQsTUFBTU8sY0FBYyxDQUFDSjtRQUNuQixNQUFNSyxPQUFPZixVQUFVZ0IscUJBQXFCO1FBQzVDYixNQUFNQyxDQUFDLEdBQUcsQ0FBQ00sRUFBRU8sT0FBTyxHQUFHRixLQUFLRyxJQUFJLElBQUlILEtBQUtJLEtBQUssR0FBRyxJQUFJO1FBQ3JEaEIsTUFBTUUsQ0FBQyxHQUFHLENBQUUsRUFBQ0ssRUFBRVUsT0FBTyxHQUFHTCxLQUFLTSxHQUFHLElBQUlOLEtBQUtPLE1BQU0sR0FBRyxJQUFJO0lBQ3pEO0lBQ0F0QixVQUFVdUIsUUFBUSxHQUFHO0lBQ3JCdkIsVUFBVXdCLGdCQUFnQixDQUFDLGFBQWFWO0lBQ3hDVSxpQkFBaUIsV0FBV2Y7SUFDNUJlLGlCQUFpQixTQUFTWjtJQUUxQixPQUFPO1FBQ0xOO1FBQ0FIO1FBQ0FzQjtZQUNFekIsVUFBVTBCLG1CQUFtQixDQUFDLGFBQWFaO1lBQzNDWSxvQkFBb0IsV0FBV2pCO1lBQy9CaUIsb0JBQW9CLFNBQVNkO1FBQy9CO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvdWkvaW5wdXRNYXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUlucHV0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgY29uc3Qga2V5cyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIGNvbnN0IG1vdXNlID0geyB4OiAwLCB5OiAwIH1cbiAgY29uc3QgcHJlc3NlZCA9IChjb2RlOiBzdHJpbmcpID0+IGtleXMuaGFzKGNvZGUpXG5cbiAgY29uc3Qgb25LZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IGtleXMuYWRkKGUuY29kZSlcbiAgY29uc3Qgb25LZXlVcCA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiBrZXlzLmRlbGV0ZShlLmNvZGUpXG4gIGNvbnN0IG9uTW91c2VNb3ZlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCByZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgbW91c2UueCA9IChlLmNsaWVudFggLSByZWN0LmxlZnQpIC8gcmVjdC53aWR0aCAqIDIgLSAxXG4gICAgbW91c2UueSA9IC0oKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIHJlY3QuaGVpZ2h0ICogMiAtIDEpXG4gIH1cbiAgY29udGFpbmVyLnRhYkluZGV4ID0gMFxuICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpXG4gIGFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd24pXG4gIGFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25LZXlVcClcblxuICByZXR1cm4ge1xuICAgIHByZXNzZWQsXG4gICAgbW91c2UsXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSlcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd24pXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uS2V5VXApXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlSW5wdXQiLCJjb250YWluZXIiLCJrZXlzIiwiU2V0IiwibW91c2UiLCJ4IiwieSIsInByZXNzZWQiLCJjb2RlIiwiaGFzIiwib25LZXlEb3duIiwiZSIsImFkZCIsIm9uS2V5VXAiLCJkZWxldGUiLCJvbk1vdXNlTW92ZSIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRYIiwibGVmdCIsIndpZHRoIiwiY2xpZW50WSIsInRvcCIsImhlaWdodCIsInRhYkluZGV4IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3Bvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/ui/inputMap.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/arrowhead/build.ts":
/*!*****************************************!*\
  !*** ./src/vehicles/arrowhead/build.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildArrowhead: () => (/* binding */ buildArrowhead)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction buildArrowhead() {\n    const group = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n    // Materials (reused for efficiency)\n    const bodyMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0xff7f50,\n        roughness: 0.4,\n        metalness: 0.6,\n        emissive: 0x110500 // Subtle warm glow\n    });\n    const wingMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0x22272f,\n        roughness: 0.8,\n        metalness: 0.1\n    });\n    const engineMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0x0044ff,\n        emissive: 0x000022,\n        emissiveIntensity: 0.3,\n        roughness: 0.2,\n        metalness: 0.9\n    });\n    // Main hull (nose cone)\n    const coneGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(1.5, 6, 8); // Slightly refined for smoother look\n    coneGeometry.rotateX(Math.PI / 2);\n    const hull = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(coneGeometry, bodyMaterial);\n    hull.position.set(0, 0, 3); // Position forward along Z\n    group.add(hull);\n    // Fuselage body (cylinder for length)\n    const bodyGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(1.2, 1.2, 8, 12);\n    bodyGeometry.rotateZ(Math.PI / 2); // Align along Z\n    const fuselage = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(bodyGeometry, bodyMaterial);\n    fuselage.position.set(0, 0, -1); // Centered behind nose\n    group.add(fuselage);\n    // Main wings (symmetric pair for balance)\n    const wingGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(10, 0.2, 2);\n    const leftWing = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(wingGeometry, wingMaterial);\n    leftWing.position.set(-5, 0, 0); // Offset to left side\n    leftWing.rotation.set(0, 0, Math.PI / 12); // Slight upward angle for lift\n    group.add(leftWing);\n    const rightWing = leftWing.clone();\n    rightWing.position.set(5, 0, 0); // Mirror to right\n    rightWing.rotation.set(0, 0, -Math.PI / 12);\n    group.add(rightWing);\n    // Tail fins (for control surfaces)\n    const finGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.3, 3, 4);\n    const leftFin = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(finGeometry, wingMaterial);\n    leftFin.position.set(-1.5, 0, -6); // Rear left\n    leftFin.rotation.set(0, 0, Math.PI / 6); // Angled\n    group.add(leftFin);\n    const rightFin = leftFin.clone();\n    rightFin.position.set(1.5, 0, -6); // Rear right\n    rightFin.rotation.set(0, 0, -Math.PI / 6);\n    group.add(rightFin);\n    // Engine exhaust (simple cone for rear thruster)\n    const engineGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(1, 2, 6);\n    engineGeometry.rotateX(-Math.PI / 2); // Point backward\n    const engine = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(engineGeometry, engineMaterial);\n    engine.position.set(0, 0, -6.5);\n    group.add(engine);\n    // Optional: Add a point light for engine glow (attach to scene separately if needed)\n    // const engineLight = new THREE.PointLight(0x0044ff, 1, 20);\n    // engineLight.position.set(0, 0, -6.5);\n    // group.add(engineLight);\n    // Center the entire model\n    group.position.set(0, 0, 0);\n    group.scale.set(1, 1, 1);\n    group.rotation.y = Math.PI; // Flips it 180° on Y-axis to face the opposite direction\n    return group;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvYXJyb3doZWFkL2J1aWxkLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStCO0FBRXhCLFNBQVNDO0lBQ2QsTUFBTUMsUUFBUSxJQUFJRix3Q0FBVztJQUU3QixvQ0FBb0M7SUFDcEMsTUFBTUksZUFBZSxJQUFJSix1REFBMEIsQ0FBQztRQUNsRE0sT0FBTztRQUNQQyxXQUFXO1FBQ1hDLFdBQVc7UUFDWEMsVUFBVSxTQUFVLG1CQUFtQjtJQUN6QztJQUNBLE1BQU1DLGVBQWUsSUFBSVYsdURBQTBCLENBQUM7UUFDbERNLE9BQU87UUFDUEMsV0FBVztRQUNYQyxXQUFXO0lBQ2I7SUFDQSxNQUFNRyxpQkFBaUIsSUFBSVgsdURBQTBCLENBQUM7UUFDcERNLE9BQU87UUFDUEcsVUFBVTtRQUNWRyxtQkFBbUI7UUFDbkJMLFdBQVc7UUFDWEMsV0FBVztJQUNiO0lBRUEsd0JBQXdCO0lBQ3hCLE1BQU1LLGVBQWUsSUFBSWIsK0NBQWtCLENBQUMsS0FBSyxHQUFHLElBQUsscUNBQXFDO0lBQzlGYSxhQUFhRSxPQUFPLENBQUNDLEtBQUtDLEVBQUUsR0FBRztJQUMvQixNQUFNQyxPQUFPLElBQUlsQix1Q0FBVSxDQUFDYSxjQUFjVDtJQUMxQ2MsS0FBS0UsUUFBUSxDQUFDQyxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUssMkJBQTJCO0lBQ3hEbkIsTUFBTW9CLEdBQUcsQ0FBQ0o7SUFFVixzQ0FBc0M7SUFDdEMsTUFBTUssZUFBZSxJQUFJdkIsbURBQXNCLENBQUMsS0FBSyxLQUFLLEdBQUc7SUFDN0R1QixhQUFhRSxPQUFPLENBQUNULEtBQUtDLEVBQUUsR0FBRyxJQUFLLGdCQUFnQjtJQUNwRCxNQUFNUyxXQUFXLElBQUkxQix1Q0FBVSxDQUFDdUIsY0FBY25CO0lBQzlDc0IsU0FBU04sUUFBUSxDQUFDQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSyx1QkFBdUI7SUFDekRuQixNQUFNb0IsR0FBRyxDQUFDSTtJQUVWLDBDQUEwQztJQUMxQyxNQUFNQyxlQUFlLElBQUkzQiw4Q0FBaUIsQ0FBQyxJQUFJLEtBQUs7SUFDcEQsTUFBTTZCLFdBQVcsSUFBSTdCLHVDQUFVLENBQUMyQixjQUFjakI7SUFDOUNtQixTQUFTVCxRQUFRLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFLLHNCQUFzQjtJQUN4RFEsU0FBU0MsUUFBUSxDQUFDVCxHQUFHLENBQUMsR0FBRyxHQUFHTCxLQUFLQyxFQUFFLEdBQUcsS0FBTSwrQkFBK0I7SUFDM0VmLE1BQU1vQixHQUFHLENBQUNPO0lBRVYsTUFBTUUsWUFBWUYsU0FBU0csS0FBSztJQUNoQ0QsVUFBVVgsUUFBUSxDQUFDQyxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUssa0JBQWtCO0lBQ3BEVSxVQUFVRCxRQUFRLENBQUNULEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQ0wsS0FBS0MsRUFBRSxHQUFHO0lBQ3hDZixNQUFNb0IsR0FBRyxDQUFDUztJQUVWLG1DQUFtQztJQUNuQyxNQUFNRSxjQUFjLElBQUlqQyw4Q0FBaUIsQ0FBQyxLQUFLLEdBQUc7SUFDbEQsTUFBTWtDLFVBQVUsSUFBSWxDLHVDQUFVLENBQUNpQyxhQUFhdkI7SUFDNUN3QixRQUFRZCxRQUFRLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLElBQUssWUFBWTtJQUNoRGEsUUFBUUosUUFBUSxDQUFDVCxHQUFHLENBQUMsR0FBRyxHQUFHTCxLQUFLQyxFQUFFLEdBQUcsSUFBSyxTQUFTO0lBQ25EZixNQUFNb0IsR0FBRyxDQUFDWTtJQUVWLE1BQU1DLFdBQVdELFFBQVFGLEtBQUs7SUFDOUJHLFNBQVNmLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLElBQUssYUFBYTtJQUNqRGMsU0FBU0wsUUFBUSxDQUFDVCxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUNMLEtBQUtDLEVBQUUsR0FBRztJQUN2Q2YsTUFBTW9CLEdBQUcsQ0FBQ2E7SUFFVixpREFBaUQ7SUFDakQsTUFBTUMsaUJBQWlCLElBQUlwQywrQ0FBa0IsQ0FBQyxHQUFHLEdBQUc7SUFDcERvQyxlQUFlckIsT0FBTyxDQUFDLENBQUNDLEtBQUtDLEVBQUUsR0FBRyxJQUFLLGlCQUFpQjtJQUN4RCxNQUFNb0IsU0FBUyxJQUFJckMsdUNBQVUsQ0FBQ29DLGdCQUFnQnpCO0lBQzlDMEIsT0FBT2pCLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQzNCbkIsTUFBTW9CLEdBQUcsQ0FBQ2U7SUFFVixxRkFBcUY7SUFDckYsNkRBQTZEO0lBQzdELHdDQUF3QztJQUN4QywwQkFBMEI7SUFFMUIsMEJBQTBCO0lBQzFCbkMsTUFBTWtCLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDLEdBQUcsR0FBRztJQUN6Qm5CLE1BQU1vQyxLQUFLLENBQUNqQixHQUFHLENBQUMsR0FBRyxHQUFHO0lBRXRCbkIsTUFBTTRCLFFBQVEsQ0FBQ1MsQ0FBQyxHQUFHdkIsS0FBS0MsRUFBRSxFQUFHLHlEQUF5RDtJQUN0RixPQUFPZjtBQUNUIiwic291cmNlcyI6WyIvYXBwL3NyYy92ZWhpY2xlcy9hcnJvd2hlYWQvYnVpbGQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBcnJvd2hlYWQoKSB7XG4gIGNvbnN0IGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgLy8gTWF0ZXJpYWxzIChyZXVzZWQgZm9yIGVmZmljaWVuY3kpXG4gIGNvbnN0IGJvZHlNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgY29sb3I6IDB4ZmY3ZjUwLFxuICAgIHJvdWdobmVzczogMC40LFxuICAgIG1ldGFsbmVzczogMC42LFxuICAgIGVtaXNzaXZlOiAweDExMDUwMCAgLy8gU3VidGxlIHdhcm0gZ2xvd1xuICB9KTtcbiAgY29uc3Qgd2luZ01hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICBjb2xvcjogMHgyMjI3MmYsXG4gICAgcm91Z2huZXNzOiAwLjgsXG4gICAgbWV0YWxuZXNzOiAwLjFcbiAgfSk7XG4gIGNvbnN0IGVuZ2luZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICBjb2xvcjogMHgwMDQ0ZmYsXG4gICAgZW1pc3NpdmU6IDB4MDAwMDIyLFxuICAgIGVtaXNzaXZlSW50ZW5zaXR5OiAwLjMsXG4gICAgcm91Z2huZXNzOiAwLjIsXG4gICAgbWV0YWxuZXNzOiAwLjlcbiAgfSk7XG5cbiAgLy8gTWFpbiBodWxsIChub3NlIGNvbmUpXG4gIGNvbnN0IGNvbmVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoMS41LCA2LCA4KTsgIC8vIFNsaWdodGx5IHJlZmluZWQgZm9yIHNtb290aGVyIGxvb2tcbiAgY29uZUdlb21ldHJ5LnJvdGF0ZVgoTWF0aC5QSSAvIDIpO1xuICBjb25zdCBodWxsID0gbmV3IFRIUkVFLk1lc2goY29uZUdlb21ldHJ5LCBib2R5TWF0ZXJpYWwpO1xuICBodWxsLnBvc2l0aW9uLnNldCgwLCAwLCAzKTsgIC8vIFBvc2l0aW9uIGZvcndhcmQgYWxvbmcgWlxuICBncm91cC5hZGQoaHVsbCk7XG5cbiAgLy8gRnVzZWxhZ2UgYm9keSAoY3lsaW5kZXIgZm9yIGxlbmd0aClcbiAgY29uc3QgYm9keUdlb21ldHJ5ID0gbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMS4yLCAxLjIsIDgsIDEyKTtcbiAgYm9keUdlb21ldHJ5LnJvdGF0ZVooTWF0aC5QSSAvIDIpOyAgLy8gQWxpZ24gYWxvbmcgWlxuICBjb25zdCBmdXNlbGFnZSA9IG5ldyBUSFJFRS5NZXNoKGJvZHlHZW9tZXRyeSwgYm9keU1hdGVyaWFsKTtcbiAgZnVzZWxhZ2UucG9zaXRpb24uc2V0KDAsIDAsIC0xKTsgIC8vIENlbnRlcmVkIGJlaGluZCBub3NlXG4gIGdyb3VwLmFkZChmdXNlbGFnZSk7XG5cbiAgLy8gTWFpbiB3aW5ncyAoc3ltbWV0cmljIHBhaXIgZm9yIGJhbGFuY2UpXG4gIGNvbnN0IHdpbmdHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxMCwgMC4yLCAyKTtcbiAgY29uc3QgbGVmdFdpbmcgPSBuZXcgVEhSRUUuTWVzaCh3aW5nR2VvbWV0cnksIHdpbmdNYXRlcmlhbCk7XG4gIGxlZnRXaW5nLnBvc2l0aW9uLnNldCgtNSwgMCwgMCk7ICAvLyBPZmZzZXQgdG8gbGVmdCBzaWRlXG4gIGxlZnRXaW5nLnJvdGF0aW9uLnNldCgwLCAwLCBNYXRoLlBJIC8gMTIpOyAgLy8gU2xpZ2h0IHVwd2FyZCBhbmdsZSBmb3IgbGlmdFxuICBncm91cC5hZGQobGVmdFdpbmcpO1xuXG4gIGNvbnN0IHJpZ2h0V2luZyA9IGxlZnRXaW5nLmNsb25lKCk7XG4gIHJpZ2h0V2luZy5wb3NpdGlvbi5zZXQoNSwgMCwgMCk7ICAvLyBNaXJyb3IgdG8gcmlnaHRcbiAgcmlnaHRXaW5nLnJvdGF0aW9uLnNldCgwLCAwLCAtTWF0aC5QSSAvIDEyKTtcbiAgZ3JvdXAuYWRkKHJpZ2h0V2luZyk7XG5cbiAgLy8gVGFpbCBmaW5zIChmb3IgY29udHJvbCBzdXJmYWNlcylcbiAgY29uc3QgZmluR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMC4zLCAzLCA0KTtcbiAgY29uc3QgbGVmdEZpbiA9IG5ldyBUSFJFRS5NZXNoKGZpbkdlb21ldHJ5LCB3aW5nTWF0ZXJpYWwpO1xuICBsZWZ0RmluLnBvc2l0aW9uLnNldCgtMS41LCAwLCAtNik7ICAvLyBSZWFyIGxlZnRcbiAgbGVmdEZpbi5yb3RhdGlvbi5zZXQoMCwgMCwgTWF0aC5QSSAvIDYpOyAgLy8gQW5nbGVkXG4gIGdyb3VwLmFkZChsZWZ0RmluKTtcblxuICBjb25zdCByaWdodEZpbiA9IGxlZnRGaW4uY2xvbmUoKTtcbiAgcmlnaHRGaW4ucG9zaXRpb24uc2V0KDEuNSwgMCwgLTYpOyAgLy8gUmVhciByaWdodFxuICByaWdodEZpbi5yb3RhdGlvbi5zZXQoMCwgMCwgLU1hdGguUEkgLyA2KTtcbiAgZ3JvdXAuYWRkKHJpZ2h0RmluKTtcblxuICAvLyBFbmdpbmUgZXhoYXVzdCAoc2ltcGxlIGNvbmUgZm9yIHJlYXIgdGhydXN0ZXIpXG4gIGNvbnN0IGVuZ2luZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkNvbmVHZW9tZXRyeSgxLCAyLCA2KTtcbiAgZW5naW5lR2VvbWV0cnkucm90YXRlWCgtTWF0aC5QSSAvIDIpOyAgLy8gUG9pbnQgYmFja3dhcmRcbiAgY29uc3QgZW5naW5lID0gbmV3IFRIUkVFLk1lc2goZW5naW5lR2VvbWV0cnksIGVuZ2luZU1hdGVyaWFsKTtcbiAgZW5naW5lLnBvc2l0aW9uLnNldCgwLCAwLCAtNi41KTtcbiAgZ3JvdXAuYWRkKGVuZ2luZSk7XG5cbiAgLy8gT3B0aW9uYWw6IEFkZCBhIHBvaW50IGxpZ2h0IGZvciBlbmdpbmUgZ2xvdyAoYXR0YWNoIHRvIHNjZW5lIHNlcGFyYXRlbHkgaWYgbmVlZGVkKVxuICAvLyBjb25zdCBlbmdpbmVMaWdodCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4MDA0NGZmLCAxLCAyMCk7XG4gIC8vIGVuZ2luZUxpZ2h0LnBvc2l0aW9uLnNldCgwLCAwLCAtNi41KTtcbiAgLy8gZ3JvdXAuYWRkKGVuZ2luZUxpZ2h0KTtcblxuICAvLyBDZW50ZXIgdGhlIGVudGlyZSBtb2RlbFxuICBncm91cC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XG4gIGdyb3VwLnNjYWxlLnNldCgxLCAxLCAxKTtcblxuICBncm91cC5yb3RhdGlvbi55ID0gTWF0aC5QSTsgIC8vIEZsaXBzIGl0IDE4MMKwIG9uIFktYXhpcyB0byBmYWNlIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAgcmV0dXJuIGdyb3VwO1xufSJdLCJuYW1lcyI6WyJUSFJFRSIsImJ1aWxkQXJyb3doZWFkIiwiZ3JvdXAiLCJHcm91cCIsImJvZHlNYXRlcmlhbCIsIk1lc2hTdGFuZGFyZE1hdGVyaWFsIiwiY29sb3IiLCJyb3VnaG5lc3MiLCJtZXRhbG5lc3MiLCJlbWlzc2l2ZSIsIndpbmdNYXRlcmlhbCIsImVuZ2luZU1hdGVyaWFsIiwiZW1pc3NpdmVJbnRlbnNpdHkiLCJjb25lR2VvbWV0cnkiLCJDb25lR2VvbWV0cnkiLCJyb3RhdGVYIiwiTWF0aCIsIlBJIiwiaHVsbCIsIk1lc2giLCJwb3NpdGlvbiIsInNldCIsImFkZCIsImJvZHlHZW9tZXRyeSIsIkN5bGluZGVyR2VvbWV0cnkiLCJyb3RhdGVaIiwiZnVzZWxhZ2UiLCJ3aW5nR2VvbWV0cnkiLCJCb3hHZW9tZXRyeSIsImxlZnRXaW5nIiwicm90YXRpb24iLCJyaWdodFdpbmciLCJjbG9uZSIsImZpbkdlb21ldHJ5IiwibGVmdEZpbiIsInJpZ2h0RmluIiwiZW5naW5lR2VvbWV0cnkiLCJlbmdpbmUiLCJzY2FsZSIsInkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/arrowhead/build.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/cube/build.ts":
/*!************************************!*\
  !*** ./src/vehicles/cube/build.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildCube: () => (/* binding */ buildCube)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction buildCube() {\n    const g = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(4, 4, 4);\n    const m = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0xc0c0c0,\n        roughness: 0.5,\n        metalness: 0.25\n    });\n    return new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(g, m);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvY3ViZS9idWlsZC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QjtBQUN2QixTQUFTQztJQUNkLE1BQU1DLElBQUksSUFBSUYsOENBQWlCLENBQUMsR0FBRyxHQUFHO0lBQ3RDLE1BQU1JLElBQUksSUFBSUosdURBQTBCLENBQUM7UUFBRU0sT0FBTztRQUFVQyxXQUFXO1FBQUtDLFdBQVc7SUFBSztJQUM1RixPQUFPLElBQUlSLHVDQUFVLENBQUNFLEdBQUdFO0FBQzNCIiwic291cmNlcyI6WyIvYXBwL3NyYy92ZWhpY2xlcy9jdWJlL2J1aWxkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ3ViZSgpe1xuICBjb25zdCBnID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDQsIDQsIDQpXG4gIGNvbnN0IG0gPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHhjMGMwYzAsIHJvdWdobmVzczogMC41LCBtZXRhbG5lc3M6IDAuMjUgfSlcbiAgcmV0dXJuIG5ldyBUSFJFRS5NZXNoKGcsIG0pXG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJidWlsZEN1YmUiLCJnIiwiQm94R2VvbWV0cnkiLCJtIiwiTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJjb2xvciIsInJvdWdobmVzcyIsIm1ldGFsbmVzcyIsIk1lc2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/cube/build.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/icosahedron/build.ts":
/*!*******************************************!*\
  !*** ./src/vehicles/icosahedron/build.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildIcosahedron: () => (/* binding */ buildIcosahedron)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction buildIcosahedron() {\n    const g = new three__WEBPACK_IMPORTED_MODULE_0__.IcosahedronGeometry(3.2, 0);\n    const m = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0xb0e0e6,\n        roughness: 0.45,\n        metalness: 0.35\n    });\n    return new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(g, m);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvaWNvc2FoZWRyb24vYnVpbGQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEI7QUFDdkIsU0FBU0M7SUFDZCxNQUFNQyxJQUFJLElBQUlGLHNEQUF5QixDQUFDLEtBQUs7SUFDN0MsTUFBTUksSUFBSSxJQUFJSix1REFBMEIsQ0FBQztRQUFFTSxPQUFPO1FBQVVDLFdBQVc7UUFBTUMsV0FBVztJQUFLO0lBQzdGLE9BQU8sSUFBSVIsdUNBQVUsQ0FBQ0UsR0FBR0U7QUFDM0IiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3ZlaGljbGVzL2ljb3NhaGVkcm9uL2J1aWxkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkSWNvc2FoZWRyb24oKXtcbiAgY29uc3QgZyA9IG5ldyBUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5KDMuMiwgMClcbiAgY29uc3QgbSA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiAweGIwZTBlNiwgcm91Z2huZXNzOiAwLjQ1LCBtZXRhbG5lc3M6IDAuMzUgfSlcbiAgcmV0dXJuIG5ldyBUSFJFRS5NZXNoKGcsIG0pXG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJidWlsZEljb3NhaGVkcm9uIiwiZyIsIkljb3NhaGVkcm9uR2VvbWV0cnkiLCJtIiwiTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJjb2xvciIsInJvdWdobmVzcyIsIm1ldGFsbmVzcyIsIk1lc2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/icosahedron/build.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/octahedron/build.ts":
/*!******************************************!*\
  !*** ./src/vehicles/octahedron/build.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildDangerousEnemy: () => (/* binding */ buildDangerousEnemy)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction buildDangerousEnemy() {\n    const group = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n    // Base body: Refined octahedron with more detail for angular, crystalline menace\n    const baseGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.OctahedronGeometry(2.5, 1); // Detail level 1 for sharper edges\n    const bodyMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0x4a0e0e,\n        roughness: 0.3,\n        metalness: 0.7,\n        emissive: 0x220000,\n        emissiveIntensity: 0.2\n    });\n    const body = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(baseGeometry, bodyMaterial);\n    group.add(body);\n    // Spikes: Procedural spikes on key vertices for a threatening, porcupine-like silhouette\n    const spikeGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(0.3, 1.5, 4);\n    const spikeMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0x111111,\n        roughness: 0.1,\n        metalness: 0.9 // Shiny, blade-like spikes\n    });\n    // Positions for 6 main spikes (aligned to octahedron axes for symmetry)\n    const spikePositions = [\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 2.5, 0),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, -2.5, 0),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(2.5, 0, 0),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(-2.5, 0, 0),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 2.5),\n        new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, -2.5) // Backward\n    ];\n    spikePositions.forEach((pos)=>{\n        const spike = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(spikeGeometry, spikeMaterial);\n        spike.position.copy(pos);\n        // Orient spikes outward\n        if (pos.y !== 0) {\n            spike.rotation.x = Math.PI / 2;\n        } else if (pos.x !== 0) {\n            spike.rotation.z = Math.PI / 2;\n        } else {\n            spike.rotation.y = Math.PI / 2;\n        }\n        group.add(spike);\n        // Add smaller secondary spikes for extra menace (offset slightly)\n        for(let i = 0; i < 2; i++){\n            const smallSpike = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(0.15, 0.8, 3), spikeMaterial);\n            const offset = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3().copy(pos).normalize().multiplyScalar(1.8).add(new three__WEBPACK_IMPORTED_MODULE_0__.Vector3((Math.random() - 0.5) * 0.5, (Math.random() - 0.5) * 0.5, (Math.random() - 0.5) * 0.5));\n            smallSpike.position.copy(offset);\n            smallSpike.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI); // Random orientation for chaos\n            group.add(smallSpike);\n        }\n    });\n    // Glowing \"eyes\": Small spheres with emissive material for a predatory stare\n    const eyeGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(0.4, 8, 6);\n    const eyeMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0xff4500,\n        emissive: 0xff4500,\n        emissiveIntensity: 0.8,\n        roughness: 0,\n        metalness: 0\n    });\n    const leftEye = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(eyeGeometry, eyeMaterial);\n    leftEye.position.set(-0.8, 0.5, 1.2);\n    group.add(leftEye);\n    const rightEye = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(eyeGeometry, eyeMaterial);\n    rightEye.position.set(0.8, 0.5, 1.2);\n    group.add(rightEye);\n    // Subtle rotation animation hook (call in your render loop: enemy.rotation.y += 0.005;)\n    group.userData = {\n        rotationSpeed: 0.005\n    };\n    // Center and scale the group\n    group.position.set(0, 0, 0);\n    group.scale.set(1, 1, 1);\n    return group;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REFBMEIsQ0FBQztRQUNqRFEsT0FBTztRQUNQRyxVQUFVO1FBQ1ZDLG1CQUFtQjtRQUNuQkgsV0FBVztRQUNYQyxXQUFXO0lBQ2I7SUFDQSxNQUFNZ0MsVUFBVSxJQUFJMUMsdUNBQVUsQ0FBQ3VDLGFBQWFFO0lBQzVDQyxRQUFRbEIsUUFBUSxDQUFDYyxHQUFHLENBQUMsQ0FBQyxLQUFLLEtBQUs7SUFDaENwQyxNQUFNYSxHQUFHLENBQUMyQjtJQUVWLE1BQU1DLFdBQVcsSUFBSTNDLHVDQUFVLENBQUN1QyxhQUFhRTtJQUM3Q0UsU0FBU25CLFFBQVEsQ0FBQ2MsR0FBRyxDQUFDLEtBQUssS0FBSztJQUNoQ3BDLE1BQU1hLEdBQUcsQ0FBQzRCO0lBRVYsd0ZBQXdGO0lBQ3hGekMsTUFBTTBDLFFBQVEsR0FBRztRQUFFQyxlQUFlO0lBQU07SUFFeEMsNkJBQTZCO0lBQzdCM0MsTUFBTXNCLFFBQVEsQ0FBQ2MsR0FBRyxDQUFDLEdBQUcsR0FBRztJQUN6QnBDLE1BQU00QyxLQUFLLENBQUNSLEdBQUcsQ0FBQyxHQUFHLEdBQUc7SUFFdEIsT0FBT3BDO0FBQ1QiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3ZlaGljbGVzL29jdGFoZWRyb24vYnVpbGQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGREYW5nZXJvdXNFbmVteSgpIHtcbiAgY29uc3QgZ3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAvLyBCYXNlIGJvZHk6IFJlZmluZWQgb2N0YWhlZHJvbiB3aXRoIG1vcmUgZGV0YWlsIGZvciBhbmd1bGFyLCBjcnlzdGFsbGluZSBtZW5hY2VcbiAgY29uc3QgYmFzZUdlb21ldHJ5ID0gbmV3IFRIUkVFLk9jdGFoZWRyb25HZW9tZXRyeSgyLjUsIDEpOyAvLyBEZXRhaWwgbGV2ZWwgMSBmb3Igc2hhcnBlciBlZGdlc1xuICBjb25zdCBib2R5TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgIGNvbG9yOiAweDRhMGUwZSwgLy8gRGVlcCBjcmltc29uIHJlZCBmb3IgZGFuZ2VyXG4gICAgcm91Z2huZXNzOiAwLjMsXG4gICAgbWV0YWxuZXNzOiAwLjcsXG4gICAgZW1pc3NpdmU6IDB4MjIwMDAwLCAvLyBTdWJ0bGUgaW5uZXIgZ2xvd1xuICAgIGVtaXNzaXZlSW50ZW5zaXR5OiAwLjJcbiAgfSk7XG4gIGNvbnN0IGJvZHkgPSBuZXcgVEhSRUUuTWVzaChiYXNlR2VvbWV0cnksIGJvZHlNYXRlcmlhbCk7XG4gIGdyb3VwLmFkZChib2R5KTtcblxuICAvLyBTcGlrZXM6IFByb2NlZHVyYWwgc3Bpa2VzIG9uIGtleSB2ZXJ0aWNlcyBmb3IgYSB0aHJlYXRlbmluZywgcG9yY3VwaW5lLWxpa2Ugc2lsaG91ZXR0ZVxuICBjb25zdCBzcGlrZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkNvbmVHZW9tZXRyeSgwLjMsIDEuNSwgNCk7XG4gIGNvbnN0IHNwaWtlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgIGNvbG9yOiAweDExMTExMSxcbiAgICByb3VnaG5lc3M6IDAuMSxcbiAgICBtZXRhbG5lc3M6IDAuOSAvLyBTaGlueSwgYmxhZGUtbGlrZSBzcGlrZXNcbiAgfSk7XG5cbiAgLy8gUG9zaXRpb25zIGZvciA2IG1haW4gc3Bpa2VzIChhbGlnbmVkIHRvIG9jdGFoZWRyb24gYXhlcyBmb3Igc3ltbWV0cnkpXG4gIGNvbnN0IHNwaWtlUG9zaXRpb25zID0gW1xuICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDIuNSwgMCksICAgIC8vIFRvcFxuICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIC0yLjUsIDApLCAgIC8vIEJvdHRvbVxuICAgIG5ldyBUSFJFRS5WZWN0b3IzKDIuNSwgMCwgMCksICAgIC8vIFJpZ2h0XG4gICAgbmV3IFRIUkVFLlZlY3RvcjMoLTIuNSwgMCwgMCksICAgLy8gTGVmdFxuICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDIuNSksICAgIC8vIEZvcndhcmRcbiAgICBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAtMi41KSAgICAvLyBCYWNrd2FyZFxuICBdO1xuXG4gIHNwaWtlUG9zaXRpb25zLmZvckVhY2gocG9zID0+IHtcbiAgICBjb25zdCBzcGlrZSA9IG5ldyBUSFJFRS5NZXNoKHNwaWtlR2VvbWV0cnksIHNwaWtlTWF0ZXJpYWwpO1xuICAgIHNwaWtlLnBvc2l0aW9uLmNvcHkocG9zKTtcbiAgICAvLyBPcmllbnQgc3Bpa2VzIG91dHdhcmRcbiAgICBpZiAocG9zLnkgIT09IDApIHtcbiAgICAgIHNwaWtlLnJvdGF0aW9uLnggPSBNYXRoLlBJIC8gMjtcbiAgICB9IGVsc2UgaWYgKHBvcy54ICE9PSAwKSB7XG4gICAgICBzcGlrZS5yb3RhdGlvbi56ID0gTWF0aC5QSSAvIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwaWtlLnJvdGF0aW9uLnkgPSBNYXRoLlBJIC8gMjtcbiAgICB9XG4gICAgZ3JvdXAuYWRkKHNwaWtlKTtcblxuICAgIC8vIEFkZCBzbWFsbGVyIHNlY29uZGFyeSBzcGlrZXMgZm9yIGV4dHJhIG1lbmFjZSAob2Zmc2V0IHNsaWdodGx5KVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgICBjb25zdCBzbWFsbFNwaWtlID0gbmV3IFRIUkVFLk1lc2goXG4gICAgICAgIG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoMC4xNSwgMC44LCAzKSxcbiAgICAgICAgc3Bpa2VNYXRlcmlhbFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgICAgICAgLmNvcHkocG9zKVxuICAgICAgICAubm9ybWFsaXplKClcbiAgICAgICAgLm11bHRpcGx5U2NhbGFyKDEuOClcbiAgICAgICAgLmFkZChuZXcgVEhSRUUuVmVjdG9yMyhcbiAgICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAwLjUsXG4gICAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMC41LFxuICAgICAgICAgIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuNVxuICAgICAgICApKTtcbiAgICAgIHNtYWxsU3Bpa2UucG9zaXRpb24uY29weShvZmZzZXQpO1xuICAgICAgc21hbGxTcGlrZS5yb3RhdGlvbi5zZXQoXG4gICAgICAgIE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJLFxuICAgICAgICBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSxcbiAgICAgICAgTWF0aC5yYW5kb20oKSAqIE1hdGguUElcbiAgICAgICk7IC8vIFJhbmRvbSBvcmllbnRhdGlvbiBmb3IgY2hhb3NcbiAgICAgIGdyb3VwLmFkZChzbWFsbFNwaWtlKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEdsb3dpbmcgXCJleWVzXCI6IFNtYWxsIHNwaGVyZXMgd2l0aCBlbWlzc2l2ZSBtYXRlcmlhbCBmb3IgYSBwcmVkYXRvcnkgc3RhcmVcbiAgY29uc3QgZXllR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC40LCA4LCA2KTtcbiAgY29uc3QgZXllTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgIGNvbG9yOiAweGZmNDUwMCwgLy8gRmllcnkgb3JhbmdlXG4gICAgZW1pc3NpdmU6IDB4ZmY0NTAwLFxuICAgIGVtaXNzaXZlSW50ZW5zaXR5OiAwLjgsXG4gICAgcm91Z2huZXNzOiAwLFxuICAgIG1ldGFsbmVzczogMFxuICB9KTtcbiAgY29uc3QgbGVmdEV5ZSA9IG5ldyBUSFJFRS5NZXNoKGV5ZUdlb21ldHJ5LCBleWVNYXRlcmlhbCk7XG4gIGxlZnRFeWUucG9zaXRpb24uc2V0KC0wLjgsIDAuNSwgMS4yKTtcbiAgZ3JvdXAuYWRkKGxlZnRFeWUpO1xuXG4gIGNvbnN0IHJpZ2h0RXllID0gbmV3IFRIUkVFLk1lc2goZXllR2VvbWV0cnksIGV5ZU1hdGVyaWFsKTtcbiAgcmlnaHRFeWUucG9zaXRpb24uc2V0KDAuOCwgMC41LCAxLjIpO1xuICBncm91cC5hZGQocmlnaHRFeWUpO1xuXG4gIC8vIFN1YnRsZSByb3RhdGlvbiBhbmltYXRpb24gaG9vayAoY2FsbCBpbiB5b3VyIHJlbmRlciBsb29wOiBlbmVteS5yb3RhdGlvbi55ICs9IDAuMDA1OylcbiAgZ3JvdXAudXNlckRhdGEgPSB7IHJvdGF0aW9uU3BlZWQ6IDAuMDA1IH07XG5cbiAgLy8gQ2VudGVyIGFuZCBzY2FsZSB0aGUgZ3JvdXBcbiAgZ3JvdXAucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICBncm91cC5zY2FsZS5zZXQoMSwgMSwgMSk7XG5cbiAgcmV0dXJuIGdyb3VwO1xufSJdLCJuYW1lcyI6WyJUSFJFRSIsImJ1aWxkRGFuZ2Vyb3VzRW5lbXkiLCJncm91cCIsIkdyb3VwIiwiYmFzZUdlb21ldHJ5IiwiT2N0YWhlZHJvbkdlb21ldHJ5IiwiYm9keU1hdGVyaWFsIiwiTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJjb2xvciIsInJvdWdobmVzcyIsIm1ldGFsbmVzcyIsImVtaXNzaXZlIiwiZW1pc3NpdmVJbnRlbnNpdHkiLCJib2R5IiwiTWVzaCIsImFkZCIsInNwaWtlR2VvbWV0cnkiLCJDb25lR2VvbWV0cnkiLCJzcGlrZU1hdGVyaWFsIiwic3Bpa2VQb3NpdGlvbnMiLCJWZWN0b3IzIiwiZm9yRWFjaCIsInBvcyIsInNwaWtlIiwicG9zaXRpb24iLCJjb3B5IiwieSIsInJvdGF0aW9uIiwieCIsIk1hdGgiLCJQSSIsInoiLCJpIiwic21hbGxTcGlrZSIsIm9mZnNldCIsIm5vcm1hbGl6ZSIsIm11bHRpcGx5U2NhbGFyIiwicmFuZG9tIiwic2V0IiwiZXllR2VvbWV0cnkiLCJTcGhlcmVHZW9tZXRyeSIsImV5ZU1hdGVyaWFsIiwibGVmdEV5ZSIsInJpZ2h0RXllIiwidXNlckRhdGEiLCJyb3RhdGlvblNwZWVkIiwic2NhbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/octahedron/build.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/pyramid/build.ts":
/*!***************************************!*\
  !*** ./src/vehicles/pyramid/build.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildPyramid: () => (/* binding */ buildPyramid)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction buildPyramid() {\n    const g = new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(3.2, 5.5, 4);\n    const m = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0xcd5c5c,\n        roughness: 0.6,\n        metalness: 0.2\n    });\n    const mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(g, m);\n    mesh.rotateX(Math.PI / 2);\n    return mesh;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvcHlyYW1pZC9idWlsZC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QjtBQUN2QixTQUFTQztJQUNkLE1BQU1DLElBQUksSUFBSUYsK0NBQWtCLENBQUMsS0FBSyxLQUFLO0lBQzNDLE1BQU1JLElBQUksSUFBSUosdURBQTBCLENBQUM7UUFBRU0sT0FBTztRQUFVQyxXQUFXO1FBQUtDLFdBQVc7SUFBSTtJQUMzRixNQUFNQyxPQUFPLElBQUlULHVDQUFVLENBQUNFLEdBQUdFO0lBQy9CSyxLQUFLRSxPQUFPLENBQUNDLEtBQUtDLEVBQUUsR0FBQztJQUNyQixPQUFPSjtBQUNUIiwic291cmNlcyI6WyIvYXBwL3NyYy92ZWhpY2xlcy9weXJhbWlkL2J1aWxkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUHlyYW1pZCgpe1xuICBjb25zdCBnID0gbmV3IFRIUkVFLkNvbmVHZW9tZXRyeSgzLjIsIDUuNSwgNClcbiAgY29uc3QgbSA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiAweGNkNWM1Yywgcm91Z2huZXNzOiAwLjYsIG1ldGFsbmVzczogMC4yIH0pXG4gIGNvbnN0IG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnLCBtKVxuICBtZXNoLnJvdGF0ZVgoTWF0aC5QSS8yKVxuICByZXR1cm4gbWVzaFxufVxuIl0sIm5hbWVzIjpbIlRIUkVFIiwiYnVpbGRQeXJhbWlkIiwiZyIsIkNvbmVHZW9tZXRyeSIsIm0iLCJNZXNoU3RhbmRhcmRNYXRlcmlhbCIsImNvbG9yIiwicm91Z2huZXNzIiwibWV0YWxuZXNzIiwibWVzaCIsIk1lc2giLCJyb3RhdGVYIiwiTWF0aCIsIlBJIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/pyramid/build.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/shared/abilityVisuals.ts":
/*!***********************************************!*\
  !*** ./src/vehicles/shared/abilityVisuals.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAbilityVisuals: () => (/* binding */ createAbilityVisuals)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction createAbilityVisuals(group) {\n    const shieldGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(3.5, 24, 16);\n    const shieldMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n        color: 0x4cbcff,\n        transparent: true,\n        opacity: 0.28,\n        wireframe: true\n    });\n    const shieldMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(shieldGeometry, shieldMaterial);\n    shieldMesh.visible = false;\n    group.add(shieldMesh);\n    const healGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.RingGeometry(1.2, 1.9, 32);\n    const healMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n        color: 0x66ff9c,\n        side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,\n        transparent: true,\n        opacity: 0.6\n    });\n    const healMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(healGeometry, healMaterial);\n    healMesh.rotation.x = Math.PI / 2;\n    healMesh.position.y = -0.6;\n    healMesh.visible = false;\n    group.add(healMesh);\n    const dashGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(0.9, 3.6, 20);\n    const dashMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n        color: 0xffe066,\n        transparent: true,\n        opacity: 0.45\n    });\n    const dashMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(dashGeometry, dashMaterial);\n    dashMesh.rotation.x = Math.PI;\n    dashMesh.position.z = 2.2;\n    dashMesh.visible = false;\n    group.add(dashMesh);\n    const ultimateGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.TorusGeometry(2.8, 0.18, 16, 36);\n    const ultimateMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n        color: 0xff47c2,\n        transparent: true,\n        opacity: 0.5\n    });\n    const ultimateMesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(ultimateGeometry, ultimateMaterial);\n    ultimateMesh.rotation.x = Math.PI / 2;\n    ultimateMesh.visible = false;\n    group.add(ultimateMesh);\n    function update(state, parent) {\n        //1.- Follow the owning craft so each indicator hugs the vehicle in world space.\n        shieldMesh.visible = state.shield.active;\n        shieldMesh.position.set(0, 0, 0);\n        shieldMesh.quaternion.copy(parent.quaternion);\n        healMesh.visible = state.heal.cooldownRemainingMs > 0;\n        healMesh.position.set(0, -0.6, 0);\n        healMesh.quaternion.copy(parent.quaternion);\n        dashMesh.visible = state.dash.active;\n        dashMesh.position.set(0, 0, -2.6);\n        dashMesh.quaternion.copy(parent.quaternion);\n        ultimateMesh.visible = state.ultimate.active;\n        ultimateMesh.position.set(0, 0, 0);\n        ultimateMesh.quaternion.copy(parent.quaternion);\n    }\n    function dispose(parent) {\n        //2.- Remove helper meshes when the controller shuts down to prevent leaks.\n        parent.remove(shieldMesh, healMesh, dashMesh, ultimateMesh);\n        shieldGeometry.dispose();\n        shieldMaterial.dispose();\n        healGeometry.dispose();\n        healMaterial.dispose();\n        dashGeometry.dispose();\n        dashMaterial.dispose();\n        ultimateGeometry.dispose();\n        ultimateMaterial.dispose();\n    }\n    return {\n        update,\n        dispose\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvc2hhcmVkL2FiaWxpdHlWaXN1YWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCO0FBUXZCLFNBQVNDLHFCQUFxQkMsS0FBa0I7SUFDckQsTUFBTUMsaUJBQWlCLElBQUlILGlEQUFvQixDQUFDLEtBQUssSUFBSTtJQUN6RCxNQUFNSyxpQkFBaUIsSUFBSUwsb0RBQXVCLENBQUM7UUFBRU8sT0FBTztRQUFVQyxhQUFhO1FBQU1DLFNBQVM7UUFBTUMsV0FBVztJQUFLO0lBQ3hILE1BQU1DLGFBQWEsSUFBSVgsdUNBQVUsQ0FBQ0csZ0JBQWdCRTtJQUNsRE0sV0FBV0UsT0FBTyxHQUFHO0lBQ3JCWCxNQUFNWSxHQUFHLENBQUNIO0lBRVYsTUFBTUksZUFBZSxJQUFJZiwrQ0FBa0IsQ0FBQyxLQUFLLEtBQUs7SUFDdEQsTUFBTWlCLGVBQWUsSUFBSWpCLG9EQUF1QixDQUFDO1FBQUVPLE9BQU87UUFBVVcsTUFBTWxCLDZDQUFnQjtRQUFFUSxhQUFhO1FBQU1DLFNBQVM7SUFBSTtJQUM1SCxNQUFNVyxXQUFXLElBQUlwQix1Q0FBVSxDQUFDZSxjQUFjRTtJQUM5Q0csU0FBU0MsUUFBUSxDQUFDQyxDQUFDLEdBQUdDLEtBQUtDLEVBQUUsR0FBRztJQUNoQ0osU0FBU0ssUUFBUSxDQUFDQyxDQUFDLEdBQUcsQ0FBQztJQUN2Qk4sU0FBU1AsT0FBTyxHQUFHO0lBQ25CWCxNQUFNWSxHQUFHLENBQUNNO0lBRVYsTUFBTU8sZUFBZSxJQUFJM0IsK0NBQWtCLENBQUMsS0FBSyxLQUFLO0lBQ3RELE1BQU02QixlQUFlLElBQUk3QixvREFBdUIsQ0FBQztRQUFFTyxPQUFPO1FBQVVDLGFBQWE7UUFBTUMsU0FBUztJQUFLO0lBQ3JHLE1BQU1xQixXQUFXLElBQUk5Qix1Q0FBVSxDQUFDMkIsY0FBY0U7SUFDOUNDLFNBQVNULFFBQVEsQ0FBQ0MsQ0FBQyxHQUFHQyxLQUFLQyxFQUFFO0lBQzdCTSxTQUFTTCxRQUFRLENBQUNNLENBQUMsR0FBRztJQUN0QkQsU0FBU2pCLE9BQU8sR0FBRztJQUNuQlgsTUFBTVksR0FBRyxDQUFDZ0I7SUFFVixNQUFNRSxtQkFBbUIsSUFBSWhDLGdEQUFtQixDQUFDLEtBQUssTUFBTSxJQUFJO0lBQ2hFLE1BQU1rQyxtQkFBbUIsSUFBSWxDLG9EQUF1QixDQUFDO1FBQUVPLE9BQU87UUFBVUMsYUFBYTtRQUFNQyxTQUFTO0lBQUk7SUFDeEcsTUFBTTBCLGVBQWUsSUFBSW5DLHVDQUFVLENBQUNnQyxrQkFBa0JFO0lBQ3REQyxhQUFhZCxRQUFRLENBQUNDLENBQUMsR0FBR0MsS0FBS0MsRUFBRSxHQUFHO0lBQ3BDVyxhQUFhdEIsT0FBTyxHQUFHO0lBQ3ZCWCxNQUFNWSxHQUFHLENBQUNxQjtJQUVWLFNBQVNDLE9BQU9DLEtBQTBCLEVBQUVDLE1BQW1CO1FBQzdELGdGQUFnRjtRQUNoRjNCLFdBQVdFLE9BQU8sR0FBR3dCLE1BQU1FLE1BQU0sQ0FBQ0MsTUFBTTtRQUN4QzdCLFdBQVdjLFFBQVEsQ0FBQ2dCLEdBQUcsQ0FBQyxHQUFHLEdBQUc7UUFDOUI5QixXQUFXK0IsVUFBVSxDQUFDQyxJQUFJLENBQUNMLE9BQU9JLFVBQVU7UUFFNUN0QixTQUFTUCxPQUFPLEdBQUd3QixNQUFNTyxJQUFJLENBQUNDLG1CQUFtQixHQUFHO1FBQ3BEekIsU0FBU0ssUUFBUSxDQUFDZ0IsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLO1FBQy9CckIsU0FBU3NCLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDTCxPQUFPSSxVQUFVO1FBRTFDWixTQUFTakIsT0FBTyxHQUFHd0IsTUFBTVMsSUFBSSxDQUFDTixNQUFNO1FBQ3BDVixTQUFTTCxRQUFRLENBQUNnQixHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDN0JYLFNBQVNZLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDTCxPQUFPSSxVQUFVO1FBRTFDUCxhQUFhdEIsT0FBTyxHQUFHd0IsTUFBTVUsUUFBUSxDQUFDUCxNQUFNO1FBQzVDTCxhQUFhVixRQUFRLENBQUNnQixHQUFHLENBQUMsR0FBRyxHQUFHO1FBQ2hDTixhQUFhTyxVQUFVLENBQUNDLElBQUksQ0FBQ0wsT0FBT0ksVUFBVTtJQUNoRDtJQUVBLFNBQVNNLFFBQVFWLE1BQW1CO1FBQ2xDLDJFQUEyRTtRQUMzRUEsT0FBT1csTUFBTSxDQUFDdEMsWUFBWVMsVUFBVVUsVUFBVUs7UUFDOUNoQyxlQUFlNkMsT0FBTztRQUN0QjNDLGVBQWUyQyxPQUFPO1FBQ3RCakMsYUFBYWlDLE9BQU87UUFDcEIvQixhQUFhK0IsT0FBTztRQUNwQnJCLGFBQWFxQixPQUFPO1FBQ3BCbkIsYUFBYW1CLE9BQU87UUFDcEJoQixpQkFBaUJnQixPQUFPO1FBQ3hCZCxpQkFBaUJjLE9BQU87SUFDMUI7SUFFQSxPQUFPO1FBQUVaO1FBQVFZO0lBQVE7QUFDM0IiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3ZlaGljbGVzL3NoYXJlZC9hYmlsaXR5VmlzdWFscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSdcbmltcG9ydCB0eXBlIHsgU3VwcG9ydEFiaWxpdHlTdGF0ZSB9IGZyb20gJ0AvdmVoaWNsZXMvc2hhcmVkL3N1cHBvcnRBYmlsaXRpZXMnXG5cbmV4cG9ydCB0eXBlIEFiaWxpdHlWaXN1YWxzID0ge1xuICB1cGRhdGU6IChzdGF0ZTogU3VwcG9ydEFiaWxpdHlTdGF0ZSwgcGFyZW50OiBUSFJFRS5Hcm91cCkgPT4gdm9pZFxuICBkaXNwb3NlOiAocGFyZW50OiBUSFJFRS5Hcm91cCkgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWJpbGl0eVZpc3VhbHMoZ3JvdXA6IFRIUkVFLkdyb3VwKTogQWJpbGl0eVZpc3VhbHMge1xuICBjb25zdCBzaGllbGRHZW9tZXRyeSA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgzLjUsIDI0LCAxNilcbiAgY29uc3Qgc2hpZWxkTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHg0Y2JjZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiAwLjI4LCB3aXJlZnJhbWU6IHRydWUgfSlcbiAgY29uc3Qgc2hpZWxkTWVzaCA9IG5ldyBUSFJFRS5NZXNoKHNoaWVsZEdlb21ldHJ5LCBzaGllbGRNYXRlcmlhbClcbiAgc2hpZWxkTWVzaC52aXNpYmxlID0gZmFsc2VcbiAgZ3JvdXAuYWRkKHNoaWVsZE1lc2gpXG5cbiAgY29uc3QgaGVhbEdlb21ldHJ5ID0gbmV3IFRIUkVFLlJpbmdHZW9tZXRyeSgxLjIsIDEuOSwgMzIpXG4gIGNvbnN0IGhlYWxNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IGNvbG9yOiAweDY2ZmY5Yywgc2lkZTogVEhSRUUuRG91YmxlU2lkZSwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDAuNiB9KVxuICBjb25zdCBoZWFsTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhlYWxHZW9tZXRyeSwgaGVhbE1hdGVyaWFsKVxuICBoZWFsTWVzaC5yb3RhdGlvbi54ID0gTWF0aC5QSSAvIDJcbiAgaGVhbE1lc2gucG9zaXRpb24ueSA9IC0wLjZcbiAgaGVhbE1lc2gudmlzaWJsZSA9IGZhbHNlXG4gIGdyb3VwLmFkZChoZWFsTWVzaClcblxuICBjb25zdCBkYXNoR2VvbWV0cnkgPSBuZXcgVEhSRUUuQ29uZUdlb21ldHJ5KDAuOSwgMy42LCAyMClcbiAgY29uc3QgZGFzaE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgY29sb3I6IDB4ZmZlMDY2LCB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMC40NSB9KVxuICBjb25zdCBkYXNoTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGRhc2hHZW9tZXRyeSwgZGFzaE1hdGVyaWFsKVxuICBkYXNoTWVzaC5yb3RhdGlvbi54ID0gTWF0aC5QSVxuICBkYXNoTWVzaC5wb3NpdGlvbi56ID0gMi4yXG4gIGRhc2hNZXNoLnZpc2libGUgPSBmYWxzZVxuICBncm91cC5hZGQoZGFzaE1lc2gpXG5cbiAgY29uc3QgdWx0aW1hdGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Ub3J1c0dlb21ldHJ5KDIuOCwgMC4xOCwgMTYsIDM2KVxuICBjb25zdCB1bHRpbWF0ZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgY29sb3I6IDB4ZmY0N2MyLCB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMC41IH0pXG4gIGNvbnN0IHVsdGltYXRlTWVzaCA9IG5ldyBUSFJFRS5NZXNoKHVsdGltYXRlR2VvbWV0cnksIHVsdGltYXRlTWF0ZXJpYWwpXG4gIHVsdGltYXRlTWVzaC5yb3RhdGlvbi54ID0gTWF0aC5QSSAvIDJcbiAgdWx0aW1hdGVNZXNoLnZpc2libGUgPSBmYWxzZVxuICBncm91cC5hZGQodWx0aW1hdGVNZXNoKVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShzdGF0ZTogU3VwcG9ydEFiaWxpdHlTdGF0ZSwgcGFyZW50OiBUSFJFRS5Hcm91cCkge1xuICAgIC8vMS4tIEZvbGxvdyB0aGUgb3duaW5nIGNyYWZ0IHNvIGVhY2ggaW5kaWNhdG9yIGh1Z3MgdGhlIHZlaGljbGUgaW4gd29ybGQgc3BhY2UuXG4gICAgc2hpZWxkTWVzaC52aXNpYmxlID0gc3RhdGUuc2hpZWxkLmFjdGl2ZVxuICAgIHNoaWVsZE1lc2gucG9zaXRpb24uc2V0KDAsIDAsIDApXG4gICAgc2hpZWxkTWVzaC5xdWF0ZXJuaW9uLmNvcHkocGFyZW50LnF1YXRlcm5pb24pXG5cbiAgICBoZWFsTWVzaC52aXNpYmxlID0gc3RhdGUuaGVhbC5jb29sZG93blJlbWFpbmluZ01zID4gMFxuICAgIGhlYWxNZXNoLnBvc2l0aW9uLnNldCgwLCAtMC42LCAwKVxuICAgIGhlYWxNZXNoLnF1YXRlcm5pb24uY29weShwYXJlbnQucXVhdGVybmlvbilcblxuICAgIGRhc2hNZXNoLnZpc2libGUgPSBzdGF0ZS5kYXNoLmFjdGl2ZVxuICAgIGRhc2hNZXNoLnBvc2l0aW9uLnNldCgwLCAwLCAtMi42KVxuICAgIGRhc2hNZXNoLnF1YXRlcm5pb24uY29weShwYXJlbnQucXVhdGVybmlvbilcblxuICAgIHVsdGltYXRlTWVzaC52aXNpYmxlID0gc3RhdGUudWx0aW1hdGUuYWN0aXZlXG4gICAgdWx0aW1hdGVNZXNoLnBvc2l0aW9uLnNldCgwLCAwLCAwKVxuICAgIHVsdGltYXRlTWVzaC5xdWF0ZXJuaW9uLmNvcHkocGFyZW50LnF1YXRlcm5pb24pXG4gIH1cblxuICBmdW5jdGlvbiBkaXNwb3NlKHBhcmVudDogVEhSRUUuR3JvdXApIHtcbiAgICAvLzIuLSBSZW1vdmUgaGVscGVyIG1lc2hlcyB3aGVuIHRoZSBjb250cm9sbGVyIHNodXRzIGRvd24gdG8gcHJldmVudCBsZWFrcy5cbiAgICBwYXJlbnQucmVtb3ZlKHNoaWVsZE1lc2gsIGhlYWxNZXNoLCBkYXNoTWVzaCwgdWx0aW1hdGVNZXNoKVxuICAgIHNoaWVsZEdlb21ldHJ5LmRpc3Bvc2UoKVxuICAgIHNoaWVsZE1hdGVyaWFsLmRpc3Bvc2UoKVxuICAgIGhlYWxHZW9tZXRyeS5kaXNwb3NlKClcbiAgICBoZWFsTWF0ZXJpYWwuZGlzcG9zZSgpXG4gICAgZGFzaEdlb21ldHJ5LmRpc3Bvc2UoKVxuICAgIGRhc2hNYXRlcmlhbC5kaXNwb3NlKClcbiAgICB1bHRpbWF0ZUdlb21ldHJ5LmRpc3Bvc2UoKVxuICAgIHVsdGltYXRlTWF0ZXJpYWwuZGlzcG9zZSgpXG4gIH1cblxuICByZXR1cm4geyB1cGRhdGUsIGRpc3Bvc2UgfVxufVxuXG4iXSwibmFtZXMiOlsiVEhSRUUiLCJjcmVhdGVBYmlsaXR5VmlzdWFscyIsImdyb3VwIiwic2hpZWxkR2VvbWV0cnkiLCJTcGhlcmVHZW9tZXRyeSIsInNoaWVsZE1hdGVyaWFsIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJjb2xvciIsInRyYW5zcGFyZW50Iiwib3BhY2l0eSIsIndpcmVmcmFtZSIsInNoaWVsZE1lc2giLCJNZXNoIiwidmlzaWJsZSIsImFkZCIsImhlYWxHZW9tZXRyeSIsIlJpbmdHZW9tZXRyeSIsImhlYWxNYXRlcmlhbCIsInNpZGUiLCJEb3VibGVTaWRlIiwiaGVhbE1lc2giLCJyb3RhdGlvbiIsIngiLCJNYXRoIiwiUEkiLCJwb3NpdGlvbiIsInkiLCJkYXNoR2VvbWV0cnkiLCJDb25lR2VvbWV0cnkiLCJkYXNoTWF0ZXJpYWwiLCJkYXNoTWVzaCIsInoiLCJ1bHRpbWF0ZUdlb21ldHJ5IiwiVG9ydXNHZW9tZXRyeSIsInVsdGltYXRlTWF0ZXJpYWwiLCJ1bHRpbWF0ZU1lc2giLCJ1cGRhdGUiLCJzdGF0ZSIsInBhcmVudCIsInNoaWVsZCIsImFjdGl2ZSIsInNldCIsInF1YXRlcm5pb24iLCJjb3B5IiwiaGVhbCIsImNvb2xkb3duUmVtYWluaW5nTXMiLCJkYXNoIiwidWx0aW1hdGUiLCJkaXNwb3NlIiwicmVtb3ZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/shared/abilityVisuals.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/shared/player.ts":
/*!***************************************!*\
  !*** ./src/vehicles/shared/player.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPlayer: () => (/* binding */ createPlayer)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _vehicles_arrowhead_build__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/vehicles/arrowhead/build */ \"(ssr)/./src/vehicles/arrowhead/build.ts\");\n/* harmony import */ var _vehicles_octahedron_build__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/vehicles/octahedron/build */ \"(ssr)/./src/vehicles/octahedron/build.ts\");\n/* harmony import */ var _vehicles_pyramid_build__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/vehicles/pyramid/build */ \"(ssr)/./src/vehicles/pyramid/build.ts\");\n/* harmony import */ var _vehicles_icosahedron_build__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/vehicles/icosahedron/build */ \"(ssr)/./src/vehicles/icosahedron/build.ts\");\n/* harmony import */ var _vehicles_cube_build__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/vehicles/cube/build */ \"(ssr)/./src/vehicles/cube/build.ts\");\n/* harmony import */ var _vehicles_shared_simpleController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/vehicles/shared/simpleController */ \"(ssr)/./src/vehicles/shared/simpleController.ts\");\n\n\n\n\n\n\n\nfunction createPlayer(initial, scene) {\n    const group = new three__WEBPACK_IMPORTED_MODULE_6__.Group();\n    scene.add(group);\n    const builders = {\n        arrowhead: _vehicles_arrowhead_build__WEBPACK_IMPORTED_MODULE_0__.buildArrowhead,\n        octahedron: _vehicles_octahedron_build__WEBPACK_IMPORTED_MODULE_1__.buildOctahedron,\n        pyramid: _vehicles_pyramid_build__WEBPACK_IMPORTED_MODULE_2__.buildPyramid,\n        icosahedron: _vehicles_icosahedron_build__WEBPACK_IMPORTED_MODULE_3__.buildIcosahedron,\n        cube: _vehicles_cube_build__WEBPACK_IMPORTED_MODULE_4__.buildCube\n    };\n    let currentKey = initial;\n    let currentMesh = builders[currentKey]();\n    group.add(currentMesh);\n    const controller = (0,_vehicles_shared_simpleController__WEBPACK_IMPORTED_MODULE_5__.createController)(group, scene);\n    controller.refreshVehicleClearance?.();\n    function setVehicle(key) {\n        if (currentMesh) group.remove(currentMesh);\n        currentKey = key;\n        currentMesh = builders[currentKey]();\n        group.add(currentMesh);\n        controller.refreshVehicleClearance?.();\n    }\n    function cycleVehicle() {\n        const keys = Object.keys(builders);\n        const i = keys.indexOf(currentKey);\n        setVehicle(keys[(i + 1) % keys.length]);\n    }\n    return {\n        group,\n        controller,\n        setVehicle,\n        cycleVehicle\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvc2hhcmVkL3BsYXllci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE4QjtBQUM2QjtBQUNFO0FBQ047QUFDUTtBQUNkO0FBQ29CO0FBRTlELFNBQVNPLGFBQWFDLE9BQStELEVBQUVDLEtBQWtCO0lBQzlHLE1BQU1DLFFBQVEsSUFBSVYsd0NBQVc7SUFDN0JTLE1BQU1HLEdBQUcsQ0FBQ0Y7SUFFVixNQUFNRyxXQUFXO1FBQ2ZDLFdBQVdiLHFFQUFjQTtRQUN6QmMsWUFBWWIsdUVBQWVBO1FBQzNCYyxTQUFTYixpRUFBWUE7UUFDckJjLGFBQWFiLHlFQUFnQkE7UUFDN0JjLE1BQU1iLDJEQUFTQTtJQUNqQjtJQUVBLElBQUljLGFBQWFYO0lBQ2pCLElBQUlZLGNBQWNQLFFBQVEsQ0FBQ00sV0FBVztJQUN0Q1QsTUFBTUUsR0FBRyxDQUFDUTtJQUVWLE1BQU1DLGFBQWFmLG1GQUFnQkEsQ0FBQ0ksT0FBT0Q7SUFDM0NZLFdBQVdDLHVCQUF1QjtJQUVsQyxTQUFTQyxXQUFXQyxHQUEwQjtRQUM1QyxJQUFJSixhQUFhVixNQUFNZSxNQUFNLENBQUNMO1FBQzlCRCxhQUFhSztRQUNiSixjQUFjUCxRQUFRLENBQUNNLFdBQVc7UUFDbENULE1BQU1FLEdBQUcsQ0FBQ1E7UUFDVkMsV0FBV0MsdUJBQXVCO0lBQ3BDO0lBRUEsU0FBU0k7UUFDUCxNQUFNQyxPQUFPQyxPQUFPRCxJQUFJLENBQUNkO1FBQ3pCLE1BQU1nQixJQUFJRixLQUFLRyxPQUFPLENBQUNYO1FBQ3ZCSSxXQUFXSSxJQUFJLENBQUMsQ0FBQ0UsSUFBRSxLQUFHRixLQUFLSSxNQUFNLENBQUM7SUFDcEM7SUFFQSxPQUFPO1FBQUVyQjtRQUFPVztRQUFZRTtRQUFZRztJQUFhO0FBQ3ZEIiwic291cmNlcyI6WyIvYXBwL3NyYy92ZWhpY2xlcy9zaGFyZWQvcGxheWVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgYnVpbGRBcnJvd2hlYWQgfSBmcm9tICdAL3ZlaGljbGVzL2Fycm93aGVhZC9idWlsZCdcbmltcG9ydCB7IGJ1aWxkT2N0YWhlZHJvbiB9IGZyb20gJ0AvdmVoaWNsZXMvb2N0YWhlZHJvbi9idWlsZCdcbmltcG9ydCB7IGJ1aWxkUHlyYW1pZCB9IGZyb20gJ0AvdmVoaWNsZXMvcHlyYW1pZC9idWlsZCdcbmltcG9ydCB7IGJ1aWxkSWNvc2FoZWRyb24gfSBmcm9tICdAL3ZlaGljbGVzL2ljb3NhaGVkcm9uL2J1aWxkJ1xuaW1wb3J0IHsgYnVpbGRDdWJlIH0gZnJvbSAnQC92ZWhpY2xlcy9jdWJlL2J1aWxkJ1xuaW1wb3J0IHsgY3JlYXRlQ29udHJvbGxlciB9IGZyb20gJ0AvdmVoaWNsZXMvc2hhcmVkL3NpbXBsZUNvbnRyb2xsZXInXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQbGF5ZXIoaW5pdGlhbDonYXJyb3doZWFkJ3wnb2N0YWhlZHJvbid8J3B5cmFtaWQnfCdpY29zYWhlZHJvbid8J2N1YmUnLCBzY2VuZTogVEhSRUUuU2NlbmUpe1xuICBjb25zdCBncm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpXG4gIHNjZW5lLmFkZChncm91cClcblxuICBjb25zdCBidWlsZGVycyA9IHtcbiAgICBhcnJvd2hlYWQ6IGJ1aWxkQXJyb3doZWFkLFxuICAgIG9jdGFoZWRyb246IGJ1aWxkT2N0YWhlZHJvbixcbiAgICBweXJhbWlkOiBidWlsZFB5cmFtaWQsXG4gICAgaWNvc2FoZWRyb246IGJ1aWxkSWNvc2FoZWRyb24sXG4gICAgY3ViZTogYnVpbGRDdWJlXG4gIH1cblxuICBsZXQgY3VycmVudEtleSA9IGluaXRpYWxcbiAgbGV0IGN1cnJlbnRNZXNoID0gYnVpbGRlcnNbY3VycmVudEtleV0oKVxuICBncm91cC5hZGQoY3VycmVudE1lc2gpXG5cbiAgY29uc3QgY29udHJvbGxlciA9IGNyZWF0ZUNvbnRyb2xsZXIoZ3JvdXAsIHNjZW5lKVxuICBjb250cm9sbGVyLnJlZnJlc2hWZWhpY2xlQ2xlYXJhbmNlPy4oKVxuXG4gIGZ1bmN0aW9uIHNldFZlaGljbGUoa2V5OiBrZXlvZiB0eXBlb2YgYnVpbGRlcnMpe1xuICAgIGlmIChjdXJyZW50TWVzaCkgZ3JvdXAucmVtb3ZlKGN1cnJlbnRNZXNoKVxuICAgIGN1cnJlbnRLZXkgPSBrZXlcbiAgICBjdXJyZW50TWVzaCA9IGJ1aWxkZXJzW2N1cnJlbnRLZXldKClcbiAgICBncm91cC5hZGQoY3VycmVudE1lc2gpXG4gICAgY29udHJvbGxlci5yZWZyZXNoVmVoaWNsZUNsZWFyYW5jZT8uKClcbiAgfVxuXG4gIGZ1bmN0aW9uIGN5Y2xlVmVoaWNsZSgpe1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhidWlsZGVycykgYXMgQXJyYXk8a2V5b2YgdHlwZW9mIGJ1aWxkZXJzPlxuICAgIGNvbnN0IGkgPSBrZXlzLmluZGV4T2YoY3VycmVudEtleSlcbiAgICBzZXRWZWhpY2xlKGtleXNbKGkrMSkla2V5cy5sZW5ndGhdKVxuICB9XG5cbiAgcmV0dXJuIHsgZ3JvdXAsIGNvbnRyb2xsZXIsIHNldFZlaGljbGUsIGN5Y2xlVmVoaWNsZSB9XG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJidWlsZEFycm93aGVhZCIsImJ1aWxkT2N0YWhlZHJvbiIsImJ1aWxkUHlyYW1pZCIsImJ1aWxkSWNvc2FoZWRyb24iLCJidWlsZEN1YmUiLCJjcmVhdGVDb250cm9sbGVyIiwiY3JlYXRlUGxheWVyIiwiaW5pdGlhbCIsInNjZW5lIiwiZ3JvdXAiLCJHcm91cCIsImFkZCIsImJ1aWxkZXJzIiwiYXJyb3doZWFkIiwib2N0YWhlZHJvbiIsInB5cmFtaWQiLCJpY29zYWhlZHJvbiIsImN1YmUiLCJjdXJyZW50S2V5IiwiY3VycmVudE1lc2giLCJjb250cm9sbGVyIiwicmVmcmVzaFZlaGljbGVDbGVhcmFuY2UiLCJzZXRWZWhpY2xlIiwia2V5IiwicmVtb3ZlIiwiY3ljbGVWZWhpY2xlIiwia2V5cyIsIk9iamVjdCIsImkiLCJpbmRleE9mIiwibGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/shared/player.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/shared/simpleController.ts":
/*!*************************************************!*\
  !*** ./src/vehicles/shared/simpleController.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createController: () => (/* binding */ createController)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _weapons_gatling__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/weapons/gatling */ \"(ssr)/./src/weapons/gatling.ts\");\n/* harmony import */ var _weapons_neonLaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/weapons/neonLaser */ \"(ssr)/./src/weapons/neonLaser.ts\");\n/* harmony import */ var _weapons_bomb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/weapons/bomb */ \"(ssr)/./src/weapons/bomb.ts\");\n/* harmony import */ var _weapons_visuals_homingMissileVisual__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/weapons/visuals/homingMissileVisual */ \"(ssr)/./src/weapons/visuals/homingMissileVisual.ts\");\n/* harmony import */ var _weapons_visuals_neonLaserVisual__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/weapons/visuals/neonLaserVisual */ \"(ssr)/./src/weapons/visuals/neonLaserVisual.ts\");\n/* harmony import */ var _weapons_meteorMissile__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/weapons/meteorMissile */ \"(ssr)/./src/weapons/meteorMissile.ts\");\n/* harmony import */ var _vehicles_shared_supportAbilities__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/vehicles/shared/supportAbilities */ \"(ssr)/./src/vehicles/shared/supportAbilities.ts\");\n/* harmony import */ var _vehicles_shared_abilityVisuals__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/vehicles/shared/abilityVisuals */ \"(ssr)/./src/vehicles/shared/abilityVisuals.ts\");\n\n\n\n\n\n\n\n\n\nfunction createController(group, scene) {\n    const vel = new three__WEBPACK_IMPORTED_MODULE_8__.Vector3(0, 0, 60);\n    const forward = new three__WEBPACK_IMPORTED_MODULE_8__.Vector3(0, 0, -1);\n    const weaponContext = {\n        position: new three__WEBPACK_IMPORTED_MODULE_8__.Vector3(),\n        forward: new three__WEBPACK_IMPORTED_MODULE_8__.Vector3(0, 0, -1),\n        dt: 0,\n        targets: []\n    };\n    let targetProvider = ()=>[];\n    const bounds = new three__WEBPACK_IMPORTED_MODULE_8__.Box3();\n    const size = new three__WEBPACK_IMPORTED_MODULE_8__.Vector3();\n    function computeLauncherClearance() {\n        bounds.setFromObject(group);\n        bounds.getSize(size);\n        const span = Math.max(size.x, size.y, size.z);\n        const distance = Math.max(5, span * 5);\n        meteorRedSystem.setLauncherClearance(distance);\n        meteorVioletSystem.setLauncherClearance(distance);\n    }\n    const gatling = (0,_weapons_gatling__WEBPACK_IMPORTED_MODULE_0__.createGatlingSystem)({\n        fireRate: 25,\n        spread: three__WEBPACK_IMPORTED_MODULE_8__.MathUtils.degToRad(1.5),\n        maxTracers: 32,\n        tracerLifeMs: 250,\n        ammo: 1200,\n        heatPerShot: 1,\n        coolRate: 12,\n        overheatThreshold: 120\n    });\n    const meteorRedSystem = (0,_weapons_meteorMissile__WEBPACK_IMPORTED_MODULE_5__.createMeteorMissileSystem)({\n        maxConcurrent: 2,\n        cooldownMs: 2200,\n        ammo: Number.POSITIVE_INFINITY,\n        ejectionDurationMs: 1000,\n        ejectionSpeed: 40,\n        burnSpeed: 220,\n        navigationConstant: 3.5,\n        detonationRadius: 6,\n        smokeTrailIntervalMs: 70,\n        maxLifetimeMs: 15000,\n        clearanceDistance: 30,\n        swayAmplitude: 24,\n        swayFrequency: 1.2\n    });\n    const meteorVioletSystem = (0,_weapons_meteorMissile__WEBPACK_IMPORTED_MODULE_5__.createMeteorMissileSystem)({\n        maxConcurrent: 2,\n        cooldownMs: 2200,\n        ammo: Number.POSITIVE_INFINITY,\n        ejectionDurationMs: 900,\n        ejectionSpeed: 42,\n        burnSpeed: 225,\n        navigationConstant: 3.6,\n        detonationRadius: 6,\n        smokeTrailIntervalMs: 70,\n        maxLifetimeMs: 15000,\n        clearanceDistance: 30,\n        swayAmplitude: 26,\n        swayFrequency: 1.25\n    });\n    const meteorRedVisual = (0,_weapons_visuals_homingMissileVisual__WEBPACK_IMPORTED_MODULE_3__.createHomingMissileVisual)(scene, {\n        body: 0xff4d4f,\n        emissive: 0xff826a,\n        trail: 0xffc2a1\n    });\n    const meteorVioletVisual = (0,_weapons_visuals_homingMissileVisual__WEBPACK_IMPORTED_MODULE_3__.createHomingMissileVisual)(scene, {\n        body: 0x8c54ff,\n        emissive: 0xca8dff,\n        trail: 0xd8b4ff\n    });\n    const laserSystem = (0,_weapons_neonLaser__WEBPACK_IMPORTED_MODULE_1__.createNeonLaserSystem)({\n        cooldownMs: 2000,\n        durationMs: 600,\n        range: 800,\n        attenuation: 0.002\n    });\n    const laserVisual = (0,_weapons_visuals_neonLaserVisual__WEBPACK_IMPORTED_MODULE_4__.createNeonLaserVisual)(scene, {\n        color: 0x61f6ff\n    });\n    const bombSystem = (0,_weapons_bomb__WEBPACK_IMPORTED_MODULE_2__.createBombSystem)({\n        maxConcurrent: 2,\n        ammo: 6,\n        fuseMs: 2500,\n        cooldownMs: 1500,\n        aoeRadius: 40,\n        craterRadius: 18,\n        debrisCount: 8,\n        gravity: 30\n    });\n    const abilitySystem = (0,_vehicles_shared_supportAbilities__WEBPACK_IMPORTED_MODULE_6__.createSupportAbilitySystem)();\n    const abilityVisuals = (0,_vehicles_shared_abilityVisuals__WEBPACK_IMPORTED_MODULE_7__.createAbilityVisuals)(group);\n    let baseSpeed = 60;\n    let effectiveSpeed = baseSpeed;\n    let activeSlot = 'METEOR_RED';\n    let ammo = gatling.ammo;\n    let missiles = Number.POSITIVE_INFINITY;\n    let laserCooldownMs = laserSystem.cooldownMs;\n    let bombArmed = bombSystem.isArmed;\n    let hull = abilitySystem.state.heal.hull;\n    let shieldActive = abilitySystem.state.shield.active;\n    let dashActive = abilitySystem.state.dash.active;\n    let ultimateActive = abilitySystem.state.ultimate.active;\n    let fireHeld = false;\n    let fireJustPressed = false;\n    let fireJustReleased = false;\n    const slotLabels = {\n        METEOR_RED: 'METEOR BVRAAM R',\n        METEOR_VIOLET: 'METEOR BVRAAM V',\n        LASER: 'NEON LASER',\n        BOMB: 'GRAV BOMB',\n        GATLING: 'GATLING',\n        SHIELD: 'SHIELD',\n        HEAL: 'HEAL',\n        DASH: 'DASH',\n        ULTIMATE: 'ULTIMATE'\n    };\n    computeLauncherClearance();\n    function update(dt, input, queryHeight) {\n        // Mouse steering: aim reticle in NDC controls yaw/pitch\n        const targetYaw = input.mouse.x * 0.6;\n        const targetPitch = input.mouse.y * 0.4;\n        group.rotation.y += (targetYaw - group.rotation.y) * (1 - Math.exp(-6 * dt));\n        group.rotation.x += (targetPitch - group.rotation.x) * (1 - Math.exp(-6 * dt));\n        // Keys\n        if (input.pressed('KeyW')) baseSpeed += 40 * dt;\n        if (input.pressed('KeyS')) baseSpeed -= 40 * dt;\n        if (input.pressed('ShiftLeft')) baseSpeed += 80 * dt;\n        if (input.pressed('KeyQ')) group.rotation.z += 1.2 * dt;\n        if (input.pressed('KeyE')) group.rotation.z -= 1.2 * dt;\n        baseSpeed = Math.max(10, Math.min(160, baseSpeed));\n        // Integrate\n        forward.set(0, 0, -1).applyEuler(group.rotation);\n        const dashBonus = abilitySystem.state.dash.active ? abilitySystem.state.dash.speedBonus : 0;\n        const ultimateBonus = abilitySystem.state.ultimate.active ? abilitySystem.state.dash.speedBonus * 0.5 : 0;\n        effectiveSpeed = baseSpeed + dashBonus + ultimateBonus;\n        vel.copy(forward).multiplyScalar(effectiveSpeed);\n        group.position.addScaledVector(vel, dt);\n        group.userData.speed = effectiveSpeed;\n        // Terrain floor constraint\n        const floor = queryHeight(group.position.x, group.position.z) + 6;\n        if (group.position.y < floor) {\n            group.position.y = floor;\n            vel.y = Math.abs(vel.y) * 0.2;\n        }\n        // Ceiling clamp\n        const ceiling = 2000;\n        if (group.position.y > ceiling) group.position.y = ceiling;\n        const previouslyHeld = fireHeld;\n        fireHeld = Boolean(input.pressed('Space'));\n        fireJustPressed = fireHeld && !previouslyHeld;\n        fireJustReleased = !fireHeld && previouslyHeld;\n        if (input.pressed('Digit1')) activeSlot = 'METEOR_RED';\n        if (input.pressed('Digit2')) activeSlot = 'METEOR_VIOLET';\n        if (input.pressed('Digit3')) activeSlot = 'LASER';\n        if (input.pressed('Digit4')) activeSlot = 'BOMB';\n        if (input.pressed('Digit5')) activeSlot = 'GATLING';\n        if (input.pressed('Digit6')) activeSlot = 'SHIELD';\n        if (input.pressed('Digit7')) activeSlot = 'HEAL';\n        if (input.pressed('Digit8')) activeSlot = 'DASH';\n        if (input.pressed('Digit9')) activeSlot = 'ULTIMATE';\n        weaponContext.position.copy(group.position);\n        weaponContext.forward.copy(forward);\n        weaponContext.dt = dt;\n        weaponContext.targets = targetProvider();\n        if (fireJustPressed) {\n            switch(activeSlot){\n                case 'METEOR_RED':\n                    //1.- Launch a crimson BVRAAM when the red slot is tapped.\n                    meteorRedSystem.tryFire(weaponContext);\n                    break;\n                case 'METEOR_VIOLET':\n                    //2.- Dispatch the violet BVRAAM variant with the same keystroke cadence.\n                    meteorVioletSystem.tryFire(weaponContext);\n                    break;\n                case 'LASER':\n                    laserSystem.fire(weaponContext);\n                    break;\n                case 'BOMB':\n                    bombSystem.fire({\n                        ...weaponContext,\n                        sampleGroundHeight: queryHeight\n                    });\n                    break;\n                case 'GATLING':\n                    break;\n                case 'SHIELD':\n                    abilitySystem.triggerShield();\n                    break;\n                case 'HEAL':\n                    abilitySystem.triggerHeal();\n                    break;\n                case 'DASH':\n                    abilitySystem.triggerDash();\n                    break;\n                case 'ULTIMATE':\n                    abilitySystem.triggerUltimate();\n                    break;\n            }\n        }\n        meteorRedSystem.update(weaponContext);\n        meteorVioletSystem.update(weaponContext);\n        meteorRedVisual.update(meteorRedSystem.missiles);\n        meteorVioletVisual.update(meteorVioletSystem.missiles);\n        if (activeSlot === 'GATLING') {\n            //4.- Advance the hitscan gun and respect trigger state when the slot is active.\n            gatling.update(weaponContext, fireHeld);\n        } else {\n            gatling.update(weaponContext, false);\n        }\n        if (activeSlot === 'LASER') {\n            if (fireHeld) {\n                laserSystem.sustain(weaponContext);\n            }\n            if (fireJustReleased) {\n                laserSystem.release();\n            }\n        } else if (laserSystem.state.active) {\n            laserSystem.release();\n        }\n        laserSystem.update(weaponContext);\n        //5.- Stretch and orient the neon beam according to the freshly sampled weapon state.\n        laserVisual.update(laserSystem.state);\n        bombSystem.update({\n            ...weaponContext,\n            sampleGroundHeight: queryHeight\n        });\n        // Cooldowns\n        ammo = gatling.ammo;\n        missiles = Number.POSITIVE_INFINITY;\n        laserCooldownMs = laserSystem.cooldownMs;\n        bombArmed = bombSystem.isArmed;\n        abilitySystem.update(dt);\n        abilityVisuals.update(abilitySystem.state, group);\n        hull = abilitySystem.state.heal.hull;\n        shieldActive = abilitySystem.state.shield.active;\n        dashActive = abilitySystem.state.dash.active;\n        ultimateActive = abilitySystem.state.ultimate.active;\n    }\n    function dispose() {\n        //6.- Tear down transient weapon meshes so hot swaps between vehicles stay safe.\n        meteorRedVisual.dispose();\n        meteorVioletVisual.dispose();\n        laserVisual.dispose();\n        abilityVisuals.dispose(group);\n    }\n    return {\n        update,\n        refreshVehicleClearance: computeLauncherClearance,\n        get speed () {\n            return effectiveSpeed;\n        },\n        get weaponName () {\n            return slotLabels[activeSlot];\n        },\n        get activeSlot () {\n            return activeSlot;\n        },\n        get ammo () {\n            return ammo;\n        },\n        get missiles () {\n            return missiles;\n        },\n        get laserCooldownMs () {\n            return laserCooldownMs;\n        },\n        get bombArmed () {\n            return bombArmed;\n        },\n        get abilityState () {\n            return abilitySystem.state;\n        },\n        get hull () {\n            return hull;\n        },\n        get shieldActive () {\n            return shieldActive;\n        },\n        get dashActive () {\n            return dashActive;\n        },\n        get ultimateActive () {\n            return ultimateActive;\n        },\n        setTargetProvider (provider) {\n            targetProvider = provider;\n        },\n        dispose\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvc2hhcmVkL3NpbXBsZUNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUE4QjtBQUN5QjtBQUNJO0FBQ1Y7QUFDZ0M7QUFDUjtBQUNOO0FBRVk7QUFDUjtBQWFoRSxTQUFTUyxpQkFBaUJDLEtBQWtCLEVBQUVDLEtBQWtCO0lBQ3JFLE1BQU1DLE1BQU0sSUFBSVosMENBQWEsQ0FBQyxHQUFFLEdBQUU7SUFDbEMsTUFBTWMsVUFBVSxJQUFJZCwwQ0FBYSxDQUFDLEdBQUUsR0FBRSxDQUFDO0lBQ3ZDLE1BQU1lLGdCQUErQjtRQUNuQ0MsVUFBVSxJQUFJaEIsMENBQWE7UUFDM0JjLFNBQVMsSUFBSWQsMENBQWEsQ0FBQyxHQUFFLEdBQUUsQ0FBQztRQUNoQ2lCLElBQUk7UUFDSkMsU0FBUyxFQUFFO0lBQ2I7SUFDQSxJQUFJQyxpQkFBdUMsSUFBTSxFQUFFO0lBRW5ELE1BQU1DLFNBQVMsSUFBSXBCLHVDQUFVO0lBQzdCLE1BQU1zQixPQUFPLElBQUl0QiwwQ0FBYTtJQUU5QixTQUFTdUI7UUFDUEgsT0FBT0ksYUFBYSxDQUFDZDtRQUNyQlUsT0FBT0ssT0FBTyxDQUFDSDtRQUNmLE1BQU1JLE9BQU9DLEtBQUtDLEdBQUcsQ0FBQ04sS0FBS08sQ0FBQyxFQUFFUCxLQUFLUSxDQUFDLEVBQUVSLEtBQUtTLENBQUM7UUFDNUMsTUFBTUMsV0FBV0wsS0FBS0MsR0FBRyxDQUFDLEdBQUdGLE9BQU87UUFDcENPLGdCQUFnQkMsb0JBQW9CLENBQUNGO1FBQ3JDRyxtQkFBbUJELG9CQUFvQixDQUFDRjtJQUMxQztJQUVBLE1BQU1JLFVBQVVuQyxxRUFBbUJBLENBQUM7UUFDbENvQyxVQUFVO1FBQ1ZDLFFBQVF0Qyw0Q0FBZSxDQUFDd0MsUUFBUSxDQUFDO1FBQ2pDQyxZQUFZO1FBQ1pDLGNBQWM7UUFDZEMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFVBQVU7UUFDVkMsbUJBQW1CO0lBQ3JCO0lBRUEsTUFBTWIsa0JB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QUFFLE9BQU9BO1FBQVM7UUFDaEMsSUFBSUMsbUJBQWlCO1lBQUUsT0FBT0E7UUFBZ0I7UUFDOUMsSUFBSUMsYUFBVztZQUFFLE9BQU9BO1FBQVU7UUFDbEMsSUFBSThELGdCQUFjO1lBQUUsT0FBT3JFLGNBQWNVLEtBQUs7UUFBQztRQUMvQyxJQUFJRCxRQUFNO1lBQUUsT0FBT0E7UUFBSztRQUN4QixJQUFJRyxnQkFBYztZQUFFLE9BQU9BO1FBQWE7UUFDeEMsSUFBSUcsY0FBWTtZQUFFLE9BQU9BO1FBQVc7UUFDcEMsSUFBSUUsa0JBQWdCO1lBQUUsT0FBT0E7UUFBZTtRQUM1Q3FELG1CQUFrQkMsUUFBOEI7WUFDOUNsSSxpQkFBaUJrSTtRQUNuQjtRQUNBTDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3ZlaGljbGVzL3NoYXJlZC9zaW1wbGVDb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgY3JlYXRlR2F0bGluZ1N5c3RlbSB9IGZyb20gJ0Avd2VhcG9ucy9nYXRsaW5nJ1xuaW1wb3J0IHsgY3JlYXRlTmVvbkxhc2VyU3lzdGVtIH0gZnJvbSAnQC93ZWFwb25zL25lb25MYXNlcidcbmltcG9ydCB7IGNyZWF0ZUJvbWJTeXN0ZW0gfSBmcm9tICdAL3dlYXBvbnMvYm9tYidcbmltcG9ydCB7IGNyZWF0ZUhvbWluZ01pc3NpbGVWaXN1YWwgfSBmcm9tICdAL3dlYXBvbnMvdmlzdWFscy9ob21pbmdNaXNzaWxlVmlzdWFsJ1xuaW1wb3J0IHsgY3JlYXRlTmVvbkxhc2VyVmlzdWFsIH0gZnJvbSAnQC93ZWFwb25zL3Zpc3VhbHMvbmVvbkxhc2VyVmlzdWFsJ1xuaW1wb3J0IHsgY3JlYXRlTWV0ZW9yTWlzc2lsZVN5c3RlbSB9IGZyb20gJ0Avd2VhcG9ucy9tZXRlb3JNaXNzaWxlJ1xuaW1wb3J0IHR5cGUgeyBXZWFwb25Db250ZXh0LCBXZWFwb25UYXJnZXQgfSBmcm9tICdAL3dlYXBvbnMvdHlwZXMnXG5pbXBvcnQgeyBjcmVhdGVTdXBwb3J0QWJpbGl0eVN5c3RlbSB9IGZyb20gJ0AvdmVoaWNsZXMvc2hhcmVkL3N1cHBvcnRBYmlsaXRpZXMnXG5pbXBvcnQgeyBjcmVhdGVBYmlsaXR5VmlzdWFscyB9IGZyb20gJ0AvdmVoaWNsZXMvc2hhcmVkL2FiaWxpdHlWaXN1YWxzJ1xuXG50eXBlIEFiaWxpdHlTbG90ID1cbiAgfCAnTUVURU9SX1JFRCdcbiAgfCAnTUVURU9SX1ZJT0xFVCdcbiAgfCAnTEFTRVInXG4gIHwgJ0JPTUInXG4gIHwgJ0dBVExJTkcnXG4gIHwgJ1NISUVMRCdcbiAgfCAnSEVBTCdcbiAgfCAnREFTSCdcbiAgfCAnVUxUSU1BVEUnXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb250cm9sbGVyKGdyb3VwOiBUSFJFRS5Hcm91cCwgc2NlbmU6IFRIUkVFLlNjZW5lKXtcbiAgY29uc3QgdmVsID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwwLDYwKVxuICBjb25zdCBmb3J3YXJkID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwwLC0xKVxuICBjb25zdCB3ZWFwb25Db250ZXh0OiBXZWFwb25Db250ZXh0ID0ge1xuICAgIHBvc2l0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMygpLFxuICAgIGZvcndhcmQ6IG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwtMSksXG4gICAgZHQ6IDAsXG4gICAgdGFyZ2V0czogW11cbiAgfVxuICBsZXQgdGFyZ2V0UHJvdmlkZXI6ICgpID0+IFdlYXBvblRhcmdldFtdID0gKCkgPT4gW11cblxuICBjb25zdCBib3VuZHMgPSBuZXcgVEhSRUUuQm94MygpXG4gIGNvbnN0IHNpemUgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG5cbiAgZnVuY3Rpb24gY29tcHV0ZUxhdW5jaGVyQ2xlYXJhbmNlKCl7XG4gICAgYm91bmRzLnNldEZyb21PYmplY3QoZ3JvdXApXG4gICAgYm91bmRzLmdldFNpemUoc2l6ZSlcbiAgICBjb25zdCBzcGFuID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnksIHNpemUueilcbiAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGgubWF4KDUsIHNwYW4gKiA1KVxuICAgIG1ldGVvclJlZFN5c3RlbS5zZXRMYXVuY2hlckNsZWFyYW5jZShkaXN0YW5jZSlcbiAgICBtZXRlb3JWaW9sZXRTeXN0ZW0uc2V0TGF1bmNoZXJDbGVhcmFuY2UoZGlzdGFuY2UpXG4gIH1cblxuICBjb25zdCBnYXRsaW5nID0gY3JlYXRlR2F0bGluZ1N5c3RlbSh7XG4gICAgZmlyZVJhdGU6IDI1LFxuICAgIHNwcmVhZDogVEhSRUUuTWF0aFV0aWxzLmRlZ1RvUmFkKDEuNSksXG4gICAgbWF4VHJhY2VyczogMzIsXG4gICAgdHJhY2VyTGlmZU1zOiAyNTAsXG4gICAgYW1tbzogMTIwMCxcbiAgICBoZWF0UGVyU2hvdDogMSxcbiAgICBjb29sUmF0ZTogMTIsXG4gICAgb3ZlcmhlYXRUaHJlc2hvbGQ6IDEyMCxcbiAgfSlcblxuICBjb25zdCBtZXRlb3JSZWRTeXN0ZW0gPSBjcmVhdGVNZXRlb3JNaXNzaWxlU3lzdGVtKHtcbiAgICBtYXhDb25jdXJyZW50OiAyLFxuICAgIGNvb2xkb3duTXM6IDIyMDAsXG4gICAgYW1tbzogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgIGVqZWN0aW9uRHVyYXRpb25NczogMTAwMCxcbiAgICBlamVjdGlvblNwZWVkOiA0MCxcbiAgICBidXJuU3BlZWQ6IDIyMCxcbiAgICBuYXZpZ2F0aW9uQ29uc3RhbnQ6IDMuNSxcbiAgICBkZXRvbmF0aW9uUmFkaXVzOiA2LFxuICAgIHNtb2tlVHJhaWxJbnRlcnZhbE1zOiA3MCxcbiAgICBtYXhMaWZldGltZU1zOiAxNTAwMCxcbiAgICBjbGVhcmFuY2VEaXN0YW5jZTogMzAsXG4gICAgc3dheUFtcGxpdHVkZTogMjQsXG4gICAgc3dheUZyZXF1ZW5jeTogMS4yLFxuICB9KVxuXG4gIGNvbnN0IG1ldGVvclZpb2xldFN5c3RlbSA9IGNyZWF0ZU1ldGVvck1pc3NpbGVTeXN0ZW0oe1xuICAgIG1heENvbmN1cnJlbnQ6IDIsXG4gICAgY29vbGRvd25NczogMjIwMCxcbiAgICBhbW1vOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgZWplY3Rpb25EdXJhdGlvbk1zOiA5MDAsXG4gICAgZWplY3Rpb25TcGVlZDogNDIsXG4gICAgYnVyblNwZWVkOiAyMjUsXG4gICAgbmF2aWdhdGlvbkNvbnN0YW50OiAzLjYsXG4gICAgZGV0b25hdGlvblJhZGl1czogNixcbiAgICBzbW9rZVRyYWlsSW50ZXJ2YWxNczogNzAsXG4gICAgbWF4TGlmZXRpbWVNczogMTUwMDAsXG4gICAgY2xlYXJhbmNlRGlzdGFuY2U6IDMwLFxuICAgIHN3YXlBbXBsaXR1ZGU6IDI2LFxuICAgIHN3YXlGcmVxdWVuY3k6IDEuMjUsXG4gIH0pXG5cbiAgY29uc3QgbWV0ZW9yUmVkVmlzdWFsID0gY3JlYXRlSG9taW5nTWlzc2lsZVZpc3VhbChzY2VuZSwge1xuICAgIGJvZHk6IDB4ZmY0ZDRmLFxuICAgIGVtaXNzaXZlOiAweGZmODI2YSxcbiAgICB0cmFpbDogMHhmZmMyYTEsXG4gIH0pXG5cbiAgY29uc3QgbWV0ZW9yVmlvbGV0VmlzdWFsID0gY3JlYXRlSG9taW5nTWlzc2lsZVZpc3VhbChzY2VuZSwge1xuICAgIGJvZHk6IDB4OGM1NGZmLFxuICAgIGVtaXNzaXZlOiAweGNhOGRmZixcbiAgICB0cmFpbDogMHhkOGI0ZmYsXG4gIH0pXG5cbiAgY29uc3QgbGFzZXJTeXN0ZW0gPSBjcmVhdGVOZW9uTGFzZXJTeXN0ZW0oe1xuICAgIGNvb2xkb3duTXM6IDIwMDAsXG4gICAgZHVyYXRpb25NczogNjAwLFxuICAgIHJhbmdlOiA4MDAsXG4gICAgYXR0ZW51YXRpb246IDAuMDAyLFxuICB9KVxuXG4gIGNvbnN0IGxhc2VyVmlzdWFsID0gY3JlYXRlTmVvbkxhc2VyVmlzdWFsKHNjZW5lLCB7IGNvbG9yOiAweDYxZjZmZiB9KVxuXG4gIGNvbnN0IGJvbWJTeXN0ZW0gPSBjcmVhdGVCb21iU3lzdGVtKHtcbiAgICBtYXhDb25jdXJyZW50OiAyLFxuICAgIGFtbW86IDYsXG4gICAgZnVzZU1zOiAyNTAwLFxuICAgIGNvb2xkb3duTXM6IDE1MDAsXG4gICAgYW9lUmFkaXVzOiA0MCxcbiAgICBjcmF0ZXJSYWRpdXM6IDE4LFxuICAgIGRlYnJpc0NvdW50OiA4LFxuICAgIGdyYXZpdHk6IDMwLFxuICB9KVxuXG4gIGNvbnN0IGFiaWxpdHlTeXN0ZW0gPSBjcmVhdGVTdXBwb3J0QWJpbGl0eVN5c3RlbSgpXG4gIGNvbnN0IGFiaWxpdHlWaXN1YWxzID0gY3JlYXRlQWJpbGl0eVZpc3VhbHMoZ3JvdXApXG5cbiAgbGV0IGJhc2VTcGVlZCA9IDYwXG4gIGxldCBlZmZlY3RpdmVTcGVlZCA9IGJhc2VTcGVlZFxuICBsZXQgYWN0aXZlU2xvdDogQWJpbGl0eVNsb3QgPSAnTUVURU9SX1JFRCdcbiAgbGV0IGFtbW8gPSBnYXRsaW5nLmFtbW9cbiAgbGV0IG1pc3NpbGVzID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXG4gIGxldCBsYXNlckNvb2xkb3duTXMgPSBsYXNlclN5c3RlbS5jb29sZG93bk1zXG4gIGxldCBib21iQXJtZWQgPSBib21iU3lzdGVtLmlzQXJtZWRcbiAgbGV0IGh1bGwgPSBhYmlsaXR5U3lzdGVtLnN0YXRlLmhlYWwuaHVsbFxuICBsZXQgc2hpZWxkQWN0aXZlID0gYWJpbGl0eVN5c3RlbS5zdGF0ZS5zaGllbGQuYWN0aXZlXG4gIGxldCBkYXNoQWN0aXZlID0gYWJpbGl0eVN5c3RlbS5zdGF0ZS5kYXNoLmFjdGl2ZVxuICBsZXQgdWx0aW1hdGVBY3RpdmUgPSBhYmlsaXR5U3lzdGVtLnN0YXRlLnVsdGltYXRlLmFjdGl2ZVxuICBsZXQgZmlyZUhlbGQgPSBmYWxzZVxuICBsZXQgZmlyZUp1c3RQcmVzc2VkID0gZmFsc2VcbiAgbGV0IGZpcmVKdXN0UmVsZWFzZWQgPSBmYWxzZVxuICBjb25zdCBzbG90TGFiZWxzOiBSZWNvcmQ8QWJpbGl0eVNsb3QsIHN0cmluZz4gPSB7XG4gICAgTUVURU9SX1JFRDogJ01FVEVPUiBCVlJBQU0gUicsXG4gICAgTUVURU9SX1ZJT0xFVDogJ01FVEVPUiBCVlJBQU0gVicsXG4gICAgTEFTRVI6ICdORU9OIExBU0VSJyxcbiAgICBCT01COiAnR1JBViBCT01CJyxcbiAgICBHQVRMSU5HOiAnR0FUTElORycsXG4gICAgU0hJRUxEOiAnU0hJRUxEJyxcbiAgICBIRUFMOiAnSEVBTCcsXG4gICAgREFTSDogJ0RBU0gnLFxuICAgIFVMVElNQVRFOiAnVUxUSU1BVEUnLFxuICB9XG5cbiAgY29tcHV0ZUxhdW5jaGVyQ2xlYXJhbmNlKClcblxuICBmdW5jdGlvbiB1cGRhdGUoZHQ6bnVtYmVyLCBpbnB1dDphbnksIHF1ZXJ5SGVpZ2h0Oih4Om51bWJlcix6Om51bWJlcik9Pm51bWJlcil7XG4gICAgLy8gTW91c2Ugc3RlZXJpbmc6IGFpbSByZXRpY2xlIGluIE5EQyBjb250cm9scyB5YXcvcGl0Y2hcbiAgICBjb25zdCB0YXJnZXRZYXcgPSBpbnB1dC5tb3VzZS54ICogMC42XG4gICAgY29uc3QgdGFyZ2V0UGl0Y2ggPSBpbnB1dC5tb3VzZS55ICogMC40XG4gICAgZ3JvdXAucm90YXRpb24ueSArPSAodGFyZ2V0WWF3IC0gZ3JvdXAucm90YXRpb24ueSkgKiAoMSAtIE1hdGguZXhwKC02KmR0KSlcbiAgICBncm91cC5yb3RhdGlvbi54ICs9ICh0YXJnZXRQaXRjaCAtIGdyb3VwLnJvdGF0aW9uLngpICogKDEgLSBNYXRoLmV4cCgtNipkdCkpXG5cbiAgICAvLyBLZXlzXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0tleVcnKSkgYmFzZVNwZWVkICs9IDQwKmR0XG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0tleVMnKSkgYmFzZVNwZWVkIC09IDQwKmR0XG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ1NoaWZ0TGVmdCcpKSBiYXNlU3BlZWQgKz0gODAqZHRcbiAgICBpZiAoaW5wdXQucHJlc3NlZCgnS2V5UScpKSBncm91cC5yb3RhdGlvbi56ICs9IDEuMipkdFxuICAgIGlmIChpbnB1dC5wcmVzc2VkKCdLZXlFJykpIGdyb3VwLnJvdGF0aW9uLnogLT0gMS4yKmR0XG4gICAgYmFzZVNwZWVkID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDE2MCwgYmFzZVNwZWVkKSlcblxuICAgIC8vIEludGVncmF0ZVxuICAgIGZvcndhcmQuc2V0KDAsMCwtMSkuYXBwbHlFdWxlcihncm91cC5yb3RhdGlvbilcbiAgICBjb25zdCBkYXNoQm9udXMgPSBhYmlsaXR5U3lzdGVtLnN0YXRlLmRhc2guYWN0aXZlID8gYWJpbGl0eVN5c3RlbS5zdGF0ZS5kYXNoLnNwZWVkQm9udXMgOiAwXG4gICAgY29uc3QgdWx0aW1hdGVCb251cyA9IGFiaWxpdHlTeXN0ZW0uc3RhdGUudWx0aW1hdGUuYWN0aXZlID8gYWJpbGl0eVN5c3RlbS5zdGF0ZS5kYXNoLnNwZWVkQm9udXMgKiAwLjUgOiAwXG4gICAgZWZmZWN0aXZlU3BlZWQgPSBiYXNlU3BlZWQgKyBkYXNoQm9udXMgKyB1bHRpbWF0ZUJvbnVzXG4gICAgdmVsLmNvcHkoZm9yd2FyZCkubXVsdGlwbHlTY2FsYXIoZWZmZWN0aXZlU3BlZWQpXG4gICAgZ3JvdXAucG9zaXRpb24uYWRkU2NhbGVkVmVjdG9yKHZlbCwgZHQpXG4gICAgOyhncm91cCBhcyBhbnkpLnVzZXJEYXRhLnNwZWVkID0gZWZmZWN0aXZlU3BlZWRcblxuICAgIC8vIFRlcnJhaW4gZmxvb3IgY29uc3RyYWludFxuICAgIGNvbnN0IGZsb29yID0gcXVlcnlIZWlnaHQoZ3JvdXAucG9zaXRpb24ueCwgZ3JvdXAucG9zaXRpb24ueikgKyA2XG4gICAgaWYgKGdyb3VwLnBvc2l0aW9uLnkgPCBmbG9vcikge1xuICAgICAgZ3JvdXAucG9zaXRpb24ueSA9IGZsb29yXG4gICAgICB2ZWwueSA9IE1hdGguYWJzKHZlbC55KSowLjJcbiAgICB9XG5cbiAgICAvLyBDZWlsaW5nIGNsYW1wXG4gICAgY29uc3QgY2VpbGluZyA9IDIwMDBcbiAgICBpZiAoZ3JvdXAucG9zaXRpb24ueSA+IGNlaWxpbmcpIGdyb3VwLnBvc2l0aW9uLnkgPSBjZWlsaW5nXG5cbiAgICBjb25zdCBwcmV2aW91c2x5SGVsZCA9IGZpcmVIZWxkXG4gICAgZmlyZUhlbGQgPSBCb29sZWFuKGlucHV0LnByZXNzZWQoJ1NwYWNlJykpXG4gICAgZmlyZUp1c3RQcmVzc2VkID0gZmlyZUhlbGQgJiYgIXByZXZpb3VzbHlIZWxkXG4gICAgZmlyZUp1c3RSZWxlYXNlZCA9ICFmaXJlSGVsZCAmJiBwcmV2aW91c2x5SGVsZFxuXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0MScpKSBhY3RpdmVTbG90ID0gJ01FVEVPUl9SRUQnXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0MicpKSBhY3RpdmVTbG90ID0gJ01FVEVPUl9WSU9MRVQnXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0MycpKSBhY3RpdmVTbG90ID0gJ0xBU0VSJ1xuICAgIGlmIChpbnB1dC5wcmVzc2VkKCdEaWdpdDQnKSkgYWN0aXZlU2xvdCA9ICdCT01CJ1xuICAgIGlmIChpbnB1dC5wcmVzc2VkKCdEaWdpdDUnKSkgYWN0aXZlU2xvdCA9ICdHQVRMSU5HJ1xuICAgIGlmIChpbnB1dC5wcmVzc2VkKCdEaWdpdDYnKSkgYWN0aXZlU2xvdCA9ICdTSElFTEQnXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0NycpKSBhY3RpdmVTbG90ID0gJ0hFQUwnXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0OCcpKSBhY3RpdmVTbG90ID0gJ0RBU0gnXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0OScpKSBhY3RpdmVTbG90ID0gJ1VMVElNQVRFJ1xuXG4gICAgd2VhcG9uQ29udGV4dC5wb3NpdGlvbi5jb3B5KGdyb3VwLnBvc2l0aW9uKVxuICAgIHdlYXBvbkNvbnRleHQuZm9yd2FyZC5jb3B5KGZvcndhcmQpXG4gICAgd2VhcG9uQ29udGV4dC5kdCA9IGR0XG4gICAgd2VhcG9uQ29udGV4dC50YXJnZXRzID0gdGFyZ2V0UHJvdmlkZXIoKVxuXG4gICAgaWYgKGZpcmVKdXN0UHJlc3NlZCl7XG4gICAgICBzd2l0Y2ggKGFjdGl2ZVNsb3Qpe1xuICAgICAgICBjYXNlICdNRVRFT1JfUkVEJzpcbiAgICAgICAgICAvLzEuLSBMYXVuY2ggYSBjcmltc29uIEJWUkFBTSB3aGVuIHRoZSByZWQgc2xvdCBpcyB0YXBwZWQuXG4gICAgICAgICAgbWV0ZW9yUmVkU3lzdGVtLnRyeUZpcmUod2VhcG9uQ29udGV4dClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdNRVRFT1JfVklPTEVUJzpcbiAgICAgICAgICAvLzIuLSBEaXNwYXRjaCB0aGUgdmlvbGV0IEJWUkFBTSB2YXJpYW50IHdpdGggdGhlIHNhbWUga2V5c3Ryb2tlIGNhZGVuY2UuXG4gICAgICAgICAgbWV0ZW9yVmlvbGV0U3lzdGVtLnRyeUZpcmUod2VhcG9uQ29udGV4dClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdMQVNFUic6XG4gICAgICAgICAgbGFzZXJTeXN0ZW0uZmlyZSh3ZWFwb25Db250ZXh0KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0JPTUInOlxuICAgICAgICAgIGJvbWJTeXN0ZW0uZmlyZSh7IC4uLndlYXBvbkNvbnRleHQsIHNhbXBsZUdyb3VuZEhlaWdodDogcXVlcnlIZWlnaHQgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdHQVRMSU5HJzpcbiAgICAgICAgICAvLzMuLSBJbW1lZGlhdGUgZWZmZWN0IGhhbmRsZWQgdGhyb3VnaCB0aGUgY29udGludW91cyBmaXJlIGJyYW5jaC5cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdTSElFTEQnOlxuICAgICAgICAgIGFiaWxpdHlTeXN0ZW0udHJpZ2dlclNoaWVsZCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnSEVBTCc6XG4gICAgICAgICAgYWJpbGl0eVN5c3RlbS50cmlnZ2VySGVhbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnREFTSCc6XG4gICAgICAgICAgYWJpbGl0eVN5c3RlbS50cmlnZ2VyRGFzaCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnVUxUSU1BVEUnOlxuICAgICAgICAgIGFiaWxpdHlTeXN0ZW0udHJpZ2dlclVsdGltYXRlKClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIG1ldGVvclJlZFN5c3RlbS51cGRhdGUod2VhcG9uQ29udGV4dClcbiAgICBtZXRlb3JWaW9sZXRTeXN0ZW0udXBkYXRlKHdlYXBvbkNvbnRleHQpXG4gICAgbWV0ZW9yUmVkVmlzdWFsLnVwZGF0ZShtZXRlb3JSZWRTeXN0ZW0ubWlzc2lsZXMpXG4gICAgbWV0ZW9yVmlvbGV0VmlzdWFsLnVwZGF0ZShtZXRlb3JWaW9sZXRTeXN0ZW0ubWlzc2lsZXMpXG5cbiAgICBpZiAoYWN0aXZlU2xvdCA9PT0gJ0dBVExJTkcnKXtcbiAgICAgIC8vNC4tIEFkdmFuY2UgdGhlIGhpdHNjYW4gZ3VuIGFuZCByZXNwZWN0IHRyaWdnZXIgc3RhdGUgd2hlbiB0aGUgc2xvdCBpcyBhY3RpdmUuXG4gICAgICBnYXRsaW5nLnVwZGF0ZSh3ZWFwb25Db250ZXh0LCBmaXJlSGVsZClcbiAgICB9IGVsc2Uge1xuICAgICAgZ2F0bGluZy51cGRhdGUod2VhcG9uQ29udGV4dCwgZmFsc2UpXG4gICAgfVxuXG4gICAgaWYgKGFjdGl2ZVNsb3QgPT09ICdMQVNFUicpe1xuICAgICAgaWYgKGZpcmVIZWxkKXtcbiAgICAgICAgbGFzZXJTeXN0ZW0uc3VzdGFpbih3ZWFwb25Db250ZXh0KVxuICAgICAgfVxuICAgICAgaWYgKGZpcmVKdXN0UmVsZWFzZWQpe1xuICAgICAgICBsYXNlclN5c3RlbS5yZWxlYXNlKClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxhc2VyU3lzdGVtLnN0YXRlLmFjdGl2ZSl7XG4gICAgICBsYXNlclN5c3RlbS5yZWxlYXNlKClcbiAgICB9XG4gICAgbGFzZXJTeXN0ZW0udXBkYXRlKHdlYXBvbkNvbnRleHQpXG4gICAgLy81Li0gU3RyZXRjaCBhbmQgb3JpZW50IHRoZSBuZW9uIGJlYW0gYWNjb3JkaW5nIHRvIHRoZSBmcmVzaGx5IHNhbXBsZWQgd2VhcG9uIHN0YXRlLlxuICAgIGxhc2VyVmlzdWFsLnVwZGF0ZShsYXNlclN5c3RlbS5zdGF0ZSlcblxuICAgIGJvbWJTeXN0ZW0udXBkYXRlKHsgLi4ud2VhcG9uQ29udGV4dCwgc2FtcGxlR3JvdW5kSGVpZ2h0OiBxdWVyeUhlaWdodCB9KVxuXG4gICAgLy8gQ29vbGRvd25zXG4gICAgYW1tbyA9IGdhdGxpbmcuYW1tb1xuICAgIG1pc3NpbGVzID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXG4gICAgbGFzZXJDb29sZG93bk1zID0gbGFzZXJTeXN0ZW0uY29vbGRvd25Nc1xuICAgIGJvbWJBcm1lZCA9IGJvbWJTeXN0ZW0uaXNBcm1lZFxuICAgIGFiaWxpdHlTeXN0ZW0udXBkYXRlKGR0KVxuICAgIGFiaWxpdHlWaXN1YWxzLnVwZGF0ZShhYmlsaXR5U3lzdGVtLnN0YXRlLCBncm91cClcbiAgICBodWxsID0gYWJpbGl0eVN5c3RlbS5zdGF0ZS5oZWFsLmh1bGxcbiAgICBzaGllbGRBY3RpdmUgPSBhYmlsaXR5U3lzdGVtLnN0YXRlLnNoaWVsZC5hY3RpdmVcbiAgICBkYXNoQWN0aXZlID0gYWJpbGl0eVN5c3RlbS5zdGF0ZS5kYXNoLmFjdGl2ZVxuICAgIHVsdGltYXRlQWN0aXZlID0gYWJpbGl0eVN5c3RlbS5zdGF0ZS51bHRpbWF0ZS5hY3RpdmVcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3Bvc2UoKXtcbiAgICAvLzYuLSBUZWFyIGRvd24gdHJhbnNpZW50IHdlYXBvbiBtZXNoZXMgc28gaG90IHN3YXBzIGJldHdlZW4gdmVoaWNsZXMgc3RheSBzYWZlLlxuICAgIG1ldGVvclJlZFZpc3VhbC5kaXNwb3NlKClcbiAgICBtZXRlb3JWaW9sZXRWaXN1YWwuZGlzcG9zZSgpXG4gICAgbGFzZXJWaXN1YWwuZGlzcG9zZSgpXG4gICAgYWJpbGl0eVZpc3VhbHMuZGlzcG9zZShncm91cClcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdXBkYXRlLFxuICAgIHJlZnJlc2hWZWhpY2xlQ2xlYXJhbmNlOiBjb21wdXRlTGF1bmNoZXJDbGVhcmFuY2UsXG4gICAgZ2V0IHNwZWVkKCl7IHJldHVybiBlZmZlY3RpdmVTcGVlZCB9LFxuICAgIGdldCB3ZWFwb25OYW1lKCl7IHJldHVybiBzbG90TGFiZWxzW2FjdGl2ZVNsb3RdIH0sXG4gICAgZ2V0IGFjdGl2ZVNsb3QoKXsgcmV0dXJuIGFjdGl2ZVNsb3QgfSxcbiAgICBnZXQgYW1tbygpeyByZXR1cm4gYW1tbyB9LFxuICAgIGdldCBtaXNzaWxlcygpeyByZXR1cm4gbWlzc2lsZXMgfSxcbiAgICBnZXQgbGFzZXJDb29sZG93bk1zKCl7IHJldHVybiBsYXNlckNvb2xkb3duTXMgfSxcbiAgICBnZXQgYm9tYkFybWVkKCl7IHJldHVybiBib21iQXJtZWQgfSxcbiAgICBnZXQgYWJpbGl0eVN0YXRlKCl7IHJldHVybiBhYmlsaXR5U3lzdGVtLnN0YXRlIH0sXG4gICAgZ2V0IGh1bGwoKXsgcmV0dXJuIGh1bGwgfSxcbiAgICBnZXQgc2hpZWxkQWN0aXZlKCl7IHJldHVybiBzaGllbGRBY3RpdmUgfSxcbiAgICBnZXQgZGFzaEFjdGl2ZSgpeyByZXR1cm4gZGFzaEFjdGl2ZSB9LFxuICAgIGdldCB1bHRpbWF0ZUFjdGl2ZSgpeyByZXR1cm4gdWx0aW1hdGVBY3RpdmUgfSxcbiAgICBzZXRUYXJnZXRQcm92aWRlcihwcm92aWRlcjogKCkgPT4gV2VhcG9uVGFyZ2V0W10pe1xuICAgICAgdGFyZ2V0UHJvdmlkZXIgPSBwcm92aWRlclxuICAgIH0sXG4gICAgZGlzcG9zZSxcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlRIUkVFIiwiY3JlYXRlR2F0bGluZ1N5c3RlbSIsImNyZWF0ZU5lb25MYXNlclN5c3RlbSIsImNyZWF0ZUJvbWJTeXN0ZW0iLCJjcmVhdGVIb21pbmdNaXNzaWxlVmlzdWFsIiwiY3JlYXRlTmVvbkxhc2VyVmlzdWFsIiwiY3JlYXRlTWV0ZW9yTWlzc2lsZVN5c3RlbSIsImNyZWF0ZVN1cHBvcnRBYmlsaXR5U3lzdGVtIiwiY3JlYXRlQWJpbGl0eVZpc3VhbHMiLCJjcmVhdGVDb250cm9sbGVyIiwiZ3JvdXAiLCJzY2VuZSIsInZlbCIsIlZlY3RvcjMiLCJmb3J3YXJkIiwid2VhcG9uQ29udGV4dCIsInBvc2l0aW9uIiwiZHQiLCJ0YXJnZXRzIiwidGFyZ2V0UHJvdmlkZXIiLCJib3VuZHMiLCJCb3gzIiwic2l6ZSIsImNvbXB1dGVMYXVuY2hlckNsZWFyYW5jZSIsInNldEZyb21PYmplY3QiLCJnZXRTaXplIiwic3BhbiIsIk1hdGgiLCJtYXgiLCJ4IiwieSIsInoiLCJkaXN0YW5jZSIsIm1ldGVvclJlZFN5c3RlbSIsInNldExhdW5jaGVyQ2xlYXJhbmNlIiwibWV0ZW9yVmlvbGV0U3lzdGVtIiwiZ2F0bGluZyIsImZpcmVSYXRlIiwic3ByZWFkIiwiTWF0aFV0aWxzIiwiZGVnVG9SYWQiLCJtYXhUcmFjZXJzIiwidHJhY2VyTGlmZU1zIiwiYW1tbyIsImhlYXRQZXJTaG90IiwiY29vbFJhdGUiLCJvdmVyaGVhdFRocmVzaG9sZCIsIm1heENvbmN1cnJlbnQiLCJjb29sZG93bk1zIiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJlamVjdGlvbkR1cmF0aW9uTXMiLCJlamVjdGlvblNwZWVkIiwiYnVyblNwZWVkIiwibmF2aWdhdGlvbkNvbnN0YW50IiwiZGV0b25hdGlvblJhZGl1cyIsInNtb2tlVHJhaWxJbnRlcnZhbE1zIiwibWF4TGlmZXRpbWVNcyIsImNsZWFyYW5jZURpc3RhbmNlIiwic3dheUFtcGxpdHVkZSIsInN3YXlGcmVxdWVuY3kiLCJtZXRlb3JSZWRWaXN1YWwiLCJib2R5IiwiZW1pc3NpdmUiLCJ0cmFpbCIsIm1ldGVvclZpb2xldFZpc3VhbCIsImxhc2VyU3lzdGVtIiwiZHVyYXRpb25NcyIsInJhbmdlIiwiYXR0ZW51YXRpb24iLCJsYXNlclZpc3VhbCIsImNvbG9yIiwiYm9tYlN5c3RlbSIsImZ1c2VNcyIsImFvZVJhZGl1cyIsImNyYXRlclJhZGl1cyIsImRlYnJpc0NvdW50IiwiZ3Jhdml0eSIsImFiaWxpdHlTeXN0ZW0iLCJhYmlsaXR5VmlzdWFscyIsImJhc2VTcGVlZCIsImVmZmVjdGl2ZVNwZWVkIiwiYWN0aXZlU2xvdCIsIm1pc3NpbGVzIiwibGFzZXJDb29sZG93bk1zIiwiYm9tYkFybWVkIiwiaXNBcm1lZCIsImh1bGwiLCJzdGF0ZSIsImhlYWwiLCJzaGllbGRBY3RpdmUiLCJzaGllbGQiLCJhY3RpdmUiLCJkYXNoQWN0aXZlIiwiZGFzaCIsInVsdGltYXRlQWN0aXZlIiwidWx0aW1hdGUiLCJmaXJlSGVsZCIsImZpcmVKdXN0UHJlc3NlZCIsImZpcmVKdXN0UmVsZWFzZWQiLCJzbG90TGFiZWxzIiwiTUVURU9SX1JFRCIsIk1FVEVPUl9WSU9MRVQiLCJMQVNFUiIsIkJPTUIiLCJHQVRMSU5HIiwiU0hJRUxEIiwiSEVBTCIsIkRBU0giLCJVTFRJTUFURSIsInVwZGF0ZSIsImlucHV0IiwicXVlcnlIZWlnaHQiLCJ0YXJnZXRZYXciLCJtb3VzZSIsInRhcmdldFBpdGNoIiwicm90YXRpb24iLCJleHAiLCJwcmVzc2VkIiwibWluIiwic2V0IiwiYXBwbHlFdWxlciIsImRhc2hCb251cyIsInNwZWVkQm9udXMiLCJ1bHRpbWF0ZUJvbnVzIiwiY29weSIsIm11bHRpcGx5U2NhbGFyIiwiYWRkU2NhbGVkVmVjdG9yIiwidXNlckRhdGEiLCJzcGVlZCIsImZsb29yIiwiYWJzIiwiY2VpbGluZyIsInByZXZpb3VzbHlIZWxkIiwiQm9vbGVhbiIsInRyeUZpcmUiLCJmaXJlIiwic2FtcGxlR3JvdW5kSGVpZ2h0IiwidHJpZ2dlclNoaWVsZCIsInRyaWdnZXJIZWFsIiwidHJpZ2dlckRhc2giLCJ0cmlnZ2VyVWx0aW1hdGUiLCJzdXN0YWluIiwicmVsZWFzZSIsImRpc3Bvc2UiLCJyZWZyZXNoVmVoaWNsZUNsZWFyYW5jZSIsIndlYXBvbk5hbWUiLCJhYmlsaXR5U3RhdGUiLCJzZXRUYXJnZXRQcm92aWRlciIsInByb3ZpZGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/shared/simpleController.ts\n");

/***/ }),

/***/ "(ssr)/./src/vehicles/shared/supportAbilities.ts":
/*!*************************************************!*\
  !*** ./src/vehicles/shared/supportAbilities.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupportAbilitySystem: () => (/* binding */ createSupportAbilitySystem)\n/* harmony export */ });\nconst DEFAULT_OPTIONS = {\n    shieldDurationMs: 5000,\n    shieldCooldownMs: 8000,\n    healAmount: 25,\n    healCooldownMs: 6000,\n    maxHull: 100,\n    dashDurationMs: 1500,\n    dashCooldownMs: 5000,\n    dashSpeedBonus: 60,\n    ultimateDurationMs: 4000,\n    ultimateCooldownMs: 16000,\n    ultimateShieldBonusMs: 4000,\n    ultimateDashBonusMs: 2000\n};\nfunction createSupportAbilitySystem(overrides = {}) {\n    const options = {\n        ...DEFAULT_OPTIONS,\n        ...overrides\n    };\n    const state = {\n        shield: {\n            active: false,\n            remainingMs: 0,\n            cooldownRemainingMs: 0\n        },\n        heal: {\n            cooldownRemainingMs: 0,\n            hull: options.maxHull,\n            maxHull: options.maxHull\n        },\n        dash: {\n            active: false,\n            remainingMs: 0,\n            cooldownRemainingMs: 0,\n            speedBonus: options.dashSpeedBonus\n        },\n        ultimate: {\n            active: false,\n            remainingMs: 0,\n            cooldownRemainingMs: 0\n        }\n    };\n    function update(dt) {\n        const deltaMs = dt * 1000;\n        //1.- Decay active timers so effects expire naturally without extra bookkeeping.\n        if (state.shield.active) {\n            state.shield.remainingMs = Math.max(0, state.shield.remainingMs - deltaMs);\n            if (state.shield.remainingMs === 0) {\n                state.shield.active = false;\n            }\n        }\n        if (state.dash.active) {\n            state.dash.remainingMs = Math.max(0, state.dash.remainingMs - deltaMs);\n            if (state.dash.remainingMs === 0) {\n                state.dash.active = false;\n            }\n        }\n        if (state.ultimate.active) {\n            state.ultimate.remainingMs = Math.max(0, state.ultimate.remainingMs - deltaMs);\n            if (state.ultimate.remainingMs === 0) {\n                state.ultimate.active = false;\n            }\n        }\n        //2.- Reduce cooldown trackers so triggers can reactivate once the timers elapse.\n        state.shield.cooldownRemainingMs = Math.max(0, state.shield.cooldownRemainingMs - deltaMs);\n        state.heal.cooldownRemainingMs = Math.max(0, state.heal.cooldownRemainingMs - deltaMs);\n        state.dash.cooldownRemainingMs = Math.max(0, state.dash.cooldownRemainingMs - deltaMs);\n        state.ultimate.cooldownRemainingMs = Math.max(0, state.ultimate.cooldownRemainingMs - deltaMs);\n        //3.- Passively regenerate a trickle of hull while idle so healing has a baseline effect.\n        if (!state.ultimate.active) {\n            const regen = deltaMs * 0.0025;\n            state.heal.hull = Math.min(state.heal.maxHull, state.heal.hull + regen);\n        }\n    }\n    function triggerShield() {\n        //4.- Allow activation only when the recharge cycle completed.\n        if (state.shield.cooldownRemainingMs > 0) return false;\n        state.shield.active = true;\n        state.shield.remainingMs = options.shieldDurationMs;\n        state.shield.cooldownRemainingMs = options.shieldCooldownMs;\n        return true;\n    }\n    function triggerHeal() {\n        //5.- Raise hull integrity while enforcing a cooldown gate to prevent spam.\n        if (state.heal.cooldownRemainingMs > 0) return false;\n        state.heal.cooldownRemainingMs = options.healCooldownMs;\n        state.heal.hull = Math.min(state.heal.maxHull, state.heal.hull + options.healAmount);\n        return true;\n    }\n    function triggerDash() {\n        //6.- Start the burst if the thrusters have cooled down enough since the last use.\n        if (state.dash.cooldownRemainingMs > 0) return false;\n        state.dash.active = true;\n        state.dash.remainingMs = options.dashDurationMs;\n        state.dash.cooldownRemainingMs = options.dashCooldownMs;\n        return true;\n    }\n    function triggerUltimate() {\n        //7.- Fire the signature move which layers extra shield and dash uptime.\n        if (state.ultimate.cooldownRemainingMs > 0) return false;\n        state.ultimate.active = true;\n        state.ultimate.remainingMs = options.ultimateDurationMs;\n        state.ultimate.cooldownRemainingMs = options.ultimateCooldownMs;\n        state.shield.active = true;\n        state.shield.remainingMs = Math.max(state.shield.remainingMs, options.ultimateShieldBonusMs);\n        state.dash.active = true;\n        state.dash.remainingMs = Math.max(state.dash.remainingMs, options.ultimateDashBonusMs);\n        state.dash.cooldownRemainingMs = Math.max(state.dash.cooldownRemainingMs, options.dashCooldownMs);\n        return true;\n    }\n    return {\n        state,\n        update,\n        triggerShield,\n        triggerHeal,\n        triggerDash,\n        triggerUltimate\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdmVoaWNsZXMvc2hhcmVkL3N1cHBvcnRBYmlsaXRpZXMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQXVDQSxNQUFNQSxrQkFBeUM7SUFDN0NDLGtCQUFrQjtJQUNsQkMsa0JBQWtCO0lBQ2xCQyxZQUFZO0lBQ1pDLGdCQUFnQjtJQUNoQkMsU0FBUztJQUNUQyxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQkMsZ0JBQWdCO0lBQ2hCQyxvQkFBb0I7SUFDcEJDLG9CQUFvQjtJQUNwQkMsdUJBQXVCO0lBQ3ZCQyxxQkFBcUI7QUFDdkI7QUFXTyxTQUFTQywyQkFBMkJDLFlBQTRDLENBQUMsQ0FBQztJQUN2RixNQUFNQyxVQUFVO1FBQUUsR0FBR2YsZUFBZTtRQUFFLEdBQUdjLFNBQVM7SUFBQztJQUVuRCxNQUFNRSxRQUE2QjtRQUNqQ0MsUUFBUTtZQUFFQyxRQUFRO1lBQU9DLGFBQWE7WUFBR0MscUJBQXFCO1FBQUU7UUFDaEVDLE1BQU07WUFBRUQscUJBQXFCO1lBQUdFLE1BQU1QLFFBQVFWLE9BQU87WUFBRUEsU0FBU1UsUUFBUVYsT0FBTztRQUFDO1FBQ2hGa0IsTUFBTTtZQUFFTCxRQUFRO1lBQU9DLGFBQWE7WUFBR0MscUJBQXFCO1lBQUdJLFlBQVlULFFBQVFQLGNBQWM7UUFBQztRQUNsR2lCLFVBQVU7WUFBRVAsUUFBUTtZQUFPQyxhQUFhO1lBQUdDLHFCQUFxQjtRQUFFO0lBQ3BFO0lBRUEsU0FBU00sT0FBT0MsRUFBVTtRQUN4QixNQUFNQyxVQUFVRCxLQUFLO1FBRXJCLGdGQUFnRjtRQUNoRixJQUFJWCxNQUFNQyxNQUFNLENBQUNDLE1BQU0sRUFBRTtZQUN2QkYsTUFBTUMsTUFBTSxDQUFDRSxXQUFXLEdBQUdVLEtBQUtDLEdBQUcsQ0FBQyxHQUFHZCxNQUFNQyxNQUFNLENBQUNFLFdBQVcsR0FBR1M7WUFDbEUsSUFBSVosTUFBTUMsTUFBTSxDQUFDRSxXQUFXLEtBQUssR0FBRztnQkFDbENILE1BQU1DLE1BQU0sQ0FBQ0MsTUFBTSxH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TVMsUUFBUSxDQUFDUCxNQUFNLEdBQUc7UUFDeEJGLE1BQU1TLFFBQVEsQ0FBQ04sV0FBVyxHQUFHSixRQUFRTixrQkFBa0I7UUFDdkRPLE1BQU1TLFFBQVEsQ0FBQ0wsbUJBQW1CLEdBQUdMLFFBQVFMLGtCQUFrQjtRQUMvRE0sTUFBTUMsTUFBTSxDQUFDQyxNQUFNLEdBQUc7UUFDdEJGLE1BQU1DLE1BQU0sQ0FBQ0UsV0FBVyxHQUFHVSxLQUFLQyxHQUFHLENBQUNkLE1BQU1DLE1BQU0sQ0FBQ0UsV0FBVyxFQUFFSixRQUFRSixxQkFBcUI7UUFDM0ZLLE1BQU1PLElBQUksQ0FBQ0wsTUFBTSxHQUFHO1FBQ3BCRixNQUFNTyxJQUFJLENBQUNKLFdBQVcsR0FBR1UsS0FBS0MsR0FBRyxDQUFDZCxNQUFNTyxJQUFJLENBQUNKLFdBQVcsRUFBRUosUUFBUUgsbUJBQW1CO1FBQ3JGSSxNQUFNTyxJQUFJLENBQUNILG1CQUFtQixHQUFHUyxLQUFLQyxHQUFHLENBQUNkLE1BQU1PLElBQUksQ0FBQ0gsbUJBQW1CLEVBQUVMLFFBQVFSLGNBQWM7UUFDaEcsT0FBTztJQUNUO0lBRUEsT0FBTztRQUNMUztRQUNBVTtRQUNBTztRQUNBQztRQUNBQztRQUNBQztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3ZlaGljbGVzL3NoYXJlZC9zdXBwb3J0QWJpbGl0aWVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIFN1cHBvcnRBYmlsaXR5T3B0aW9ucyA9IHtcbiAgc2hpZWxkRHVyYXRpb25NczogbnVtYmVyXG4gIHNoaWVsZENvb2xkb3duTXM6IG51bWJlclxuICBoZWFsQW1vdW50OiBudW1iZXJcbiAgaGVhbENvb2xkb3duTXM6IG51bWJlclxuICBtYXhIdWxsOiBudW1iZXJcbiAgZGFzaER1cmF0aW9uTXM6IG51bWJlclxuICBkYXNoQ29vbGRvd25NczogbnVtYmVyXG4gIGRhc2hTcGVlZEJvbnVzOiBudW1iZXJcbiAgdWx0aW1hdGVEdXJhdGlvbk1zOiBudW1iZXJcbiAgdWx0aW1hdGVDb29sZG93bk1zOiBudW1iZXJcbiAgdWx0aW1hdGVTaGllbGRCb251c01zOiBudW1iZXJcbiAgdWx0aW1hdGVEYXNoQm9udXNNczogbnVtYmVyXG59XG5cbmV4cG9ydCB0eXBlIFN1cHBvcnRBYmlsaXR5U3RhdGUgPSB7XG4gIHNoaWVsZDoge1xuICAgIGFjdGl2ZTogYm9vbGVhblxuICAgIHJlbWFpbmluZ01zOiBudW1iZXJcbiAgICBjb29sZG93blJlbWFpbmluZ01zOiBudW1iZXJcbiAgfVxuICBoZWFsOiB7XG4gICAgY29vbGRvd25SZW1haW5pbmdNczogbnVtYmVyXG4gICAgaHVsbDogbnVtYmVyXG4gICAgbWF4SHVsbDogbnVtYmVyXG4gIH1cbiAgZGFzaDoge1xuICAgIGFjdGl2ZTogYm9vbGVhblxuICAgIHJlbWFpbmluZ01zOiBudW1iZXJcbiAgICBjb29sZG93blJlbWFpbmluZ01zOiBudW1iZXJcbiAgICBzcGVlZEJvbnVzOiBudW1iZXJcbiAgfVxuICB1bHRpbWF0ZToge1xuICAgIGFjdGl2ZTogYm9vbGVhblxuICAgIHJlbWFpbmluZ01zOiBudW1iZXJcbiAgICBjb29sZG93blJlbWFpbmluZ01zOiBudW1iZXJcbiAgfVxufVxuXG5jb25zdCBERUZBVUxUX09QVElPTlM6IFN1cHBvcnRBYmlsaXR5T3B0aW9ucyA9IHtcbiAgc2hpZWxkRHVyYXRpb25NczogNTAwMCxcbiAgc2hpZWxkQ29vbGRvd25NczogODAwMCxcbiAgaGVhbEFtb3VudDogMjUsXG4gIGhlYWxDb29sZG93bk1zOiA2MDAwLFxuICBtYXhIdWxsOiAxMDAsXG4gIGRhc2hEdXJhdGlvbk1zOiAxNTAwLFxuICBkYXNoQ29vbGRvd25NczogNTAwMCxcbiAgZGFzaFNwZWVkQm9udXM6IDYwLFxuICB1bHRpbWF0ZUR1cmF0aW9uTXM6IDQwMDAsXG4gIHVsdGltYXRlQ29vbGRvd25NczogMTYwMDAsXG4gIHVsdGltYXRlU2hpZWxkQm9udXNNczogNDAwMCxcbiAgdWx0aW1hdGVEYXNoQm9udXNNczogMjAwMCxcbn1cblxuZXhwb3J0IHR5cGUgU3VwcG9ydEFiaWxpdHlTeXN0ZW0gPSB7XG4gIHJlYWRvbmx5IHN0YXRlOiBTdXBwb3J0QWJpbGl0eVN0YXRlXG4gIHVwZGF0ZTogKGR0OiBudW1iZXIpID0+IHZvaWRcbiAgdHJpZ2dlclNoaWVsZDogKCkgPT4gYm9vbGVhblxuICB0cmlnZ2VySGVhbDogKCkgPT4gYm9vbGVhblxuICB0cmlnZ2VyRGFzaDogKCkgPT4gYm9vbGVhblxuICB0cmlnZ2VyVWx0aW1hdGU6ICgpID0+IGJvb2xlYW5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN1cHBvcnRBYmlsaXR5U3lzdGVtKG92ZXJyaWRlczogUGFydGlhbDxTdXBwb3J0QWJpbGl0eU9wdGlvbnM+ID0ge30pOiBTdXBwb3J0QWJpbGl0eVN5c3RlbSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7IC4uLkRFRkFVTFRfT1BUSU9OUywgLi4ub3ZlcnJpZGVzIH1cblxuICBjb25zdCBzdGF0ZTogU3VwcG9ydEFiaWxpdHlTdGF0ZSA9IHtcbiAgICBzaGllbGQ6IHsgYWN0aXZlOiBmYWxzZSwgcmVtYWluaW5nTXM6IDAsIGNvb2xkb3duUmVtYWluaW5nTXM6IDAgfSxcbiAgICBoZWFsOiB7IGNvb2xkb3duUmVtYWluaW5nTXM6IDAsIGh1bGw6IG9wdGlvbnMubWF4SHVsbCwgbWF4SHVsbDogb3B0aW9ucy5tYXhIdWxsIH0sXG4gICAgZGFzaDogeyBhY3RpdmU6IGZhbHNlLCByZW1haW5pbmdNczogMCwgY29vbGRvd25SZW1haW5pbmdNczogMCwgc3BlZWRCb251czogb3B0aW9ucy5kYXNoU3BlZWRCb251cyB9LFxuICAgIHVsdGltYXRlOiB7IGFjdGl2ZTogZmFsc2UsIHJlbWFpbmluZ01zOiAwLCBjb29sZG93blJlbWFpbmluZ01zOiAwIH0sXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoZHQ6IG51bWJlcikge1xuICAgIGNvbnN0IGRlbHRhTXMgPSBkdCAqIDEwMDBcblxuICAgIC8vMS4tIERlY2F5IGFjdGl2ZSB0aW1lcnMgc28gZWZmZWN0cyBleHBpcmUgbmF0dXJhbGx5IHdpdGhvdXQgZXh0cmEgYm9va2tlZXBpbmcuXG4gICAgaWYgKHN0YXRlLnNoaWVsZC5hY3RpdmUpIHtcbiAgICAgIHN0YXRlLnNoaWVsZC5yZW1haW5pbmdNcyA9IE1hdGgubWF4KDAsIHN0YXRlLnNoaWVsZC5yZW1haW5pbmdNcyAtIGRlbHRhTXMpXG4gICAgICBpZiAoc3RhdGUuc2hpZWxkLnJlbWFpbmluZ01zID09PSAwKSB7XG4gICAgICAgIHN0YXRlLnNoaWVsZC5hY3RpdmUgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3RhdGUuZGFzaC5hY3RpdmUpIHtcbiAgICAgIHN0YXRlLmRhc2gucmVtYWluaW5nTXMgPSBNYXRoLm1heCgwLCBzdGF0ZS5kYXNoLnJlbWFpbmluZ01zIC0gZGVsdGFNcylcbiAgICAgIGlmIChzdGF0ZS5kYXNoLnJlbWFpbmluZ01zID09PSAwKSB7XG4gICAgICAgIHN0YXRlLmRhc2guYWN0aXZlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0YXRlLnVsdGltYXRlLmFjdGl2ZSkge1xuICAgICAgc3RhdGUudWx0aW1hdGUucmVtYWluaW5nTXMgPSBNYXRoLm1heCgwLCBzdGF0ZS51bHRpbWF0ZS5yZW1haW5pbmdNcyAtIGRlbHRhTXMpXG4gICAgICBpZiAoc3RhdGUudWx0aW1hdGUucmVtYWluaW5nTXMgPT09IDApIHtcbiAgICAgICAgc3RhdGUudWx0aW1hdGUuYWN0aXZlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLzIuLSBSZWR1Y2UgY29vbGRvd24gdHJhY2tlcnMgc28gdHJpZ2dlcnMgY2FuIHJlYWN0aXZhdGUgb25jZSB0aGUgdGltZXJzIGVsYXBzZS5cbiAgICBzdGF0ZS5zaGllbGQuY29vbGRvd25SZW1haW5pbmdNcyA9IE1hdGgubWF4KDAsIHN0YXRlLnNoaWVsZC5jb29sZG93blJlbWFpbmluZ01zIC0gZGVsdGFNcylcbiAgICBzdGF0ZS5oZWFsLmNvb2xkb3duUmVtYWluaW5nTXMgPSBNYXRoLm1heCgwLCBzdGF0ZS5oZWFsLmNvb2xkb3duUmVtYWluaW5nTXMgLSBkZWx0YU1zKVxuICAgIHN0YXRlLmRhc2guY29vbGRvd25SZW1haW5pbmdNcyA9IE1hdGgubWF4KDAsIHN0YXRlLmRhc2guY29vbGRvd25SZW1haW5pbmdNcyAtIGRlbHRhTXMpXG4gICAgc3RhdGUudWx0aW1hdGUuY29vbGRvd25SZW1haW5pbmdNcyA9IE1hdGgubWF4KDAsIHN0YXRlLnVsdGltYXRlLmNvb2xkb3duUmVtYWluaW5nTXMgLSBkZWx0YU1zKVxuXG4gICAgLy8zLi0gUGFzc2l2ZWx5IHJlZ2VuZXJhdGUgYSB0cmlja2xlIG9mIGh1bGwgd2hpbGUgaWRsZSBzbyBoZWFsaW5nIGhhcyBhIGJhc2VsaW5lIGVmZmVjdC5cbiAgICBpZiAoIXN0YXRlLnVsdGltYXRlLmFjdGl2ZSkge1xuICAgICAgY29uc3QgcmVnZW4gPSBkZWx0YU1zICogMC4wMDI1XG4gICAgICBzdGF0ZS5oZWFsLmh1bGwgPSBNYXRoLm1pbihzdGF0ZS5oZWFsLm1heEh1bGwsIHN0YXRlLmhlYWwuaHVsbCArIHJlZ2VuKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJTaGllbGQoKSB7XG4gICAgLy80Li0gQWxsb3cgYWN0aXZhdGlvbiBvbmx5IHdoZW4gdGhlIHJlY2hhcmdlIGN5Y2xlIGNvbXBsZXRlZC5cbiAgICBpZiAoc3RhdGUuc2hpZWxkLmNvb2xkb3duUmVtYWluaW5nTXMgPiAwKSByZXR1cm4gZmFsc2VcbiAgICBzdGF0ZS5zaGllbGQuYWN0aXZlID0gdHJ1ZVxuICAgIHN0YXRlLnNoaWVsZC5yZW1haW5pbmdNcyA9IG9wdGlvbnMuc2hpZWxkRHVyYXRpb25Nc1xuICAgIHN0YXRlLnNoaWVsZC5jb29sZG93blJlbWFpbmluZ01zID0gb3B0aW9ucy5zaGllbGRDb29sZG93bk1zXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJIZWFsKCkge1xuICAgIC8vNS4tIFJhaXNlIGh1bGwgaW50ZWdyaXR5IHdoaWxlIGVuZm9yY2luZyBhIGNvb2xkb3duIGdhdGUgdG8gcHJldmVudCBzcGFtLlxuICAgIGlmIChzdGF0ZS5oZWFsLmNvb2xkb3duUmVtYWluaW5nTXMgPiAwKSByZXR1cm4gZmFsc2VcbiAgICBzdGF0ZS5oZWFsLmNvb2xkb3duUmVtYWluaW5nTXMgPSBvcHRpb25zLmhlYWxDb29sZG93bk1zXG4gICAgc3RhdGUuaGVhbC5odWxsID0gTWF0aC5taW4oc3RhdGUuaGVhbC5tYXhIdWxsLCBzdGF0ZS5oZWFsLmh1bGwgKyBvcHRpb25zLmhlYWxBbW91bnQpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJEYXNoKCkge1xuICAgIC8vNi4tIFN0YXJ0IHRoZSBidXJzdCBpZiB0aGUgdGhydXN0ZXJzIGhhdmUgY29vbGVkIGRvd24gZW5vdWdoIHNpbmNlIHRoZSBsYXN0IHVzZS5cbiAgICBpZiAoc3RhdGUuZGFzaC5jb29sZG93blJlbWFpbmluZ01zID4gMCkgcmV0dXJuIGZhbHNlXG4gICAgc3RhdGUuZGFzaC5hY3RpdmUgPSB0cnVlXG4gICAgc3RhdGUuZGFzaC5yZW1haW5pbmdNcyA9IG9wdGlvbnMuZGFzaER1cmF0aW9uTXNcbiAgICBzdGF0ZS5kYXNoLmNvb2xkb3duUmVtYWluaW5nTXMgPSBvcHRpb25zLmRhc2hDb29sZG93bk1zXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJVbHRpbWF0ZSgpIHtcbiAgICAvLzcuLSBGaXJlIHRoZSBzaWduYXR1cmUgbW92ZSB3aGljaCBsYXllcnMgZXh0cmEgc2hpZWxkIGFuZCBkYXNoIHVwdGltZS5cbiAgICBpZiAoc3RhdGUudWx0aW1hdGUuY29vbGRvd25SZW1haW5pbmdNcyA+IDApIHJldHVybiBmYWxzZVxuICAgIHN0YXRlLnVsdGltYXRlLmFjdGl2ZSA9IHRydWVcbiAgICBzdGF0ZS51bHRpbWF0ZS5yZW1haW5pbmdNcyA9IG9wdGlvbnMudWx0aW1hdGVEdXJhdGlvbk1zXG4gICAgc3RhdGUudWx0aW1hdGUuY29vbGRvd25SZW1haW5pbmdNcyA9IG9wdGlvbnMudWx0aW1hdGVDb29sZG93bk1zXG4gICAgc3RhdGUuc2hpZWxkLmFjdGl2ZSA9IHRydWVcbiAgICBzdGF0ZS5zaGllbGQucmVtYWluaW5nTXMgPSBNYXRoLm1heChzdGF0ZS5zaGllbGQucmVtYWluaW5nTXMsIG9wdGlvbnMudWx0aW1hdGVTaGllbGRCb251c01zKVxuICAgIHN0YXRlLmRhc2guYWN0aXZlID0gdHJ1ZVxuICAgIHN0YXRlLmRhc2gucmVtYWluaW5nTXMgPSBNYXRoLm1heChzdGF0ZS5kYXNoLnJlbWFpbmluZ01zLCBvcHRpb25zLnVsdGltYXRlRGFzaEJvbnVzTXMpXG4gICAgc3RhdGUuZGFzaC5jb29sZG93blJlbWFpbmluZ01zID0gTWF0aC5tYXgoc3RhdGUuZGFzaC5jb29sZG93blJlbWFpbmluZ01zLCBvcHRpb25zLmRhc2hDb29sZG93bk1zKVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN0YXRlLFxuICAgIHVwZGF0ZSxcbiAgICB0cmlnZ2VyU2hpZWxkLFxuICAgIHRyaWdnZXJIZWFsLFxuICAgIHRyaWdnZXJEYXNoLFxuICAgIHRyaWdnZXJVbHRpbWF0ZSxcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiREVGQVVMVF9PUFRJT05TIiwic2hpZWxkRHVyYXRpb25NcyIsInNoaWVsZENvb2xkb3duTXMiLCJoZWFsQW1vdW50IiwiaGVhbENvb2xkb3duTXMiLCJtYXhIdWxsIiwiZGFzaER1cmF0aW9uTXMiLCJkYXNoQ29vbGRvd25NcyIsImRhc2hTcGVlZEJvbnVzIiwidWx0aW1hdGVEdXJhdGlvbk1zIiwidWx0aW1hdGVDb29sZG93bk1zIiwidWx0aW1hdGVTaGllbGRCb251c01zIiwidWx0aW1hdGVEYXNoQm9udXNNcyIsImNyZWF0ZVN1cHBvcnRBYmlsaXR5U3lzdGVtIiwib3ZlcnJpZGVzIiwib3B0aW9ucyIsInN0YXRlIiwic2hpZWxkIiwiYWN0aXZlIiwicmVtYWluaW5nTXMiLCJjb29sZG93blJlbWFpbmluZ01zIiwiaGVhbCIsImh1bGwiLCJkYXNoIiwic3BlZWRCb251cyIsInVsdGltYXRlIiwidXBkYXRlIiwiZHQiLCJkZWx0YU1zIiwiTWF0aCIsIm1heCIsInJlZ2VuIiwibWluIiwidHJpZ2dlclNoaWVsZCIsInRyaWdnZXJIZWFsIiwidHJpZ2dlckRhc2giLCJ0cmlnZ2VyVWx0aW1hdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/vehicles/shared/supportAbilities.ts\n");

/***/ }),

/***/ "(ssr)/./src/weapons/bomb.ts":
/*!*****************************!*\
  !*** ./src/weapons/bomb.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBombSystem: () => (/* binding */ createBombSystem)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction createBombSystem(options) {\n    const bombs = [];\n    const explosions = [];\n    let ammo = options.ammo;\n    let cooldownMs = 0;\n    let idCounter = 0;\n    const gravityVec = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, -options.gravity, 0);\n    const tmp = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    function spawnDebris(center) {\n        const parts = [];\n        for(let i = 0; i < options.debrisCount; i++){\n            //1.- Scatter fragments radially with gentle upward bias for a quick debris visualization.\n            const angle = i / Math.max(1, options.debrisCount) * Math.PI * 2;\n            const radius = options.craterRadius * 0.6;\n            parts.push(new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(center.x + Math.cos(angle) * radius, center.y + options.craterRadius * 0.2, center.z + Math.sin(angle) * radius));\n        }\n        return parts;\n    }\n    function detonate(index, context) {\n        const bomb = bombs[index];\n        const center = bomb.position.clone();\n        const explosion = {\n            id: bomb.id,\n            center,\n            radius: options.aoeRadius,\n            craterRadius: options.craterRadius,\n            debris: spawnDebris(center)\n        };\n        //2.- Record the blast so the HUD/tests can query area-of-effect interactions.\n        explosions.push(explosion);\n        bombs.splice(index, 1);\n        cooldownMs = options.cooldownMs;\n    }\n    function update(context) {\n        if (cooldownMs > 0) {\n            cooldownMs = Math.max(0, cooldownMs - context.dt * 1000);\n        }\n        for(let i = bombs.length - 1; i >= 0; i--){\n            const bomb = bombs[i];\n            bomb.fuseMs -= context.dt * 1000;\n            if (bomb.fuseMs <= 0) {\n                detonate(i, context);\n                continue;\n            }\n            bomb.velocity.addScaledVector(gravityVec, context.dt);\n            bomb.position.addScaledVector(bomb.velocity, context.dt);\n            const sample = context.sampleGroundHeight;\n            if (sample) {\n                const ground = sample(bomb.position.x, bomb.position.z);\n                if (bomb.position.y <= ground) {\n                    //3.- Trigger the fuse early if the shell contacts the terrain before timing out.\n                    detonate(i, context);\n                }\n            }\n        }\n    }\n    function fire(context) {\n        if (ammo <= 0) return false;\n        if (cooldownMs > 0) return false;\n        if (bombs.length >= options.maxConcurrent) return false;\n        const bomb = {\n            id: ++idCounter,\n            position: context.position.clone(),\n            velocity: context.forward.clone().multiplyScalar(60).add(tmp.set(0, -10, 0)),\n            fuseMs: options.fuseMs\n        };\n        bombs.push(bomb);\n        ammo -= 1;\n        return true;\n    }\n    function queryAoE(point) {\n        //4.- Provide a helper for tests and gameplay to evaluate explosion overlap.\n        return explosions.some((explosion)=>explosion.center.distanceTo(point) <= explosion.radius);\n    }\n    return {\n        update,\n        fire,\n        queryAoE,\n        get ammo () {\n            return ammo;\n        },\n        get cooldownMs () {\n            return cooldownMs;\n        },\n        get activeCount () {\n            return bombs.length;\n        },\n        get explosions () {\n            return explosions;\n        },\n        get isArmed () {\n            return ammo > 0 && cooldownMs === 0 && bombs.length < options.maxConcurrent;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQzNCLElBQUlILE1BQU11QyxNQUFNLElBQUl4QyxRQUFRZ0QsYUFBYSxFQUFFLE9BQU87UUFFbEQsTUFBTWxCLE9BQWtCO1lBQ3RCSSxJQUFJLEVBQUU3QjtZQUNOMEIsVUFBVUYsUUFBUUUsUUFBUSxDQUFDQyxLQUFLO1lBQ2hDVSxVQUFVYixRQUFRb0IsT0FBTyxDQUFDakIsS0FBSyxHQUFHa0IsY0FBYyxDQUFDLElBQUlDLEdBQUcsQ0FBQzFDLElBQUkyQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUk7WUFDekVYLFFBQVF6QyxRQUFReUMsTUFBTTtRQUN4QjtRQUVBeEMsTUFBTW9CLElBQUksQ0FBQ1M7UUFDWDNCLFFBQVE7UUFDUixPQUFPO0lBQ1Q7SUFFQSxTQUFTa0QsU0FBU0MsS0FBb0I7UUFDcEMsNEVBQTRFO1FBQzVFLE9BQU9wRCxXQUFXcUQsSUFBSSxDQUFDdEIsQ0FBQUEsWUFBYUEsVUFBVXRCLE1BQU0sQ0FBQzZDLFVBQVUsQ0FBQ0YsVUFBVXJCLFVBQVVkLE1BQU07SUFDNUY7SUFFQSxPQUFPO1FBQ0xtQjtRQUNBUztRQUNBTTtRQUNBLElBQUlsRCxRQUFNO1lBQUUsT0FBT0E7UUFBSztRQUN4QixJQUFJQyxjQUFZO1lBQUUsT0FBT0E7UUFBVztRQUNwQyxJQUFJcUQsZUFBYTtZQUFFLE9BQU94RCxNQUFNdUMsTUFBTTtRQUFDO1FBQ3ZDLElBQUl0QyxjQUFZO1lBQUUsT0FBT0E7UUFBVztRQUNwQyxJQUFJd0QsV0FBUztZQUFFLE9BQU92RCxPQUFPLEtBQUtDLGVBQWUsS0FBS0gsTUFBTXVDLE1BQU0sR0FBR3hDLFFBQVFnRCxhQUFhO1FBQUM7SUFDN0Y7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvd2VhcG9ucy9ib21iLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgR3JvdW5kZWRXZWFwb25Db250ZXh0IH0gZnJvbSAnQC93ZWFwb25zL3R5cGVzJ1xuXG5leHBvcnQgdHlwZSBCb21iT3B0aW9ucyA9IHtcbiAgbWF4Q29uY3VycmVudDogbnVtYmVyXG4gIGFtbW86IG51bWJlclxuICBmdXNlTXM6IG51bWJlclxuICBjb29sZG93bk1zOiBudW1iZXJcbiAgYW9lUmFkaXVzOiBudW1iZXJcbiAgY3JhdGVyUmFkaXVzOiBudW1iZXJcbiAgZGVicmlzQ291bnQ6IG51bWJlclxuICBncmF2aXR5OiBudW1iZXJcbn1cblxuZXhwb3J0IHR5cGUgQm9tYlN0YXRlID0ge1xuICBpZDogbnVtYmVyXG4gIHBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzXG4gIHZlbG9jaXR5OiBUSFJFRS5WZWN0b3IzXG4gIGZ1c2VNczogbnVtYmVyXG59XG5cbmV4cG9ydCB0eXBlIEV4cGxvc2lvblN0YXRlID0ge1xuICBpZDogbnVtYmVyXG4gIGNlbnRlcjogVEhSRUUuVmVjdG9yM1xuICByYWRpdXM6IG51bWJlclxuICBjcmF0ZXJSYWRpdXM6IG51bWJlclxuICBkZWJyaXM6IFRIUkVFLlZlY3RvcjNbXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQm9tYlN5c3RlbShvcHRpb25zOiBCb21iT3B0aW9ucyl7XG4gIGNvbnN0IGJvbWJzOiBCb21iU3RhdGVbXSA9IFtdXG4gIGNvbnN0IGV4cGxvc2lvbnM6IEV4cGxvc2lvblN0YXRlW10gPSBbXVxuICBsZXQgYW1tbyA9IG9wdGlvbnMuYW1tb1xuICBsZXQgY29vbGRvd25NcyA9IDBcbiAgbGV0IGlkQ291bnRlciA9IDBcblxuICBjb25zdCBncmF2aXR5VmVjID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgLW9wdGlvbnMuZ3Jhdml0eSwgMClcbiAgY29uc3QgdG1wID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuXG4gIGZ1bmN0aW9uIHNwYXduRGVicmlzKGNlbnRlcjogVEhSRUUuVmVjdG9yMyl7XG4gICAgY29uc3QgcGFydHM6IFRIUkVFLlZlY3RvcjNbXSA9IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmRlYnJpc0NvdW50OyBpKyspe1xuICAgICAgLy8xLi0gU2NhdHRlciBmcmFnbWVudHMgcmFkaWFsbHkgd2l0aCBnZW50bGUgdXB3YXJkIGJpYXMgZm9yIGEgcXVpY2sgZGVicmlzIHZpc3VhbGl6YXRpb24uXG4gICAgICBjb25zdCBhbmdsZSA9IChpIC8gTWF0aC5tYXgoMSwgb3B0aW9ucy5kZWJyaXNDb3VudCkpICogTWF0aC5QSSAqIDJcbiAgICAgIGNvbnN0IHJhZGl1cyA9IG9wdGlvbnMuY3JhdGVyUmFkaXVzICogMC42XG4gICAgICBwYXJ0cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKFxuICAgICAgICBjZW50ZXIueCArIE1hdGguY29zKGFuZ2xlKSAqIHJhZGl1cyxcbiAgICAgICAgY2VudGVyLnkgKyBvcHRpb25zLmNyYXRlclJhZGl1cyAqIDAuMixcbiAgICAgICAgY2VudGVyLnogKyBNYXRoLnNpbihhbmdsZSkgKiByYWRpdXMsXG4gICAgICApKVxuICAgIH1cbiAgICByZXR1cm4gcGFydHNcbiAgfVxuXG4gIGZ1bmN0aW9uIGRldG9uYXRlKGluZGV4OiBudW1iZXIsIGNvbnRleHQ6IEdyb3VuZGVkV2VhcG9uQ29udGV4dCl7XG4gICAgY29uc3QgYm9tYiA9IGJvbWJzW2luZGV4XVxuICAgIGNvbnN0IGNlbnRlciA9IGJvbWIucG9zaXRpb24uY2xvbmUoKVxuICAgIGNvbnN0IGV4cGxvc2lvbjogRXhwbG9zaW9uU3RhdGUgPSB7XG4gICAgICBpZDogYm9tYi5pZCxcbiAgICAgIGNlbnRlcixcbiAgICAgIHJhZGl1czogb3B0aW9ucy5hb2VSYWRpdXMsXG4gICAgICBjcmF0ZXJSYWRpdXM6IG9wdGlvbnMuY3JhdGVyUmFkaXVzLFxuICAgICAgZGVicmlzOiBzcGF3bkRlYnJpcyhjZW50ZXIpLFxuICAgIH1cbiAgICAvLzIuLSBSZWNvcmQgdGhlIGJsYXN0IHNvIHRoZSBIVUQvdGVzdHMgY2FuIHF1ZXJ5IGFyZWEtb2YtZWZmZWN0IGludGVyYWN0aW9ucy5cbiAgICBleHBsb3Npb25zLnB1c2goZXhwbG9zaW9uKVxuICAgIGJvbWJzLnNwbGljZShpbmRleCwgMSlcbiAgICBjb29sZG93bk1zID0gb3B0aW9ucy5jb29sZG93bk1zXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoY29udGV4dDogR3JvdW5kZWRXZWFwb25Db250ZXh0KXtcbiAgICBpZiAoY29vbGRvd25NcyA+IDApe1xuICAgICAgY29vbGRvd25NcyA9IE1hdGgubWF4KDAsIGNvb2xkb3duTXMgLSBjb250ZXh0LmR0ICogMTAwMClcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gYm9tYnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgY29uc3QgYm9tYiA9IGJvbWJzW2ldXG4gICAgICBib21iLmZ1c2VNcyAtPSBjb250ZXh0LmR0ICogMTAwMFxuICAgICAgaWYgKGJvbWIuZnVzZU1zIDw9IDApe1xuICAgICAgICBkZXRvbmF0ZShpLCBjb250ZXh0KVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBib21iLnZlbG9jaXR5LmFkZFNjYWxlZFZlY3RvcihncmF2aXR5VmVjLCBjb250ZXh0LmR0KVxuICAgICAgYm9tYi5wb3NpdGlvbi5hZGRTY2FsZWRWZWN0b3IoYm9tYi52ZWxvY2l0eSwgY29udGV4dC5kdClcblxuICAgICAgY29uc3Qgc2FtcGxlID0gY29udGV4dC5zYW1wbGVHcm91bmRIZWlnaHRcbiAgICAgIGlmIChzYW1wbGUpe1xuICAgICAgICBjb25zdCBncm91bmQgPSBzYW1wbGUoYm9tYi5wb3NpdGlvbi54LCBib21iLnBvc2l0aW9uLnopXG4gICAgICAgIGlmIChib21iLnBvc2l0aW9uLnkgPD0gZ3JvdW5kKXtcbiAgICAgICAgICAvLzMuLSBUcmlnZ2VyIHRoZSBmdXNlIGVhcmx5IGlmIHRoZSBzaGVsbCBjb250YWN0cyB0aGUgdGVycmFpbiBiZWZvcmUgdGltaW5nIG91dC5cbiAgICAgICAgICBkZXRvbmF0ZShpLCBjb250ZXh0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmlyZShjb250ZXh0OiBHcm91bmRlZFdlYXBvbkNvbnRleHQpe1xuICAgIGlmIChhbW1vIDw9IDApIHJldHVybiBmYWxzZVxuICAgIGlmIChjb29sZG93bk1zID4gMCkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKGJvbWJzLmxlbmd0aCA+PSBvcHRpb25zLm1heENvbmN1cnJlbnQpIHJldHVybiBmYWxzZVxuXG4gICAgY29uc3QgYm9tYjogQm9tYlN0YXRlID0ge1xuICAgICAgaWQ6ICsraWRDb3VudGVyLFxuICAgICAgcG9zaXRpb246IGNvbnRleHQucG9zaXRpb24uY2xvbmUoKSxcbiAgICAgIHZlbG9jaXR5OiBjb250ZXh0LmZvcndhcmQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcig2MCkuYWRkKHRtcC5zZXQoMCwgLTEwLCAwKSksXG4gICAgICBmdXNlTXM6IG9wdGlvbnMuZnVzZU1zLFxuICAgIH1cblxuICAgIGJvbWJzLnB1c2goYm9tYilcbiAgICBhbW1vIC09IDFcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gcXVlcnlBb0UocG9pbnQ6IFRIUkVFLlZlY3RvcjMpe1xuICAgIC8vNC4tIFByb3ZpZGUgYSBoZWxwZXIgZm9yIHRlc3RzIGFuZCBnYW1lcGxheSB0byBldmFsdWF0ZSBleHBsb3Npb24gb3ZlcmxhcC5cbiAgICByZXR1cm4gZXhwbG9zaW9ucy5zb21lKGV4cGxvc2lvbiA9PiBleHBsb3Npb24uY2VudGVyLmRpc3RhbmNlVG8ocG9pbnQpIDw9IGV4cGxvc2lvbi5yYWRpdXMpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHVwZGF0ZSxcbiAgICBmaXJlLFxuICAgIHF1ZXJ5QW9FLFxuICAgIGdldCBhbW1vKCl7IHJldHVybiBhbW1vIH0sXG4gICAgZ2V0IGNvb2xkb3duTXMoKXsgcmV0dXJuIGNvb2xkb3duTXMgfSxcbiAgICBnZXQgYWN0aXZlQ291bnQoKXsgcmV0dXJuIGJvbWJzLmxlbmd0aCB9LFxuICAgIGdldCBleHBsb3Npb25zKCl7IHJldHVybiBleHBsb3Npb25zIH0sXG4gICAgZ2V0IGlzQXJtZWQoKXsgcmV0dXJuIGFtbW8gPiAwICYmIGNvb2xkb3duTXMgPT09IDAgJiYgYm9tYnMubGVuZ3RoIDwgb3B0aW9ucy5tYXhDb25jdXJyZW50IH0sXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJUSFJFRSIsImNyZWF0ZUJvbWJTeXN0ZW0iLCJvcHRpb25zIiwiYm9tYnMiLCJleHBsb3Npb25zIiwiYW1tbyIsImNvb2xkb3duTXMiLCJpZENvdW50ZXIiLCJncmF2aXR5VmVjIiwiVmVjdG9yMyIsImdyYXZpdHkiLCJ0bXAiLCJzcGF3bkRlYnJpcyIsImNlbnRlciIsInBhcnRzIiwiaSIsImRlYnJpc0NvdW50IiwiYW5nbGUiLCJNYXRoIiwibWF4IiwiUEkiLCJyYWRpdXMiLCJjcmF0ZXJSYWRpdXMiLCJwdXNoIiwieCIsImNvcyIsInkiLCJ6Iiwic2luIiwiZGV0b25hdGUiLCJpbmRleCIsImNvbnRleHQiLCJib21iIiwicG9zaXRpb24iLCJjbG9uZSIsImV4cGxvc2lvbiIsImlkIiwiYW9lUmFkaXVzIiwiZGVicmlzIiwic3BsaWNlIiwidXBkYXRlIiwiZHQiLCJsZW5ndGgiLCJmdXNlTXMiLCJ2ZWxvY2l0eSIsImFkZFNjYWxlZFZlY3RvciIsInNhbXBsZSIsInNhbXBsZUdyb3VuZEhlaWdodCIsImdyb3VuZCIsImZpcmUiLCJtYXhDb25jdXJyZW50IiwiZm9yd2FyZCIsIm11bHRpcGx5U2NhbGFyIiwiYWRkIiwic2V0IiwicXVlcnlBb0UiLCJwb2ludCIsInNvbWUiLCJkaXN0YW5jZVRvIiwiYWN0aXZlQ291bnQiLCJpc0FybWVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/weapons/bomb.ts\n");

/***/ }),

/***/ "(ssr)/./src/weapons/gatling.ts":
/*!********************************!*\
  !*** ./src/weapons/gatling.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGatlingSystem: () => (/* binding */ createGatlingSystem),\n/* harmony export */   createGatlingVisual: () => (/* binding */ createGatlingVisual)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nconst DEFAULT_FORWARD = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1);\nconst TMP_DIRECTION = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\nconst TMP_POSITION = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\nconst TMP_QUATERNION = new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion();\nfunction createGatlingSystem(options) {\n    const state = {\n        ammo: options.ammo,\n        heat: 0,\n        overheated: false,\n        tracers: [],\n        accumulator: 0\n    };\n    let tracerId = 0;\n    function spawnTracer(context) {\n        const tracer = {\n            id: ++tracerId,\n            origin: context.position.clone(),\n            direction: context.forward.clone(),\n            lifeMs: options.tracerLifeMs\n        };\n        // 1. Impose deterministic spread so tests can predictably assert ray casts.\n        const seed = tracer.id * 12.9898;\n        const yaw = Math.sin(seed) * 0.5 * options.spread;\n        const pitch = Math.sin(seed * 0.5) * 0.5 * options.spread;\n        const rotation = new three__WEBPACK_IMPORTED_MODULE_0__.Euler(pitch, yaw, 0, 'XYZ');\n        tracer.direction.applyEuler(rotation).normalize();\n        if (state.tracers.length >= options.maxTracers) {\n            state.tracers.shift();\n        }\n        state.tracers.push(tracer);\n        return tracer;\n    }\n    function coolDown(dt) {\n        // 2. Dissipate heat over time so prolonged bursts eventually recover.\n        if (state.heat > 0) {\n            state.heat = Math.max(0, state.heat - options.coolRate * dt);\n            if (state.overheated && state.heat <= options.overheatThreshold * 0.25) {\n                state.overheated = false;\n            }\n        }\n    }\n    function update(context, triggerHeld) {\n        const dt = context.dt;\n        for(let i = state.tracers.length - 1; i >= 0; i--){\n            const tracer = state.tracers[i];\n            tracer.lifeMs -= dt * 1000;\n            if (tracer.lifeMs <= 0) {\n                state.tracers.splice(i, 1);\n            }\n        }\n        if (!triggerHeld) {\n            // 3. When idle, only cool the barrels.\n            coolDown(dt);\n            state.accumulator = 0;\n            return {\n                shots: 0\n            };\n        }\n        if (state.overheated || state.ammo <= 0) {\n            coolDown(dt);\n            return {\n                shots: 0\n            };\n        }\n        state.accumulator += dt * options.fireRate;\n        let shots = 0;\n        while(state.accumulator >= 1 && state.ammo > 0 && !state.overheated){\n            spawnTracer(context);\n            state.accumulator -= 1;\n            state.ammo -= 1;\n            state.heat += options.heatPerShot;\n            shots++;\n            if (state.heat >= options.overheatThreshold) {\n                // 4. Flag the weapon as overheated so callers must ease off the trigger.\n                state.overheated = true;\n            }\n        }\n        coolDown(dt);\n        return {\n            shots\n        };\n    }\n    return {\n        update,\n        get state () {\n            return state;\n        },\n        get ammo () {\n            return state.ammo;\n        },\n        get overheated () {\n            return state.overheated;\n        }\n    };\n}\nfunction createGatlingVisual(scene, options, palette = {\n    tracerColor: 0xffff00\n}) {\n    const tracers = [];\n    const tracerSpeed = 200; // Assumed units/sec for tracer travel; tweak as needed\n    const tracerLength = 1; // Fixed segment length for visibility\n    // Pre-create maxTracers meshes for reuse (pooling for perf)\n    for(let i = 0; i < options.maxTracers; i++){\n        const material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n            color: palette.tracerColor,\n            transparent: true,\n            opacity: 0.8,\n            blending: three__WEBPACK_IMPORTED_MODULE_0__.AdditiveBlending,\n            depthWrite: false\n        });\n        const geometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.1, 0.1, tracerLength);\n        geometry.translate(0, 0, -tracerLength / 2); // Center the segment\n        const tracer = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, material);\n        tracer.visible = false;\n        scene.add(tracer);\n        tracers.push(tracer);\n    }\n    let activeTracerIndex = 0; // For cycling through pool\n    function update(state) {\n        // 1. Update existing tracers: Move forward, fade, and hide expired ones.\n        for(let i = 0; i < state.tracers.length; i++){\n            const tracerState = state.tracers[i];\n            const tracerMesh = tracers[activeTracerIndex];\n            activeTracerIndex = (activeTracerIndex + 1) % options.maxTracers;\n            if (tracerState.lifeMs <= 0) {\n                tracerMesh.visible = false;\n                continue;\n            }\n            TMP_DIRECTION.copy(tracerState.direction).normalize();\n            tracerMesh.visible = true;\n            // 2. Position: Start at origin, advance based on elapsed time.\n            const elapsed = (options.tracerLifeMs - tracerState.lifeMs) / 1000; // Sec since spawn\n            TMP_POSITION.copy(tracerState.origin).addScaledVector(TMP_DIRECTION, tracerSpeed * elapsed);\n            tracerMesh.position.copy(TMP_POSITION);\n            // 3. Orient to direction.\n            TMP_QUATERNION.setFromUnitVectors(DEFAULT_FORWARD, TMP_DIRECTION);\n            tracerMesh.quaternion.copy(TMP_QUATERNION);\n            // 4. Fade opacity over life.\n            const progress = 1 - tracerState.lifeMs / options.tracerLifeMs;\n            tracerMesh.material.opacity = 0.8 * (1 - progress);\n            // Optional: Modulate for heat (global overheat tint).\n            if (state.overheated && palette.heatColor) {\n                tracerMesh.material.color.setHex(palette.heatColor);\n            } else {\n                tracerMesh.material.color.setHex(palette.tracerColor);\n            }\n        }\n        // Hide unused tracers.\n        for(let i = state.tracers.length; i < options.maxTracers; i++){\n            tracers[i % options.maxTracers].visible = false;\n        }\n    }\n    function dispose() {\n        // 5. Release GPU buffers when the owning entity despawns to prevent leaks.\n        tracers.forEach((tracer)=>{\n            scene.remove(tracer);\n            tracer.geometry.dispose();\n            tracer.material.dispose();\n        });\n    }\n    return {\n        update,\n        dispose,\n        tracers\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxNQUFPLEtBQUlrQixRQUFPO1lBRTdFLHNEQUFzRDtZQUN0RCxJQUFJeEUsTUFBTUcsVUFBVSxJQUFJMkMsUUFBUTJCLFNBQVMsRUFBRTtnQkFDeENQLFdBQVdoQixRQUFRLENBQTZCRSxLQUFLLENBQUNzQixNQUFNLENBQUM1QixRQUFRMkIsU0FBUztZQUNqRixPQUFPO2dCQUNKUCxXQUFXaEIsUUFBUSxDQUE2QkUsS0FBSyxDQUFDc0IsTUFBTSxDQUFDNUIsUUFBUUMsV0FBVztZQUNuRjtRQUNGO1FBRUEsdUJBQXVCO1FBQ3ZCLElBQUssSUFBSVIsSUFBSXZDLE1BQU1JLE9BQU8sQ0FBQ3dCLE1BQU0sRUFBRVcsSUFBSXhDLFFBQVE4QixVQUFVLEVBQUVVLElBQUs7WUFDOURuQyxPQUFPLENBQUNtQyxJQUFJeEMsUUFBUThCLFVBQVUsQ0FBQyxDQUFDaUMsT0FBTyxHQUFHO1FBQzVDO0lBQ0Y7SUFFQSxTQUFTYTtRQUNQLDJFQUEyRTtRQUMzRXZFLFFBQVF3RSxPQUFPLENBQUNuRSxDQUFBQTtZQUNkb0MsTUFBTWdDLE1BQU0sQ0FBQ3BFO1lBQ2JBLE9BQU9pRCxRQUFRLENBQUNpQixPQUFPO1lBQ3ZCbEUsT0FBT3lDLFFBQVEsQ0FBQ3lCLE9BQU87UUFDekI7SUFDRjtJQUVBLE9BQU87UUFBRXRDO1FBQVFzQztRQUFTdkU7SUFBUTtBQUNwQyIsInNvdXJjZXMiOlsiL2FwcC9zcmMvd2VhcG9ucy9nYXRsaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCB7IFdlYXBvbkNvbnRleHQgfSBmcm9tICdAL3dlYXBvbnMvdHlwZXMnO1xuXG5leHBvcnQgdHlwZSBHYXRsaW5nT3B0aW9ucyA9IHtcbiAgZmlyZVJhdGU6IG51bWJlcjtcbiAgc3ByZWFkOiBudW1iZXI7XG4gIG1heFRyYWNlcnM6IG51bWJlcjtcbiAgdHJhY2VyTGlmZU1zOiBudW1iZXI7XG4gIGFtbW86IG51bWJlcjtcbiAgaGVhdFBlclNob3Q6IG51bWJlcjtcbiAgY29vbFJhdGU6IG51bWJlcjtcbiAgb3ZlcmhlYXRUaHJlc2hvbGQ6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFRyYWNlclN0YXRlID0ge1xuICBpZDogbnVtYmVyO1xuICBvcmlnaW46IFRIUkVFLlZlY3RvcjM7XG4gIGRpcmVjdGlvbjogVEhSRUUuVmVjdG9yMztcbiAgbGlmZU1zOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBHYXRsaW5nU3RhdGUgPSB7XG4gIGFtbW86IG51bWJlcjtcbiAgaGVhdDogbnVtYmVyO1xuICBvdmVyaGVhdGVkOiBib29sZWFuO1xuICB0cmFjZXJzOiBUcmFjZXJTdGF0ZVtdO1xuICBhY2N1bXVsYXRvcjogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgR2F0bGluZ1BhbGV0dGUgPSB7XG4gIHRyYWNlckNvbG9yOiBudW1iZXI7XG4gIGhlYXRDb2xvcj86IG51bWJlcjsgLy8gT3B0aW9uYWwgZm9yIG92ZXJoZWF0IHRpbnRcbn07XG5cbmNvbnN0IERFRkFVTFRfRk9SV0FSRCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDEpO1xuY29uc3QgVE1QX0RJUkVDVElPTiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5jb25zdCBUTVBfUE9TSVRJT04gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuY29uc3QgVE1QX1FVQVRFUk5JT04gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR2F0bGluZ1N5c3RlbShvcHRpb25zOiBHYXRsaW5nT3B0aW9ucykge1xuICBjb25zdCBzdGF0ZTogR2F0bGluZ1N0YXRlID0ge1xuICAgIGFtbW86IG9wdGlvbnMuYW1tbyxcbiAgICBoZWF0OiAwLFxuICAgIG92ZXJoZWF0ZWQ6IGZhbHNlLFxuICAgIHRyYWNlcnM6IFtdLFxuICAgIGFjY3VtdWxhdG9yOiAwLFxuICB9O1xuICBsZXQgdHJhY2VySWQgPSAwO1xuXG4gIGZ1bmN0aW9uIHNwYXduVHJhY2VyKGNvbnRleHQ6IFdlYXBvbkNvbnRleHQpIHtcbiAgICBjb25zdCB0cmFjZXI6IFRyYWNlclN0YXRlID0ge1xuICAgICAgaWQ6ICsrdHJhY2VySWQsXG4gICAgICBvcmlnaW46IGNvbnRleHQucG9zaXRpb24uY2xvbmUoKSxcbiAgICAgIGRpcmVjdGlvbjogY29udGV4dC5mb3J3YXJkLmNsb25lKCksXG4gICAgICBsaWZlTXM6IG9wdGlvbnMudHJhY2VyTGlmZU1zLFxuICAgIH07XG4gICAgLy8gMS4gSW1wb3NlIGRldGVybWluaXN0aWMgc3ByZWFkIHNvIHRlc3RzIGNhbiBwcmVkaWN0YWJseSBhc3NlcnQgcmF5IGNhc3RzLlxuICAgIGNvbnN0IHNlZWQgPSB0cmFjZXIuaWQgKiAxMi45ODk4O1xuICAgIGNvbnN0IHlhdyA9IChNYXRoLnNpbihzZWVkKSAqIDAuNSkgKiBvcHRpb25zLnNwcmVhZDtcbiAgICBjb25zdCBwaXRjaCA9IChNYXRoLnNpbihzZWVkICogMC41KSAqIDAuNSkgKiBvcHRpb25zLnNwcmVhZDtcbiAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBUSFJFRS5FdWxlcihwaXRjaCwgeWF3LCAwLCAnWFlaJyk7XG4gICAgdHJhY2VyLmRpcmVjdGlvbi5hcHBseUV1bGVyKHJvdGF0aW9uKS5ub3JtYWxpemUoKTtcbiAgICBpZiAoc3RhdGUudHJhY2Vycy5sZW5ndGggPj0gb3B0aW9ucy5tYXhUcmFjZXJzKSB7XG4gICAgICBzdGF0ZS50cmFjZXJzLnNoaWZ0KCk7XG4gICAgfVxuICAgIHN0YXRlLnRyYWNlcnMucHVzaCh0cmFjZXIpO1xuICAgIHJldHVybiB0cmFjZXI7XG4gIH1cblxuICBmdW5jdGlvbiBjb29sRG93bihkdDogbnVtYmVyKSB7XG4gICAgLy8gMi4gRGlzc2lwYXRlIGhlYXQgb3ZlciB0aW1lIHNvIHByb2xvbmdlZCBidXJzdHMgZXZlbnR1YWxseSByZWNvdmVyLlxuICAgIGlmIChzdGF0ZS5oZWF0ID4gMCkge1xuICAgICAgc3RhdGUuaGVhdCA9IE1hdGgubWF4KDAsIHN0YXRlLmhlYXQgLSBvcHRpb25zLmNvb2xSYXRlICogZHQpO1xuICAgICAgaWYgKHN0YXRlLm92ZXJoZWF0ZWQgJiYgc3RhdGUuaGVhdCA8PSBvcHRpb25zLm92ZXJoZWF0VGhyZXNob2xkICogMC4yNSkge1xuICAgICAgICBzdGF0ZS5vdmVyaGVhdGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKGNvbnRleHQ6IFdlYXBvbkNvbnRleHQsIHRyaWdnZXJIZWxkOiBib29sZWFuKSB7XG4gICAgY29uc3QgZHQgPSBjb250ZXh0LmR0O1xuICAgIGZvciAobGV0IGkgPSBzdGF0ZS50cmFjZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCB0cmFjZXIgPSBzdGF0ZS50cmFjZXJzW2ldO1xuICAgICAgdHJhY2VyLmxpZmVNcyAtPSBkdCAqIDEwMDA7XG4gICAgICBpZiAodHJhY2VyLmxpZmVNcyA8PSAwKSB7XG4gICAgICAgIHN0YXRlLnRyYWNlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRyaWdnZXJIZWxkKSB7XG4gICAgICAvLyAzLiBXaGVuIGlkbGUsIG9ubHkgY29vbCB0aGUgYmFycmVscy5cbiAgICAgIGNvb2xEb3duKGR0KTtcbiAgICAgIHN0YXRlLmFjY3VtdWxhdG9yID0gMDtcbiAgICAgIHJldHVybiB7IHNob3RzOiAwIH07XG4gICAgfVxuICAgIGlmIChzdGF0ZS5vdmVyaGVhdGVkIHx8IHN0YXRlLmFtbW8gPD0gMCkge1xuICAgICAgY29vbERvd24oZHQpO1xuICAgICAgcmV0dXJuIHsgc2hvdHM6IDAgfTtcbiAgICB9XG4gICAgc3RhdGUuYWNjdW11bGF0b3IgKz0gZHQgKiBvcHRpb25zLmZpcmVSYXRlO1xuICAgIGxldCBzaG90cyA9IDA7XG4gICAgd2hpbGUgKHN0YXRlLmFjY3VtdWxhdG9yID49IDEgJiYgc3RhdGUuYW1tbyA+IDAgJiYgIXN0YXRlLm92ZXJoZWF0ZWQpIHtcbiAgICAgIHNwYXduVHJhY2VyKGNvbnRleHQpO1xuICAgICAgc3RhdGUuYWNjdW11bGF0b3IgLT0gMTtcbiAgICAgIHN0YXRlLmFtbW8gLT0gMTtcbiAgICAgIHN0YXRlLmhlYXQgKz0gb3B0aW9ucy5oZWF0UGVyU2hvdDtcbiAgICAgIHNob3RzKys7XG4gICAgICBpZiAoc3RhdGUuaGVhdCA+PSBvcHRpb25zLm92ZXJoZWF0VGhyZXNob2xkKSB7XG4gICAgICAgIC8vIDQuIEZsYWcgdGhlIHdlYXBvbiBhcyBvdmVyaGVhdGVkIHNvIGNhbGxlcnMgbXVzdCBlYXNlIG9mZiB0aGUgdHJpZ2dlci5cbiAgICAgICAgc3RhdGUub3ZlcmhlYXRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNvb2xEb3duKGR0KTtcbiAgICByZXR1cm4geyBzaG90cyB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB1cGRhdGUsXG4gICAgZ2V0IHN0YXRlKCkgeyByZXR1cm4gc3RhdGU7IH0sXG4gICAgZ2V0IGFtbW8oKSB7IHJldHVybiBzdGF0ZS5hbW1vOyB9LFxuICAgIGdldCBvdmVyaGVhdGVkKCkgeyByZXR1cm4gc3RhdGUub3ZlcmhlYXRlZDsgfSxcbiAgfTtcbn1cblxuZXhwb3J0IHR5cGUgR2F0bGluZ1Zpc3VhbCA9IHtcbiAgdXBkYXRlOiAoc3RhdGU6IEdhdGxpbmdTdGF0ZSkgPT4gdm9pZDtcbiAgZGlzcG9zZTogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgdHJhY2VyczogVEhSRUUuTWVzaFtdO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdhdGxpbmdWaXN1YWwoc2NlbmU6IFRIUkVFLlNjZW5lLCBvcHRpb25zOiBHYXRsaW5nT3B0aW9ucywgcGFsZXR0ZTogR2F0bGluZ1BhbGV0dGUgPSB7IHRyYWNlckNvbG9yOiAweGZmZmYwMCB9KTogR2F0bGluZ1Zpc3VhbCB7XG4gIGNvbnN0IHRyYWNlcnM6IFRIUkVFLk1lc2hbXSA9IFtdO1xuICBjb25zdCB0cmFjZXJTcGVlZCA9IDIwMDsgLy8gQXNzdW1lZCB1bml0cy9zZWMgZm9yIHRyYWNlciB0cmF2ZWw7IHR3ZWFrIGFzIG5lZWRlZFxuICBjb25zdCB0cmFjZXJMZW5ndGggPSAxOyAvLyBGaXhlZCBzZWdtZW50IGxlbmd0aCBmb3IgdmlzaWJpbGl0eVxuXG4gIC8vIFByZS1jcmVhdGUgbWF4VHJhY2VycyBtZXNoZXMgZm9yIHJldXNlIChwb29saW5nIGZvciBwZXJmKVxuICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbnMubWF4VHJhY2VyczsgaSsrKSB7XG4gICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IHBhbGV0dGUudHJhY2VyQ29sb3IsXG4gICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgIG9wYWNpdHk6IDAuOCxcbiAgICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLFxuICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXG4gICAgfSk7XG4gICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMC4xLCAwLjEsIHRyYWNlckxlbmd0aCk7XG4gICAgZ2VvbWV0cnkudHJhbnNsYXRlKDAsIDAsIC10cmFjZXJMZW5ndGggLyAyKTsgLy8gQ2VudGVyIHRoZSBzZWdtZW50XG4gICAgY29uc3QgdHJhY2VyID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcbiAgICB0cmFjZXIudmlzaWJsZSA9IGZhbHNlO1xuICAgIHNjZW5lLmFkZCh0cmFjZXIpO1xuICAgIHRyYWNlcnMucHVzaCh0cmFjZXIpO1xuICB9XG5cbiAgbGV0IGFjdGl2ZVRyYWNlckluZGV4ID0gMDsgLy8gRm9yIGN5Y2xpbmcgdGhyb3VnaCBwb29sXG5cbiAgZnVuY3Rpb24gdXBkYXRlKHN0YXRlOiBHYXRsaW5nU3RhdGUpIHtcbiAgICAvLyAxLiBVcGRhdGUgZXhpc3RpbmcgdHJhY2VyczogTW92ZSBmb3J3YXJkLCBmYWRlLCBhbmQgaGlkZSBleHBpcmVkIG9uZXMuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS50cmFjZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB0cmFjZXJTdGF0ZSA9IHN0YXRlLnRyYWNlcnNbaV07XG4gICAgICBjb25zdCB0cmFjZXJNZXNoID0gdHJhY2Vyc1thY3RpdmVUcmFjZXJJbmRleF07XG4gICAgICBhY3RpdmVUcmFjZXJJbmRleCA9IChhY3RpdmVUcmFjZXJJbmRleCArIDEpICUgb3B0aW9ucy5tYXhUcmFjZXJzO1xuXG4gICAgICBpZiAodHJhY2VyU3RhdGUubGlmZU1zIDw9IDApIHtcbiAgICAgICAgdHJhY2VyTWVzaC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBUTVBfRElSRUNUSU9OLmNvcHkodHJhY2VyU3RhdGUuZGlyZWN0aW9uKS5ub3JtYWxpemUoKTtcbiAgICAgIHRyYWNlck1lc2gudmlzaWJsZSA9IHRydWU7XG5cbiAgICAgIC8vIDIuIFBvc2l0aW9uOiBTdGFydCBhdCBvcmlnaW4sIGFkdmFuY2UgYmFzZWQgb24gZWxhcHNlZCB0aW1lLlxuICAgICAgY29uc3QgZWxhcHNlZCA9IChvcHRpb25zLnRyYWNlckxpZmVNcyAtIHRyYWNlclN0YXRlLmxpZmVNcykgLyAxMDAwOyAvLyBTZWMgc2luY2Ugc3Bhd25cbiAgICAgIFRNUF9QT1NJVElPTi5jb3B5KHRyYWNlclN0YXRlLm9yaWdpbikuYWRkU2NhbGVkVmVjdG9yKFRNUF9ESVJFQ1RJT04sIHRyYWNlclNwZWVkICogZWxhcHNlZCk7XG4gICAgICB0cmFjZXJNZXNoLnBvc2l0aW9uLmNvcHkoVE1QX1BPU0lUSU9OKTtcblxuICAgICAgLy8gMy4gT3JpZW50IHRvIGRpcmVjdGlvbi5cbiAgICAgIFRNUF9RVUFURVJOSU9OLnNldEZyb21Vbml0VmVjdG9ycyhERUZBVUxUX0ZPUldBUkQsIFRNUF9ESVJFQ1RJT04pO1xuICAgICAgdHJhY2VyTWVzaC5xdWF0ZXJuaW9uLmNvcHkoVE1QX1FVQVRFUk5JT04pO1xuXG4gICAgICAvLyA0LiBGYWRlIG9wYWNpdHkgb3ZlciBsaWZlLlxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSAxIC0gKHRyYWNlclN0YXRlLmxpZmVNcyAvIG9wdGlvbnMudHJhY2VyTGlmZU1zKTtcbiAgICAgICh0cmFjZXJNZXNoLm1hdGVyaWFsIGFzIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKS5vcGFjaXR5ID0gMC44ICogKDEgLSBwcm9ncmVzcyk7XG5cbiAgICAgIC8vIE9wdGlvbmFsOiBNb2R1bGF0ZSBmb3IgaGVhdCAoZ2xvYmFsIG92ZXJoZWF0IHRpbnQpLlxuICAgICAgaWYgKHN0YXRlLm92ZXJoZWF0ZWQgJiYgcGFsZXR0ZS5oZWF0Q29sb3IpIHtcbiAgICAgICAgKHRyYWNlck1lc2gubWF0ZXJpYWwgYXMgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwpLmNvbG9yLnNldEhleChwYWxldHRlLmhlYXRDb2xvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAodHJhY2VyTWVzaC5tYXRlcmlhbCBhcyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCkuY29sb3Iuc2V0SGV4KHBhbGV0dGUudHJhY2VyQ29sb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhpZGUgdW51c2VkIHRyYWNlcnMuXG4gICAgZm9yIChsZXQgaSA9IHN0YXRlLnRyYWNlcnMubGVuZ3RoOyBpIDwgb3B0aW9ucy5tYXhUcmFjZXJzOyBpKyspIHtcbiAgICAgIHRyYWNlcnNbaSAlIG9wdGlvbnMubWF4VHJhY2Vyc10udmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgLy8gNS4gUmVsZWFzZSBHUFUgYnVmZmVycyB3aGVuIHRoZSBvd25pbmcgZW50aXR5IGRlc3Bhd25zIHRvIHByZXZlbnQgbGVha3MuXG4gICAgdHJhY2Vycy5mb3JFYWNoKHRyYWNlciA9PiB7XG4gICAgICBzY2VuZS5yZW1vdmUodHJhY2VyKTtcbiAgICAgIHRyYWNlci5nZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgICB0cmFjZXIubWF0ZXJpYWwuZGlzcG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHsgdXBkYXRlLCBkaXNwb3NlLCB0cmFjZXJzIH07XG59Il0sIm5hbWVzIjpbIlRIUkVFIiwiREVGQVVMVF9GT1JXQVJEIiwiVmVjdG9yMyIsIlRNUF9ESVJFQ1RJT04iLCJUTVBfUE9TSVRJT04iLCJUTVBfUVVBVEVSTklPTiIsIlF1YXRlcm5pb24iLCJjcmVhdGVHYXRsaW5nU3lzdGVtIiwib3B0aW9ucyIsInN0YXRlIiwiYW1tbyIsImhlYXQiLCJvdmVyaGVhdGVkIiwidHJhY2VycyIsImFjY3VtdWxhdG9yIiwidHJhY2VySWQiLCJzcGF3blRyYWNlciIsImNvbnRleHQiLCJ0cmFjZXIiLCJpZCIsIm9yaWdpbiIsInBvc2l0aW9uIiwiY2xvbmUiLCJkaXJlY3Rpb24iLCJmb3J3YXJkIiwibGlmZU1zIiwidHJhY2VyTGlmZU1zIiwic2VlZCIsInlhdyIsIk1hdGgiLCJzaW4iLCJzcHJlYWQiLCJwaXRjaCIsInJvdGF0aW9uIiwiRXVsZXIiLCJhcHBseUV1bGVyIiwibm9ybWFsaXplIiwibGVuZ3RoIiwibWF4VHJhY2VycyIsInNoaWZ0IiwicHVzaCIsImNvb2xEb3duIiwiZHQiLCJtYXgiLCJjb29sUmF0ZSIsIm92ZXJoZWF0VGhyZXNob2xkIiwidXBkYXRlIiwidHJpZ2dlckhlbGQiLCJpIiwic3BsaWNlIiwic2hvdHMiLCJmaXJlUmF0ZSIsImhlYXRQZXJTaG90IiwiY3JlYXRlR2F0bGluZ1Zpc3VhbCIsInNjZW5lIiwicGFsZXR0ZSIsInRyYWNlckNvbG9yIiwidHJhY2VyU3BlZWQiLCJ0cmFjZXJMZW5ndGgiLCJtYXRlcmlhbCIsIk1lc2hCYXNpY01hdGVyaWFsIiwiY29sb3IiLCJ0cmFuc3BhcmVudCIsIm9wYWNpdHkiLCJibGVuZGluZyIsIkFkZGl0aXZlQmxlbmRpbmciLCJkZXB0aFdyaXRlIiwiZ2VvbWV0cnkiLCJCb3hHZW9tZXRyeSIsInRyYW5zbGF0ZSIsIk1lc2giLCJ2aXNpYmxlIiwiYWRkIiwiYWN0aXZlVHJhY2VySW5kZXgiLCJ0cmFjZXJTdGF0ZSIsInRyYWNlck1lc2giLCJjb3B5IiwiZWxhcHNlZCIsImFkZFNjYWxlZFZlY3RvciIsInNldEZyb21Vbml0VmVjdG9ycyIsInF1YXRlcm5pb24iLCJwcm9ncmVzcyIsImhlYXRDb2xvciIsInNldEhleCIsImRpc3Bvc2UiLCJmb3JFYWNoIiwicmVtb3ZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/weapons/gatling.ts\n");

/***/ }),

/***/ "(ssr)/./src/weapons/meteorMissile.ts":
/*!**************************************!*\
  !*** ./src/weapons/meteorMissile.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMeteorMissileSystem: () => (/* binding */ createMeteorMissileSystem)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nconst WORLD_UP = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 1, 0);\nconst NAV_EPSILON = 0.0001;\nconst IMPACT_LIFETIME_MS = 4000;\nfunction createMeteorMissileSystem(options) {\n    const missiles = [];\n    const impacts = [];\n    let ammo = options.ammo;\n    let cooldownMs = 0;\n    let idCounter = 0;\n    let clearanceDistance = Math.max(1, options.clearanceDistance ?? 12);\n    const swayAmplitude = options.swayAmplitude ?? 20;\n    const swayFrequency = options.swayFrequency ?? 1.1;\n    const forwardTmp = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const los = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const relVel = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const navAccel = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const toTarget = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const right = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const sway = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    //1.- Sort every live contact that sits ahead of the shooter so rails see the full stack of threats.\n    function acquireFrontTargets(context, origin) {\n        const ranked = [];\n        for (const candidate of context.targets){\n            if (!candidate.alive) continue;\n            toTarget.copy(candidate.position).sub(origin);\n            const distance = toTarget.length();\n            if (distance < NAV_EPSILON) continue;\n            toTarget.normalize();\n            if (toTarget.dot(context.forward) <= 0) continue;\n            ranked.push({\n                target: candidate,\n                distance\n            });\n        }\n        ranked.sort((a, b)=>a.distance - b.distance);\n        return ranked.map((entry)=>entry.target);\n    }\n    function refreshSwayAxis(missile) {\n        missile.swayAxis.copy(missile.referenceForward).cross(WORLD_UP);\n        if (missile.swayAxis.lengthSq() < NAV_EPSILON) {\n            missile.swayAxis.set(1, 0, 0);\n        }\n        missile.swayAxis.normalize();\n    }\n    function igniteMissile(missile, context) {\n        missile.stage = 'burning';\n        missile.stageMs = 0;\n        missile.swayTime = 0;\n        const ranked = acquireFrontTargets(context, missile.position);\n        const target = ranked[0] ?? null;\n        missile.targetId = target?.id ?? null;\n        if (target) {\n            los.copy(target.position).sub(missile.position);\n            if (los.lengthSq() > NAV_EPSILON) {\n                los.normalize();\n                missile.velocity.copy(los).multiplyScalar(options.burnSpeed);\n                missile.referenceForward.copy(los);\n            }\n        } else {\n            missile.velocity.copy(missile.referenceForward).multiplyScalar(options.burnSpeed);\n        }\n        refreshSwayAxis(missile);\n    }\n    function registerImpact(missile, target) {\n        if (target) {\n            target.alive = false;\n            target.onFire = true;\n            target.falling = true;\n            target.velocity.y = Math.min(target.velocity.y, -options.burnSpeed * 0.25);\n        }\n        impacts.push({\n            id: missile.id,\n            targetId: target?.id ?? null,\n            center: missile.position.clone(),\n            ageMs: 0\n        });\n        if (impacts.length > 24) {\n            impacts.splice(0, impacts.length - 24);\n        }\n    }\n    function detonate(index) {\n        missiles.splice(index, 1);\n    }\n    function update(context) {\n        //2.- Reduce cooldown and age explosion decals so follow-up salvos stay in sync with HUD timers.\n        if (cooldownMs > 0) {\n            cooldownMs = Math.max(0, cooldownMs - context.dt * 1000);\n        }\n        for(let i = impacts.length - 1; i >= 0; i--){\n            const impact = impacts[i];\n            impact.ageMs += context.dt * 1000;\n            if (impact.ageMs > IMPACT_LIFETIME_MS) {\n                impacts.splice(i, 1);\n            }\n        }\n        for(let i = missiles.length - 1; i >= 0; i--){\n            const missile = missiles[i];\n            missile.lifetimeMs += context.dt * 1000;\n            missile.stageMs += context.dt * 1000;\n            if (missile.lifetimeMs > options.maxLifetimeMs) {\n                detonate(i);\n                continue;\n            }\n            if (missile.stage === 'ejecting') {\n                const travel = options.ejectionSpeed * context.dt;\n                missile.position.addScaledVector(missile.ejectionDirection, travel);\n                missile.velocity.copy(missile.ejectionDirection).multiplyScalar(options.ejectionSpeed);\n                missile.ejectionTravel += travel;\n                if (missile.ejectionTravel >= clearanceDistance || missile.stageMs >= options.ejectionDurationMs) {\n                    igniteMissile(missile, context);\n                }\n            } else {\n                missile.swayTime += context.dt;\n                let target = context.targets.find((t)=>t.id === missile.targetId && t.alive) ?? null;\n                if (!target) {\n                    const ranked = acquireFrontTargets(context, missile.position);\n                    target = ranked[0] ?? null;\n                    missile.targetId = target?.id ?? null;\n                }\n                let hasTarget = false;\n                if (target) {\n                    los.copy(target.position).sub(missile.position);\n                    const distance = los.length();\n                    if (distance < options.detonationRadius) {\n                        registerImpact(missile, target);\n                        detonate(i);\n                        continue;\n                    }\n                    los.normalize();\n                    relVel.copy(target.velocity).sub(missile.velocity);\n                    navAccel.copy(relVel.cross(los).cross(los)).multiplyScalar(options.navigationConstant);\n                    missile.velocity.addScaledVector(navAccel, context.dt);\n                    hasTarget = true;\n                }\n                missile.referenceForward.copy(missile.velocity).normalize();\n                refreshSwayAxis(missile);\n                if (hasTarget) {\n                    const phase = Math.sin(missile.swayTime * swayFrequency * Math.PI * 2);\n                    sway.copy(missile.swayAxis).multiplyScalar(phase * swayAmplitude * context.dt);\n                    missile.velocity.add(sway);\n                    missile.velocity.setLength(options.burnSpeed);\n                } else {\n                    missile.velocity.copy(missile.referenceForward).multiplyScalar(options.burnSpeed);\n                }\n            }\n            missile.position.addScaledVector(missile.velocity, context.dt);\n            if (missile.stage === 'burning') {\n                for (const candidate of context.targets){\n                    if (!candidate.alive) continue;\n                    const distance = candidate.position.distanceTo(missile.position);\n                    if (distance < options.detonationRadius) {\n                        registerImpact(missile, candidate);\n                        detonate(i);\n                        break;\n                    }\n                }\n                if (!missiles[i]) continue;\n            }\n            missile.smokeAccumulatorMs += context.dt * 1000;\n            const shouldEmit = missile.stage === 'burning';\n            if (shouldEmit && missile.smokeAccumulatorMs >= options.smokeTrailIntervalMs) {\n                //3.- Drop contrail markers to draw the powered flight path with a simple line strip.\n                missile.smokeAccumulatorMs = 0;\n                missile.smokeTrail.push(missile.position.clone());\n                if (missile.smokeTrail.length > 32) {\n                    missile.smokeTrail.shift();\n                }\n            }\n        }\n    }\n    function tryFire(context) {\n        if (ammo <= 0) return {\n            fired: false,\n            reason: 'empty'\n        };\n        if (cooldownMs > 0) return {\n            fired: false,\n            reason: 'cooldown'\n        };\n        if (missiles.length >= options.maxConcurrent) return {\n            fired: false,\n            reason: 'pool'\n        };\n        forwardTmp.copy(context.forward);\n        if (forwardTmp.lengthSq() < NAV_EPSILON) {\n            forwardTmp.set(0, 0, -1);\n        }\n        forwardTmp.normalize();\n        right.copy(forwardTmp).cross(WORLD_UP);\n        if (right.lengthSq() < NAV_EPSILON) {\n            right.set(1, 0, 0);\n        }\n        right.normalize();\n        const missile = {\n            id: ++idCounter,\n            position: context.position.clone().addScaledVector(right, clearanceDistance * 0.6),\n            velocity: forwardTmp.clone().multiplyScalar(options.ejectionSpeed),\n            targetId: null,\n            lifetimeMs: 0,\n            smokeTrail: [],\n            smokeAccumulatorMs: 0,\n            stage: 'ejecting',\n            stageMs: 0,\n            referenceForward: forwardTmp.clone(),\n            ejectionDirection: forwardTmp.clone(),\n            ejectionTravel: 0,\n            swayTime: 0,\n            swayAxis: right.clone()\n        };\n        missiles.push(missile);\n        ammo -= 1;\n        cooldownMs = options.cooldownMs;\n        return {\n            fired: true,\n            missile\n        };\n    }\n    function setLauncherClearance(distance) {\n        clearanceDistance = Math.max(1, distance);\n    }\n    return {\n        update,\n        tryFire,\n        setLauncherClearance,\n        get ammo () {\n            return ammo;\n        },\n        get cooldownMs () {\n            return cooldownMs;\n        },\n        get activeCount () {\n            return missiles.length;\n        },\n        get missiles () {\n            return missiles;\n        },\n        get impacts () {\n            return impacts;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvd2VhcG9ucy9tZXRlb3JNaXNzaWxlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCO0FBRzlCLE1BQU1DLFdBQVcsSUFBSUQsMENBQWEsQ0FBQyxHQUFHLEdBQUc7QUFDekMsTUFBTUcsY0FBYztBQUNwQixNQUFNQyxxQkFBcUI7QUFnRHBCLFNBQVNDLDBCQUEwQkMsT0FBNkI7SUFDckUsTUFBTUMsV0FBaUMsRUFBRTtJQUN6QyxNQUFNQyxVQUFpQyxFQUFFO0lBQ3pDLElBQUlDLE9BQU9ILFFBQVFHLElBQUk7SUFDdkIsSUFBSUMsYUFBYTtJQUNqQixJQUFJQyxZQUFZO0lBQ2hCLElBQUlDLG9CQUFvQkMsS0FBS0MsR0FBRyxDQUFDLEdBQUdSLFFBQVFNLGlCQUFpQixJQUFJO0lBQ2pFLE1BQU1HLGdCQUFnQlQsUUFBUVMsYUFBYSxJQUFJO0lBQy9DLE1BQU1DLGdCQUFnQlYsUUFBUVUsYUFBYSxJQUFJO0lBRS9DLE1BQU1DLGFBQWEsSUFBSWpCLDBDQUFhO0lBQ3BDLE1BQU1rQixNQUFNLElBQUlsQiwwQ0FBYTtJQUM3QixNQUFNbUIsU0FBUyxJQUFJbkIsMENBQWE7SUFDaEMsTUFBTW9CLFdBQVcsSUFBSXBCLDBDQUFhO0lBQ2xDLE1BQU1xQixXQUFXLElBQUlyQiwwQ0FBYTtJQUNsQyxNQUFNc0IsUUFBUSxJQUFJdEIsMENBQWE7SUFDL0IsTUFBTXVCLE9BQU8sSUFBSXZCLDBDQUFhO0lBSTlCLG9HQUFvRztJQUNwRyxTQUFTd0Isb0JBQW9CQyxPQUFzQixFQUFFQyxNQUFxQjtRQUN4RSxNQUFNQyxTQUF5QixFQUFFO1FBQ2pDLEtBQUssTUFBTUMsYUFBYUgsUUFBUUksT0FBTyxDQUFDO1lBQ3RDLElBQUksQ0FBQ0QsVUFBVUUsS0FBSyxFQUFFO1lBQ3RCVCxTQUFTVSxJQUFJLENBQUNILFVBQVVJLFFBQVEsRUFBRUMsR0FBRyxDQUFDUDtZQUN0QyxNQUFNUSxXQUFXYixTQUFTYyxNQUFNO1lBQ2hDLElBQUlELFdBQVcvQixhQUFhO1lBQzVCa0IsU0FBU2UsU0FBUztZQUNsQixJQUFJZixTQUFTZ0IsR0FBRyxDQUFDWixRQUFRYSxPQUFPLEtBQUssR0FBRztZQUN4Q1gsT0FBT1ksSUFBSSxDQUFDO2dCQUFFQyxRQUFRWjtnQkFBV007WUFBUztRQUM1QztRQUNBUCxPQUFPYyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRVIsUUFBUSxHQUFHUyxFQUFFVCxRQUFRO1FBQzdDLE9BQU9QLE9BQU9pQixHQUFHLENBQUNDLENBQUFBLFFBQVNBLE1BQU1MLE1BQU07SUFDekM7SUFFQSxTQUFTTSxnQkFBZ0JDLE9BQTJCO1FBQ2xEQSxRQUFRQyxRQUFRLENBQUNqQixJQUFJLENBQUNnQixRQUFRRSxnQkFBZ0IsRUFBRUMsS0FBSyxDQUFDakQ7UUFDdEQsSUFBSThDLFFBQVFDLFFBQVEsQ0FBQ0csUUFBUSxLQUFLaEQsYUFBWTtZQUM1QzRDLFFBQVFDLFFBQVEsQ0FBQ0ksR0FBRyxDQUFDLEdBQUcsR0FBRztRQUM3QjtRQUNBTCxRQUFRQyxRQUFRLENBQUNaLFNBQVM7SUFDNUI7SUFFQSxTQUFTaUIsY0FBY04sT0FBMkIsRUFBRXRCLE9BQXNCO1FBQ3hFc0IsUUFBUU8sS0FBSyxHQUFHO1FBQ2hCUCxRQUFRUSxPQUFPLEdBQUc7UUFDbEJSLFFBQVFTLFFBQVEsR0FBRztRQUNuQixNQUFNN0IsU0FBU0gsb0JBQW9CQyxTQUFTc0IsUUFBUWYsUUFBUTtRQUM1RCxNQUFNUSxTQUFTYixNQUFNLENBQUMsRUFBRSxJQUFJO1FBQzVCb0IsUUFBUVUsUUFBUSxHQUFHakIsUUFBUWtCLE1BQU07UUFDakMsSUFBSWxCLFFBQU87WUFDVHRCLElBQUlhLElBQUksQ0FBQ1MsT0FBT1IsUUFBUSxFQUFFQyxHQUFHLENBQUNjLFFBQVFmLFFBQVE7WUFDOUMsSUFBSWQsSUFBSWlDLFFBQVEsS0FBS2hELGFBQVk7Z0JBQy9CZSxJQUFJa0IsU0FBUztnQkFDYlcsUUFBUVksUUFBUSxDQUFDNUIsSUFBSSxDQUFDYixLQUFLMEMsY0FBYyxDQUFDdEQsUUFBUXVELFNBQVM7Z0JBQzNEZCxRQUFRRSxnQkFBZ0IsQ0FBQ2xCLElBQUksQ0FBQ2I7WUFDaEM7UUFDRixPQUFPO1lBQ0w2QixRQUFRWSxRQUFRLENBQUM1QixJQUFJLENBQUNnQixRQUFRRSxnQkFBZ0IsRUFBRVcsY0FBYyxDQUFDdEQsUUFBUXVELFNBQVM7UUFDbEY7UUFDQWYsZ0JBQWdCQztJQUNsQjtJQUVBLFNBQVNlLGVBQWVmLE9BQTJCLEVBQUVQLE1BQTJCO1FBQzlFLElBQUlBLFFBQU87WUFDVEEsT0FBT1YsS0FBSyxHQUFHO1lBQ2ZVLE9BQU91QixNQUFNLEdBQUc7WUFDaEJ2QixPQUFPd0IsT0FBTyxHQUFHO1lBQ2pCeEIsT0FBT21CLFFBQVEsQ0FBQ00sQ0FBQyxHQUFHcEQsS0FBS3FELEdBQUcsQ0FBQzFCLE9BQU9tQixRQUFRLENBQUNNLENBQUMsRUFBRSxDQUFDM0QsUUFBUXVELFNBQVMsR0FBRztRQUN2RTtRQUNBckQsUUFBUStCLElBQUksQ0FBQztZQUNYbUIsSUFBSVgsUUFBUVcsRUFBRTtZQUNkRCxVQUFVakIsUUFBUWtCLE1BQU07WUFDeEJTLFFBQVFwQixRQUFRZixRQUFRLENBQUNvQyxLQUFLO1lBQzlCQyxPQUFPO1FBQ1Q7UUFDQSxJQUFJN0QsUUFBUTJCLE1BQU0sR0FBRyxJQUFHO1lBQ3RCM0IsUUFBUThELE1BQU0sQ0FBQyxHQUFHOUQsUUFBUTJCLE1BQU0sR0FBRztRQUNyQztJQUNGO0lBRUEsU0FBU29DLFNBQVNDLEtBQWE7UUFDN0JqRSxTQUFTK0QsTUFBTSxDQUFDRSxPQUFPO0lBQ3pCO0lBRUEsU0FBU0MsT0FBT2hELE9BQXNCO1FBQ3BDLGdHQUFnRztRQUNoRyxJQUFJZixhQUFhLEdBQUU7WUFDakJBLGFBQWFHLEtBQUtDLEdBQUcsQ0FBQyxHQUFHSixhQUFhZSxRQUFRaUQsRUFBRSxHQUFHO1FBQ3JEO1FBQ0EsSUFBSyxJQUFJQyxJQUFJbkUsUUFBUTJCLE1BQU0sR0FBRyxHQUFHd0MsS0FBSyxHQUFHQSxJQUFJO1lBQzNDLE1BQU1DLFNBQVNwRSxPQUFPLENBQUNtRSxFQUFFO1lBQ3pCQyxPQUFPUCxLQUFLLElBQUk1QyxRQUFRaUQsRUFBRSxHQUFHO1lBQzdCLElBQUlFLE9BQU9QLEtBQUssR0FBR2pFLG9CQUFtQjtnQkFDcENJLFFBQVE4RCxNQUFNLENBQUNLLEdBQUc7WUFDcEI7UUFDRjtRQUVBLElBQUssSUFBSUEsSUFBSXBFLFNBQVM0QixNQUFNLEdBQUcsR0FBR3dDLEtBQUssR0FBR0EsSUFBSTtZQUM1QyxNQUFNNUIsVUFBVXhDLFFBQVEsQ0FBQ29FLEVBQUU7WUFDM0I1QixRQUFROEIsVUFBVSxJQUFJcEQsUUFBUWlELEVBQUUsR0FBRztZQUNuQzNCLFFBQVFRLE9BQU8sSUFBSTlCLFFBQVFpRCxFQUFFLEdBQUc7WUFFaEMsSUFBSTNCLFFBQVE4QixVQUFVLEdBQUd2RSxRQUFRd0UsYUFBYSxFQUFDO2dCQUM3Q1AsU0FBU0k7Z0JBQ1Q7WUFDRjtZQUVBLElBQUk1QixRQUFRTyxLQUFLLEtBQUssWUFBVztnQkFDL0IsTUFBTXlCLFNBQVN6RSxRQUFRMEUsYUFBYSxHQUFHdkQsUUFBUWlELEVBQUU7Z0JBQ2pEM0IsUUFBUWYsUUFBUSxDQUFDaUQsZUFBZSxDQUFDbEMsUUFBUW1DLGlCQUFpQixFQUFFSDtnQkFDNURoQyxRQUFRWSxRQUFRLENBQUM1QixJQUFJLENBQUNnQixRQUFRbUMsaUJBQWlCLEVBQUV0QixjQUFjLENBQUN0RCxRQUFRMEUsYUFBYTtnQkFDckZqQyxRQUFRb0MsY0FBYyxJQUFJSjtnQkFDMUIsSUFBSWhDLFFBQVFvQyxjQUFjLElBQUl2RSxxQkFBcUJtQyxRQUFRUSxPQUFPLElBQUlqRCxRQUFROEUsa0JBQWtCLEVBQUM7b0JBQy9GL0IsY0FBY04sU0FBU3RCO2dCQUN6QjtZQUNGLE9BQU87Z0JBQ0xzQixRQUFRUyxRQUFRLElBQUkvQixRQUFRaUQsRUFBRTtnQkFDOUIsSUFBSWxDLFNBQVNmLFFBQVFJLE9BQU8sQ0FBQ3dELElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRTVCLEVBQUUsS0FBS1gsUUFBUVUsUUFBUSxJQUFJNkIsRUFBRXhELEtBQUssS0FBSztnQkFDaEYsSUFBSSxDQUFDVSxRQUFPO29CQUNWLE1BQU1iLFNBQVNILG9CQUFvQkMsU0FBU3NCLFFBQVFmLFFBQVE7b0JBQzVEUSxTQUFTYixNQUFNLENBQUMsRUFBRSxJQUFJO29CQUN0Qm9CLFFBQVFVLFFBQVEsR0FBR2pCLFFBQVFrQixNQUFNO2dCQUNuQztnQkFFQSxJQUFJNkIsWUFBWTtnQkFDaEIsSUFBSS9DLFFBQU87b0JBQ1R0QixJQUFJYSxJQUFJLENBQUNTLE9BQU9SLFFBQVEsRUFBRUMsR0FBRyxDQUFDYyxRQUFRZixRQUFRO29CQUM5QyxNQUFNRSxXQUFXaEIsSUFBSWlCLE1BQU07b0JBQzNCLElBQUlELFdBQVc1QixRQUFRa0YsZ0JBQWdCLEVBQUM7d0JBQ3RDMUIsZUFBZWYsU0FBU1A7d0JBQ3hCK0IsU0FBU0k7d0JBQ1Q7b0JBQ0Y7b0JBQ0F6RCxJQUFJa0IsU0FBUztvQkFDYmpCLE9BQU9ZLElBQUksQ0FBQ1MsT0FBT21CLFFBQVEsRUFBRTFCLEdBQUcsQ0FBQ2MsUUFBUVksUUFBUTtvQkFDakR2QyxTQUFTVyxJQUFJLENBQUNaLE9BQU8rQixLQUFLLENBQUNoQyxLQUFLZ0MsS0FBSyxDQUFDaEMsTUFBTTBDLGNBQWMsQ0FBQ3RELFFBQVFtRixrQkFBa0I7b0JBQ3JGMUMsUUFBUVksUUFBUSxDQUFDc0IsZUFBZSxDQUFDN0QsVUFBVUssUUFBUWlELEVBQUU7b0JBQ3JEYSxZQUFZO2dCQUNkO2dCQUVBeEMsUUFBUUUsZ0JBQWdCLENBQUNsQixJQUFJLENBQUNnQixRQUFRWSxRQUFRLEVBQUV2QixTQUFTO2dCQUN6RFUsZ0JBQWdCQztnQkFDaEIsSUFBSXdDLFdBQVU7b0JBQ1osTUFBTUcsUUFBUTdFLEtBQUs4RSxHQUFHLENBQUM1QyxRQUFRUyxRQUFRLEdBQUd4QyxnQkFBZ0JILEtBQUsrRSxFQUFFLEdBQUc7b0JBQ3BFckUsS0FBS1EsSUFBSSxDQUFDZ0IsUUFBUUMsUUFBUSxFQUFFWSxjQUFjLENBQUM4QixRQUFRM0UsZ0JBQWdCVSxRQUFRaUQsRUFBRTtvQkFDN0UzQixRQUFRWSxRQUFRLENBQUNrQyxHQUFHLENBQUN0RTtvQkFDckJ3QixRQUFRWSxRQUFRLENBQUNtQyxTQUFTLENBQUN4RixRQUFRdUQsU0FBUztnQkFDOUMsT0FBTztvQkFDTGQsUUFBUVksUUFBUSxDQUFDNUIsSUFBSSxDQUFDZ0IsUUFBUUUsZ0JBQWdCLEVBQUVXLGNBQWMsQ0FBQ3RELFFBQVF1RCxTQUFTO2dCQUNsRjtZQUNGO1lBRUFkLFFBQVFmLFFBQVEsQ0FBQ2lELGVBQWUsQ0FBQ2xDLFFBQVFZLFFBQVEsRUFBRWxDLFFBQVFpRCxFQUFFO1lBRTdELElBQUkzQixRQUFRTyxLQUFLLEtBQUssV0FBVTtnQkFDOUIsS0FBSyxNQUFNMUIsYUFBYUgsUUFBUUksT0FBTyxDQUFDO29CQUN0QyxJQUFJLENBQUNELFVBQVVFLEtBQUssRUFBRTtvQkFDdEIsTUFBTUksV0FBV04sVUFBVUksUUFBUSxDQUFDK0QsVUFBVSxDQUFDaEQsUUFBUWYsUUFBUTtvQkFDL0QsSUFBSUUsV0FBVzVCLFFBQVFrRixnQkFBZ0IsRUFBQzt3QkFDdEMxQixlQUFlZixTQUFTbkI7d0JBQ3hCMkMsU0FBU0k7d0JBQ1Q7b0JBQ0Y7Z0JBQ0Y7Z0JBQ0EsSUFBSSxDQUFDcEUsUUFBUSxDQUFDb0UsRUFBRSxFQUFFO1lBQ3BCO1lBRUE1QixRQUFRaUQsa0JBQWtCLElBQUl2RSxRQUFRaUQsRUFBRSxHQUFHO1lBQzNDLE1BQU11QixhQUFhbEQsUUFBUU8sS0FBSyxLQUFLO1lBQ3JDLElBQUkyQyxjQUFjbEQsUUFBUWlELGtCQUFrQixJQUFJMUYsUUFBUTRGLG9CQUFvQixFQUFDO2dCQUMzRSxxRkFBcUY7Z0JBQ3JGbkQsUUFBUWlELGtCQUFrQixHQUFHO2dCQUM3QmpELFFBQVFvRCxVQUFVLENBQUM1RCxJQUFJLENBQUNRLFFBQVFmLFFBQVEsQ0FBQ29DLEtBQUs7Z0JBQzlDLElBQUlyQixRQUFRb0QsVUFBVSxDQUFDaEUsTUFBTSxHQUFHLElBQUc7b0JBQ2pDWSxRQUFRb0QsVUFBVSxDQUFDQyxLQUFLO2dCQUMxQjtZQUNGO1FBQ0Y7SUFDRjtJQUVBLFNBQVNDLFFBQVE1RSxPQUFzQjtRQUNyQyxJQUFJaEIsUUFBUSxHQUFHLE9BQU87WUFBRTZGLE9BQU87WUFBT0MsUUFBUTtRQUFRO1FBQ3RELElBQUk3RixhQUFhLEdBQUcsT0FBTztZQUFFNEYsT0FBTztZQUFPQyxRQUFRO1FBQVc7UUFDOUQsSUFBSWhHLFNBQVM0QixNQUFNLElBQUk3QixRQUFRa0csYUFBYSxFQUFFLE9BQU87WUFBRUYsT0FBTztZQUFPQyxRQUFRO1FBQU87UUFFcEZ0RixXQUFXYyxJQUFJLENBQUNOLFFBQVFhLE9BQU87UUFDL0IsSUFBSXJCLFdBQVdrQyxRQUFRLEtBQUtoRCxhQUFZO1lBQ3RDYyxXQUFXbUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQ3hCO1FBQ0FuQyxXQUFXbUIsU0FBUztRQUNwQmQsTUFBTVMsSUFBSSxDQUFDZCxZQUFZaUMsS0FBSyxDQUFDakQ7UUFDN0IsSUFBSXFCLE1BQU02QixRQUFRLEtBQUtoRCxhQUFZO1lBQ2pDbUIsTUFBTThCLEdBQUcsQ0FBQyxHQUFHLEdBQUc7UUFDbEI7UUFDQTlCLE1BQU1jLFNBQVM7UUFFZixNQUFNVyxVQUE4QjtZQUNsQ1csSUFBSSxFQUFFL0M7WUFDTnFCLFVBQVVQLFFBQVFPLFFBQVEsQ0FBQ29DLEtBQUssR0FBR2EsZUFBZSxDQUFDM0QsT0FBT1Ysb0JBQW9CO1lBQzlFK0MsVUFBVTFDLFdBQVdtRCxLQUFLLEdBQUdSLGNBQWMsQ0FBQ3RELFFBQVEwRSxhQUFhO1lBQ2pFdkIsVUFBVTtZQUNWb0IsWUFBWTtZQUNac0IsWUFBWSxFQUFFO1lBQ2RILG9CQUFvQjtZQUNwQjFDLE9BQU87WUFDUEMsU0FBUztZQUNUTixrQkFBa0JoQyxXQUFXbUQsS0FBSztZQUNsQ2MsbUJBQW1CakUsV0FBV21ELEtBQUs7WUFDbkNlLGdCQUFnQjtZQUNoQjNCLFVBQVU7WUFDVlIsVUFBVTFCLE1BQU04QyxLQUFLO1FBQ3ZCO1FBRUE3RCxTQUFTZ0MsSUFBSSxDQUFDUTtRQUNkdEMsUUFBUTtRQUNSQyxhQUFhSixRQUFRSSxVQUFVO1FBQy9CLE9BQU87WUFBRTRGLE9BQU87WUFBTXZEO1FBQVE7SUFDaEM7SUFFQSxTQUFTMEQscUJBQXFCdkUsUUFBZ0I7UUFDNUN0QixvQkFBb0JDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHb0I7SUFDbEM7SUFFQSxPQUFPO1FBQ0x1QztRQUNBNEI7UUFDQUk7UUFDQSxJQUFJaEcsUUFBTTtZQUFFLE9BQU9BO1FBQUs7UUFDeEIsSUFBSUMsY0FBWTtZQUFFLE9BQU9BO1FBQVc7UUFDcEMsSUFBSWdHLGVBQWE7WUFBRSxPQUFPbkcsU0FBUzRCLE1BQU07UUFBQztRQUMxQyxJQUFJNUIsWUFBVTtZQUFFLE9BQU9BO1FBQVM7UUFDaEMsSUFBSUMsV0FBUztZQUFFLE9BQU9BO1FBQVE7SUFDaEM7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvd2VhcG9ucy9tZXRlb3JNaXNzaWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgV2VhcG9uQ29udGV4dCwgV2VhcG9uVGFyZ2V0IH0gZnJvbSAnQC93ZWFwb25zL3R5cGVzJ1xuXG5jb25zdCBXT1JMRF9VUCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApXG5jb25zdCBOQVZfRVBTSUxPTiA9IDAuMDAwMVxuY29uc3QgSU1QQUNUX0xJRkVUSU1FX01TID0gNDAwMFxuXG5leHBvcnQgdHlwZSBNZXRlb3JNaXNzaWxlT3B0aW9ucyA9IHtcbiAgbWF4Q29uY3VycmVudDogbnVtYmVyXG4gIGNvb2xkb3duTXM6IG51bWJlclxuICBhbW1vOiBudW1iZXJcbiAgZWplY3Rpb25EdXJhdGlvbk1zOiBudW1iZXJcbiAgZWplY3Rpb25TcGVlZDogbnVtYmVyXG4gIGJ1cm5TcGVlZDogbnVtYmVyXG4gIG5hdmlnYXRpb25Db25zdGFudDogbnVtYmVyXG4gIGRldG9uYXRpb25SYWRpdXM6IG51bWJlclxuICBzbW9rZVRyYWlsSW50ZXJ2YWxNczogbnVtYmVyXG4gIG1heExpZmV0aW1lTXM6IG51bWJlclxuICBjbGVhcmFuY2VEaXN0YW5jZT86IG51bWJlclxuICBzd2F5QW1wbGl0dWRlPzogbnVtYmVyXG4gIHN3YXlGcmVxdWVuY3k/OiBudW1iZXJcbn1cblxuZXhwb3J0IHR5cGUgTWV0ZW9yTWlzc2lsZVN0YXRlID0ge1xuICBpZDogbnVtYmVyXG4gIHBvc2l0aW9uOiBUSFJFRS5WZWN0b3IzXG4gIHZlbG9jaXR5OiBUSFJFRS5WZWN0b3IzXG4gIHRhcmdldElkOiBzdHJpbmcgfCBudWxsXG4gIGxpZmV0aW1lTXM6IG51bWJlclxuICBzbW9rZVRyYWlsOiBUSFJFRS5WZWN0b3IzW11cbiAgc21va2VBY2N1bXVsYXRvck1zOiBudW1iZXJcbiAgc3RhZ2U6ICdlamVjdGluZycgfCAnYnVybmluZydcbiAgc3RhZ2VNczogbnVtYmVyXG4gIHJlZmVyZW5jZUZvcndhcmQ6IFRIUkVFLlZlY3RvcjNcbiAgZWplY3Rpb25EaXJlY3Rpb246IFRIUkVFLlZlY3RvcjNcbiAgZWplY3Rpb25UcmF2ZWw6IG51bWJlclxuICBzd2F5VGltZTogbnVtYmVyXG4gIHN3YXlBeGlzOiBUSFJFRS5WZWN0b3IzXG59XG5cbmV4cG9ydCB0eXBlIE1ldGVvck1pc3NpbGVJbXBhY3QgPSB7XG4gIGlkOiBudW1iZXJcbiAgdGFyZ2V0SWQ6IHN0cmluZyB8IG51bGxcbiAgY2VudGVyOiBUSFJFRS5WZWN0b3IzXG4gIGFnZU1zOiBudW1iZXJcbn1cblxuZXhwb3J0IHR5cGUgTWV0ZW9yTWlzc2lsZUZpcmVSZXN1bHQgPSB7XG4gIGZpcmVkOiBib29sZWFuXG4gIG1pc3NpbGU/OiBNZXRlb3JNaXNzaWxlU3RhdGVcbiAgcmVhc29uPzogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNZXRlb3JNaXNzaWxlU3lzdGVtKG9wdGlvbnM6IE1ldGVvck1pc3NpbGVPcHRpb25zKXtcbiAgY29uc3QgbWlzc2lsZXM6IE1ldGVvck1pc3NpbGVTdGF0ZVtdID0gW11cbiAgY29uc3QgaW1wYWN0czogTWV0ZW9yTWlzc2lsZUltcGFjdFtdID0gW11cbiAgbGV0IGFtbW8gPSBvcHRpb25zLmFtbW9cbiAgbGV0IGNvb2xkb3duTXMgPSAwXG4gIGxldCBpZENvdW50ZXIgPSAwXG4gIGxldCBjbGVhcmFuY2VEaXN0YW5jZSA9IE1hdGgubWF4KDEsIG9wdGlvbnMuY2xlYXJhbmNlRGlzdGFuY2UgPz8gMTIpXG4gIGNvbnN0IHN3YXlBbXBsaXR1ZGUgPSBvcHRpb25zLnN3YXlBbXBsaXR1ZGUgPz8gMjBcbiAgY29uc3Qgc3dheUZyZXF1ZW5jeSA9IG9wdGlvbnMuc3dheUZyZXF1ZW5jeSA/PyAxLjFcblxuICBjb25zdCBmb3J3YXJkVG1wID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICBjb25zdCBsb3MgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG4gIGNvbnN0IHJlbFZlbCA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgY29uc3QgbmF2QWNjZWwgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG4gIGNvbnN0IHRvVGFyZ2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICBjb25zdCByaWdodCA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgY29uc3Qgc3dheSA9IG5ldyBUSFJFRS5WZWN0b3IzKClcblxuICB0eXBlIFJhbmtlZFRhcmdldCA9IHsgdGFyZ2V0OiBXZWFwb25UYXJnZXQsIGRpc3RhbmNlOiBudW1iZXIgfVxuXG4gIC8vMS4tIFNvcnQgZXZlcnkgbGl2ZSBjb250YWN0IHRoYXQgc2l0cyBhaGVhZCBvZiB0aGUgc2hvb3RlciBzbyByYWlscyBzZWUgdGhlIGZ1bGwgc3RhY2sgb2YgdGhyZWF0cy5cbiAgZnVuY3Rpb24gYWNxdWlyZUZyb250VGFyZ2V0cyhjb250ZXh0OiBXZWFwb25Db250ZXh0LCBvcmlnaW46IFRIUkVFLlZlY3RvcjMpOiBXZWFwb25UYXJnZXRbXSB7XG4gICAgY29uc3QgcmFua2VkOiBSYW5rZWRUYXJnZXRbXSA9IFtdXG4gICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgY29udGV4dC50YXJnZXRzKXtcbiAgICAgIGlmICghY2FuZGlkYXRlLmFsaXZlKSBjb250aW51ZVxuICAgICAgdG9UYXJnZXQuY29weShjYW5kaWRhdGUucG9zaXRpb24pLnN1YihvcmlnaW4pXG4gICAgICBjb25zdCBkaXN0YW5jZSA9IHRvVGFyZ2V0Lmxlbmd0aCgpXG4gICAgICBpZiAoZGlzdGFuY2UgPCBOQVZfRVBTSUxPTikgY29udGludWVcbiAgICAgIHRvVGFyZ2V0Lm5vcm1hbGl6ZSgpXG4gICAgICBpZiAodG9UYXJnZXQuZG90KGNvbnRleHQuZm9yd2FyZCkgPD0gMCkgY29udGludWVcbiAgICAgIHJhbmtlZC5wdXNoKHsgdGFyZ2V0OiBjYW5kaWRhdGUsIGRpc3RhbmNlIH0pXG4gICAgfVxuICAgIHJhbmtlZC5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSlcbiAgICByZXR1cm4gcmFua2VkLm1hcChlbnRyeSA9PiBlbnRyeS50YXJnZXQpXG4gIH1cblxuICBmdW5jdGlvbiByZWZyZXNoU3dheUF4aXMobWlzc2lsZTogTWV0ZW9yTWlzc2lsZVN0YXRlKXtcbiAgICBtaXNzaWxlLnN3YXlBeGlzLmNvcHkobWlzc2lsZS5yZWZlcmVuY2VGb3J3YXJkKS5jcm9zcyhXT1JMRF9VUClcbiAgICBpZiAobWlzc2lsZS5zd2F5QXhpcy5sZW5ndGhTcSgpIDwgTkFWX0VQU0lMT04pe1xuICAgICAgbWlzc2lsZS5zd2F5QXhpcy5zZXQoMSwgMCwgMClcbiAgICB9XG4gICAgbWlzc2lsZS5zd2F5QXhpcy5ub3JtYWxpemUoKVxuICB9XG5cbiAgZnVuY3Rpb24gaWduaXRlTWlzc2lsZShtaXNzaWxlOiBNZXRlb3JNaXNzaWxlU3RhdGUsIGNvbnRleHQ6IFdlYXBvbkNvbnRleHQpe1xuICAgIG1pc3NpbGUuc3RhZ2UgPSAnYnVybmluZydcbiAgICBtaXNzaWxlLnN0YWdlTXMgPSAwXG4gICAgbWlzc2lsZS5zd2F5VGltZSA9IDBcbiAgICBjb25zdCByYW5rZWQgPSBhY3F1aXJlRnJvbnRUYXJnZXRzKGNvbnRleHQsIG1pc3NpbGUucG9zaXRpb24pXG4gICAgY29uc3QgdGFyZ2V0ID0gcmFua2VkWzBdID8/IG51bGxcbiAgICBtaXNzaWxlLnRhcmdldElkID0gdGFyZ2V0Py5pZCA/PyBudWxsXG4gICAgaWYgKHRhcmdldCl7XG4gICAgICBsb3MuY29weSh0YXJnZXQucG9zaXRpb24pLnN1YihtaXNzaWxlLnBvc2l0aW9uKVxuICAgICAgaWYgKGxvcy5sZW5ndGhTcSgpID4gTkFWX0VQU0lMT04pe1xuICAgICAgICBsb3Mubm9ybWFsaXplKClcbiAgICAgICAgbWlzc2lsZS52ZWxvY2l0eS5jb3B5KGxvcykubXVsdGlwbHlTY2FsYXIob3B0aW9ucy5idXJuU3BlZWQpXG4gICAgICAgIG1pc3NpbGUucmVmZXJlbmNlRm9yd2FyZC5jb3B5KGxvcylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbWlzc2lsZS52ZWxvY2l0eS5jb3B5KG1pc3NpbGUucmVmZXJlbmNlRm9yd2FyZCkubXVsdGlwbHlTY2FsYXIob3B0aW9ucy5idXJuU3BlZWQpXG4gICAgfVxuICAgIHJlZnJlc2hTd2F5QXhpcyhtaXNzaWxlKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJJbXBhY3QobWlzc2lsZTogTWV0ZW9yTWlzc2lsZVN0YXRlLCB0YXJnZXQ6IFdlYXBvblRhcmdldCB8IG51bGwpe1xuICAgIGlmICh0YXJnZXQpe1xuICAgICAgdGFyZ2V0LmFsaXZlID0gZmFsc2VcbiAgICAgIHRhcmdldC5vbkZpcmUgPSB0cnVlXG4gICAgICB0YXJnZXQuZmFsbGluZyA9IHRydWVcbiAgICAgIHRhcmdldC52ZWxvY2l0eS55ID0gTWF0aC5taW4odGFyZ2V0LnZlbG9jaXR5LnksIC1vcHRpb25zLmJ1cm5TcGVlZCAqIDAuMjUpXG4gICAgfVxuICAgIGltcGFjdHMucHVzaCh7XG4gICAgICBpZDogbWlzc2lsZS5pZCxcbiAgICAgIHRhcmdldElkOiB0YXJnZXQ/LmlkID8/IG51bGwsXG4gICAgICBjZW50ZXI6IG1pc3NpbGUucG9zaXRpb24uY2xvbmUoKSxcbiAgICAgIGFnZU1zOiAwLFxuICAgIH0pXG4gICAgaWYgKGltcGFjdHMubGVuZ3RoID4gMjQpe1xuICAgICAgaW1wYWN0cy5zcGxpY2UoMCwgaW1wYWN0cy5sZW5ndGggLSAyNClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXRvbmF0ZShpbmRleDogbnVtYmVyKXtcbiAgICBtaXNzaWxlcy5zcGxpY2UoaW5kZXgsIDEpXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoY29udGV4dDogV2VhcG9uQ29udGV4dCl7XG4gICAgLy8yLi0gUmVkdWNlIGNvb2xkb3duIGFuZCBhZ2UgZXhwbG9zaW9uIGRlY2FscyBzbyBmb2xsb3ctdXAgc2Fsdm9zIHN0YXkgaW4gc3luYyB3aXRoIEhVRCB0aW1lcnMuXG4gICAgaWYgKGNvb2xkb3duTXMgPiAwKXtcbiAgICAgIGNvb2xkb3duTXMgPSBNYXRoLm1heCgwLCBjb29sZG93bk1zIC0gY29udGV4dC5kdCAqIDEwMDApXG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBpbXBhY3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgIGNvbnN0IGltcGFjdCA9IGltcGFjdHNbaV1cbiAgICAgIGltcGFjdC5hZ2VNcyArPSBjb250ZXh0LmR0ICogMTAwMFxuICAgICAgaWYgKGltcGFjdC5hZ2VNcyA+IElNUEFDVF9MSUZFVElNRV9NUyl7XG4gICAgICAgIGltcGFjdHMuc3BsaWNlKGksIDEpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IG1pc3NpbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgIGNvbnN0IG1pc3NpbGUgPSBtaXNzaWxlc1tpXVxuICAgICAgbWlzc2lsZS5saWZldGltZU1zICs9IGNvbnRleHQuZHQgKiAxMDAwXG4gICAgICBtaXNzaWxlLnN0YWdlTXMgKz0gY29udGV4dC5kdCAqIDEwMDBcblxuICAgICAgaWYgKG1pc3NpbGUubGlmZXRpbWVNcyA+IG9wdGlvbnMubWF4TGlmZXRpbWVNcyl7XG4gICAgICAgIGRldG9uYXRlKGkpXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChtaXNzaWxlLnN0YWdlID09PSAnZWplY3RpbmcnKXtcbiAgICAgICAgY29uc3QgdHJhdmVsID0gb3B0aW9ucy5lamVjdGlvblNwZWVkICogY29udGV4dC5kdFxuICAgICAgICBtaXNzaWxlLnBvc2l0aW9uLmFkZFNjYWxlZFZlY3RvcihtaXNzaWxlLmVqZWN0aW9uRGlyZWN0aW9uLCB0cmF2ZWwpXG4gICAgICAgIG1pc3NpbGUudmVsb2NpdHkuY29weShtaXNzaWxlLmVqZWN0aW9uRGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihvcHRpb25zLmVqZWN0aW9uU3BlZWQpXG4gICAgICAgIG1pc3NpbGUuZWplY3Rpb25UcmF2ZWwgKz0gdHJhdmVsXG4gICAgICAgIGlmIChtaXNzaWxlLmVqZWN0aW9uVHJhdmVsID49IGNsZWFyYW5jZURpc3RhbmNlIHx8IG1pc3NpbGUuc3RhZ2VNcyA+PSBvcHRpb25zLmVqZWN0aW9uRHVyYXRpb25Ncyl7XG4gICAgICAgICAgaWduaXRlTWlzc2lsZShtaXNzaWxlLCBjb250ZXh0KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtaXNzaWxlLnN3YXlUaW1lICs9IGNvbnRleHQuZHRcbiAgICAgICAgbGV0IHRhcmdldCA9IGNvbnRleHQudGFyZ2V0cy5maW5kKHQgPT4gdC5pZCA9PT0gbWlzc2lsZS50YXJnZXRJZCAmJiB0LmFsaXZlKSA/PyBudWxsXG4gICAgICAgIGlmICghdGFyZ2V0KXtcbiAgICAgICAgICBjb25zdCByYW5rZWQgPSBhY3F1aXJlRnJvbnRUYXJnZXRzKGNvbnRleHQsIG1pc3NpbGUucG9zaXRpb24pXG4gICAgICAgICAgdGFyZ2V0ID0gcmFua2VkWzBdID8/IG51bGxcbiAgICAgICAgICBtaXNzaWxlLnRhcmdldElkID0gdGFyZ2V0Py5pZCA/PyBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGFzVGFyZ2V0ID0gZmFsc2VcbiAgICAgICAgaWYgKHRhcmdldCl7XG4gICAgICAgICAgbG9zLmNvcHkodGFyZ2V0LnBvc2l0aW9uKS5zdWIobWlzc2lsZS5wb3NpdGlvbilcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGxvcy5sZW5ndGgoKVxuICAgICAgICAgIGlmIChkaXN0YW5jZSA8IG9wdGlvbnMuZGV0b25hdGlvblJhZGl1cyl7XG4gICAgICAgICAgICByZWdpc3RlckltcGFjdChtaXNzaWxlLCB0YXJnZXQpXG4gICAgICAgICAgICBkZXRvbmF0ZShpKVxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgbG9zLm5vcm1hbGl6ZSgpXG4gICAgICAgICAgcmVsVmVsLmNvcHkodGFyZ2V0LnZlbG9jaXR5KS5zdWIobWlzc2lsZS52ZWxvY2l0eSlcbiAgICAgICAgICBuYXZBY2NlbC5jb3B5KHJlbFZlbC5jcm9zcyhsb3MpLmNyb3NzKGxvcykpLm11bHRpcGx5U2NhbGFyKG9wdGlvbnMubmF2aWdhdGlvbkNvbnN0YW50KVxuICAgICAgICAgIG1pc3NpbGUudmVsb2NpdHkuYWRkU2NhbGVkVmVjdG9yKG5hdkFjY2VsLCBjb250ZXh0LmR0KVxuICAgICAgICAgIGhhc1RhcmdldCA9IHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIG1pc3NpbGUucmVmZXJlbmNlRm9yd2FyZC5jb3B5KG1pc3NpbGUudmVsb2NpdHkpLm5vcm1hbGl6ZSgpXG4gICAgICAgIHJlZnJlc2hTd2F5QXhpcyhtaXNzaWxlKVxuICAgICAgICBpZiAoaGFzVGFyZ2V0KXtcbiAgICAgICAgICBjb25zdCBwaGFzZSA9IE1hdGguc2luKG1pc3NpbGUuc3dheVRpbWUgKiBzd2F5RnJlcXVlbmN5ICogTWF0aC5QSSAqIDIpXG4gICAgICAgICAgc3dheS5jb3B5KG1pc3NpbGUuc3dheUF4aXMpLm11bHRpcGx5U2NhbGFyKHBoYXNlICogc3dheUFtcGxpdHVkZSAqIGNvbnRleHQuZHQpXG4gICAgICAgICAgbWlzc2lsZS52ZWxvY2l0eS5hZGQoc3dheSlcbiAgICAgICAgICBtaXNzaWxlLnZlbG9jaXR5LnNldExlbmd0aChvcHRpb25zLmJ1cm5TcGVlZClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaXNzaWxlLnZlbG9jaXR5LmNvcHkobWlzc2lsZS5yZWZlcmVuY2VGb3J3YXJkKS5tdWx0aXBseVNjYWxhcihvcHRpb25zLmJ1cm5TcGVlZClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtaXNzaWxlLnBvc2l0aW9uLmFkZFNjYWxlZFZlY3RvcihtaXNzaWxlLnZlbG9jaXR5LCBjb250ZXh0LmR0KVxuXG4gICAgICBpZiAobWlzc2lsZS5zdGFnZSA9PT0gJ2J1cm5pbmcnKXtcbiAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgY29udGV4dC50YXJnZXRzKXtcbiAgICAgICAgICBpZiAoIWNhbmRpZGF0ZS5hbGl2ZSkgY29udGludWVcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGNhbmRpZGF0ZS5wb3NpdGlvbi5kaXN0YW5jZVRvKG1pc3NpbGUucG9zaXRpb24pXG4gICAgICAgICAgaWYgKGRpc3RhbmNlIDwgb3B0aW9ucy5kZXRvbmF0aW9uUmFkaXVzKXtcbiAgICAgICAgICAgIHJlZ2lzdGVySW1wYWN0KG1pc3NpbGUsIGNhbmRpZGF0ZSlcbiAgICAgICAgICAgIGRldG9uYXRlKGkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1pc3NpbGVzW2ldKSBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBtaXNzaWxlLnNtb2tlQWNjdW11bGF0b3JNcyArPSBjb250ZXh0LmR0ICogMTAwMFxuICAgICAgY29uc3Qgc2hvdWxkRW1pdCA9IG1pc3NpbGUuc3RhZ2UgPT09ICdidXJuaW5nJ1xuICAgICAgaWYgKHNob3VsZEVtaXQgJiYgbWlzc2lsZS5zbW9rZUFjY3VtdWxhdG9yTXMgPj0gb3B0aW9ucy5zbW9rZVRyYWlsSW50ZXJ2YWxNcyl7XG4gICAgICAgIC8vMy4tIERyb3AgY29udHJhaWwgbWFya2VycyB0byBkcmF3IHRoZSBwb3dlcmVkIGZsaWdodCBwYXRoIHdpdGggYSBzaW1wbGUgbGluZSBzdHJpcC5cbiAgICAgICAgbWlzc2lsZS5zbW9rZUFjY3VtdWxhdG9yTXMgPSAwXG4gICAgICAgIG1pc3NpbGUuc21va2VUcmFpbC5wdXNoKG1pc3NpbGUucG9zaXRpb24uY2xvbmUoKSlcbiAgICAgICAgaWYgKG1pc3NpbGUuc21va2VUcmFpbC5sZW5ndGggPiAzMil7XG4gICAgICAgICAgbWlzc2lsZS5zbW9rZVRyYWlsLnNoaWZ0KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeUZpcmUoY29udGV4dDogV2VhcG9uQ29udGV4dCk6IE1ldGVvck1pc3NpbGVGaXJlUmVzdWx0e1xuICAgIGlmIChhbW1vIDw9IDApIHJldHVybiB7IGZpcmVkOiBmYWxzZSwgcmVhc29uOiAnZW1wdHknIH1cbiAgICBpZiAoY29vbGRvd25NcyA+IDApIHJldHVybiB7IGZpcmVkOiBmYWxzZSwgcmVhc29uOiAnY29vbGRvd24nIH1cbiAgICBpZiAobWlzc2lsZXMubGVuZ3RoID49IG9wdGlvbnMubWF4Q29uY3VycmVudCkgcmV0dXJuIHsgZmlyZWQ6IGZhbHNlLCByZWFzb246ICdwb29sJyB9XG5cbiAgICBmb3J3YXJkVG1wLmNvcHkoY29udGV4dC5mb3J3YXJkKVxuICAgIGlmIChmb3J3YXJkVG1wLmxlbmd0aFNxKCkgPCBOQVZfRVBTSUxPTil7XG4gICAgICBmb3J3YXJkVG1wLnNldCgwLCAwLCAtMSlcbiAgICB9XG4gICAgZm9yd2FyZFRtcC5ub3JtYWxpemUoKVxuICAgIHJpZ2h0LmNvcHkoZm9yd2FyZFRtcCkuY3Jvc3MoV09STERfVVApXG4gICAgaWYgKHJpZ2h0Lmxlbmd0aFNxKCkgPCBOQVZfRVBTSUxPTil7XG4gICAgICByaWdodC5zZXQoMSwgMCwgMClcbiAgICB9XG4gICAgcmlnaHQubm9ybWFsaXplKClcblxuICAgIGNvbnN0IG1pc3NpbGU6IE1ldGVvck1pc3NpbGVTdGF0ZSA9IHtcbiAgICAgIGlkOiArK2lkQ291bnRlcixcbiAgICAgIHBvc2l0aW9uOiBjb250ZXh0LnBvc2l0aW9uLmNsb25lKCkuYWRkU2NhbGVkVmVjdG9yKHJpZ2h0LCBjbGVhcmFuY2VEaXN0YW5jZSAqIDAuNiksXG4gICAgICB2ZWxvY2l0eTogZm9yd2FyZFRtcC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKG9wdGlvbnMuZWplY3Rpb25TcGVlZCksXG4gICAgICB0YXJnZXRJZDogbnVsbCxcbiAgICAgIGxpZmV0aW1lTXM6IDAsXG4gICAgICBzbW9rZVRyYWlsOiBbXSxcbiAgICAgIHNtb2tlQWNjdW11bGF0b3JNczogMCxcbiAgICAgIHN0YWdlOiAnZWplY3RpbmcnLFxuICAgICAgc3RhZ2VNczogMCxcbiAgICAgIHJlZmVyZW5jZUZvcndhcmQ6IGZvcndhcmRUbXAuY2xvbmUoKSxcbiAgICAgIGVqZWN0aW9uRGlyZWN0aW9uOiBmb3J3YXJkVG1wLmNsb25lKCksXG4gICAgICBlamVjdGlvblRyYXZlbDogMCxcbiAgICAgIHN3YXlUaW1lOiAwLFxuICAgICAgc3dheUF4aXM6IHJpZ2h0LmNsb25lKCksXG4gICAgfVxuXG4gICAgbWlzc2lsZXMucHVzaChtaXNzaWxlKVxuICAgIGFtbW8gLT0gMVxuICAgIGNvb2xkb3duTXMgPSBvcHRpb25zLmNvb2xkb3duTXNcbiAgICByZXR1cm4geyBmaXJlZDogdHJ1ZSwgbWlzc2lsZSB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRMYXVuY2hlckNsZWFyYW5jZShkaXN0YW5jZTogbnVtYmVyKXtcbiAgICBjbGVhcmFuY2VEaXN0YW5jZSA9IE1hdGgubWF4KDEsIGRpc3RhbmNlKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB1cGRhdGUsXG4gICAgdHJ5RmlyZSxcbiAgICBzZXRMYXVuY2hlckNsZWFyYW5jZSxcbiAgICBnZXQgYW1tbygpeyByZXR1cm4gYW1tbyB9LFxuICAgIGdldCBjb29sZG93bk1zKCl7IHJldHVybiBjb29sZG93bk1zIH0sXG4gICAgZ2V0IGFjdGl2ZUNvdW50KCl7IHJldHVybiBtaXNzaWxlcy5sZW5ndGggfSxcbiAgICBnZXQgbWlzc2lsZXMoKXsgcmV0dXJuIG1pc3NpbGVzIH0sXG4gICAgZ2V0IGltcGFjdHMoKXsgcmV0dXJuIGltcGFjdHMgfSxcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlRIUkVFIiwiV09STERfVVAiLCJWZWN0b3IzIiwiTkFWX0VQU0lMT04iLCJJTVBBQ1RfTElGRVRJTUVfTVMiLCJjcmVhdGVNZXRlb3JNaXNzaWxlU3lzdGVtIiwib3B0aW9ucyIsIm1pc3NpbGVzIiwiaW1wYWN0cyIsImFtbW8iLCJjb29sZG93bk1zIiwiaWRDb3VudGVyIiwiY2xlYXJhbmNlRGlzdGFuY2UiLCJNYXRoIiwibWF4Iiwic3dheUFtcGxpdHVkZSIsInN3YXlGcmVxdWVuY3kiLCJmb3J3YXJkVG1wIiwibG9zIiwicmVsVmVsIiwibmF2QWNjZWwiLCJ0b1RhcmdldCIsInJpZ2h0Iiwic3dheSIsImFjcXVpcmVGcm9udFRhcmdldHMiLCJjb250ZXh0Iiwib3JpZ2luIiwicmFua2VkIiwiY2FuZGlkYXRlIiwidGFyZ2V0cyIsImFsaXZlIiwiY29weSIsInBvc2l0aW9uIiwic3ViIiwiZGlzdGFuY2UiLCJsZW5ndGgiLCJub3JtYWxpemUiLCJkb3QiLCJmb3J3YXJkIiwicHVzaCIsInRhcmdldCIsInNvcnQiLCJhIiwiYiIsIm1hcCIsImVudHJ5IiwicmVmcmVzaFN3YXlBeGlzIiwibWlzc2lsZSIsInN3YXlBeGlzIiwicmVmZXJlbmNlRm9yd2FyZCIsImNyb3NzIiwibGVuZ3RoU3EiLCJzZXQiLCJpZ25pdGVNaXNzaWxlIiwic3RhZ2UiLCJzdGFnZU1zIiwic3dheVRpbWUiLCJ0YXJnZXRJZCIsImlkIiwidmVsb2NpdHkiLCJtdWx0aXBseVNjYWxhciIsImJ1cm5TcGVlZCIsInJlZ2lzdGVySW1wYWN0Iiwib25GaXJlIiwiZmFsbGluZyIsInkiLCJtaW4iLCJjZW50ZXIiLCJjbG9uZSIsImFnZU1zIiwic3BsaWNlIiwiZGV0b25hdGUiLCJpbmRleCIsInVwZGF0ZSIsImR0IiwiaSIsImltcGFjdCIsImxpZmV0aW1lTXMiLCJtYXhMaWZldGltZU1zIiwidHJhdmVsIiwiZWplY3Rpb25TcGVlZCIsImFkZFNjYWxlZFZlY3RvciIsImVqZWN0aW9uRGlyZWN0aW9uIiwiZWplY3Rpb25UcmF2ZWwiLCJlamVjdGlvbkR1cmF0aW9uTXMiLCJmaW5kIiwidCIsImhhc1RhcmdldCIsImRldG9uYXRpb25SYWRpdXMiLCJuYXZpZ2F0aW9uQ29uc3RhbnQiLCJwaGFzZSIsInNpbiIsIlBJIiwiYWRkIiwic2V0TGVuZ3RoIiwiZGlzdGFuY2VUbyIsInNtb2tlQWNjdW11bGF0b3JNcyIsInNob3VsZEVtaXQiLCJzbW9rZVRyYWlsSW50ZXJ2YWxNcyIsInNtb2tlVHJhaWwiLCJzaGlmdCIsInRyeUZpcmUiLCJmaXJlZCIsInJlYXNvbiIsIm1heENvbmN1cnJlbnQiLCJzZXRMYXVuY2hlckNsZWFyYW5jZSIsImFjdGl2ZUNvdW50Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/weapons/meteorMissile.ts\n");

/***/ }),

/***/ "(ssr)/./src/weapons/neonLaser.ts":
/*!**********************************!*\
  !*** ./src/weapons/neonLaser.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNeonLaserSystem: () => (/* binding */ createNeonLaserSystem)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nfunction createNeonLaserSystem(options) {\n    const state = {\n        active: false,\n        remainingMs: 0,\n        cooldownMs: 0,\n        origin: new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(),\n        direction: new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, -1),\n        length: options.range,\n        intensity: 0\n    };\n    const hitPoint = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    function refreshRay(context) {\n        state.origin.copy(context.position);\n        state.direction.copy(context.forward).normalize();\n        state.length = options.range;\n        hitPoint.copy(state.direction).multiplyScalar(state.length);\n        state.intensity = Math.exp(-options.attenuation * state.length);\n    }\n    function update(context) {\n        //1.- Tick the cooldown timer so subsequent trigger pulls respect the gating window.\n        if (state.cooldownMs > 0) {\n            state.cooldownMs = Math.max(0, state.cooldownMs - context.dt * 1000);\n        }\n        if (state.active) {\n            state.remainingMs = Math.max(0, state.remainingMs - context.dt * 1000);\n            refreshRay(context);\n            if (state.remainingMs === 0) {\n                //2.- Automatically release the beam when its sustain window elapses.\n                state.active = false;\n            }\n        }\n    }\n    function fire(context) {\n        if (state.cooldownMs > 0 || state.active) {\n            return false;\n        }\n        state.active = true;\n        state.remainingMs = options.durationMs;\n        state.cooldownMs = options.cooldownMs + options.durationMs;\n        refreshRay(context);\n        return true;\n    }\n    function sustain(context) {\n        //3.- Keep the ray anchored while the trigger remains held.\n        if (state.active) {\n            refreshRay(context);\n        }\n    }\n    function release() {\n        //4.- Allow callers to terminate the beam early so burst firing becomes possible.\n        state.active = false;\n        state.remainingMs = 0;\n    }\n    return {\n        update,\n        fire,\n        sustain,\n        release,\n        get state () {\n            return state;\n        },\n        get cooldownMs () {\n            return state.cooldownMs;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvd2VhcG9ucy9uZW9uTGFzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEI7QUFvQnZCLFNBQVNDLHNCQUFzQkMsT0FBeUI7SUFDN0QsTUFBTUMsUUFBd0I7UUFDNUJDLFFBQVE7UUFDUkMsYUFBYTtRQUNiQyxZQUFZO1FBQ1pDLFFBQVEsSUFBSVAsMENBQWE7UUFDekJTLFdBQVcsSUFBSVQsMENBQWEsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUNwQ1UsUUFBUVIsUUFBUVMsS0FBSztRQUNyQkMsV0FBVztJQUNiO0lBRUEsTUFBTUMsV0FBVyxJQUFJYiwwQ0FBYTtJQUVsQyxTQUFTYyxXQUFXQyxPQUFzQjtRQUN4Q1osTUFBTUksTUFBTSxDQUFDUyxJQUFJLENBQUNELFFBQVFFLFFBQVE7UUFDbENkLE1BQU1NLFNBQVMsQ0FBQ08sSUFBSSxDQUFDRCxRQUFRRyxPQUFPLEVBQUVDLFNBQVM7UUFDL0NoQixNQUFNTyxNQUFNLEdBQUdSLFFBQVFTLEtBQUs7UUFDNUJFLFNBQVNHLElBQUksQ0FBQ2IsTUFBTU0sU0FBUyxFQUFFVyxjQUFjLENBQUNqQixNQUFNTyxNQUFNO1FBQzFEUCxNQUFNUyxTQUFTLEdBQUdTLEtBQUtDLEdBQUcsQ0FBQyxDQUFDcEIsUUFBUXFCLFdBQVcsR0FBR3BCLE1BQU1PLE1BQU07SUFDaEU7SUFFQSxTQUFTYyxPQUFPVCxPQUFzQjtRQUNwQyxvRkFBb0Y7UUFDcEYsSUFBSVosTUFBTUcsVUFBVSxHQUFHLEdBQUU7WUFDdkJILE1BQU1HLFVBQVUsR0FBR2UsS0FBS0ksR0FBRyxDQUFDLEdBQUd0QixNQUFNRyxVQUFVLEdBQUdTLFFBQVFXLEVBQUUsR0FBRztRQUNqRTtRQUVBLElBQUl2QixNQUFNQyxNQUFNLEVBQUM7WUFDZkQsTUFBTUUsV0FBVyxHQUFHZ0IsS0FBS0ksR0FBRyxDQUFDLEdBQUd0QixNQUFNRSxXQUFXLEdBQUdVLFFBQVFXLEVBQUUsR0FBRztZQUNqRVosV0FBV0M7WUFDWCxJQUFJWixNQUFNRSxXQUFXLEtBQUssR0FBRTtnQkFDMUIscUVBQXFFO2dCQUNyRUYsTUFBTUMsTUFBTSxHQUFHO1lBQ2pCO1FBQ0Y7SUFDRjtJQUVBLFNBQVN1QixLQUFLWixPQUFzQjtRQUNsQyxJQUFJWixNQUFNRyxVQUFVLEdBQUcsS0FBS0gsTUFBTUMsTUFBTSxFQUFDO1lBQ3ZDLE9BQU87UUFDVDtRQUNBRCxNQUFNQyxNQUFNLEdBQUc7UUFDZkQsTUFBTUUsV0FBVyxHQUFHSCxRQUFRMEIsVUFBVTtRQUN0Q3pCLE1BQU1HLFVBQVUsR0FBR0osUUFBUUksVUFBVSxHQUFHSixRQUFRMEIsVUFBVTtRQUMxRGQsV0FBV0M7UUFDWCxPQUFPO0lBQ1Q7SUFFQSxTQUFTYyxRQUFRZCxPQUFzQjtRQUNyQywyREFBMkQ7UUFDM0QsSUFBSVosTUFBTUMsTUFBTSxFQUFDO1lBQ2ZVLFdBQVdDO1FBQ2I7SUFDRjtJQUVBLFNBQVNlO1FBQ1AsaUZBQWlGO1FBQ2pGM0IsTUFBTUMsTUFBTSxHQUFHO1FBQ2ZELE1BQU1FLFdBQVcsR0FBRztJQUN0QjtJQUVBLE9BQU87UUFDTG1CO1FBQ0FHO1FBQ0FFO1FBQ0FDO1FBQ0EsSUFBSTNCLFNBQU87WUFBRSxPQUFPQTtRQUFNO1FBQzFCLElBQUlHLGNBQVk7WUFBRSxPQUFPSCxNQUFNRyxVQUFVO1FBQUM7SUFDNUM7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvd2VhcG9ucy9uZW9uTGFzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBXZWFwb25Db250ZXh0IH0gZnJvbSAnQC93ZWFwb25zL3R5cGVzJ1xuXG5leHBvcnQgdHlwZSBOZW9uTGFzZXJPcHRpb25zID0ge1xuICBjb29sZG93bk1zOiBudW1iZXJcbiAgZHVyYXRpb25NczogbnVtYmVyXG4gIHJhbmdlOiBudW1iZXJcbiAgYXR0ZW51YXRpb246IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBOZW9uTGFzZXJTdGF0ZSA9IHtcbiAgYWN0aXZlOiBib29sZWFuXG4gIHJlbWFpbmluZ01zOiBudW1iZXJcbiAgY29vbGRvd25NczogbnVtYmVyXG4gIG9yaWdpbjogVEhSRUUuVmVjdG9yM1xuICBkaXJlY3Rpb246IFRIUkVFLlZlY3RvcjNcbiAgbGVuZ3RoOiBudW1iZXJcbiAgaW50ZW5zaXR5OiBudW1iZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5lb25MYXNlclN5c3RlbShvcHRpb25zOiBOZW9uTGFzZXJPcHRpb25zKXtcbiAgY29uc3Qgc3RhdGU6IE5lb25MYXNlclN0YXRlID0ge1xuICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgcmVtYWluaW5nTXM6IDAsXG4gICAgY29vbGRvd25NczogMCxcbiAgICBvcmlnaW46IG5ldyBUSFJFRS5WZWN0b3IzKCksXG4gICAgZGlyZWN0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAtMSksXG4gICAgbGVuZ3RoOiBvcHRpb25zLnJhbmdlLFxuICAgIGludGVuc2l0eTogMCxcbiAgfVxuXG4gIGNvbnN0IGhpdFBvaW50ID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuXG4gIGZ1bmN0aW9uIHJlZnJlc2hSYXkoY29udGV4dDogV2VhcG9uQ29udGV4dCl7XG4gICAgc3RhdGUub3JpZ2luLmNvcHkoY29udGV4dC5wb3NpdGlvbilcbiAgICBzdGF0ZS5kaXJlY3Rpb24uY29weShjb250ZXh0LmZvcndhcmQpLm5vcm1hbGl6ZSgpXG4gICAgc3RhdGUubGVuZ3RoID0gb3B0aW9ucy5yYW5nZVxuICAgIGhpdFBvaW50LmNvcHkoc3RhdGUuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihzdGF0ZS5sZW5ndGgpXG4gICAgc3RhdGUuaW50ZW5zaXR5ID0gTWF0aC5leHAoLW9wdGlvbnMuYXR0ZW51YXRpb24gKiBzdGF0ZS5sZW5ndGgpXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoY29udGV4dDogV2VhcG9uQ29udGV4dCl7XG4gICAgLy8xLi0gVGljayB0aGUgY29vbGRvd24gdGltZXIgc28gc3Vic2VxdWVudCB0cmlnZ2VyIHB1bGxzIHJlc3BlY3QgdGhlIGdhdGluZyB3aW5kb3cuXG4gICAgaWYgKHN0YXRlLmNvb2xkb3duTXMgPiAwKXtcbiAgICAgIHN0YXRlLmNvb2xkb3duTXMgPSBNYXRoLm1heCgwLCBzdGF0ZS5jb29sZG93bk1zIC0gY29udGV4dC5kdCAqIDEwMDApXG4gICAgfVxuXG4gICAgaWYgKHN0YXRlLmFjdGl2ZSl7XG4gICAgICBzdGF0ZS5yZW1haW5pbmdNcyA9IE1hdGgubWF4KDAsIHN0YXRlLnJlbWFpbmluZ01zIC0gY29udGV4dC5kdCAqIDEwMDApXG4gICAgICByZWZyZXNoUmF5KGNvbnRleHQpXG4gICAgICBpZiAoc3RhdGUucmVtYWluaW5nTXMgPT09IDApe1xuICAgICAgICAvLzIuLSBBdXRvbWF0aWNhbGx5IHJlbGVhc2UgdGhlIGJlYW0gd2hlbiBpdHMgc3VzdGFpbiB3aW5kb3cgZWxhcHNlcy5cbiAgICAgICAgc3RhdGUuYWN0aXZlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlKGNvbnRleHQ6IFdlYXBvbkNvbnRleHQpe1xuICAgIGlmIChzdGF0ZS5jb29sZG93bk1zID4gMCB8fCBzdGF0ZS5hY3RpdmUpe1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHN0YXRlLmFjdGl2ZSA9IHRydWVcbiAgICBzdGF0ZS5yZW1haW5pbmdNcyA9IG9wdGlvbnMuZHVyYXRpb25Nc1xuICAgIHN0YXRlLmNvb2xkb3duTXMgPSBvcHRpb25zLmNvb2xkb3duTXMgKyBvcHRpb25zLmR1cmF0aW9uTXNcbiAgICByZWZyZXNoUmF5KGNvbnRleHQpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIHN1c3RhaW4oY29udGV4dDogV2VhcG9uQ29udGV4dCl7XG4gICAgLy8zLi0gS2VlcCB0aGUgcmF5IGFuY2hvcmVkIHdoaWxlIHRoZSB0cmlnZ2VyIHJlbWFpbnMgaGVsZC5cbiAgICBpZiAoc3RhdGUuYWN0aXZlKXtcbiAgICAgIHJlZnJlc2hSYXkoY29udGV4dClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWxlYXNlKCl7XG4gICAgLy80Li0gQWxsb3cgY2FsbGVycyB0byB0ZXJtaW5hdGUgdGhlIGJlYW0gZWFybHkgc28gYnVyc3QgZmlyaW5nIGJlY29tZXMgcG9zc2libGUuXG4gICAgc3RhdGUuYWN0aXZlID0gZmFsc2VcbiAgICBzdGF0ZS5yZW1haW5pbmdNcyA9IDBcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdXBkYXRlLFxuICAgIGZpcmUsXG4gICAgc3VzdGFpbixcbiAgICByZWxlYXNlLFxuICAgIGdldCBzdGF0ZSgpeyByZXR1cm4gc3RhdGUgfSxcbiAgICBnZXQgY29vbGRvd25NcygpeyByZXR1cm4gc3RhdGUuY29vbGRvd25NcyB9LFxuICB9XG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJjcmVhdGVOZW9uTGFzZXJTeXN0ZW0iLCJvcHRpb25zIiwic3RhdGUiLCJhY3RpdmUiLCJyZW1haW5pbmdNcyIsImNvb2xkb3duTXMiLCJvcmlnaW4iLCJWZWN0b3IzIiwiZGlyZWN0aW9uIiwibGVuZ3RoIiwicmFuZ2UiLCJpbnRlbnNpdHkiLCJoaXRQb2ludCIsInJlZnJlc2hSYXkiLCJjb250ZXh0IiwiY29weSIsInBvc2l0aW9uIiwiZm9yd2FyZCIsIm5vcm1hbGl6ZSIsIm11bHRpcGx5U2NhbGFyIiwiTWF0aCIsImV4cCIsImF0dGVudWF0aW9uIiwidXBkYXRlIiwibWF4IiwiZHQiLCJmaXJlIiwiZHVyYXRpb25NcyIsInN1c3RhaW4iLCJyZWxlYXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/weapons/neonLaser.ts\n");

/***/ }),

/***/ "(ssr)/./src/weapons/visuals/homingMissileVisual.ts":
/*!****************************************************!*\
  !*** ./src/weapons/visuals/homingMissileVisual.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createHomingMissileVisual: () => (/* binding */ createHomingMissileVisual)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nconst BASE_FORWARD = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1);\nconst TMP_FORWARD = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\nfunction createHomingMissileVisual(scene, palette = {\n    body: 0xd36f39,\n    emissive: 0xff6b2f,\n    trail: 0xffc48a\n}) {\n    const group = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n    scene.add(group);\n    const bodyMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: palette.body,\n        metalness: 0.35,\n        roughness: 0.4,\n        emissive: new three__WEBPACK_IMPORTED_MODULE_0__.Color(palette.emissive),\n        emissiveIntensity: 0.4\n    });\n    const finMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: 0x333845,\n        metalness: 0.15,\n        roughness: 0.6\n    });\n    const trailMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.LineBasicMaterial({\n        color: palette.trail,\n        transparent: true,\n        opacity: 0.55,\n        blending: three__WEBPACK_IMPORTED_MODULE_0__.AdditiveBlending\n    });\n    const bodyGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.25, 0.32, 1.4, 10, 1, true);\n    const noseGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(0.32, 0.7, 10, 1);\n    const finGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(0.05, 0.4, 0.25);\n    const flameGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.ConeGeometry(0.18, 0.9, 12, 1);\n    const smokeGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.08, 0.22, 1.4, 8, 1, true);\n    const flameMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n        color: palette.emissive,\n        transparent: true,\n        opacity: 0.9,\n        blending: three__WEBPACK_IMPORTED_MODULE_0__.AdditiveBlending\n    });\n    const smokeMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n        color: 0x444f63,\n        transparent: true,\n        opacity: 0.45,\n        depthWrite: false,\n        blending: three__WEBPACK_IMPORTED_MODULE_0__.NormalBlending,\n        side: three__WEBPACK_IMPORTED_MODULE_0__.DoubleSide\n    });\n    const renderStates = new Map();\n    function buildMissile() {\n        //1.- Construct a reusable missile rig so pooled projectiles share GPU buffers.\n        const missileGroup = new three__WEBPACK_IMPORTED_MODULE_0__.Group();\n        const body = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(bodyGeometry, bodyMaterial);\n        body.rotation.x = Math.PI / 2;\n        missileGroup.add(body);\n        const nose = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(noseGeometry, bodyMaterial);\n        nose.position.z = -1;\n        missileGroup.add(nose);\n        for(let i = 0; i < 4; i++){\n            const fin = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(finGeometry, finMaterial);\n            fin.position.set(0, Math.sin(i * Math.PI / 2) * 0.35, Math.cos(i * Math.PI / 2) * 0.35);\n            fin.rotation.x = Math.PI / 2;\n            fin.rotation.y = i * Math.PI / 2;\n            missileGroup.add(fin);\n        }\n        const trailGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BufferGeometry();\n        const trail = new three__WEBPACK_IMPORTED_MODULE_0__.Line(trailGeometry, trailMaterial);\n        missileGroup.add(trail);\n        const flame = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(flameGeometry, flameMaterial);\n        flame.position.z = 0.75;\n        flame.rotation.x = Math.PI;\n        missileGroup.add(flame);\n        const smoke = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(smokeGeometry, smokeMaterial.clone());\n        smoke.position.z = 0.9;\n        smoke.rotation.x = Math.PI / 2;\n        missileGroup.add(smoke);\n        group.add(missileGroup);\n        return {\n            mesh: missileGroup,\n            trail,\n            flame,\n            smoke\n        };\n    }\n    function update(missiles) {\n        const seen = new Set();\n        for (const missile of missiles){\n            seen.add(missile.id);\n            let renderState = renderStates.get(missile.id);\n            if (!renderState) {\n                //2.- Spawn a visual shell when the simulation reports a new missile instance.\n                renderState = buildMissile();\n                renderStates.set(missile.id, renderState);\n            }\n            //3.- Snap the rig to the authoritative kinematic state generated by the weapon logic.\n            renderState.mesh.position.copy(missile.position);\n            TMP_FORWARD.copy(missile.velocity);\n            if (TMP_FORWARD.lengthSq() < 1e-6) {\n                TMP_FORWARD.set(0, 0, 1);\n            }\n            TMP_FORWARD.normalize();\n            renderState.mesh.quaternion.setFromUnitVectors(BASE_FORWARD, TMP_FORWARD);\n            const burning = missile.stage === 'burning';\n            renderState.flame.visible = burning;\n            renderState.smoke.visible = burning;\n            if (burning) {\n                const stageMs = missile.stageMs ?? 0;\n                const intensity = Math.min(1, stageMs / 400);\n                renderState.flame.scale.setScalar(0.7 + intensity * 0.6);\n                renderState.smoke.scale.set(1 + intensity * 0.8, 1 + intensity * 0.8, 1);\n                const smokeMat = renderState.smoke.material;\n                smokeMat.opacity = 0.3 + intensity * 0.3;\n            }\n            //4.- Rebuild the exhaust ribbon so contrails appear where guidance history says they were.\n            const points = missile.smokeTrail.length > 0 ? missile.smokeTrail : [\n                missile.position\n            ];\n            renderState.trail.geometry.setFromPoints(points);\n        }\n        for (const [id, renderState] of renderStates){\n            if (seen.has(id)) continue;\n            //5.- Clean up visuals for detonated missiles to keep the pool lean.\n            group.remove(renderState.mesh);\n            renderState.trail.geometry.dispose();\n            renderStates.delete(id);\n        }\n    }\n    function dispose() {\n        //6.- Release pooled assets when the owning controller tears down the weapon systems.\n        for (const [, renderState] of renderStates){\n            group.remove(renderState.mesh);\n            renderState.trail.geometry.dispose();\n        }\n        renderStates.clear();\n        scene.remove(group);\n        bodyGeometry.dispose();\n        noseGeometry.dispose();\n        finGeometry.dispose();\n        flameGeometry.dispose();\n        smokeGeometry.dispose();\n        bodyMaterial.dispose();\n        finMaterial.dispose();\n        trailMaterial.dispose();\n        flameMaterial.dispose();\n        smokeMaterial.dispose();\n    }\n    return {\n        update,\n        dispose,\n        group\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvd2VhcG9ucy92aXN1YWxzL2hvbWluZ01pc3NpbGVWaXN1YWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEI7QUFTOUIsTUFBTUMsZUFBZSxJQUFJRCwwQ0FBYSxDQUFDLEdBQUcsR0FBRztBQUM3QyxNQUFNRyxjQUFjLElBQUlILDBDQUFhO0FBb0I5QixTQUFTSSwwQkFBMEJDLEtBQWtCLEVBQUVDLFVBQTBCO0lBQ3RGQyxNQUFNO0lBQ05DLFVBQVU7SUFDVkMsT0FBTztBQUNULENBQUM7SUFDQyxNQUFNQyxRQUFRLElBQUlWLHdDQUFXO0lBQzdCSyxNQUFNTyxHQUFHLENBQUNGO0lBRVYsTUFBTUcsZUFBZSxJQUFJYix1REFBMEIsQ0FBQztRQUNsRGUsT0FBT1QsUUFBUUMsSUFBSTtRQUNuQlMsV0FBVztRQUNYQyxXQUFXO1FBQ1hULFVBQVUsSUFBSVIsd0NBQVcsQ0FBQ00sUUFBUUUsUUFBUTtRQUMxQ1csbUJBQW1CO0lBQ3JCO0lBQ0EsTUFBTUMsY0FBYyxJQUFJcEIsdURBQTBCLENBQUM7UUFBRWUsT0FBTztRQUFVQyxXQUFXO1FBQU1DLFdBQVc7SUFBSTtJQUN0RyxNQUFNSSxnQkFBZ0IsSUFBSXJCLG9EQUF1QixDQUFDO1FBQ2hEZSxPQUFPVCxRQUFRRyxLQUFLO1FBQ3BCYyxhQUFhO1FBQ2JDLFNBQVM7UUFDVEMsVUFBVXpCLG1EQUFzQjtJQUNsQztJQUVBLE1BQU0yQixlQUFlLElBQUkzQixtREFBc0IsQ0FBQyxNQUFNLE1BQU0sS0FBSyxJQUFJLEdBQUc7SUFDeEUsTUFBTTZCLGVBQWUsSUFBSTdCLCtDQUFrQixDQUFDLE1BQU0sS0FBSyxJQUFJO0lBQzNELE1BQU0rQixjQUFjLElBQUkvQiw4Q0FBaUIsQ0FBQyxNQUFNLEtBQUs7SUFDckQsTUFBTWlDLGdCQUFnQixJQUFJakMsK0NBQWtCLENBQUMsTUFBTSxLQUFLLElBQUk7SUFDNUQsTUFBTWtDLGdCQUFnQixJQUFJbEMsbURBQXNCLENBQUMsTUFBTSxNQUFNLEtBQUssR0FB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TztZQUNsQ3hELGFBQWF5RCxNQUFNLENBQUMzQjtRQUN0QjtJQUNGO0lBRUEsU0FBUzBCO1FBQ1AscUZBQXFGO1FBQ3JGLEtBQUssTUFBTSxHQUFHekIsWUFBWSxJQUFJL0IsYUFBYztZQUMxQ2hDLE1BQU11RixNQUFNLENBQUN4QixZQUFZUCxJQUFJO1lBQzdCTyxZQUFZaEUsS0FBSyxDQUFDcUYsUUFBUSxDQUFDSSxPQUFPO1FBQ3BDO1FBQ0F4RCxhQUFhMEQsS0FBSztRQUNsQi9GLE1BQU00RixNQUFNLENBQUN2RjtRQUNiaUIsYUFBYXVFLE9BQU87UUFDcEJyRSxhQUFhcUUsT0FBTztRQUNwQm5FLFlBQVltRSxPQUFPO1FBQ25CakUsY0FBY2lFLE9BQU87UUFDckJoRSxjQUFjZ0UsT0FBTztRQUNyQnJGLGFBQWFxRixPQUFPO1FBQ3BCOUUsWUFBWThFLE9BQU87UUFDbkI3RSxjQUFjNkUsT0FBTztRQUNyQi9ELGNBQWMrRCxPQUFPO1FBQ3JCN0QsY0FBYzZELE9BQU87SUFDdkI7SUFFQSxPQUFPO1FBQUUvQjtRQUFRK0I7UUFBU3hGO0lBQU07QUFDbEMiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3dlYXBvbnMvdmlzdWFscy9ob21pbmdNaXNzaWxlVmlzdWFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHR5cGUgeyBIb21pbmdNaXNzaWxlU3RhdGUgfSBmcm9tICdAL3dlYXBvbnMvaG9taW5nTWlzc2lsZSdcblxuZXhwb3J0IHR5cGUgTWlzc2lsZVBhbGV0dGUgPSB7XG4gIGJvZHk6IG51bWJlclxuICBlbWlzc2l2ZTogbnVtYmVyXG4gIHRyYWlsOiBudW1iZXJcbn1cblxuY29uc3QgQkFTRV9GT1JXQVJEID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSlcbmNvbnN0IFRNUF9GT1JXQVJEID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuXG5leHBvcnQgdHlwZSBIb21pbmdNaXNzaWxlVmlzdWFsID0ge1xuICB1cGRhdGU6IChtaXNzaWxlczogVmlzdWFsTWlzc2lsZVN0YXRlW10pID0+IHZvaWRcbiAgZGlzcG9zZTogKCkgPT4gdm9pZFxuICByZWFkb25seSBncm91cDogVEhSRUUuR3JvdXBcbn1cblxudHlwZSBNaXNzaWxlUmVuZGVyU3RhdGUgPSB7XG4gIG1lc2g6IFRIUkVFLkdyb3VwXG4gIHRyYWlsOiBUSFJFRS5MaW5lXG4gIGZsYW1lOiBUSFJFRS5NZXNoXG4gIHNtb2tlOiBUSFJFRS5NZXNoXG59XG5cbnR5cGUgVmlzdWFsTWlzc2lsZVN0YXRlID0gSG9taW5nTWlzc2lsZVN0YXRlICYge1xuICBzdGFnZT86ICdlamVjdGluZycgfCAnYnVybmluZydcbiAgc3RhZ2VNcz86IG51bWJlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSG9taW5nTWlzc2lsZVZpc3VhbChzY2VuZTogVEhSRUUuU2NlbmUsIHBhbGV0dGU6IE1pc3NpbGVQYWxldHRlID0ge1xuICBib2R5OiAweGQzNmYzOSxcbiAgZW1pc3NpdmU6IDB4ZmY2YjJmLFxuICB0cmFpbDogMHhmZmM0OGEsXG59KTogSG9taW5nTWlzc2lsZVZpc3VhbCB7XG4gIGNvbnN0IGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKClcbiAgc2NlbmUuYWRkKGdyb3VwKVxuXG4gIGNvbnN0IGJvZHlNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgY29sb3I6IHBhbGV0dGUuYm9keSxcbiAgICBtZXRhbG5lc3M6IDAuMzUsXG4gICAgcm91Z2huZXNzOiAwLjQsXG4gICAgZW1pc3NpdmU6IG5ldyBUSFJFRS5Db2xvcihwYWxldHRlLmVtaXNzaXZlKSxcbiAgICBlbWlzc2l2ZUludGVuc2l0eTogMC40LFxuICB9KVxuICBjb25zdCBmaW5NYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiAweDMzMzg0NSwgbWV0YWxuZXNzOiAwLjE1LCByb3VnaG5lc3M6IDAuNiB9KVxuICBjb25zdCB0cmFpbE1hdGVyaWFsID0gbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtcbiAgICBjb2xvcjogcGFsZXR0ZS50cmFpbCxcbiAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICBvcGFjaXR5OiAwLjU1LFxuICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLFxuICB9KVxuXG4gIGNvbnN0IGJvZHlHZW9tZXRyeSA9IG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAuMjUsIDAuMzIsIDEuNCwgMTAsIDEsIHRydWUpXG4gIGNvbnN0IG5vc2VHZW9tZXRyeSA9IG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoMC4zMiwgMC43LCAxMCwgMSlcbiAgY29uc3QgZmluR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMC4wNSwgMC40LCAwLjI1KVxuICBjb25zdCBmbGFtZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkNvbmVHZW9tZXRyeSgwLjE4LCAwLjksIDEyLCAxKVxuICBjb25zdCBzbW9rZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMC4wOCwgMC4yMiwgMS40LCA4LCAxLCB0cnVlKVxuXG4gIGNvbnN0IGZsYW1lTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgIGNvbG9yOiBwYWxldHRlLmVtaXNzaXZlLFxuICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgIG9wYWNpdHk6IDAuOSxcbiAgICBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZyxcbiAgfSlcbiAgY29uc3Qgc21va2VNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgY29sb3I6IDB4NDQ0ZjYzLFxuICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgIG9wYWNpdHk6IDAuNDUsXG4gICAgZGVwdGhXcml0ZTogZmFsc2UsXG4gICAgYmxlbmRpbmc6IFRIUkVFLk5vcm1hbEJsZW5kaW5nLFxuICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsXG4gIH0pXG5cbiAgY29uc3QgcmVuZGVyU3RhdGVzID0gbmV3IE1hcDxudW1iZXIsIE1pc3NpbGVSZW5kZXJTdGF0ZT4oKVxuXG4gIGZ1bmN0aW9uIGJ1aWxkTWlzc2lsZSgpOiBNaXNzaWxlUmVuZGVyU3RhdGUge1xuICAgIC8vMS4tIENvbnN0cnVjdCBhIHJldXNhYmxlIG1pc3NpbGUgcmlnIHNvIHBvb2xlZCBwcm9qZWN0aWxlcyBzaGFyZSBHUFUgYnVmZmVycy5cbiAgICBjb25zdCBtaXNzaWxlR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKVxuXG4gICAgY29uc3QgYm9keSA9IG5ldyBUSFJFRS5NZXNoKGJvZHlHZW9tZXRyeSwgYm9keU1hdGVyaWFsKVxuICAgIGJvZHkucm90YXRpb24ueCA9IE1hdGguUEkgLyAyXG4gICAgbWlzc2lsZUdyb3VwLmFkZChib2R5KVxuXG4gICAgY29uc3Qgbm9zZSA9IG5ldyBUSFJFRS5NZXNoKG5vc2VHZW9tZXRyeSwgYm9keU1hdGVyaWFsKVxuICAgIG5vc2UucG9zaXRpb24ueiA9IC0xXG4gICAgbWlzc2lsZUdyb3VwLmFkZChub3NlKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgIGNvbnN0IGZpbiA9IG5ldyBUSFJFRS5NZXNoKGZpbkdlb21ldHJ5LCBmaW5NYXRlcmlhbClcbiAgICAgIGZpbi5wb3NpdGlvbi5zZXQoMCwgTWF0aC5zaW4oKGkgKiBNYXRoLlBJKSAvIDIpICogMC4zNSwgTWF0aC5jb3MoKGkgKiBNYXRoLlBJKSAvIDIpICogMC4zNSlcbiAgICAgIGZpbi5yb3RhdGlvbi54ID0gTWF0aC5QSSAvIDJcbiAgICAgIGZpbi5yb3RhdGlvbi55ID0gKGkgKiBNYXRoLlBJKSAvIDJcbiAgICAgIG1pc3NpbGVHcm91cC5hZGQoZmluKVxuICAgIH1cblxuICAgIGNvbnN0IHRyYWlsR2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKVxuICAgIGNvbnN0IHRyYWlsID0gbmV3IFRIUkVFLkxpbmUodHJhaWxHZW9tZXRyeSwgdHJhaWxNYXRlcmlhbClcbiAgICBtaXNzaWxlR3JvdXAuYWRkKHRyYWlsKVxuXG4gICAgY29uc3QgZmxhbWUgPSBuZXcgVEhSRUUuTWVzaChmbGFtZUdlb21ldHJ5LCBmbGFtZU1hdGVyaWFsKVxuICAgIGZsYW1lLnBvc2l0aW9uLnogPSAwLjc1XG4gICAgZmxhbWUucm90YXRpb24ueCA9IE1hdGguUElcbiAgICBtaXNzaWxlR3JvdXAuYWRkKGZsYW1lKVxuXG4gICAgY29uc3Qgc21va2UgPSBuZXcgVEhSRUUuTWVzaChzbW9rZUdlb21ldHJ5LCBzbW9rZU1hdGVyaWFsLmNsb25lKCkpXG4gICAgc21va2UucG9zaXRpb24ueiA9IDAuOVxuICAgIHNtb2tlLnJvdGF0aW9uLnggPSBNYXRoLlBJIC8gMlxuICAgIG1pc3NpbGVHcm91cC5hZGQoc21va2UpXG5cbiAgICBncm91cC5hZGQobWlzc2lsZUdyb3VwKVxuXG4gICAgcmV0dXJuIHsgbWVzaDogbWlzc2lsZUdyb3VwLCB0cmFpbCwgZmxhbWUsIHNtb2tlIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShtaXNzaWxlczogVmlzdWFsTWlzc2lsZVN0YXRlW10pIHtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxudW1iZXI+KClcblxuICAgIGZvciAoY29uc3QgbWlzc2lsZSBvZiBtaXNzaWxlcykge1xuICAgICAgc2Vlbi5hZGQobWlzc2lsZS5pZClcbiAgICAgIGxldCByZW5kZXJTdGF0ZSA9IHJlbmRlclN0YXRlcy5nZXQobWlzc2lsZS5pZClcbiAgICAgIGlmICghcmVuZGVyU3RhdGUpIHtcbiAgICAgICAgLy8yLi0gU3Bhd24gYSB2aXN1YWwgc2hlbGwgd2hlbiB0aGUgc2ltdWxhdGlvbiByZXBvcnRzIGEgbmV3IG1pc3NpbGUgaW5zdGFuY2UuXG4gICAgICAgIHJlbmRlclN0YXRlID0gYnVpbGRNaXNzaWxlKClcbiAgICAgICAgcmVuZGVyU3RhdGVzLnNldChtaXNzaWxlLmlkLCByZW5kZXJTdGF0ZSlcbiAgICAgIH1cblxuICAgICAgLy8zLi0gU25hcCB0aGUgcmlnIHRvIHRoZSBhdXRob3JpdGF0aXZlIGtpbmVtYXRpYyBzdGF0ZSBnZW5lcmF0ZWQgYnkgdGhlIHdlYXBvbiBsb2dpYy5cbiAgICAgIHJlbmRlclN0YXRlLm1lc2gucG9zaXRpb24uY29weShtaXNzaWxlLnBvc2l0aW9uKVxuXG4gICAgICBUTVBfRk9SV0FSRC5jb3B5KG1pc3NpbGUudmVsb2NpdHkpXG4gICAgICBpZiAoVE1QX0ZPUldBUkQubGVuZ3RoU3EoKSA8IDFlLTYpIHtcbiAgICAgICAgVE1QX0ZPUldBUkQuc2V0KDAsIDAsIDEpXG4gICAgICB9XG4gICAgICBUTVBfRk9SV0FSRC5ub3JtYWxpemUoKVxuICAgICAgcmVuZGVyU3RhdGUubWVzaC5xdWF0ZXJuaW9uLnNldEZyb21Vbml0VmVjdG9ycyhCQVNFX0ZPUldBUkQsIFRNUF9GT1JXQVJEKVxuXG4gICAgICBjb25zdCBidXJuaW5nID0gbWlzc2lsZS5zdGFnZSA9PT0gJ2J1cm5pbmcnXG4gICAgICByZW5kZXJTdGF0ZS5mbGFtZS52aXNpYmxlID0gYnVybmluZ1xuICAgICAgcmVuZGVyU3RhdGUuc21va2UudmlzaWJsZSA9IGJ1cm5pbmdcbiAgICAgIGlmIChidXJuaW5nKXtcbiAgICAgICAgY29uc3Qgc3RhZ2VNcyA9IG1pc3NpbGUuc3RhZ2VNcyA/PyAwXG4gICAgICAgIGNvbnN0IGludGVuc2l0eSA9IE1hdGgubWluKDEsIHN0YWdlTXMgLyA0MDApXG4gICAgICAgIHJlbmRlclN0YXRlLmZsYW1lLnNjYWxlLnNldFNjYWxhcigwLjcgKyBpbnRlbnNpdHkgKiAwLjYpXG4gICAgICAgIHJlbmRlclN0YXRlLnNtb2tlLnNjYWxlLnNldCgxICsgaW50ZW5zaXR5ICogMC44LCAxICsgaW50ZW5zaXR5ICogMC44LCAxKVxuICAgICAgICBjb25zdCBzbW9rZU1hdCA9IHJlbmRlclN0YXRlLnNtb2tlLm1hdGVyaWFsIGFzIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsXG4gICAgICAgIHNtb2tlTWF0Lm9wYWNpdHkgPSAwLjMgKyBpbnRlbnNpdHkgKiAwLjNcbiAgICAgIH1cblxuICAgICAgLy80Li0gUmVidWlsZCB0aGUgZXhoYXVzdCByaWJib24gc28gY29udHJhaWxzIGFwcGVhciB3aGVyZSBndWlkYW5jZSBoaXN0b3J5IHNheXMgdGhleSB3ZXJlLlxuICAgICAgY29uc3QgcG9pbnRzID0gbWlzc2lsZS5zbW9rZVRyYWlsLmxlbmd0aCA+IDAgPyBtaXNzaWxlLnNtb2tlVHJhaWwgOiBbbWlzc2lsZS5wb3NpdGlvbl1cbiAgICAgIHJlbmRlclN0YXRlLnRyYWlsLmdlb21ldHJ5LnNldEZyb21Qb2ludHMocG9pbnRzKVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgW2lkLCByZW5kZXJTdGF0ZV0gb2YgcmVuZGVyU3RhdGVzKSB7XG4gICAgICBpZiAoc2Vlbi5oYXMoaWQpKSBjb250aW51ZVxuICAgICAgLy81Li0gQ2xlYW4gdXAgdmlzdWFscyBmb3IgZGV0b25hdGVkIG1pc3NpbGVzIHRvIGtlZXAgdGhlIHBvb2wgbGVhbi5cbiAgICAgIGdyb3VwLnJlbW92ZShyZW5kZXJTdGF0ZS5tZXNoKVxuICAgICAgcmVuZGVyU3RhdGUudHJhaWwuZ2VvbWV0cnkuZGlzcG9zZSgpXG4gICAgICByZW5kZXJTdGF0ZXMuZGVsZXRlKGlkKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgLy82Li0gUmVsZWFzZSBwb29sZWQgYXNzZXRzIHdoZW4gdGhlIG93bmluZyBjb250cm9sbGVyIHRlYXJzIGRvd24gdGhlIHdlYXBvbiBzeXN0ZW1zLlxuICAgIGZvciAoY29uc3QgWywgcmVuZGVyU3RhdGVdIG9mIHJlbmRlclN0YXRlcykge1xuICAgICAgZ3JvdXAucmVtb3ZlKHJlbmRlclN0YXRlLm1lc2gpXG4gICAgICByZW5kZXJTdGF0ZS50cmFpbC5nZW9tZXRyeS5kaXNwb3NlKClcbiAgICB9XG4gICAgcmVuZGVyU3RhdGVzLmNsZWFyKClcbiAgICBzY2VuZS5yZW1vdmUoZ3JvdXApXG4gICAgYm9keUdlb21ldHJ5LmRpc3Bvc2UoKVxuICAgIG5vc2VHZW9tZXRyeS5kaXNwb3NlKClcbiAgICBmaW5HZW9tZXRyeS5kaXNwb3NlKClcbiAgICBmbGFtZUdlb21ldHJ5LmRpc3Bvc2UoKVxuICAgIHNtb2tlR2VvbWV0cnkuZGlzcG9zZSgpXG4gICAgYm9keU1hdGVyaWFsLmRpc3Bvc2UoKVxuICAgIGZpbk1hdGVyaWFsLmRpc3Bvc2UoKVxuICAgIHRyYWlsTWF0ZXJpYWwuZGlzcG9zZSgpXG4gICAgZmxhbWVNYXRlcmlhbC5kaXNwb3NlKClcbiAgICBzbW9rZU1hdGVyaWFsLmRpc3Bvc2UoKVxuICB9XG5cbiAgcmV0dXJuIHsgdXBkYXRlLCBkaXNwb3NlLCBncm91cCB9XG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJCQVNFX0ZPUldBUkQiLCJWZWN0b3IzIiwiVE1QX0ZPUldBUkQiLCJjcmVhdGVIb21pbmdNaXNzaWxlVmlzdWFsIiwic2NlbmUiLCJwYWxldHRlIiwiYm9keSIsImVtaXNzaXZlIiwidHJhaWwiLCJncm91cCIsIkdyb3VwIiwiYWRkIiwiYm9keU1hdGVyaWFsIiwiTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJjb2xvciIsIm1ldGFsbmVzcyIsInJvdWdobmVzcyIsIkNvbG9yIiwiZW1pc3NpdmVJbnRlbnNpdHkiLCJmaW5NYXRlcmlhbCIsInRyYWlsTWF0ZXJpYWwiLCJMaW5lQmFzaWNNYXRlcmlhbCIsInRyYW5zcGFyZW50Iiwib3BhY2l0eSIsImJsZW5kaW5nIiwiQWRkaXRpdmVCbGVuZGluZyIsImJvZHlHZW9tZXRyeSIsIkN5bGluZGVyR2VvbWV0cnkiLCJub3NlR2VvbWV0cnkiLCJDb25lR2VvbWV0cnkiLCJmaW5HZW9tZXRyeSIsIkJveEdlb21ldHJ5IiwiZmxhbWVHZW9tZXRyeSIsInNtb2tlR2VvbWV0cnkiLCJmbGFtZU1hdGVyaWFsIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJzbW9rZU1hdGVyaWFsIiwiZGVwdGhXcml0ZSIsIk5vcm1hbEJsZW5kaW5nIiwic2lkZSIsIkRvdWJsZVNpZGUiLCJyZW5kZXJTdGF0ZXMiLCJNYXAiLCJidWlsZE1pc3NpbGUiLCJtaXNzaWxlR3JvdXAiLCJNZXNoIiwicm90YXRpb24iLCJ4IiwiTWF0aCIsIlBJIiwibm9zZSIsInBvc2l0aW9uIiwieiIsImkiLCJmaW4iLCJzZXQiLCJzaW4iLCJjb3MiLCJ5IiwidHJhaWxHZW9tZXRyeSIsIkJ1ZmZlckdlb21ldHJ5IiwiTGluZSIsImZsYW1lIiwic21va2UiLCJjbG9uZSIsIm1lc2giLCJ1cGRhdGUiLCJtaXNzaWxlcyIsInNlZW4iLCJTZXQiLCJtaXNzaWxlIiwiaWQiLCJyZW5kZXJTdGF0ZSIsImdldCIsImNvcHkiLCJ2ZWxvY2l0eSIsImxlbmd0aFNxIiwibm9ybWFsaXplIiwicXVhdGVybmlvbiIsInNldEZyb21Vbml0VmVjdG9ycyIsImJ1cm5pbmciLCJzdGFnZSIsInZpc2libGUiLCJzdGFnZU1zIiwiaW50ZW5zaXR5IiwibWluIiwic2NhbGUiLCJzZXRTY2FsYXIiLCJzbW9rZU1hdCIsIm1hdGVyaWFsIiwicG9pbnRzIiwic21va2VUcmFpbCIsImxlbmd0aCIsImdlb21ldHJ5Iiwic2V0RnJvbVBvaW50cyIsImhhcyIsInJlbW92ZSIsImRpc3Bvc2UiLCJkZWxldGUiLCJjbGVhciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/weapons/visuals/homingMissileVisual.ts\n");

/***/ }),

/***/ "(ssr)/./src/weapons/visuals/neonLaserVisual.ts":
/*!************************************************!*\
  !*** ./src/weapons/visuals/neonLaserVisual.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNeonLaserVisual: () => (/* binding */ createNeonLaserVisual)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nconst DEFAULT_FORWARD = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, 1);\nconst TMP_DIRECTION = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\nconst TMP_POSITION = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\nconst TMP_QUATERNION = new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion();\nfunction createNeonLaserVisual(scene, palette = {\n    color: 0x45ffff\n}) {\n    // Enhanced material: Switch to MeshStandardMaterial for emissive glow and light interaction.\n    // Retain blending for overdraw, but add subtle metallic sheen.\n    const material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({\n        color: palette.color,\n        emissive: palette.color,\n        emissiveIntensity: 0.4,\n        transparent: true,\n        opacity: 0.75,\n        blending: three__WEBPACK_IMPORTED_MODULE_0__.AdditiveBlending,\n        depthWrite: false,\n        roughness: 0.05,\n        metalness: 0.15\n    });\n    // Upgrade to CylinderGeometry for a sleek, beam-like shape with smooth radial segments.\n    // Open-ended to avoid cap artifacts; pre-oriented and centered.\n    const geometry = new three__WEBPACK_IMPORTED_MODULE_0__.CylinderGeometry(0.225, 0.225, 1, 12, 1, true); // Higher segments for smoothness\n    geometry.rotateX(Math.PI / 2); // Align along Z\n    geometry.translate(0, 0, -0.5); // Center for midpoint anchoring\n    const beam = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, material);\n    beam.visible = false;\n    beam.receiveShadow = false;\n    beam.castShadow = false; // Lasers shouldn't shadow\n    scene.add(beam);\n    function update(state) {\n        // 1. Hide the beam outright when the weapon idles so the scene stays clean.\n        if (!state.active || state.length <= 0) {\n            beam.visible = false;\n            return;\n        }\n        TMP_DIRECTION.copy(state.direction);\n        if (TMP_DIRECTION.lengthSq() === 0) {\n            beam.visible = false;\n            return;\n        }\n        TMP_DIRECTION.normalize();\n        beam.visible = true;\n        // 2. Stretch the mesh along its forward axis to match the sampled range.\n        // Add dynamic taper for depth illusion (wider at origin).\n        const taperFactor = 0.85 + state.length * 0.005;\n        beam.scale.set(taperFactor, 1, state.length);\n        // 3. Anchor the visual halfway between the muzzle and the measured hit point.\n        TMP_POSITION.copy(state.origin).addScaledVector(TMP_DIRECTION, state.length * 0.5);\n        beam.position.copy(TMP_POSITION);\n        TMP_QUATERNION.setFromUnitVectors(DEFAULT_FORWARD, TMP_DIRECTION);\n        beam.quaternion.copy(TMP_QUATERNION);\n        // 4. Modulate the glow so attenuation directly affects the rendered opacity and emissive.\n        // Smoother falloff curve for natural fade.\n        const clamped = Math.max(0.2, Math.min(1, state.intensity));\n        const falloff = Math.pow(clamped, 0.6); // Exponential for quicker tail-off\n        material.opacity = 0.35 + falloff * 0.5;\n        material.emissiveIntensity = 0.2 + falloff * 0.6;\n        material.color.setScalar(0.55 + falloff * 0.45);\n    }\n    function dispose() {\n        // 5. Release GPU buffers when the owning entity despawns to prevent leaks.\n        scene.remove(beam);\n        geometry.dispose();\n        material.dispose();\n    }\n    return {\n        update,\n        dispose,\n        beam\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvd2VhcG9ucy92aXN1YWxzL25lb25MYXNlclZpc3VhbC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQU8vQixNQUFNQyxrQkFBa0IsSUFBSUQsMENBQWEsQ0FBQyxHQUFHLEdBQUc7QUFDaEQsTUFBTUcsZ0JBQWdCLElBQUlILDBDQUFhO0FBQ3ZDLE1BQU1JLGVBQWUsSUFBSUosMENBQWE7QUFDdEMsTUFBTUssaUJBQWlCLElBQUlMLDZDQUFnQjtBQVFwQyxTQUFTTyxzQkFBc0JDLEtBQWtCLEVBQUVDLFVBQTRCO0lBQUVDLE9BQU87QUFBUyxDQUFDO0lBQ3ZHLDZGQUE2RjtJQUM3RiwrREFBK0Q7SUFDL0QsTUFBTUMsV0FBVyxJQUFJWCx1REFBMEIsQ0FBQztRQUM5Q1UsT0FBT0QsUUFBUUMsS0FBSztRQUNwQkcsVUFBVUosUUFBUUMsS0FBSztRQUN2QkksbUJBQW1CO1FBQ25CQyxhQUFhO1FBQ2JDLFNBQVM7UUFDVEMsVUFBVWpCLG1EQUFzQjtRQUNoQ21CLFlBQVk7UUFDWkMsV0FBVztRQUNYQyxXQUFXO0lBQ2I7SUFFQSx3RkFBd0Y7SUFDeEYsZ0VBQWdFO0lBQ2hFLE1BQU1DLFdBQVcsSUFBSXRCLG1EQUFzQixDQUFDLE9BQU8sT0FBTyxHQUFHLElBQUksR0FBRyxPQUFPLGlDQUFpQztJQUM1R3NCLFNBQVNFLE9BQU8sQ0FBQ0MsS0FBS0MsRUFBRSxHQUFHLElBQUksZ0JBQWdCO0lBQy9DSixTQUFTSyxTQUFTLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxnQ0FBZ0M7SUFFaEUsTUFBTUMsT0FBTyxJQUFJNUIsdUNBQVUsQ0FBQ3NCLFVBQVVYO0lBQ3RDaUIsS0FBS0UsT0FBTyxHQUFHO0lBQ2ZGLEtBQUtHLGFBQWEsR0FBRztJQUNyQkgsS0FBS0ksVUFBVSxHQUFHLE9BQU8sMEJBQTBCO0lBQ25EeEIsTUFBTXlCLEdBQUcsQ0FBQ0w7SUFFVixTQUFTTSxPQUFPQyxLQUFxQjtRQUNuQyw0RUFBNEU7UUFDNUUsSUFBSSxDQUFDQSxNQUFNQyxNQUFNLElBQUlELE1BQU1FLE1BQU0sSUFBSSxHQUFHO1lBQ3RDVCxLQUFLRSxPQUFPLEdBQUc7WUFDZjtRQUNGO1FBRUEzQixjQUFjbUMsSUFBSSxDQUFDSCxNQUFNSSxTQUFTO1FBQ2xDLElBQUlwQyxjQUFjcUMsUUFBUSxPQUFPLEdBQUc7WUFDbENaLEtBQUtFLE9BQU8sR0FBRztZQUNmO1FBQ0Y7UUFFQTNCLGNBQWNzQyxTQUFTO1FBQ3ZCYixLQUFLRSxPQUFPLEdBQUc7UUFFZix5RUFBeUU7UUFDekUsMERBQTBEO1FBQzFELE1BQU1ZLGNBQWMsT0FBUVAsTUFBTUUsTUFBTSxHQUFHO1FBQzNDVCxLQUFLZSxLQUFLLENBQUNDLEdBQUcsQ0FBQ0YsYUFBYSxHQUFHUCxNQUFNRSxNQUFNO1FBRTNDLDhFQUE4RTtRQUM5RWpDLGFBQWFrQyxJQUFJLENBQUNILE1BQU1VLE1BQU0sRUFBRUMsZUFBZSxDQUFDM0MsZUFBZWdDLE1BQU1FLE1BQU0sR0FBRztRQUM5RVQsS0FBS21CLFFBQVEsQ0FBQ1QsSUFBSSxDQUFDbEM7UUFFbkJDLGVBQWUyQyxrQkFBa0IsQ0FBQy9DLGlCQUFpQkU7UUFDbkR5QixLQUFLcUIsVUFBVSxDQUFDWCxJQUFJLENBQUNqQztRQUVyQiwwRkFBMEY7UUFDMUYsMkNBQTJDO1FBQzNDLE1BQU02QyxVQUFVekIsS0FBSzBCLEdBQUcsQ0FBQyxLQUFLMUIsS0FBSzJCLEdBQUcsQ0FBQyxHQUFHakIsTUFBTWtCLFNBQVM7UUFDekQsTUFBTUMsVUFBVTdCLEtBQUs4QixHQUFHLENBQUNMLFNBQVMsTUFBTSxtQ0FBbUM7UUFDM0V2QyxTQUFTSyxPQUFPLEdBQUcsT0FBT3NDLFVBQVU7UUFDcEMzQyxTQUFTRyxpQkFBaUIsR0FBRyxNQUFNd0MsVUFBVTtRQUM3QzNDLFNBQVNELEtBQUssQ0FBQzhDLFNBQVMsQ0FBQyxPQUFPRixVQUFVO0lBQzVDO0lBRUEsU0FBU0c7UUFDUCwyRUFBMkU7UUFDM0VqRCxNQUFNa0QsTUFBTSxDQUFDOUI7UUFDYk4sU0FBU21DLE9BQU87UUFDaEI5QyxTQUFTOEMsT0FBTztJQUNsQjtJQUVBLE9BQU87UUFBRXZCO1FBQVF1QjtRQUFTN0I7SUFBSztBQUNqQyIsInNvdXJjZXMiOlsiL2FwcC9zcmMvd2VhcG9ucy92aXN1YWxzL25lb25MYXNlclZpc3VhbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgdHlwZSB7IE5lb25MYXNlclN0YXRlIH0gZnJvbSAnQC93ZWFwb25zL25lb25MYXNlcic7XG5cbmV4cG9ydCB0eXBlIE5lb25MYXNlclBhbGV0dGUgPSB7XG4gIGNvbG9yOiBudW1iZXI7XG59O1xuXG5jb25zdCBERUZBVUxUX0ZPUldBUkQgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKTtcbmNvbnN0IFRNUF9ESVJFQ1RJT04gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuY29uc3QgVE1QX1BPU0lUSU9OID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbmNvbnN0IFRNUF9RVUFURVJOSU9OID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcblxuZXhwb3J0IHR5cGUgTmVvbkxhc2VyVmlzdWFsID0ge1xuICB1cGRhdGU6IChzdGF0ZTogTmVvbkxhc2VyU3RhdGUpID0+IHZvaWQ7XG4gIGRpc3Bvc2U6ICgpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IGJlYW06IFRIUkVFLk1lc2g7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTmVvbkxhc2VyVmlzdWFsKHNjZW5lOiBUSFJFRS5TY2VuZSwgcGFsZXR0ZTogTmVvbkxhc2VyUGFsZXR0ZSA9IHsgY29sb3I6IDB4NDVmZmZmIH0pOiBOZW9uTGFzZXJWaXN1YWwge1xuICAvLyBFbmhhbmNlZCBtYXRlcmlhbDogU3dpdGNoIHRvIE1lc2hTdGFuZGFyZE1hdGVyaWFsIGZvciBlbWlzc2l2ZSBnbG93IGFuZCBsaWdodCBpbnRlcmFjdGlvbi5cbiAgLy8gUmV0YWluIGJsZW5kaW5nIGZvciBvdmVyZHJhdywgYnV0IGFkZCBzdWJ0bGUgbWV0YWxsaWMgc2hlZW4uXG4gIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICBjb2xvcjogcGFsZXR0ZS5jb2xvcixcbiAgICBlbWlzc2l2ZTogcGFsZXR0ZS5jb2xvcixcbiAgICBlbWlzc2l2ZUludGVuc2l0eTogMC40LFxuICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgIG9wYWNpdHk6IDAuNzUsXG4gICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsXG4gICAgZGVwdGhXcml0ZTogZmFsc2UsXG4gICAgcm91Z2huZXNzOiAwLjA1LFxuICAgIG1ldGFsbmVzczogMC4xNVxuICB9KTtcblxuICAvLyBVcGdyYWRlIHRvIEN5bGluZGVyR2VvbWV0cnkgZm9yIGEgc2xlZWssIGJlYW0tbGlrZSBzaGFwZSB3aXRoIHNtb290aCByYWRpYWwgc2VnbWVudHMuXG4gIC8vIE9wZW4tZW5kZWQgdG8gYXZvaWQgY2FwIGFydGlmYWN0czsgcHJlLW9yaWVudGVkIGFuZCBjZW50ZXJlZC5cbiAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSgwLjIyNSwgMC4yMjUsIDEsIDEyLCAxLCB0cnVlKTsgLy8gSGlnaGVyIHNlZ21lbnRzIGZvciBzbW9vdGhuZXNzXG4gIGdlb21ldHJ5LnJvdGF0ZVgoTWF0aC5QSSAvIDIpOyAvLyBBbGlnbiBhbG9uZyBaXG4gIGdlb21ldHJ5LnRyYW5zbGF0ZSgwLCAwLCAtMC41KTsgLy8gQ2VudGVyIGZvciBtaWRwb2ludCBhbmNob3JpbmdcblxuICBjb25zdCBiZWFtID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcbiAgYmVhbS52aXNpYmxlID0gZmFsc2U7XG4gIGJlYW0ucmVjZWl2ZVNoYWRvdyA9IGZhbHNlO1xuICBiZWFtLmNhc3RTaGFkb3cgPSBmYWxzZTsgLy8gTGFzZXJzIHNob3VsZG4ndCBzaGFkb3dcbiAgc2NlbmUuYWRkKGJlYW0pO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZShzdGF0ZTogTmVvbkxhc2VyU3RhdGUpIHtcbiAgICAvLyAxLiBIaWRlIHRoZSBiZWFtIG91dHJpZ2h0IHdoZW4gdGhlIHdlYXBvbiBpZGxlcyBzbyB0aGUgc2NlbmUgc3RheXMgY2xlYW4uXG4gICAgaWYgKCFzdGF0ZS5hY3RpdmUgfHwgc3RhdGUubGVuZ3RoIDw9IDApIHtcbiAgICAgIGJlYW0udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIFRNUF9ESVJFQ1RJT04uY29weShzdGF0ZS5kaXJlY3Rpb24pO1xuICAgIGlmIChUTVBfRElSRUNUSU9OLmxlbmd0aFNxKCkgPT09IDApIHtcbiAgICAgIGJlYW0udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIFRNUF9ESVJFQ1RJT04ubm9ybWFsaXplKCk7XG4gICAgYmVhbS52aXNpYmxlID0gdHJ1ZTtcblxuICAgIC8vIDIuIFN0cmV0Y2ggdGhlIG1lc2ggYWxvbmcgaXRzIGZvcndhcmQgYXhpcyB0byBtYXRjaCB0aGUgc2FtcGxlZCByYW5nZS5cbiAgICAvLyBBZGQgZHluYW1pYyB0YXBlciBmb3IgZGVwdGggaWxsdXNpb24gKHdpZGVyIGF0IG9yaWdpbikuXG4gICAgY29uc3QgdGFwZXJGYWN0b3IgPSAwLjg1ICsgKHN0YXRlLmxlbmd0aCAqIDAuMDA1KTtcbiAgICBiZWFtLnNjYWxlLnNldCh0YXBlckZhY3RvciwgMSwgc3RhdGUubGVuZ3RoKTtcblxuICAgIC8vIDMuIEFuY2hvciB0aGUgdmlzdWFsIGhhbGZ3YXkgYmV0d2VlbiB0aGUgbXV6emxlIGFuZCB0aGUgbWVhc3VyZWQgaGl0IHBvaW50LlxuICAgIFRNUF9QT1NJVElPTi5jb3B5KHN0YXRlLm9yaWdpbikuYWRkU2NhbGVkVmVjdG9yKFRNUF9ESVJFQ1RJT04sIHN0YXRlLmxlbmd0aCAqIDAuNSk7XG4gICAgYmVhbS5wb3NpdGlvbi5jb3B5KFRNUF9QT1NJVElPTik7XG5cbiAgICBUTVBfUVVBVEVSTklPTi5zZXRGcm9tVW5pdFZlY3RvcnMoREVGQVVMVF9GT1JXQVJELCBUTVBfRElSRUNUSU9OKTtcbiAgICBiZWFtLnF1YXRlcm5pb24uY29weShUTVBfUVVBVEVSTklPTik7XG5cbiAgICAvLyA0LiBNb2R1bGF0ZSB0aGUgZ2xvdyBzbyBhdHRlbnVhdGlvbiBkaXJlY3RseSBhZmZlY3RzIHRoZSByZW5kZXJlZCBvcGFjaXR5IGFuZCBlbWlzc2l2ZS5cbiAgICAvLyBTbW9vdGhlciBmYWxsb2ZmIGN1cnZlIGZvciBuYXR1cmFsIGZhZGUuXG4gICAgY29uc3QgY2xhbXBlZCA9IE1hdGgubWF4KDAuMiwgTWF0aC5taW4oMSwgc3RhdGUuaW50ZW5zaXR5KSk7XG4gICAgY29uc3QgZmFsbG9mZiA9IE1hdGgucG93KGNsYW1wZWQsIDAuNik7IC8vIEV4cG9uZW50aWFsIGZvciBxdWlja2VyIHRhaWwtb2ZmXG4gICAgbWF0ZXJpYWwub3BhY2l0eSA9IDAuMzUgKyBmYWxsb2ZmICogMC41O1xuICAgIG1hdGVyaWFsLmVtaXNzaXZlSW50ZW5zaXR5ID0gMC4yICsgZmFsbG9mZiAqIDAuNjtcbiAgICBtYXRlcmlhbC5jb2xvci5zZXRTY2FsYXIoMC41NSArIGZhbGxvZmYgKiAwLjQ1KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgLy8gNS4gUmVsZWFzZSBHUFUgYnVmZmVycyB3aGVuIHRoZSBvd25pbmcgZW50aXR5IGRlc3Bhd25zIHRvIHByZXZlbnQgbGVha3MuXG4gICAgc2NlbmUucmVtb3ZlKGJlYW0pO1xuICAgIGdlb21ldHJ5LmRpc3Bvc2UoKTtcbiAgICBtYXRlcmlhbC5kaXNwb3NlKCk7XG4gIH1cblxuICByZXR1cm4geyB1cGRhdGUsIGRpc3Bvc2UsIGJlYW0gfTtcbn0iXSwibmFtZXMiOlsiVEhSRUUiLCJERUZBVUxUX0ZPUldBUkQiLCJWZWN0b3IzIiwiVE1QX0RJUkVDVElPTiIsIlRNUF9QT1NJVElPTiIsIlRNUF9RVUFURVJOSU9OIiwiUXVhdGVybmlvbiIsImNyZWF0ZU5lb25MYXNlclZpc3VhbCIsInNjZW5lIiwicGFsZXR0ZSIsImNvbG9yIiwibWF0ZXJpYWwiLCJNZXNoU3RhbmRhcmRNYXRlcmlhbCIsImVtaXNzaXZlIiwiZW1pc3NpdmVJbnRlbnNpdHkiLCJ0cmFuc3BhcmVudCIsIm9wYWNpdHkiLCJibGVuZGluZyIsIkFkZGl0aXZlQmxlbmRpbmciLCJkZXB0aFdyaXRlIiwicm91Z2huZXNzIiwibWV0YWxuZXNzIiwiZ2VvbWV0cnkiLCJDeWxpbmRlckdlb21ldHJ5Iiwicm90YXRlWCIsIk1hdGgiLCJQSSIsInRyYW5zbGF0ZSIsImJlYW0iLCJNZXNoIiwidmlzaWJsZSIsInJlY2VpdmVTaGFkb3ciLCJjYXN0U2hhZG93IiwiYWRkIiwidXBkYXRlIiwic3RhdGUiLCJhY3RpdmUiLCJsZW5ndGgiLCJjb3B5IiwiZGlyZWN0aW9uIiwibGVuZ3RoU3EiLCJub3JtYWxpemUiLCJ0YXBlckZhY3RvciIsInNjYWxlIiwic2V0Iiwib3JpZ2luIiwiYWRkU2NhbGVkVmVjdG9yIiwicG9zaXRpb24iLCJzZXRGcm9tVW5pdFZlY3RvcnMiLCJxdWF0ZXJuaW9uIiwiY2xhbXBlZCIsIm1heCIsIm1pbiIsImludGVuc2l0eSIsImZhbGxvZmYiLCJwb3ciLCJzZXRTY2FsYXIiLCJkaXNwb3NlIiwicmVtb3ZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/weapons/visuals/neonLaserVisual.ts\n");

/***/ }),

/***/ "(ssr)/./src/world/chunks/generateHeight.ts":
/*!********************************************!*\
  !*** ./src/world/chunks/generateHeight.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fbm: () => (/* binding */ fbm),\n/* harmony export */   heightAt: () => (/* binding */ heightAt),\n/* harmony export */   normalAt: () => (/* binding */ normalAt)\n/* harmony export */ });\n/* harmony import */ var _engine_difficulty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/engine/difficulty */ \"(ssr)/./src/engine/difficulty.ts\");\n\n// Tiny FBM noise to get hills/mountains\nfunction hash(x, z) {\n    return Math.sin(x * 127.1 + z * 311.7) * 43758.5453 % 1;\n}\nfunction lerp(a, b, t) {\n    return a + (b - a) * t;\n}\nfunction smoothstep(t) {\n    return t * t * (3 - 2 * t);\n}\nfunction noise(x, z) {\n    const xi = Math.floor(x), zi = Math.floor(z);\n    const xf = x - xi, zf = z - zi;\n    const h00 = hash(xi, zi), h10 = hash(xi + 1, zi), h01 = hash(xi, zi + 1), h11 = hash(xi + 1, zi + 1);\n    const u = smoothstep(xf), v = smoothstep(zf);\n    return lerp(lerp(h00, h10, u), lerp(h01, h11, u), v);\n}\nfunction fbm(x, z, octaves = 5, lacunarity = 2, gain = 0.5) {\n    let amp = 1, freq = 0.005, sum = 0;\n    for(let i = 0; i < octaves; i++){\n        sum += amp * noise(x * freq, z * freq);\n        freq *= lacunarity;\n        amp *= gain;\n    }\n    return sum;\n}\nlet envCache = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_0__.getDifficultyState)().environment;\n(0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_0__.onDifficultyChange)((state)=>{\n    //1.- Keep a cached environment reference so repeated height lookups avoid redundant allocations.\n    envCache = state.environment;\n});\nfunction heightAt(x, z) {\n    //1.- Derive canyon width and vertical richness modifiers from the cached difficulty state.\n    const width = Math.max(0.6, envCache.canyonWidth);\n    const richness = 0.8 + envCache.propDensity * 0.1;\n    const scaledX = x / width;\n    const scaledZ = z / width;\n    const hills = fbm(scaledX, scaledZ, 4, 2.0, 0.5) * 40 * richness;\n    const mountains = Math.pow(fbm(scaledX + 1000, scaledZ + 1000, 5, 2.1, 0.45), 3) * 120 * (1 + envCache.windStrength * 0.05);\n    const base = (hills + mountains) / Math.max(1, width * 0.9);\n    const waterline = 8 - envCache.windStrength * 0.4;\n    return Math.max(base, waterline);\n}\nfunction normalAt(x, z, eps = 0.75) {\n    const hL = heightAt(x - eps, z);\n    const hR = heightAt(x + eps, z);\n    const hD = heightAt(x, z - eps);\n    const hU = heightAt(x, z + eps);\n    const n = {\n        x: hL - hR,\n        y: 2 * eps,\n        z: hD - hU\n    };\n    const len = Math.hypot(n.x, n.y, n.z) || 1;\n    return {\n        x: n.x / len,\n        y: n.y / len,\n        z: n.z / len\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvd29ybGQvY2h1bmtzL2dlbmVyYXRlSGVpZ2h0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEU7QUFFNUUsd0NBQXdDO0FBQ3hDLFNBQVNFLEtBQUtDLENBQVEsRUFBRUMsQ0FBUTtJQUFJLE9BQU9DLEtBQUtDLEdBQUcsQ0FBQ0gsSUFBRSxRQUFRQyxJQUFFLFNBQU8sYUFBYTtBQUFFO0FBQ3RGLFNBQVNHLEtBQUtDLENBQVEsRUFBQ0MsQ0FBUSxFQUFDQyxDQUFRO0lBQUUsT0FBT0YsSUFBRSxDQUFDQyxJQUFFRCxDQUFBQSxJQUFHRTtBQUFDO0FBQzFELFNBQVNDLFdBQVdELENBQVE7SUFBRSxPQUFPQSxJQUFFQSxJQUFHLEtBQUUsSUFBRUEsQ0FBQUE7QUFBRTtBQUNoRCxTQUFTRSxNQUFNVCxDQUFRLEVBQUNDLENBQVE7SUFDOUIsTUFBTVMsS0FBR1IsS0FBS1MsS0FBSyxDQUFDWCxJQUFJWSxLQUFHVixLQUFLUyxLQUFLLENBQUNWO0lBQ3RDLE1BQU1ZLEtBQUdiLElBQUVVLElBQUlJLEtBQUdiLElBQUVXO0lBQ3BCLE1BQU1HLE1BQUloQixLQUFLVyxJQUFHRSxLQUFLSSxNQUFJakIsS0FBS1csS0FBRyxHQUFFRSxLQUFLSyxNQUFJbEIsS0FBS1csSUFBR0UsS0FBRyxJQUFJTSxNQUFJbkIsS0FBS1csS0FBRyxHQUFFRSxLQUFHO0lBQzlFLE1BQU1PLElBQUVYLFdBQVdLLEtBQUtPLElBQUVaLFdBQVdNO0lBQ3JDLE9BQU9WLEtBQUtBLEtBQUtXLEtBQUlDLEtBQUlHLElBQUlmLEtBQUthLEtBQUlDLEtBQUlDLElBQUlDO0FBQ2hEO0FBRU8sU0FBU0MsSUFBSXJCLENBQVEsRUFBQ0MsQ0FBUSxFQUFFcUIsVUFBUSxDQUFDLEVBQUVDLGFBQVcsQ0FBQyxFQUFFQyxPQUFLLEdBQUc7SUFDdEUsSUFBSUMsTUFBSSxHQUFHQyxPQUFLLE9BQU9DLE1BQUk7SUFDM0IsSUFBSSxJQUFJQyxJQUFFLEdBQUVBLElBQUVOLFNBQVFNLElBQUk7UUFDeEJELE9BQU9GLE1BQU1oQixNQUFNVCxJQUFFMEIsTUFBTXpCLElBQUV5QjtRQUM3QkEsUUFBUUg7UUFDUkUsT0FBT0Q7SUFDVDtJQUNBLE9BQU9HO0FBQ1Q7QUFFQSxJQUFJRSxXQUFXaEMsc0VBQWtCQSxHQUFHaUMsV0FBVztBQUMvQ2hDLHNFQUFrQkEsQ0FBQyxDQUFDaUM7SUFDbEIsaUdBQWlHO0lBQ2pHRixXQUFXRSxNQUFNRCxXQUFXO0FBQzlCO0FBRU8sU0FBU0UsU0FBU2hDLENBQVEsRUFBQ0MsQ0FBUTtJQUN4QywyRkFBMkY7SUFDM0YsTUFBTWdDLFFBQVEvQixLQUFLZ0MsR0FBRyxDQUFDLEtBQUtMLFNBQVNNLFdBQVc7SUFDaEQsTUFBTUMsV0FBVyxNQUFNUCxTQUFTUSxXQUFXLEdBQUc7SUFDOUMsTUFBTUMsVUFBVXRDLElBQUlpQztJQUNwQixNQUFNTSxVQUFVdEMsSUFBSWdDO0lBQ3BCLE1BQU1PLFFBQVFuQixJQUFJaUIsU0FBUUMsU0FBUSxHQUFFLEtBQUksT0FBTyxLQUFLSDtJQUNwRCxNQUFNSyxZQUFZdkMsS0FBS3dDLEdBQUcsQ0FBQ3JCLElBQUlpQixVQUFRLE1BQUtDLFVBQVEsTUFBSyxHQUFFLEtBQUksT0FBTyxLQUFLLE1BQU8sS0FBSVYsU0FBU2MsWUFBWSxHQUFHLElBQUc7SUFDakgsTUFBTUMsT0FBTyxDQUFDSixRQUFRQyxTQUFRLElBQUt2QyxLQUFLZ0MsR0FBRyxDQUFDLEdBQUdELFFBQVE7SUFDdkQsTUFBTVksWUFBWSxJQUFJaEIsU0FBU2MsWUFBWSxHQUFHO0lBQzlDLE9BQU96QyxLQUFLZ0MsR0FBRyxDQUFDVSxNQUFNQztBQUN4QjtBQUVPLFNBQVNDLFNBQVM5QyxDQUFRLEVBQUNDLENBQVEsRUFBRThDLE1BQUksSUFBSTtJQUNsRCxNQUFNQyxLQUFLaEIsU0FBU2hDLElBQUUrQyxLQUFLOUM7SUFDM0IsTUFBTWdELEtBQUtqQixTQUFTaEMsSUFBRStDLEtBQUs5QztJQUMzQixNQUFNaUQsS0FBS2xCLFNBQVNoQyxHQUFHQyxJQUFFOEM7SUFDekIsTUFBTUksS0FBS25CLFNBQVNoQyxHQUFHQyxJQUFFOEM7SUFDekIsTUFBTUssSUFBSTtRQUFFcEQsR0FBR2dELEtBQUtDO1FBQUlJLEdBQUcsSUFBRU47UUFBSzlDLEdBQUdpRCxLQUFLQztJQUFHO0lBQzdDLE1BQU1HLE1BQU1wRCxLQUFLcUQsS0FBSyxDQUFDSCxFQUFFcEQsQ0FBQyxFQUFFb0QsRUFBRUMsQ0FBQyxFQUFFRCxFQUFFbkQsQ0FBQyxLQUFLO0lBQ3pDLE9BQU87UUFBRUQsR0FBR29ELEVBQUVwRCxDQUFDLEdBQUNzRDtRQUFLRCxHQUFHRCxFQUFFQyxDQUFDLEdBQUNDO1FBQUtyRCxHQUFHbUQsRUFBRW5ELENBQUMsR0FBQ3FEO0lBQUk7QUFDOUMiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3dvcmxkL2NodW5rcy9nZW5lcmF0ZUhlaWdodC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREaWZmaWN1bHR5U3RhdGUsIG9uRGlmZmljdWx0eUNoYW5nZSB9IGZyb20gJ0AvZW5naW5lL2RpZmZpY3VsdHknXG5cbi8vIFRpbnkgRkJNIG5vaXNlIHRvIGdldCBoaWxscy9tb3VudGFpbnNcbmZ1bmN0aW9uIGhhc2goeDpudW1iZXIsIHo6bnVtYmVyKSB7IHJldHVybiBNYXRoLnNpbih4KjEyNy4xICsgeiozMTEuNykqNDM3NTguNTQ1MyAlIDEgfVxuZnVuY3Rpb24gbGVycChhOm51bWJlcixiOm51bWJlcix0Om51bWJlcil7cmV0dXJuIGErKGItYSkqdH1cbmZ1bmN0aW9uIHNtb290aHN0ZXAodDpudW1iZXIpe3JldHVybiB0KnQqKDMtMip0KX1cbmZ1bmN0aW9uIG5vaXNlKHg6bnVtYmVyLHo6bnVtYmVyKXtcbiAgY29uc3QgeGk9TWF0aC5mbG9vcih4KSwgemk9TWF0aC5mbG9vcih6KVxuICBjb25zdCB4Zj14LXhpLCB6Zj16LXppXG4gIGNvbnN0IGgwMD1oYXNoKHhpLHppKSwgaDEwPWhhc2goeGkrMSx6aSksIGgwMT1oYXNoKHhpLHppKzEpLCBoMTE9aGFzaCh4aSsxLHppKzEpXG4gIGNvbnN0IHU9c21vb3Roc3RlcCh4ZiksIHY9c21vb3Roc3RlcCh6ZilcbiAgcmV0dXJuIGxlcnAobGVycChoMDAsaDEwLHUpLCBsZXJwKGgwMSxoMTEsdSksIHYpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmYm0oeDpudW1iZXIsejpudW1iZXIsIG9jdGF2ZXM9NSwgbGFjdW5hcml0eT0yLCBnYWluPTAuNSl7XG4gIGxldCBhbXA9MSwgZnJlcT0wLjAwNSwgc3VtPTBcbiAgZm9yKGxldCBpPTA7aTxvY3RhdmVzO2krKyl7XG4gICAgc3VtICs9IGFtcCAqIG5vaXNlKHgqZnJlcSwgeipmcmVxKVxuICAgIGZyZXEgKj0gbGFjdW5hcml0eVxuICAgIGFtcCAqPSBnYWluXG4gIH1cbiAgcmV0dXJuIHN1bVxufVxuXG5sZXQgZW52Q2FjaGUgPSBnZXREaWZmaWN1bHR5U3RhdGUoKS5lbnZpcm9ubWVudFxub25EaWZmaWN1bHR5Q2hhbmdlKChzdGF0ZSkgPT4ge1xuICAvLzEuLSBLZWVwIGEgY2FjaGVkIGVudmlyb25tZW50IHJlZmVyZW5jZSBzbyByZXBlYXRlZCBoZWlnaHQgbG9va3VwcyBhdm9pZCByZWR1bmRhbnQgYWxsb2NhdGlvbnMuXG4gIGVudkNhY2hlID0gc3RhdGUuZW52aXJvbm1lbnRcbn0pXG5cbmV4cG9ydCBmdW5jdGlvbiBoZWlnaHRBdCh4Om51bWJlcix6Om51bWJlcil7XG4gIC8vMS4tIERlcml2ZSBjYW55b24gd2lkdGggYW5kIHZlcnRpY2FsIHJpY2huZXNzIG1vZGlmaWVycyBmcm9tIHRoZSBjYWNoZWQgZGlmZmljdWx0eSBzdGF0ZS5cbiAgY29uc3Qgd2lkdGggPSBNYXRoLm1heCgwLjYsIGVudkNhY2hlLmNhbnlvbldpZHRoKVxuICBjb25zdCByaWNobmVzcyA9IDAuOCArIGVudkNhY2hlLnByb3BEZW5zaXR5ICogMC4xXG4gIGNvbnN0IHNjYWxlZFggPSB4IC8gd2lkdGhcbiAgY29uc3Qgc2NhbGVkWiA9IHogLyB3aWR0aFxuICBjb25zdCBoaWxscyA9IGZibShzY2FsZWRYLHNjYWxlZFosNCwyLjAsMC41KSAqIDQwICogcmljaG5lc3NcbiAgY29uc3QgbW91bnRhaW5zID0gTWF0aC5wb3coZmJtKHNjYWxlZFgrMTAwMCxzY2FsZWRaKzEwMDAsNSwyLjEsMC40NSksIDMpICogMTIwICogKDEgKyBlbnZDYWNoZS53aW5kU3RyZW5ndGggKiAwLjA1KVxuICBjb25zdCBiYXNlID0gKGhpbGxzICsgbW91bnRhaW5zKSAvIE1hdGgubWF4KDEsIHdpZHRoICogMC45KVxuICBjb25zdCB3YXRlcmxpbmUgPSA4IC0gZW52Q2FjaGUud2luZFN0cmVuZ3RoICogMC40XG4gIHJldHVybiBNYXRoLm1heChiYXNlLCB3YXRlcmxpbmUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxBdCh4Om51bWJlcix6Om51bWJlciwgZXBzPTAuNzUpe1xuICBjb25zdCBoTCA9IGhlaWdodEF0KHgtZXBzLCB6KVxuICBjb25zdCBoUiA9IGhlaWdodEF0KHgrZXBzLCB6KVxuICBjb25zdCBoRCA9IGhlaWdodEF0KHgsIHotZXBzKVxuICBjb25zdCBoVSA9IGhlaWdodEF0KHgsIHorZXBzKVxuICBjb25zdCBuID0geyB4OiBoTCAtIGhSLCB5OiAyKmVwcywgejogaEQgLSBoVSB9XG4gIGNvbnN0IGxlbiA9IE1hdGguaHlwb3Qobi54LCBuLnksIG4ueikgfHwgMVxuICByZXR1cm4geyB4OiBuLngvbGVuLCB5OiBuLnkvbGVuLCB6OiBuLnovbGVuIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXREaWZmaWN1bHR5U3RhdGUiLCJvbkRpZmZpY3VsdHlDaGFuZ2UiLCJoYXNoIiwieCIsInoiLCJNYXRoIiwic2luIiwibGVycCIsImEiLCJiIiwidCIsInNtb290aHN0ZXAiLCJub2lzZSIsInhpIiwiZmxvb3IiLCJ6aSIsInhmIiwiemYiLCJoMDAiLCJoMTAiLCJoMDEiLCJoMTEiLCJ1IiwidiIsImZibSIsIm9jdGF2ZXMiLCJsYWN1bmFyaXR5IiwiZ2FpbiIsImFtcCIsImZyZXEiLCJzdW0iLCJpIiwiZW52Q2FjaGUiLCJlbnZpcm9ubWVudCIsInN0YXRlIiwiaGVpZ2h0QXQiLCJ3aWR0aCIsIm1heCIsImNhbnlvbldpZHRoIiwicmljaG5lc3MiLCJwcm9wRGVuc2l0eSIsInNjYWxlZFgiLCJzY2FsZWRaIiwiaGlsbHMiLCJtb3VudGFpbnMiLCJwb3ciLCJ3aW5kU3RyZW5ndGgiLCJiYXNlIiwid2F0ZXJsaW5lIiwibm9ybWFsQXQiLCJlcHMiLCJoTCIsImhSIiwiaEQiLCJoVSIsIm4iLCJ5IiwibGVuIiwiaHlwb3QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/world/chunks/generateHeight.ts\n");

/***/ }),

/***/ "(ssr)/./src/world/chunks/streamer.ts":
/*!**************************************!*\
  !*** ./src/world/chunks/streamer.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createStreamer: () => (/* binding */ createStreamer)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _generateHeight__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./generateHeight */ \"(ssr)/./src/world/chunks/generateHeight.ts\");\n/* harmony import */ var _engine_difficulty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/engine/difficulty */ \"(ssr)/./src/engine/difficulty.ts\");\n/* harmony import */ var three_examples_jsm_utils_BufferGeometryUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/utils/BufferGeometryUtils.js */ \"(ssr)/./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js\");\n// TerrainStreamer.ts\n\n\n\n// ✅ merge helper must be imported from examples utils (not THREE namespace)\n\n/* ──────────────────────────────────────────────────────────────────────────\n   CONFIG\n   ────────────────────────────────────────────────────────────────────────── */ const CHUNK_SIZE = 512;\nconst GRID_SEGMENTS = 100 // PlaneGeometry(..., wSegs, hSegs)\n;\nconst ACTIVE_RADIUS = 5 // in chunks (Chebyshev distance)\n;\nconst FADE_DURATION = 1.0 // seconds\n;\nconst SKIRT_DROP = 12 // vertical extrusion to hide transient gaps\n;\nconst TILE_REPEAT = 8 // UV tiling for the terrain texture\n;\nconst ROCKS_PER_DENSITY_UNIT = 16 // propDensity × this\n;\n/* ──────────────────────────────────────────────────────────────────────────\n   UTILITIES\n   ────────────────────────────────────────────────────────────────────────── */ const HALF = CHUNK_SIZE / 2;\nconst key = (ix, iz)=>`${ix},${iz}`;\nconst toChunk = (x)=>Math.floor(x / CHUNK_SIZE);\n// Stable seeded RNG so decorations don’t “pop” when re-decorating\nfunction mulberry32(seed) {\n    return function() {\n        let t = seed += 0x6d2b79f5;\n        t = Math.imul(t ^ t >>> 15, t | 1);\n        t ^= t + Math.imul(t ^ t >>> 7, t | 61);\n        return ((t ^ t >>> 14) >>> 0) / 4294967296;\n    };\n}\nconst hash2i = (a, b)=>{\n    // simple 2D int hash → int\n    let h = a | 0;\n    h = Math.imul(h ^ 0x9e3779b1, 0x85ebca6b);\n    h ^= b | 0;\n    h = Math.imul(h ^ 0xc2b2ae35, 0x27d4eb2f);\n    return h >>> 0;\n};\n/* ──────────────────────────────────────────────────────────────────────────\n   SHARED RESOURCES\n   ────────────────────────────────────────────────────────────────────────── */ let envCache = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_1__.getDifficultyState)().environment;\n// Base/shared materials & geometries (cloned where per-mesh state is needed)\nconst shared = {\n    terrainBase: new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n        color: 0x506a52,\n        roughness: 0.95,\n        metalness: 0,\n        transparent: true,\n        opacity: 1.0,\n        dithering: true\n    }),\n    rockMat: new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n        color: 0x4a4f44,\n        roughness: 0.8,\n        metalness: 0.1\n    }),\n    rockGeo: new three__WEBPACK_IMPORTED_MODULE_2__.IcosahedronGeometry(2.0, 1)\n};\n/* ──────────────────────────────────────────────────────────────────────────\n   GEOMETRY BUILDERS\n   ────────────────────────────────────────────────────────────────────────── */ // 1) Build the main height-mapped plane\nfunction buildTerrainPlane(ix, iz) {\n    // Note: wSegs/hSegs === GRID_SEGMENTS → (GRID_SEGMENTS+1)^2 vertices\n    const g = new three__WEBPACK_IMPORTED_MODULE_2__.PlaneGeometry(CHUNK_SIZE, CHUNK_SIZE, GRID_SEGMENTS, GRID_SEGMENTS);\n    g.rotateX(-Math.PI / 2);\n    const pos = g.attributes.position;\n    for(let i = 0; i < pos.count; i++){\n        const vx = pos.getX(i) + ix * CHUNK_SIZE;\n        const vz = pos.getZ(i) + iz * CHUNK_SIZE;\n        pos.setY(i, (0,_generateHeight__WEBPACK_IMPORTED_MODULE_0__.heightAt)(vx, vz));\n    }\n    pos.needsUpdate = true;\n    // UV tiling for the color map\n    const uv = g.attributes.uv;\n    for(let i = 0; i < uv.count; i++){\n        uv.setXY(i, uv.getX(i) * TILE_REPEAT, uv.getY(i) * TILE_REPEAT);\n    }\n    uv.needsUpdate = true;\n    g.computeVertexNormals();\n    return g;\n}\n// 2) Build a vertical “skirt” ring around the chunk edges, welded to the top edge\nfunction buildSkirt(ix, iz) {\n    // Each side has GRID_SEGMENTS segments ⇒ GRID_SEGMENTS+1 edge vertices\n    const edgeVerts = GRID_SEGMENTS + 1;\n    const seg = CHUNK_SIZE / GRID_SEGMENTS;\n    // We’ll create 4 sides, each with a strip of (edgeVerts) quads = (edgeVerts-1)*2 triangles\n    const positions = [];\n    const uvs = [];\n    const indices = [];\n    // helper to push a vertical pair (top,bottom) and return the index of the TOP\n    const pushPair = (xLocal, zLocal)=>{\n        const worldX = ix * CHUNK_SIZE + xLocal;\n        const worldZ = iz * CHUNK_SIZE + zLocal;\n        const topY = (0,_generateHeight__WEBPACK_IMPORTED_MODULE_0__.heightAt)(worldX, worldZ);\n        const bottomY = topY - SKIRT_DROP;\n        const baseIdx = positions.length / 3;\n        // top\n        positions.push(xLocal, topY, zLocal);\n        uvs.push((xLocal + HALF) / CHUNK_SIZE, (zLocal + HALF) / CHUNK_SIZE);\n        // bottom\n        positions.push(xLocal, bottomY, zLocal);\n        uvs.push((xLocal + HALF) / CHUNK_SIZE, (zLocal + HALF) / CHUNK_SIZE);\n        return baseIdx // index of the top; bottom is baseIdx+1\n        ;\n    };\n    // helper to connect two consecutive pairs as a vertical quad\n    const pushQuad = (iTopA, iTopB)=>{\n        const iBotA = iTopA + 1;\n        const iBotB = iTopB + 1;\n        indices.push(iTopA, iTopB, iBotB);\n        indices.push(iTopA, iBotB, iBotA);\n    };\n    // top edge (z = +HALF), left→right\n    let prevTop = pushPair(-HALF, +HALF);\n    for(let i = 1; i < edgeVerts; i++){\n        const x = -HALF + i * seg;\n        const nextTop = pushPair(x, +HALF);\n        pushQuad(prevTop, nextTop);\n        prevTop = nextTop;\n    }\n    // right edge (x = +HALF), top→bottom\n    prevTop = pushPair(+HALF, +HALF);\n    for(let i = 1; i < edgeVerts; i++){\n        const z = +HALF - i * seg;\n        const nextTop = pushPair(+HALF, z);\n        pushQuad(prevTop, nextTop);\n        prevTop = nextTop;\n    }\n    // bottom edge (z = -HALF), right→left\n    prevTop = pushPair(+HALF, -HALF);\n    for(let i = 1; i < edgeVerts; i++){\n        const x = +HALF - i * seg;\n        const nextTop = pushPair(x, -HALF);\n        pushQuad(prevTop, nextTop);\n        prevTop = nextTop;\n    }\n    // left edge (x = -HALF), bottom→top\n    prevTop = pushPair(-HALF, -HALF);\n    for(let i = 1; i < edgeVerts; i++){\n        const z = -HALF + i * seg;\n        const nextTop = pushPair(-HALF, z);\n        pushQuad(prevTop, nextTop);\n        prevTop = nextTop;\n    }\n    const geo = new three__WEBPACK_IMPORTED_MODULE_2__.BufferGeometry();\n    geo.setAttribute('position', new three__WEBPACK_IMPORTED_MODULE_2__.Float32BufferAttribute(positions, 3));\n    geo.setAttribute('uv', new three__WEBPACK_IMPORTED_MODULE_2__.Float32BufferAttribute(uvs, 2));\n    geo.setIndex(indices);\n    geo.computeVertexNormals();\n    return geo;\n}\n// 3) Build a full chunk geometry = terrain plane + skirt\nfunction buildChunkGeometry(ix, iz) {\n    const plane = buildTerrainPlane(ix, iz);\n    const skirt = buildSkirt(ix, iz);\n    const merged = (0,three_examples_jsm_utils_BufferGeometryUtils_js__WEBPACK_IMPORTED_MODULE_3__.mergeGeometries)([\n        plane,\n        skirt\n    ], false);\n    merged.computeVertexNormals();\n    plane.dispose();\n    skirt.dispose();\n    return merged;\n}\n/* ──────────────────────────────────────────────────────────────────────────\n   DECORATIONS\n   ────────────────────────────────────────────────────────────────────────── */ function decorateChunk(mesh) {\n    // Clear previous decorations (safe dispose)\n    const previous = mesh.userData.decorations;\n    if (previous?.length) {\n        for (const obj of previous){\n            mesh.remove(obj);\n            if (obj instanceof three__WEBPACK_IMPORTED_MODULE_2__.InstancedMesh) {\n                obj.geometry.dispose();\n                obj.dispose();\n            } else {\n                obj.traverse((c)=>{\n                    if (c.geometry) c.geometry.dispose();\n                    const m = c.material;\n                    if (Array.isArray(m)) m.forEach((mm)=>mm.dispose?.());\n                    else m?.dispose?.();\n                });\n            }\n        }\n    }\n    mesh.userData.decorations = [];\n    const { propDensity } = envCache;\n    const propCount = Math.max(0, Math.round(propDensity * ROCKS_PER_DENSITY_UNIT));\n    if (propCount === 0) return;\n    // Deterministic scatter per chunk\n    const seed = hash2i(mesh.userData.ix, mesh.userData.iz);\n    const rand = mulberry32(seed);\n    const inst = new three__WEBPACK_IMPORTED_MODULE_2__.InstancedMesh(shared.rockGeo, shared.rockMat, propCount);\n    const mat = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix4();\n    const p = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    const q = new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion();\n    const s = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    const up = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 1, 0);\n    const n = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    for(let i = 0; i < propCount; i++){\n        const localX = (rand() - 0.5) * CHUNK_SIZE;\n        const localZ = (rand() - 0.5) * CHUNK_SIZE;\n        const worldX = mesh.userData.ix * CHUNK_SIZE + localX;\n        const worldZ = mesh.userData.iz * CHUNK_SIZE + localZ;\n        const y = (0,_generateHeight__WEBPACK_IMPORTED_MODULE_0__.heightAt)(worldX, worldZ) + 0.6 + rand() * 0.4;\n        p.set(localX, y, localZ);\n        const nn = (0,_generateHeight__WEBPACK_IMPORTED_MODULE_0__.normalAt)(worldX, worldZ);\n        n.set(nn.x, nn.y, nn.z).normalize();\n        const align = new three__WEBPACK_IMPORTED_MODULE_2__.Quaternion().setFromUnitVectors(up, n);\n        // small random rotation around normal\n        q.setFromAxisAngle(n, rand() * Math.PI * 2);\n        q.premultiply(align);\n        const k = 0.8 + rand() * 0.5;\n        s.set(k, k, k);\n        mat.compose(p, q, s);\n        inst.setMatrixAt(i, mat);\n    }\n    inst.instanceMatrix.needsUpdate = true;\n    inst.castShadow = true;\n    inst.frustumCulled = false;\n    mesh.add(inst);\n    mesh.userData.decorations.push(inst);\n}\n/* ──────────────────────────────────────────────────────────────────────────\n   CHUNK BUILDER\n   ────────────────────────────────────────────────────────────────────────── */ function buildChunk(ix, iz, textureMap) {\n    const geo = buildChunkGeometry(ix, iz);\n    // ❗ per-chunk material clone so fades don’t affect *all* chunks\n    const mat = shared.terrainBase.clone();\n    mat.map = textureMap ?? null;\n    mat.needsUpdate = true;\n    const mesh = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(geo, mat);\n    mesh.position.set(ix * CHUNK_SIZE, 0, iz * CHUNK_SIZE);\n    mesh.receiveShadow = true;\n    mesh.frustumCulled = false; // safer for large, deformed tiles\n    mesh.userData = {\n        ix,\n        iz,\n        decorations: [],\n        fade: {\n            t: 0,\n            from: 0,\n            to: 1,\n            start: 0\n        },\n        removing: false\n    };\n    mesh.material.opacity = 0;\n    decorateChunk(mesh);\n    return mesh;\n}\n/* ──────────────────────────────────────────────────────────────────────────\n   STREAMER\n   ────────────────────────────────────────────────────────────────────────── */ function createStreamer(scene) {\n    const chunks = new Map();\n    const tmp = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n    const clock = new three__WEBPACK_IMPORTED_MODULE_2__.Clock();\n    let environmentDirty = false;\n    // ── Texture load (asynchronously); newly created chunks will receive it immediately\n    let terrainMap = null;\n    new three__WEBPACK_IMPORTED_MODULE_2__.TextureLoader().load('/textures/32d4a6ff-3da1-4c7c-a742-1d1fa759e394.png', (tex)=>{\n        tex.wrapS = tex.wrapT = three__WEBPACK_IMPORTED_MODULE_2__.RepeatWrapping;\n        tex.colorSpace = three__WEBPACK_IMPORTED_MODULE_2__.SRGBColorSpace ?? undefined;\n        tex.anisotropy = 8;\n        terrainMap = tex;\n        // Update existing chunk materials to use the map\n        for (const m of chunks.values()){\n            const mm = m.material;\n            mm.map = tex;\n            mm.needsUpdate = true;\n        }\n    }, undefined, (err)=>console.warn('Terrain texture failed to load; using flat color', err));\n    // ── React to difficulty / environment changes\n    const unsubscribe = (0,_engine_difficulty__WEBPACK_IMPORTED_MODULE_1__.onDifficultyChange)((state)=>{\n        envCache = state.environment;\n        environmentDirty = true;\n    });\n    // ── Ensure a chunk exists\n    function ensure(ix, iz) {\n        const k = key(ix, iz);\n        if (chunks.has(k)) return;\n        const mesh = buildChunk(ix, iz, terrainMap);\n        // schedule fade in\n        mesh.userData.fade = {\n            t: 0,\n            from: 0,\n            to: 1,\n            start: clock.getElapsedTime()\n        };\n        scene.add(mesh);\n        chunks.set(k, mesh);\n    }\n    // ── Mark distant chunks to remove (we’ll fade them in update loop)\n    function markForRemoval(centerX, centerZ, radius) {\n        const cx = toChunk(centerX);\n        const cz = toChunk(centerZ);\n        for (const [k, m] of chunks){\n            const dx = cx - m.userData.ix;\n            const dz = cz - m.userData.iz;\n            const dist = Math.max(Math.abs(dx), Math.abs(dz));\n            if (dist > radius && !m.userData.removing) {\n                m.userData.removing = true;\n                m.userData.fade = {\n                    t: 0,\n                    from: m.material.opacity,\n                    to: 0,\n                    start: clock.getElapsedTime()\n                };\n            }\n        }\n    }\n    // ── Fade step (both in & out), and dispose out-faded chunks\n    function stepFades(now) {\n        const toDelete = [];\n        for (const [k, m] of chunks){\n            const f = m.userData.fade;\n            if (!f) continue;\n            const mm = m.material;\n            const elapsed = now - f.start;\n            const t = three__WEBPACK_IMPORTED_MODULE_2__.MathUtils.clamp(elapsed / FADE_DURATION, 0, 1);\n            mm.opacity = three__WEBPACK_IMPORTED_MODULE_2__.MathUtils.lerp(f.from, f.to, t);\n            if (t >= 1) {\n                // if we just faded out, remove & dispose\n                if (m.userData.removing) {\n                    scene.remove(m);\n                    disposeChunk(m);\n                    chunks.delete(k);\n                } else {\n                    // fade-in finished; clear fade marker\n                    m.userData.fade = null;\n                }\n            }\n        }\n    }\n    // ── Dispose a whole chunk safely\n    function disposeChunk(mesh) {\n        mesh.geometry.dispose();\n        // dispose *per-chunk clone* of terrain material\n        const mm = mesh.material;\n        if (mm.map && mm.map !== terrainMap) mm.map.dispose();\n        mm.dispose();\n        // decorations\n        const decos = mesh.userData.decorations;\n        for (const d of decos ?? []){\n            if (d instanceof three__WEBPACK_IMPORTED_MODULE_2__.InstancedMesh) {\n                d.geometry.dispose();\n                d.dispose();\n            } else {\n                d.traverse((c)=>{\n                    if (c.geometry) c.geometry.dispose();\n                    const mat = c.material;\n                    if (Array.isArray(mat)) mat.forEach((m)=>m.dispose?.());\n                    else mat?.dispose?.();\n                });\n            }\n            mesh.remove(d);\n        }\n        mesh.userData.decorations = [];\n    }\n    return {\n        update (pos, dt) {\n            // radius can adjust with density if you wish; keep simple & stable here\n            const radius = ACTIVE_RADIUS;\n            const cx = toChunk(pos.x);\n            const cz = toChunk(pos.z);\n            // create/keep a square of chunks around the player\n            for(let dz = -radius; dz <= radius; dz++){\n                for(let dx = -radius; dx <= radius; dx++){\n                    ensure(cx + dx, cz + dz);\n                }\n            }\n            // mark far chunks for fade-out/removal\n            markForRemoval(pos.x, pos.z, radius);\n            // re-decorate after env change (seeded → no popping)\n            if (environmentDirty) {\n                for (const m of chunks.values())decorateChunk(m);\n                environmentDirty = false;\n            }\n            // fade step\n            stepFades(clock.getElapsedTime());\n        },\n        queryHeight (x, z) {\n            return (0,_generateHeight__WEBPACK_IMPORTED_MODULE_0__.heightAt)(x, z);\n        },\n        queryNormal (x, z) {\n            const n = (0,_generateHeight__WEBPACK_IMPORTED_MODULE_0__.normalAt)(x, z);\n            return tmp.set(n.x, n.y, n.z);\n        },\n        dispose () {\n            unsubscribe?.();\n            for (const m of chunks.values())disposeChunk(m);\n            chunks.clear();\n            // shared resources: don’t dispose shared.terrainBase (used as template)\n            shared.rockGeo.dispose();\n            shared.rockMat.dispose();\n            if (terrainMap) {\n                terrainMap.dispose();\n                terrainMap = null;\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VztnQkFDL0N3RCxtQkFBbUI7WUFDckI7WUFFQSxZQUFZO1lBQ1orQixVQUFVakMsTUFBTXNCLGNBQWM7UUFDaEM7UUFFQXlCLGFBQVkvTCxDQUFTLEVBQUVvRSxDQUFTO1lBQzlCLE9BQU9yRix5REFBUUEsQ0FBQ2lCLEdBQUdvRTtRQUNyQjtRQUVBNEgsYUFBWWhNLENBQVMsRUFBRW9FLENBQVM7WUFDOUIsTUFBTTBDLElBQUk5SCx5REFBUUEsQ0FBQ2dCLEdBQUdvRTtZQUN0QixPQUFPMkUsSUFBSTdCLEdBQUcsQ0FBQ0osRUFBRTlHLENBQUMsRUFBRThHLEVBQUVHLENBQUMsRUFBRUgsRUFBRTFDLENBQUM7UUFDOUI7UUFFQVU7WUFDRW9GO1lBQ0EsS0FBSyxNQUFNeEUsS0FBS21ELE9BQU9pQixNQUFNLEdBQUkyQixhQUFhL0Y7WUFDOUNtRCxPQUFPb0QsS0FBSztZQUVaLHdFQUF3RTtZQUN4RXBMLE9BQU9VLE9BQU8sQ0FBQ3VELE9BQU87WUFDdEJqRSxPQUFPUyxPQUFPLENBQUN3RCxPQUFPO1lBRXRCLElBQUlxRSxZQUFZO2dCQUNkQSxXQUFXckUsT0FBTztnQkFDbEJxRSxhQUFhO1lBQ2Y7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9hcHAvc3JjL3dvcmxkL2NodW5rcy9zdHJlYW1lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUZXJyYWluU3RyZWFtZXIudHNcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgaGVpZ2h0QXQsIG5vcm1hbEF0IH0gZnJvbSAnLi9nZW5lcmF0ZUhlaWdodCdcbmltcG9ydCB7IGdldERpZmZpY3VsdHlTdGF0ZSwgb25EaWZmaWN1bHR5Q2hhbmdlIH0gZnJvbSAnQC9lbmdpbmUvZGlmZmljdWx0eSdcblxuLy8g4pyFIG1lcmdlIGhlbHBlciBtdXN0IGJlIGltcG9ydGVkIGZyb20gZXhhbXBsZXMgdXRpbHMgKG5vdCBUSFJFRSBuYW1lc3BhY2UpXG5pbXBvcnQgeyBtZXJnZUdlb21ldHJpZXMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vdXRpbHMvQnVmZmVyR2VvbWV0cnlVdGlscy5qcydcblxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICBDT05GSUdcbiAgIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuY29uc3QgQ0hVTktfU0laRSA9IDUxMlxuY29uc3QgR1JJRF9TRUdNRU5UUyA9IDEwMCAgICAgICAgICAgICAgLy8gUGxhbmVHZW9tZXRyeSguLi4sIHdTZWdzLCBoU2VncylcbmNvbnN0IEFDVElWRV9SQURJVVMgPSA1ICAgICAgICAgICAgICAgIC8vIGluIGNodW5rcyAoQ2hlYnlzaGV2IGRpc3RhbmNlKVxuY29uc3QgRkFERV9EVVJBVElPTiA9IDEuMCAgICAgICAgICAgICAgLy8gc2Vjb25kc1xuY29uc3QgU0tJUlRfRFJPUCA9IDEyICAgICAgICAgICAgICAgICAgLy8gdmVydGljYWwgZXh0cnVzaW9uIHRvIGhpZGUgdHJhbnNpZW50IGdhcHNcbmNvbnN0IFRJTEVfUkVQRUFUID0gOCAgICAgICAgICAgICAgICAgIC8vIFVWIHRpbGluZyBmb3IgdGhlIHRlcnJhaW4gdGV4dHVyZVxuY29uc3QgUk9DS1NfUEVSX0RFTlNJVFlfVU5JVCA9IDE2ICAgICAgLy8gcHJvcERlbnNpdHkgw5cgdGhpc1xuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbiAgIFVUSUxJVElFU1xuICAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG5jb25zdCBIQUxGID0gQ0hVTktfU0laRSAvIDJcbmNvbnN0IGtleSA9IChpeDogbnVtYmVyLCBpejogbnVtYmVyKSA9PiBgJHtpeH0sJHtpen1gXG5jb25zdCB0b0NodW5rID0gKHg6IG51bWJlcikgPT4gTWF0aC5mbG9vcih4IC8gQ0hVTktfU0laRSlcblxuLy8gU3RhYmxlIHNlZWRlZCBSTkcgc28gZGVjb3JhdGlvbnMgZG9u4oCZdCDigJxwb3DigJ0gd2hlbiByZS1kZWNvcmF0aW5nXG5mdW5jdGlvbiBtdWxiZXJyeTMyKHNlZWQ6IG51bWJlcikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGxldCB0ID0gKHNlZWQgKz0gMHg2ZDJiNzlmNSlcbiAgICB0ID0gTWF0aC5pbXVsKHQgXiAodCA+Pj4gMTUpLCB0IHwgMSlcbiAgICB0IF49IHQgKyBNYXRoLmltdWwodCBeICh0ID4+PiA3KSwgdCB8IDYxKVxuICAgIHJldHVybiAoKHQgXiAodCA+Pj4gMTQpKSA+Pj4gMCkgLyA0Mjk0OTY3Mjk2XG4gIH1cbn1cbmNvbnN0IGhhc2gyaSA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4ge1xuICAvLyBzaW1wbGUgMkQgaW50IGhhc2gg4oaSIGludFxuICBsZXQgaCA9IGEgfCAwXG4gIGggPSBNYXRoLmltdWwoaCBeIDB4OWUzNzc5YjEsIDB4ODVlYmNhNmIpXG4gIGggXj0gYiB8IDBcbiAgaCA9IE1hdGguaW11bChoIF4gMHhjMmIyYWUzNSwgMHgyN2Q0ZWIyZilcbiAgcmV0dXJuIGggPj4+IDBcbn1cblxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICBTSEFSRUQgUkVTT1VSQ0VTXG4gICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmxldCBlbnZDYWNoZSA9IGdldERpZmZpY3VsdHlTdGF0ZSgpLmVudmlyb25tZW50XG5cbi8vIEJhc2Uvc2hhcmVkIG1hdGVyaWFscyAmIGdlb21ldHJpZXMgKGNsb25lZCB3aGVyZSBwZXItbWVzaCBzdGF0ZSBpcyBuZWVkZWQpXG5jb25zdCBzaGFyZWQgPSB7XG4gIHRlcnJhaW5CYXNlOiBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgIGNvbG9yOiAweDUwNmE1MixcbiAgICByb3VnaG5lc3M6IDAuOTUsXG4gICAgbWV0YWxuZXNzOiAwLFxuICAgIHRyYW5zcGFyZW50OiB0cnVlLCAvLyB3ZSBmYWRlIHBlci1jaHVua1xuICAgIG9wYWNpdHk6IDEuMCxcbiAgICBkaXRoZXJpbmc6IHRydWUsXG4gIH0pLFxuICByb2NrTWF0OiBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgIGNvbG9yOiAweDRhNGY0NCxcbiAgICByb3VnaG5lc3M6IDAuOCxcbiAgICBtZXRhbG5lc3M6IDAuMSxcbiAgfSksXG4gIHJvY2tHZW86IG5ldyBUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5KDIuMCwgMSksIC8vIHJldXNlZCBhY3Jvc3MgY2h1bmtzXG59XG5cbi8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuICAgR0VPTUVUUlkgQlVJTERFUlNcbiAgIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuXG4vLyAxKSBCdWlsZCB0aGUgbWFpbiBoZWlnaHQtbWFwcGVkIHBsYW5lXG5mdW5jdGlvbiBidWlsZFRlcnJhaW5QbGFuZShpeDogbnVtYmVyLCBpejogbnVtYmVyKSB7XG4gIC8vIE5vdGU6IHdTZWdzL2hTZWdzID09PSBHUklEX1NFR01FTlRTIOKGkiAoR1JJRF9TRUdNRU5UUysxKV4yIHZlcnRpY2VzXG4gIGNvbnN0IGcgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShDSFVOS19TSVpFLCBDSFVOS19TSVpFLCBHUklEX1NFR01FTlRTLCBHUklEX1NFR01FTlRTKVxuICBnLnJvdGF0ZVgoLU1hdGguUEkgLyAyKVxuXG4gIGNvbnN0IHBvcyA9IGcuYXR0cmlidXRlcy5wb3NpdGlvbiBhcyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGVcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3MuY291bnQ7IGkrKykge1xuICAgIGNvbnN0IHZ4ID0gcG9zLmdldFgoaSkgKyBpeCAqIENIVU5LX1NJWkVcbiAgICBjb25zdCB2eiA9IHBvcy5nZXRaKGkpICsgaXogKiBDSFVOS19TSVpFXG4gICAgcG9zLnNldFkoaSwgaGVpZ2h0QXQodngsIHZ6KSlcbiAgfVxuICBwb3MubmVlZHNVcGRhdGUgPSB0cnVlXG5cbiAgLy8gVVYgdGlsaW5nIGZvciB0aGUgY29sb3IgbWFwXG4gIGNvbnN0IHV2ID0gZy5hdHRyaWJ1dGVzLnV2IGFzIFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHV2LmNvdW50OyBpKyspIHtcbiAgICB1di5zZXRYWShpLCB1di5nZXRYKGkpICogVElMRV9SRVBFQVQsIHV2LmdldFkoaSkgKiBUSUxFX1JFUEVBVClcbiAgfVxuICB1di5uZWVkc1VwZGF0ZSA9IHRydWVcblxuICBnLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKClcbiAgcmV0dXJuIGdcbn1cblxuLy8gMikgQnVpbGQgYSB2ZXJ0aWNhbCDigJxza2lydOKAnSByaW5nIGFyb3VuZCB0aGUgY2h1bmsgZWRnZXMsIHdlbGRlZCB0byB0aGUgdG9wIGVkZ2VcbmZ1bmN0aW9uIGJ1aWxkU2tpcnQoaXg6IG51bWJlciwgaXo6IG51bWJlcikge1xuICAvLyBFYWNoIHNpZGUgaGFzIEdSSURfU0VHTUVOVFMgc2VnbWVudHMg4oeSIEdSSURfU0VHTUVOVFMrMSBlZGdlIHZlcnRpY2VzXG4gIGNvbnN0IGVkZ2VWZXJ0cyA9IEdSSURfU0VHTUVOVFMgKyAxXG4gIGNvbnN0IHNlZyA9IENIVU5LX1NJWkUgLyBHUklEX1NFR01FTlRTXG5cbiAgLy8gV2XigJlsbCBjcmVhdGUgNCBzaWRlcywgZWFjaCB3aXRoIGEgc3RyaXAgb2YgKGVkZ2VWZXJ0cykgcXVhZHMgPSAoZWRnZVZlcnRzLTEpKjIgdHJpYW5nbGVzXG4gIGNvbnN0IHBvc2l0aW9uczogbnVtYmVyW10gPSBbXVxuICBjb25zdCB1dnM6IG51bWJlcltdID0gW11cbiAgY29uc3QgaW5kaWNlczogbnVtYmVyW10gPSBbXVxuXG4gIC8vIGhlbHBlciB0byBwdXNoIGEgdmVydGljYWwgcGFpciAodG9wLGJvdHRvbSkgYW5kIHJldHVybiB0aGUgaW5kZXggb2YgdGhlIFRPUFxuICBjb25zdCBwdXNoUGFpciA9ICh4TG9jYWw6IG51bWJlciwgekxvY2FsOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB3b3JsZFggPSBpeCAqIENIVU5LX1NJWkUgKyB4TG9jYWxcbiAgICBjb25zdCB3b3JsZFogPSBpeiAqIENIVU5LX1NJWkUgKyB6TG9jYWxcbiAgICBjb25zdCB0b3BZID0gaGVpZ2h0QXQod29ybGRYLCB3b3JsZFopXG4gICAgY29uc3QgYm90dG9tWSA9IHRvcFkgLSBTS0lSVF9EUk9QXG5cbiAgICBjb25zdCBiYXNlSWR4ID0gcG9zaXRpb25zLmxlbmd0aCAvIDNcbiAgICAvLyB0b3BcbiAgICBwb3NpdGlvbnMucHVzaCh4TG9jYWwsIHRvcFksIHpMb2NhbClcbiAgICB1dnMucHVzaCgoeExvY2FsICsgSEFMRikgLyBDSFVOS19TSVpFLCAoekxvY2FsICsgSEFMRikgLyBDSFVOS19TSVpFKVxuICAgIC8vIGJvdHRvbVxuICAgIHBvc2l0aW9ucy5wdXNoKHhMb2NhbCwgYm90dG9tWSwgekxvY2FsKVxuICAgIHV2cy5wdXNoKCh4TG9jYWwgKyBIQUxGKSAvIENIVU5LX1NJWkUsICh6TG9jYWwgKyBIQUxGKSAvIENIVU5LX1NJWkUpXG5cbiAgICByZXR1cm4gYmFzZUlkeCAvLyBpbmRleCBvZiB0aGUgdG9wOyBib3R0b20gaXMgYmFzZUlkeCsxXG4gIH1cblxuICAvLyBoZWxwZXIgdG8gY29ubmVjdCB0d28gY29uc2VjdXRpdmUgcGFpcnMgYXMgYSB2ZXJ0aWNhbCBxdWFkXG4gIGNvbnN0IHB1c2hRdWFkID0gKGlUb3BBOiBudW1iZXIsIGlUb3BCOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBpQm90QSA9IGlUb3BBICsgMVxuICAgIGNvbnN0IGlCb3RCID0gaVRvcEIgKyAxXG4gICAgaW5kaWNlcy5wdXNoKGlUb3BBLCBpVG9wQiwgaUJvdEIpXG4gICAgaW5kaWNlcy5wdXNoKGlUb3BBLCBpQm90QiwgaUJvdEEpXG4gIH1cblxuICAvLyB0b3AgZWRnZSAoeiA9ICtIQUxGKSwgbGVmdOKGknJpZ2h0XG4gIGxldCBwcmV2VG9wID0gcHVzaFBhaXIoLUhBTEYsICtIQUxGKVxuICBmb3IgKGxldCBpID0gMTsgaSA8IGVkZ2VWZXJ0czsgaSsrKSB7XG4gICAgY29uc3QgeCA9IC1IQUxGICsgaSAqIHNlZ1xuICAgIGNvbnN0IG5leHRUb3AgPSBwdXNoUGFpcih4LCArSEFMRilcbiAgICBwdXNoUXVhZChwcmV2VG9wLCBuZXh0VG9wKVxuICAgIHByZXZUb3AgPSBuZXh0VG9wXG4gIH1cblxuICAvLyByaWdodCBlZGdlICh4ID0gK0hBTEYpLCB0b3DihpJib3R0b21cbiAgcHJldlRvcCA9IHB1c2hQYWlyKCtIQUxGLCArSEFMRilcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBlZGdlVmVydHM7IGkrKykge1xuICAgIGNvbnN0IHogPSArSEFMRiAtIGkgKiBzZWdcbiAgICBjb25zdCBuZXh0VG9wID0gcHVzaFBhaXIoK0hBTEYsIHopXG4gICAgcHVzaFF1YWQocHJldlRvcCwgbmV4dFRvcClcbiAgICBwcmV2VG9wID0gbmV4dFRvcFxuICB9XG5cbiAgLy8gYm90dG9tIGVkZ2UgKHogPSAtSEFMRiksIHJpZ2h04oaSbGVmdFxuICBwcmV2VG9wID0gcHVzaFBhaXIoK0hBTEYsIC1IQUxGKVxuICBmb3IgKGxldCBpID0gMTsgaSA8IGVkZ2VWZXJ0czsgaSsrKSB7XG4gICAgY29uc3QgeCA9ICtIQUxGIC0gaSAqIHNlZ1xuICAgIGNvbnN0IG5leHRUb3AgPSBwdXNoUGFpcih4LCAtSEFMRilcbiAgICBwdXNoUXVhZChwcmV2VG9wLCBuZXh0VG9wKVxuICAgIHByZXZUb3AgPSBuZXh0VG9wXG4gIH1cblxuICAvLyBsZWZ0IGVkZ2UgKHggPSAtSEFMRiksIGJvdHRvbeKGknRvcFxuICBwcmV2VG9wID0gcHVzaFBhaXIoLUhBTEYsIC1IQUxGKVxuICBmb3IgKGxldCBpID0gMTsgaSA8IGVkZ2VWZXJ0czsgaSsrKSB7XG4gICAgY29uc3QgeiA9IC1IQUxGICsgaSAqIHNlZ1xuICAgIGNvbnN0IG5leHRUb3AgPSBwdXNoUGFpcigtSEFMRiwgeilcbiAgICBwdXNoUXVhZChwcmV2VG9wLCBuZXh0VG9wKVxuICAgIHByZXZUb3AgPSBuZXh0VG9wXG4gIH1cblxuICBjb25zdCBnZW8gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKVxuICBnZW8uc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9ucywgMykpXG4gIGdlby5zZXRBdHRyaWJ1dGUoJ3V2JywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUodXZzLCAyKSlcbiAgZ2VvLnNldEluZGV4KGluZGljZXMpXG4gIGdlby5jb21wdXRlVmVydGV4Tm9ybWFscygpXG4gIHJldHVybiBnZW9cbn1cblxuLy8gMykgQnVpbGQgYSBmdWxsIGNodW5rIGdlb21ldHJ5ID0gdGVycmFpbiBwbGFuZSArIHNraXJ0XG5mdW5jdGlvbiBidWlsZENodW5rR2VvbWV0cnkoaXg6IG51bWJlciwgaXo6IG51bWJlcikge1xuICBjb25zdCBwbGFuZSA9IGJ1aWxkVGVycmFpblBsYW5lKGl4LCBpeilcbiAgY29uc3Qgc2tpcnQgPSBidWlsZFNraXJ0KGl4LCBpeilcbiAgY29uc3QgbWVyZ2VkID0gbWVyZ2VHZW9tZXRyaWVzKFtwbGFuZSwgc2tpcnRdLCBmYWxzZSkhXG4gIG1lcmdlZC5jb21wdXRlVmVydGV4Tm9ybWFscygpXG4gIHBsYW5lLmRpc3Bvc2UoKVxuICBza2lydC5kaXNwb3NlKClcbiAgcmV0dXJuIG1lcmdlZFxufVxuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbiAgIERFQ09SQVRJT05TXG4gICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmZ1bmN0aW9uIGRlY29yYXRlQ2h1bmsobWVzaDogVEhSRUUuTWVzaCkge1xuICAvLyBDbGVhciBwcmV2aW91cyBkZWNvcmF0aW9ucyAoc2FmZSBkaXNwb3NlKVxuICBjb25zdCBwcmV2aW91cyA9IG1lc2gudXNlckRhdGEuZGVjb3JhdGlvbnMgYXMgVEhSRUUuT2JqZWN0M0RbXSB8IHVuZGVmaW5lZFxuICBpZiAocHJldmlvdXM/Lmxlbmd0aCkge1xuICAgIGZvciAoY29uc3Qgb2JqIG9mIHByZXZpb3VzKSB7XG4gICAgICBtZXNoLnJlbW92ZShvYmopXG4gICAgICBpZiAob2JqIGluc3RhbmNlb2YgVEhSRUUuSW5zdGFuY2VkTWVzaCkge1xuICAgICAgICBvYmouZ2VvbWV0cnkuZGlzcG9zZSgpXG4gICAgICAgIG9iai5kaXNwb3NlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iai50cmF2ZXJzZSgoYykgPT4ge1xuICAgICAgICAgIGlmICgoYyBhcyBhbnkpLmdlb21ldHJ5KSAoYyBhcyBUSFJFRS5NZXNoKS5nZW9tZXRyeS5kaXNwb3NlKClcbiAgICAgICAgICBjb25zdCBtID0gKGMgYXMgVEhSRUUuTWVzaCkubWF0ZXJpYWxcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtKSkgbS5mb3JFYWNoKChtbSkgPT4gbW0uZGlzcG9zZT8uKCkpXG4gICAgICAgICAgZWxzZSAobSBhcyBhbnkpPy5kaXNwb3NlPy4oKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBtZXNoLnVzZXJEYXRhLmRlY29yYXRpb25zID0gW11cblxuICBjb25zdCB7IHByb3BEZW5zaXR5IH0gPSBlbnZDYWNoZVxuICBjb25zdCBwcm9wQ291bnQgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKHByb3BEZW5zaXR5ICogUk9DS1NfUEVSX0RFTlNJVFlfVU5JVCkpXG4gIGlmIChwcm9wQ291bnQgPT09IDApIHJldHVyblxuXG4gIC8vIERldGVybWluaXN0aWMgc2NhdHRlciBwZXIgY2h1bmtcbiAgY29uc3Qgc2VlZCA9IGhhc2gyaShtZXNoLnVzZXJEYXRhLml4LCBtZXNoLnVzZXJEYXRhLml6KVxuICBjb25zdCByYW5kID0gbXVsYmVycnkzMihzZWVkKVxuXG4gIGNvbnN0IGluc3QgPSBuZXcgVEhSRUUuSW5zdGFuY2VkTWVzaChzaGFyZWQucm9ja0dlbywgc2hhcmVkLnJvY2tNYXQsIHByb3BDb3VudClcbiAgY29uc3QgbWF0ID0gbmV3IFRIUkVFLk1hdHJpeDQoKVxuICBjb25zdCBwID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICBjb25zdCBxID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKVxuICBjb25zdCBzID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICBjb25zdCB1cCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApXG4gIGNvbnN0IG4gPSBuZXcgVEhSRUUuVmVjdG9yMygpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wQ291bnQ7IGkrKykge1xuICAgIGNvbnN0IGxvY2FsWCA9IChyYW5kKCkgLSAwLjUpICogQ0hVTktfU0laRVxuICAgIGNvbnN0IGxvY2FsWiA9IChyYW5kKCkgLSAwLjUpICogQ0hVTktfU0laRVxuICAgIGNvbnN0IHdvcmxkWCA9IG1lc2gudXNlckRhdGEuaXggKiBDSFVOS19TSVpFICsgbG9jYWxYXG4gICAgY29uc3Qgd29ybGRaID0gbWVzaC51c2VyRGF0YS5peiAqIENIVU5LX1NJWkUgKyBsb2NhbFpcbiAgICBjb25zdCB5ID0gaGVpZ2h0QXQod29ybGRYLCB3b3JsZFopICsgMC42ICsgcmFuZCgpICogMC40XG5cbiAgICBwLnNldChsb2NhbFgsIHksIGxvY2FsWilcblxuICAgIGNvbnN0IG5uID0gbm9ybWFsQXQod29ybGRYLCB3b3JsZFopXG4gICAgbi5zZXQobm4ueCwgbm4ueSwgbm4ueikubm9ybWFsaXplKClcbiAgICBjb25zdCBhbGlnbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbVVuaXRWZWN0b3JzKHVwLCBuKVxuXG4gICAgLy8gc21hbGwgcmFuZG9tIHJvdGF0aW9uIGFyb3VuZCBub3JtYWxcbiAgICBxLnNldEZyb21BeGlzQW5nbGUobiwgcmFuZCgpICogTWF0aC5QSSAqIDIpXG4gICAgcS5wcmVtdWx0aXBseShhbGlnbilcblxuICAgIGNvbnN0IGsgPSAwLjggKyByYW5kKCkgKiAwLjVcbiAgICBzLnNldChrLCBrLCBrKVxuXG4gICAgbWF0LmNvbXBvc2UocCwgcSwgcylcbiAgICBpbnN0LnNldE1hdHJpeEF0KGksIG1hdClcbiAgfVxuICBpbnN0Lmluc3RhbmNlTWF0cml4Lm5lZWRzVXBkYXRlID0gdHJ1ZVxuICBpbnN0LmNhc3RTaGFkb3cgPSB0cnVlXG4gIGluc3QuZnJ1c3R1bUN1bGxlZCA9IGZhbHNlXG5cbiAgbWVzaC5hZGQoaW5zdClcbiAgbWVzaC51c2VyRGF0YS5kZWNvcmF0aW9ucy5wdXNoKGluc3QpXG59XG5cbi8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuICAgQ0hVTksgQlVJTERFUlxuICAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG5mdW5jdGlvbiBidWlsZENodW5rKGl4OiBudW1iZXIsIGl6OiBudW1iZXIsIHRleHR1cmVNYXA6IFRIUkVFLlRleHR1cmUgfCBudWxsKSB7XG4gIGNvbnN0IGdlbyA9IGJ1aWxkQ2h1bmtHZW9tZXRyeShpeCwgaXopXG5cbiAgLy8g4p2XIHBlci1jaHVuayBtYXRlcmlhbCBjbG9uZSBzbyBmYWRlcyBkb27igJl0IGFmZmVjdCAqYWxsKiBjaHVua3NcbiAgY29uc3QgbWF0ID0gc2hhcmVkLnRlcnJhaW5CYXNlLmNsb25lKClcbiAgbWF0Lm1hcCA9IHRleHR1cmVNYXAgPz8gbnVsbFxuICBtYXQubmVlZHNVcGRhdGUgPSB0cnVlXG5cbiAgY29uc3QgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKGdlbywgbWF0KVxuICBtZXNoLnBvc2l0aW9uLnNldChpeCAqIENIVU5LX1NJWkUsIDAsIGl6ICogQ0hVTktfU0laRSlcbiAgbWVzaC5yZWNlaXZlU2hhZG93ID0gdHJ1ZVxuICBtZXNoLmZydXN0dW1DdWxsZWQgPSBmYWxzZSAvLyBzYWZlciBmb3IgbGFyZ2UsIGRlZm9ybWVkIHRpbGVzXG5cbiAgbWVzaC51c2VyRGF0YSA9IHtcbiAgICBpeCxcbiAgICBpeixcbiAgICBkZWNvcmF0aW9uczogW10gYXMgVEhSRUUuT2JqZWN0M0RbXSxcbiAgICBmYWRlOiB7IHQ6IDAsIGZyb206IDAsIHRvOiAxLCBzdGFydDogMCB9LCAvLyBwZXItY2h1bmsgZmFkZSBzdGF0ZVxuICAgIHJlbW92aW5nOiBmYWxzZSwgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRydWUsIGZhZGUgdG8gMCB0aGVuIGRpc3Bvc2VcbiAgfVxuXG4gIC8vIHN0YXJ0IGludmlzaWJsZTsgd2XigJlsbCBmYWRlIGluIGZyb20gMCDihpIgMVxuICA7KG1lc2gubWF0ZXJpYWwgYXMgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwpLm9wYWNpdHkgPSAwXG4gIGRlY29yYXRlQ2h1bmsobWVzaClcbiAgcmV0dXJuIG1lc2hcbn1cblxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICBTVFJFQU1FUlxuICAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RyZWFtZXIoc2NlbmU6IFRIUkVFLlNjZW5lKSB7XG4gIGNvbnN0IGNodW5rcyA9IG5ldyBNYXA8c3RyaW5nLCBUSFJFRS5NZXNoPigpXG4gIGNvbnN0IHRtcCA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgY29uc3QgY2xvY2sgPSBuZXcgVEhSRUUuQ2xvY2soKVxuICBsZXQgZW52aXJvbm1lbnREaXJ0eSA9IGZhbHNlXG5cbiAgLy8g4pSA4pSAIFRleHR1cmUgbG9hZCAoYXN5bmNocm9ub3VzbHkpOyBuZXdseSBjcmVhdGVkIGNodW5rcyB3aWxsIHJlY2VpdmUgaXQgaW1tZWRpYXRlbHlcbiAgbGV0IHRlcnJhaW5NYXA6IFRIUkVFLlRleHR1cmUgfCBudWxsID0gbnVsbFxuICBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpLmxvYWQoXG4gICAgJy90ZXh0dXJlcy8zMmQ0YTZmZi0zZGExLTRjN2MtYTc0Mi0xZDFmYTc1OWUzOTQucG5nJyxcbiAgICAodGV4KSA9PiB7XG4gICAgICB0ZXgud3JhcFMgPSB0ZXgud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xuICAgICAgLy8gTk9URTogdGhyZWUgcjE1Mis6IHNldCBjb2xvclNwYWNlIG9uIHRleHR1cmUgaW5zdGVhZCBvZiBlbmNvZGluZ1xuICAgICAgOyh0ZXggYXMgYW55KS5jb2xvclNwYWNlID0gKFRIUkVFIGFzIGFueSkuU1JHQkNvbG9yU3BhY2UgPz8gdW5kZWZpbmVkXG4gICAgICB0ZXguYW5pc290cm9weSA9IDhcbiAgICAgIHRlcnJhaW5NYXAgPSB0ZXhcblxuICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGNodW5rIG1hdGVyaWFscyB0byB1c2UgdGhlIG1hcFxuICAgICAgZm9yIChjb25zdCBtIG9mIGNodW5rcy52YWx1ZXMoKSkge1xuICAgICAgICBjb25zdCBtbSA9IG0ubWF0ZXJpYWwgYXMgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICAgICAgbW0ubWFwID0gdGV4XG4gICAgICAgIG1tLm5lZWRzVXBkYXRlID0gdHJ1ZVxuICAgICAgfVxuICAgIH0sXG4gICAgdW5kZWZpbmVkLFxuICAgIChlcnIpID0+IGNvbnNvbGUud2FybignVGVycmFpbiB0ZXh0dXJlIGZhaWxlZCB0byBsb2FkOyB1c2luZyBmbGF0IGNvbG9yJywgZXJyKSxcbiAgKVxuXG4gIC8vIOKUgOKUgCBSZWFjdCB0byBkaWZmaWN1bHR5IC8gZW52aXJvbm1lbnQgY2hhbmdlc1xuICBjb25zdCB1bnN1YnNjcmliZSA9IG9uRGlmZmljdWx0eUNoYW5nZSgoc3RhdGUpID0+IHtcbiAgICBlbnZDYWNoZSA9IHN0YXRlLmVudmlyb25tZW50XG4gICAgZW52aXJvbm1lbnREaXJ0eSA9IHRydWVcbiAgfSlcblxuICAvLyDilIDilIAgRW5zdXJlIGEgY2h1bmsgZXhpc3RzXG4gIGZ1bmN0aW9uIGVuc3VyZShpeDogbnVtYmVyLCBpejogbnVtYmVyKSB7XG4gICAgY29uc3QgayA9IGtleShpeCwgaXopXG4gICAgaWYgKGNodW5rcy5oYXMoaykpIHJldHVyblxuICAgIGNvbnN0IG1lc2ggPSBidWlsZENodW5rKGl4LCBpeiwgdGVycmFpbk1hcClcbiAgICAvLyBzY2hlZHVsZSBmYWRlIGluXG4gICAgbWVzaC51c2VyRGF0YS5mYWRlID0geyB0OiAwLCBmcm9tOiAwLCB0bzogMSwgc3RhcnQ6IGNsb2NrLmdldEVsYXBzZWRUaW1lKCkgfVxuICAgIHNjZW5lLmFkZChtZXNoKVxuICAgIGNodW5rcy5zZXQoaywgbWVzaClcbiAgfVxuXG4gIC8vIOKUgOKUgCBNYXJrIGRpc3RhbnQgY2h1bmtzIHRvIHJlbW92ZSAod2XigJlsbCBmYWRlIHRoZW0gaW4gdXBkYXRlIGxvb3ApXG4gIGZ1bmN0aW9uIG1hcmtGb3JSZW1vdmFsKGNlbnRlclg6IG51bWJlciwgY2VudGVyWjogbnVtYmVyLCByYWRpdXM6IG51bWJlcikge1xuICAgIGNvbnN0IGN4ID0gdG9DaHVuayhjZW50ZXJYKVxuICAgIGNvbnN0IGN6ID0gdG9DaHVuayhjZW50ZXJaKVxuICAgIGZvciAoY29uc3QgW2ssIG1dIG9mIGNodW5rcykge1xuICAgICAgY29uc3QgZHggPSBjeCAtIG0udXNlckRhdGEuaXhcbiAgICAgIGNvbnN0IGR6ID0gY3ogLSBtLnVzZXJEYXRhLml6XG4gICAgICBjb25zdCBkaXN0ID0gTWF0aC5tYXgoTWF0aC5hYnMoZHgpLCBNYXRoLmFicyhkeikpXG4gICAgICBpZiAoZGlzdCA+IHJhZGl1cyAmJiAhbS51c2VyRGF0YS5yZW1vdmluZykge1xuICAgICAgICBtLnVzZXJEYXRhLnJlbW92aW5nID0gdHJ1ZVxuICAgICAgICBtLnVzZXJEYXRhLmZhZGUgPSB7IHQ6IDAsIGZyb206IChtLm1hdGVyaWFsIGFzIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKS5vcGFjaXR5LCB0bzogMCwgc3RhcnQ6IGNsb2NrLmdldEVsYXBzZWRUaW1lKCkgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIOKUgOKUgCBGYWRlIHN0ZXAgKGJvdGggaW4gJiBvdXQpLCBhbmQgZGlzcG9zZSBvdXQtZmFkZWQgY2h1bmtzXG4gIGZ1bmN0aW9uIHN0ZXBGYWRlcyhub3c6IG51bWJlcikge1xuICAgIGNvbnN0IHRvRGVsZXRlOiBzdHJpbmdbXSA9IFtdXG4gICAgZm9yIChjb25zdCBbaywgbV0gb2YgY2h1bmtzKSB7XG4gICAgICBjb25zdCBmID0gbS51c2VyRGF0YS5mYWRlIGFzIHsgdDogbnVtYmVyOyBmcm9tOiBudW1iZXI7IHRvOiBudW1iZXI7IHN0YXJ0OiBudW1iZXIgfVxuICAgICAgaWYgKCFmKSBjb250aW51ZVxuICAgICAgY29uc3QgbW0gPSBtLm1hdGVyaWFsIGFzIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsXG5cbiAgICAgIGNvbnN0IGVsYXBzZWQgPSBub3cgLSBmLnN0YXJ0XG4gICAgICBjb25zdCB0ID0gVEhSRUUuTWF0aFV0aWxzLmNsYW1wKGVsYXBzZWQgLyBGQURFX0RVUkFUSU9OLCAwLCAxKVxuICAgICAgbW0ub3BhY2l0eSA9IFRIUkVFLk1hdGhVdGlscy5sZXJwKGYuZnJvbSwgZi50bywgdClcblxuICAgICAgaWYgKHQgPj0gMSkge1xuICAgICAgICAvLyBpZiB3ZSBqdXN0IGZhZGVkIG91dCwgcmVtb3ZlICYgZGlzcG9zZVxuICAgICAgICBpZiAobS51c2VyRGF0YS5yZW1vdmluZykge1xuICAgICAgICAgIHNjZW5lLnJlbW92ZShtKVxuICAgICAgICAgIGRpc3Bvc2VDaHVuayhtKVxuICAgICAgICAgIGNodW5rcy5kZWxldGUoaylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBmYWRlLWluIGZpbmlzaGVkOyBjbGVhciBmYWRlIG1hcmtlclxuICAgICAgICAgIG0udXNlckRhdGEuZmFkZSA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIOKUgOKUgCBEaXNwb3NlIGEgd2hvbGUgY2h1bmsgc2FmZWx5XG4gIGZ1bmN0aW9uIGRpc3Bvc2VDaHVuayhtZXNoOiBUSFJFRS5NZXNoKSB7XG4gICAgbWVzaC5nZW9tZXRyeS5kaXNwb3NlKClcblxuICAgIC8vIGRpc3Bvc2UgKnBlci1jaHVuayBjbG9uZSogb2YgdGVycmFpbiBtYXRlcmlhbFxuICAgIGNvbnN0IG1tID0gbWVzaC5tYXRlcmlhbCBhcyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbFxuICAgIGlmIChtbS5tYXAgJiYgbW0ubWFwICE9PSB0ZXJyYWluTWFwKSBtbS5tYXAuZGlzcG9zZSgpXG4gICAgbW0uZGlzcG9zZSgpXG5cbiAgICAvLyBkZWNvcmF0aW9uc1xuICAgIGNvbnN0IGRlY29zID0gbWVzaC51c2VyRGF0YS5kZWNvcmF0aW9ucyBhcyBUSFJFRS5PYmplY3QzRFtdIHwgdW5kZWZpbmVkXG4gICAgZm9yIChjb25zdCBkIG9mIGRlY29zID8/IFtdKSB7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIFRIUkVFLkluc3RhbmNlZE1lc2gpIHtcbiAgICAgICAgZC5nZW9tZXRyeS5kaXNwb3NlKClcbiAgICAgICAgZC5kaXNwb3NlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGQudHJhdmVyc2UoKGMpID0+IHtcbiAgICAgICAgICBpZiAoKGMgYXMgYW55KS5nZW9tZXRyeSkgKGMgYXMgVEhSRUUuTWVzaCkuZ2VvbWV0cnkuZGlzcG9zZSgpXG4gICAgICAgICAgY29uc3QgbWF0ID0gKGMgYXMgVEhSRUUuTWVzaCkubWF0ZXJpYWxcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtYXQpKSBtYXQuZm9yRWFjaCgobSkgPT4gbS5kaXNwb3NlPy4oKSlcbiAgICAgICAgICBlbHNlIChtYXQgYXMgYW55KT8uZGlzcG9zZT8uKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIG1lc2gucmVtb3ZlKGQpXG4gICAgfVxuICAgIG1lc2gudXNlckRhdGEuZGVjb3JhdGlvbnMgPSBbXVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB1cGRhdGUocG9zOiBUSFJFRS5WZWN0b3IzLCBkdDogbnVtYmVyKSB7XG4gICAgICAvLyByYWRpdXMgY2FuIGFkanVzdCB3aXRoIGRlbnNpdHkgaWYgeW91IHdpc2g7IGtlZXAgc2ltcGxlICYgc3RhYmxlIGhlcmVcbiAgICAgIGNvbnN0IHJhZGl1cyA9IEFDVElWRV9SQURJVVNcbiAgICAgIGNvbnN0IGN4ID0gdG9DaHVuayhwb3MueClcbiAgICAgIGNvbnN0IGN6ID0gdG9DaHVuayhwb3MueilcblxuICAgICAgLy8gY3JlYXRlL2tlZXAgYSBzcXVhcmUgb2YgY2h1bmtzIGFyb3VuZCB0aGUgcGxheWVyXG4gICAgICBmb3IgKGxldCBkeiA9IC1yYWRpdXM7IGR6IDw9IHJhZGl1czsgZHorKykge1xuICAgICAgICBmb3IgKGxldCBkeCA9IC1yYWRpdXM7IGR4IDw9IHJhZGl1czsgZHgrKykge1xuICAgICAgICAgIGVuc3VyZShjeCArIGR4LCBjeiArIGR6KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIG1hcmsgZmFyIGNodW5rcyBmb3IgZmFkZS1vdXQvcmVtb3ZhbFxuICAgICAgbWFya0ZvclJlbW92YWwocG9zLngsIHBvcy56LCByYWRpdXMpXG5cbiAgICAgIC8vIHJlLWRlY29yYXRlIGFmdGVyIGVudiBjaGFuZ2UgKHNlZWRlZCDihpIgbm8gcG9wcGluZylcbiAgICAgIGlmIChlbnZpcm9ubWVudERpcnR5KSB7XG4gICAgICAgIGZvciAoY29uc3QgbSBvZiBjaHVua3MudmFsdWVzKCkpIGRlY29yYXRlQ2h1bmsobSlcbiAgICAgICAgZW52aXJvbm1lbnREaXJ0eSA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIGZhZGUgc3RlcFxuICAgICAgc3RlcEZhZGVzKGNsb2NrLmdldEVsYXBzZWRUaW1lKCkpXG4gICAgfSxcblxuICAgIHF1ZXJ5SGVpZ2h0KHg6IG51bWJlciwgejogbnVtYmVyKSB7XG4gICAgICByZXR1cm4gaGVpZ2h0QXQoeCwgeilcbiAgICB9LFxuXG4gICAgcXVlcnlOb3JtYWwoeDogbnVtYmVyLCB6OiBudW1iZXIpIHtcbiAgICAgIGNvbnN0IG4gPSBub3JtYWxBdCh4LCB6KVxuICAgICAgcmV0dXJuIHRtcC5zZXQobi54LCBuLnksIG4ueilcbiAgICB9LFxuXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIHVuc3Vic2NyaWJlPy4oKVxuICAgICAgZm9yIChjb25zdCBtIG9mIGNodW5rcy52YWx1ZXMoKSkgZGlzcG9zZUNodW5rKG0pXG4gICAgICBjaHVua3MuY2xlYXIoKVxuXG4gICAgICAvLyBzaGFyZWQgcmVzb3VyY2VzOiBkb27igJl0IGRpc3Bvc2Ugc2hhcmVkLnRlcnJhaW5CYXNlICh1c2VkIGFzIHRlbXBsYXRlKVxuICAgICAgc2hhcmVkLnJvY2tHZW8uZGlzcG9zZSgpXG4gICAgICBzaGFyZWQucm9ja01hdC5kaXNwb3NlKClcblxuICAgICAgaWYgKHRlcnJhaW5NYXApIHtcbiAgICAgICAgdGVycmFpbk1hcC5kaXNwb3NlKClcbiAgICAgICAgdGVycmFpbk1hcCA9IG51bGxcbiAgICAgIH1cbiAgICB9LFxuICB9XG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJoZWlnaHRBdCIsIm5vcm1hbEF0IiwiZ2V0RGlmZmljdWx0eVN0YXRlIiwib25EaWZmaWN1bHR5Q2hhbmdlIiwibWVyZ2VHZW9tZXRyaWVzIiwiQ0hVTktfU0laRSIsIkdSSURfU0VHTUVOVFMiLCJBQ1RJVkVfUkFESVVTIiwiRkFERV9EVVJBVElPTiIsIlNLSVJUX0RST1AiLCJUSUxFX1JFUEVBVCIsIlJPQ0tTX1BFUl9ERU5TSVRZX1VOSVQiLCJIQUxGIiwia2V5IiwiaXgiLCJpeiIsInRvQ2h1bmsiLCJ4IiwiTWF0aCIsImZsb29yIiwibXVsYmVycnkzMiIsInNlZWQiLCJ0IiwiaW11bCIsImhhc2gyaSIsImEiLCJiIiwiaCIsImVudkNhY2hlIiwiZW52aXJvbm1lbnQiLCJzaGFyZWQiLCJ0ZXJyYWluQmFzZSIsIk1lc2hTdGFuZGFyZE1hdGVyaWFsIiwiY29sb3IiLCJyb3VnaG5lc3MiLCJtZXRhbG5lc3MiLCJ0cmFuc3BhcmVudCIsIm9wYWNpdHkiLCJkaXRoZXJpbmciLCJyb2NrTWF0Iiwicm9ja0dlbyIsIkljb3NhaGVkcm9uR2VvbWV0cnkiLCJidWlsZFRlcnJhaW5QbGFuZSIsImciLCJQbGFuZUdlb21ldHJ5Iiwicm90YXRlWCIsIlBJIiwicG9zIiwiYXR0cmlidXRlcyIsInBvc2l0aW9uIiwiaSIsImNvdW50IiwidngiLCJnZXRYIiwidnoiLCJnZXRaIiwic2V0WSIsIm5lZWRzVXBkYXRlIiwidXYiLCJzZXRYWSIsImdldFkiLCJjb21wdXRlVmVydGV4Tm9ybWFscyIsImJ1aWxkU2tpcnQiLCJlZGdlVmVydHMiLCJzZWciLCJwb3NpdGlvbnMiLCJ1dnMiLCJpbmRpY2VzIiwicHVzaFBhaXIiLCJ4TG9jYWwiLCJ6TG9jYWwiLCJ3b3JsZFgiLCJ3b3JsZFoiLCJ0b3BZIiwiYm90dG9tWSIsImJhc2VJZHgiLCJsZW5ndGgiLCJwdXNoIiwicHVzaFF1YWQiLCJpVG9wQSIsImlUb3BCIiwiaUJvdEEiLCJpQm90QiIsInByZXZUb3AiLCJuZXh0VG9wIiwieiIsImdlbyIsIkJ1ZmZlckdlb21ldHJ5Iiwic2V0QXR0cmlidXRlIiwiRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSIsInNldEluZGV4IiwiYnVpbGRDaHVua0dlb21ldHJ5IiwicGxhbmUiLCJza2lydCIsIm1lcmdlZCIsImRpc3Bvc2UiLCJkZWNvcmF0ZUNodW5rIiwibWVzaCIsInByZXZpb3VzIiwidXNlckRhdGEiLCJkZWNvcmF0aW9ucyIsIm9iaiIsInJlbW92ZSIsIkluc3RhbmNlZE1lc2giLCJnZW9tZXRyeSIsInRyYXZlcnNlIiwiYyIsIm0iLCJtYXRlcmlhbCIsIkFycmF5IiwiaXNBcnJheSIsImZvckVhY2giLCJtbSIsInByb3BEZW5zaXR5IiwicHJvcENvdW50IiwibWF4Iiwicm91bmQiLCJyYW5kIiwiaW5zdCIsIm1hdCIsIk1hdHJpeDQiLCJwIiwiVmVjdG9yMyIsInEiLCJRdWF0ZXJuaW9uIiwicyIsInVwIiwibiIsImxvY2FsWCIsImxvY2FsWiIsInkiLCJzZXQiLCJubiIsIm5vcm1hbGl6ZSIsImFsaWduIiwic2V0RnJvbVVuaXRWZWN0b3JzIiwic2V0RnJvbUF4aXNBbmdsZSIsInByZW11bHRpcGx5IiwiayIsImNvbXBvc2UiLCJzZXRNYXRyaXhBdCIsImluc3RhbmNlTWF0cml4IiwiY2FzdFNoYWRvdyIsImZydXN0dW1DdWxsZWQiLCJhZGQiLCJidWlsZENodW5rIiwidGV4dHVyZU1hcCIsImNsb25lIiwibWFwIiwiTWVzaCIsInJlY2VpdmVTaGFkb3ciLCJmYWRlIiwiZnJvbSIsInRvIiwic3RhcnQiLCJyZW1vdmluZyIsImNyZWF0ZVN0cmVhbWVyIiwic2NlbmUiLCJjaHVua3MiLCJNYXAiLCJ0bXAiLCJjbG9jayIsIkNsb2NrIiwiZW52aXJvbm1lbnREaXJ0eSIsInRlcnJhaW5NYXAiLCJUZXh0dXJlTG9hZGVyIiwibG9hZCIsInRleCIsIndyYXBTIiwid3JhcFQiLCJSZXBlYXRXcmFwcGluZyIsImNvbG9yU3BhY2UiLCJTUkdCQ29sb3JTcGFjZSIsInVuZGVmaW5lZCIsImFuaXNvdHJvcHkiLCJ2YWx1ZXMiLCJlcnIiLCJjb25zb2xlIiwid2FybiIsInVuc3Vic2NyaWJlIiwic3RhdGUiLCJlbnN1cmUiLCJoYXMiLCJnZXRFbGFwc2VkVGltZSIsIm1hcmtGb3JSZW1vdmFsIiwiY2VudGVyWCIsImNlbnRlcloiLCJyYWRpdXMiLCJjeCIsImN6IiwiZHgiLCJkeiIsImRpc3QiLCJhYnMiLCJzdGVwRmFkZXMiLCJub3ciLCJ0b0RlbGV0ZSIsImYiLCJlbGFwc2VkIiwiTWF0aFV0aWxzIiwiY2xhbXAiLCJsZXJwIiwiZGlzcG9zZUNodW5rIiwiZGVsZXRlIiwiZGVjb3MiLCJkIiwidXBkYXRlIiwiZHQiLCJxdWVyeUhlaWdodCIsInF1ZXJ5Tm9ybWFsIiwiY2xlYXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/world/chunks/streamer.ts\n");

/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/dynamic-access-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/server/app-render/dynamic-access-async-storage.external.js" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/dynamic-access-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/is-bot":
/*!***********************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/is-bot" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc","vendor-chunks/three"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fgameplay%2Fpage&page=%2Fgameplay%2Fpage&appPaths=%2Fgameplay%2Fpage&pagePath=private-next-app-dir%2Fgameplay%2Fpage.tsx&appDir=%2Fapp%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();