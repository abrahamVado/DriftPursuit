"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/gameplay/page",{

/***/ "(app-pages-browser)/./src/vehicles/shared/simpleController.ts":
/*!*************************************************!*\
  !*** ./src/vehicles/shared/simpleController.ts ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createController: () => (/* binding */ createController)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three */ \"(app-pages-browser)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _weapons_gatling__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/weapons/gatling */ \"(app-pages-browser)/./src/weapons/gatling.ts\");\n/* harmony import */ var _weapons_homingMissile__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/weapons/homingMissile */ \"(app-pages-browser)/./src/weapons/homingMissile.ts\");\n/* harmony import */ var _weapons_neonLaser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/weapons/neonLaser */ \"(app-pages-browser)/./src/weapons/neonLaser.ts\");\n/* harmony import */ var _weapons_bomb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/weapons/bomb */ \"(app-pages-browser)/./src/weapons/bomb.ts\");\n/* harmony import */ var _weapons_visuals_homingMissileVisual__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/weapons/visuals/homingMissileVisual */ \"(app-pages-browser)/./src/weapons/visuals/homingMissileVisual.ts\");\n/* harmony import */ var _weapons_visuals_neonLaserVisual__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/weapons/visuals/neonLaserVisual */ \"(app-pages-browser)/./src/weapons/visuals/neonLaserVisual.ts\");\n/* harmony import */ var _weapons_meteorMissile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/weapons/meteorMissile */ \"(app-pages-browser)/./src/weapons/meteorMissile.ts\");\n\n\n\n\n\n\n\n\nfunction createController(group, scene) {\n    const vel = new three__WEBPACK_IMPORTED_MODULE_7__.Vector3(0, 0, 60);\n    const forward = new three__WEBPACK_IMPORTED_MODULE_7__.Vector3(0, 0, -1);\n    const weaponContext = {\n        position: new three__WEBPACK_IMPORTED_MODULE_7__.Vector3(),\n        forward: new three__WEBPACK_IMPORTED_MODULE_7__.Vector3(0, 0, -1),\n        dt: 0,\n        targets: []\n    };\n    let targetProvider = ()=>[];\n    const gatling = (0,_weapons_gatling__WEBPACK_IMPORTED_MODULE_0__.createGatlingSystem)({\n        fireRate: 25,\n        spread: three__WEBPACK_IMPORTED_MODULE_7__.MathUtils.degToRad(1.5),\n        maxTracers: 32,\n        tracerLifeMs: 250,\n        ammo: 1200,\n        heatPerShot: 1,\n        coolRate: 12,\n        overheatThreshold: 120\n    });\n    const missilesSystem = (0,_weapons_homingMissile__WEBPACK_IMPORTED_MODULE_1__.createHomingMissileSystem)({\n        maxConcurrent: 4,\n        cooldownMs: 1200,\n        ammo: 4,\n        speed: 180,\n        navigationConstant: 3,\n        lockConeDeg: 45,\n        smokeTrailIntervalMs: 80,\n        detonationRadius: 4,\n        maxLifetimeMs: 12000\n    });\n    const missileVisuals = (0,_weapons_visuals_homingMissileVisual__WEBPACK_IMPORTED_MODULE_4__.createHomingMissileVisual)(scene);\n    const meteorSystem = (0,_weapons_meteorMissile__WEBPACK_IMPORTED_MODULE_6__.createMeteorMissileSystem)({\n        maxConcurrent: 2,\n        cooldownMs: 2500,\n        ammo: 2,\n        ejectionDurationMs: 1000,\n        ejectionSpeed: 40,\n        burnSpeed: 220,\n        navigationConstant: 3.5,\n        detonationRadius: 6,\n        smokeTrailIntervalMs: 70,\n        maxLifetimeMs: 15000\n    });\n    const meteorVisuals = (0,_weapons_visuals_homingMissileVisual__WEBPACK_IMPORTED_MODULE_4__.createHomingMissileVisual)(scene);\n    const laserSystem = (0,_weapons_neonLaser__WEBPACK_IMPORTED_MODULE_2__.createNeonLaserSystem)({\n        cooldownMs: 2000,\n        durationMs: 600,\n        range: 800,\n        attenuation: 0.002\n    });\n    const laserVisual = (0,_weapons_visuals_neonLaserVisual__WEBPACK_IMPORTED_MODULE_5__.createNeonLaserVisual)(scene);\n    const bombSystem = (0,_weapons_bomb__WEBPACK_IMPORTED_MODULE_3__.createBombSystem)({\n        maxConcurrent: 2,\n        ammo: 6,\n        fuseMs: 2500,\n        cooldownMs: 1500,\n        aoeRadius: 40,\n        craterRadius: 18,\n        debrisCount: 8,\n        gravity: 30\n    });\n    let speed = 60;\n    let weaponName = 'GATLING';\n    let ammo = gatling.ammo;\n    let missiles = missilesSystem.ammo;\n    let meteorAmmo = meteorSystem.ammo;\n    let laserCooldownMs = laserSystem.cooldownMs;\n    let bombArmed = bombSystem.isArmed;\n    let fireHeld = false;\n    let fireJustPressed = false;\n    let fireJustReleased = false;\n    let meteorHeld = false;\n    let meteorJustPressed = false;\n    function update(dt, input, queryHeight) {\n        // Mouse steering: aim reticle in NDC controls yaw/pitch\n        const targetYaw = input.mouse.x * 0.6;\n        const targetPitch = input.mouse.y * 0.4;\n        group.rotation.y += (targetYaw - group.rotation.y) * (1 - Math.exp(-6 * dt));\n        group.rotation.x += (targetPitch - group.rotation.x) * (1 - Math.exp(-6 * dt));\n        // Keys\n        if (input.pressed('KeyW')) speed += 40 * dt;\n        if (input.pressed('KeyS')) speed -= 40 * dt;\n        if (input.pressed('ShiftLeft')) speed += 80 * dt;\n        if (input.pressed('KeyQ')) group.rotation.z += 1.2 * dt;\n        if (input.pressed('KeyE')) group.rotation.z -= 1.2 * dt;\n        speed = Math.max(10, Math.min(160, speed));\n        // Integrate\n        forward.set(0, 0, -1).applyEuler(group.rotation);\n        vel.copy(forward).multiplyScalar(speed);\n        group.position.addScaledVector(vel, dt);\n        group.userData.speed = speed;\n        // Terrain floor constraint\n        const floor = queryHeight(group.position.x, group.position.z) + 6;\n        if (group.position.y < floor) {\n            group.position.y = floor;\n            vel.y = Math.abs(vel.y) * 0.2;\n        }\n        // Ceiling clamp\n        const ceiling = 2000;\n        if (group.position.y > ceiling) group.position.y = ceiling;\n        const previouslyHeld = fireHeld;\n        fireHeld = Boolean(input.pressed('Space'));\n        fireJustPressed = fireHeld && !previouslyHeld;\n        fireJustReleased = !fireHeld && previouslyHeld;\n        const previouslyMeteorHeld = meteorHeld;\n        meteorHeld = Boolean(input.pressed('Digit1'));\n        meteorJustPressed = meteorHeld && !previouslyMeteorHeld;\n        // Weapons input (placeholders)\n        if (input.pressed('Digit1')) weaponName = 'GATLING';\n        if (input.pressed('Digit2')) weaponName = 'MISSILE';\n        if (input.pressed('Digit3')) weaponName = 'LASER';\n        if (input.pressed('Digit4')) weaponName = 'BOMB';\n        weaponContext.position.copy(group.position);\n        weaponContext.forward.copy(forward);\n        weaponContext.dt = dt;\n        weaponContext.targets = targetProvider();\n        if (meteorJustPressed) {\n            //1.- Kick the Meteor canister clear of the fuselage when the pilot taps slot one.\n            meteorSystem.tryFire(weaponContext);\n        }\n        meteorSystem.update(weaponContext);\n        //2.- Sync the slow-burn launch visuals so the canister and plume remain authoritative.\n        meteorVisuals.update(meteorSystem.missiles);\n        if (weaponName === 'GATLING') {\n            //3.- Advance the hitscan gun and respect trigger state.\n            gatling.update(weaponContext, fireHeld);\n        } else {\n            gatling.update(weaponContext, false);\n        }\n        if (weaponName === 'MISSILE' && fireJustPressed) {\n            //4.- Launch homing missiles when ammo and pool constraints allow.\n            missilesSystem.tryFire(weaponContext);\n        }\n        missilesSystem.update(weaponContext);\n        //5.- Mirror the guidance results into the scene so each missile gains a visible shell.\n        missileVisuals.update(missilesSystem.missiles);\n        if (weaponName === 'LASER') {\n            if (fireJustPressed) {\n                laserSystem.fire(weaponContext);\n            }\n            if (fireHeld) {\n                laserSystem.sustain(weaponContext);\n            }\n            if (fireJustReleased) {\n                laserSystem.release();\n            }\n        } else {\n            if (laserSystem.state.active) {\n                laserSystem.release();\n            }\n        }\n        laserSystem.update(weaponContext);\n        //6.- Stretch and orient the neon beam according to the freshly sampled weapon state.\n        laserVisual.update(laserSystem.state);\n        if (weaponName === 'BOMB' && fireJustPressed) {\n            //7.- Drop a bomb while relaying the terrain sampler to trigger ground detonation.\n            bombSystem.fire({\n                ...weaponContext,\n                sampleGroundHeight: queryHeight\n            });\n        }\n        bombSystem.update({\n            ...weaponContext,\n            sampleGroundHeight: queryHeight\n        });\n        // Cooldowns\n        ammo = gatling.ammo;\n        missiles = missilesSystem.ammo;\n        meteorAmmo = meteorSystem.ammo;\n        laserCooldownMs = laserSystem.cooldownMs;\n        bombArmed = bombSystem.isArmed;\n    }\n    function dispose() {\n        //8.- Tear down transient weapon meshes so hot swaps between vehicles stay safe.\n        missileVisuals.dispose();\n        meteorVisuals.dispose();\n        laserVisual.dispose();\n    }\n    return {\n        update,\n        get speed () {\n            return speed;\n        },\n        get weaponName () {\n            return weaponName;\n        },\n        get ammo () {\n            return ammo;\n        },\n        get missiles () {\n            return missiles;\n        },\n        get meteorAmmo () {\n            return meteorAmmo;\n        },\n        get laserCooldownMs () {\n            return laserCooldownMs;\n        },\n        get bombArmed () {\n            return bombArmed;\n        },\n        setTargetProvider (provider) {\n            targetProvider = provider;\n        },\n        dispose\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy92ZWhpY2xlcy9zaGFyZWQvc2ltcGxlQ29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEI7QUFDeUI7QUFDWTtBQUNSO0FBQ1Y7QUFDZ0M7QUFDUjtBQUNOO0FBRzVELFNBQVNRLGlCQUFpQkMsS0FBa0IsRUFBRUMsS0FBa0I7SUFDckUsTUFBTUMsTUFBTSxJQUFJWCwwQ0FBYSxDQUFDLEdBQUUsR0FBRTtJQUNsQyxNQUFNYSxVQUFVLElBQUliLDBDQUFhLENBQUMsR0FBRSxHQUFFLENBQUM7SUFDdkMsTUFBTWMsZ0JBQStCO1FBQ25DQyxVQUFVLElBQUlmLDBDQUFhO1FBQzNCYSxTQUFTLElBQUliLDBDQUFhLENBQUMsR0FBRSxHQUFFLENBQUM7UUFDaENnQixJQUFJO1FBQ0pDLFNBQVMsRUFBRTtJQUNiO0lBQ0EsSUFBSUMsaUJBQXVDLElBQU0sRUFBRTtJQUVuRCxNQUFNQyxVQUFVbEIscUVBQW1CQSxDQUFDO1FBQ2xDbUIsVUFBVTtRQUNWQyxRQUFRckIsNENBQWUsQ0FBQ3VCLFFBQVEsQ0FBQztRQUNqQ0MsWUFBWTtRQUNaQyxjQUFjO1FBQ2RDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxVQUFVO1FBQ1ZDLG1CQUFtQjtJQUNyQjtJQUVBLE1BQU1DLGlCQUFpQjVCLGlGQUF5QkEsQ0FBQztRQUMvQzZCLGVBQWU7UUFDZkMsWUFBWTtRQUNaTixNQUFNO1FBQ05PLE9BQU87UUFDUEMsb0JBQW9CO1FBQ3BCQyxhQUFhO1FBQ2JDLHNCQUFzQjtRQUN0QkMsa0JBQWtCO1FBQ2xCQyxlQUFlO0lBQ2pCO0lBRUEsTUFBTUMsaUJBQWlCbEMsK0ZBQXlCQSxDQUFDSztJQUVqRCxNQUFNOEIsZUFBZWpDLGlGQUF5QkEsQ0FBQztRQUM3Q3dCLGVBQWU7UUFDZkMsWUFBWTtRQUNaTixNQUFNO1FBQ05lLG9CQUFvQjtRQUNwQkMsZUFBZTtRQUNmQyxXQUFXO1FBQ1hULG9CQUFvQjtRQUNwQkcsa0JBQWtC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QU9BO1FBQU07UUFDMUIsSUFBSXVCLGNBQVk7WUFBRSxPQUFPQTtRQUFXO1FBQ3BDLElBQUk5QixRQUFNO1lBQUUsT0FBT0E7UUFBSztRQUN4QixJQUFJK0IsWUFBVTtZQUFFLE9BQU9BO1FBQVM7UUFDaEMsSUFBSUMsY0FBWTtZQUFFLE9BQU9BO1FBQVc7UUFDcEMsSUFBSUMsbUJBQWlCO1lBQUUsT0FBT0E7UUFBZ0I7UUFDOUMsSUFBSUMsYUFBVztZQUFFLE9BQU9BO1FBQVU7UUFDbEMwQyxtQkFBa0JDLFFBQThCO1lBQzlDckYsaUJBQWlCcUY7UUFDbkI7UUFDQUY7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvYXBwL3NyYy92ZWhpY2xlcy9zaGFyZWQvc2ltcGxlQ29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZUdhdGxpbmdTeXN0ZW0gfSBmcm9tICdAL3dlYXBvbnMvZ2F0bGluZydcbmltcG9ydCB7IGNyZWF0ZUhvbWluZ01pc3NpbGVTeXN0ZW0gfSBmcm9tICdAL3dlYXBvbnMvaG9taW5nTWlzc2lsZSdcbmltcG9ydCB7IGNyZWF0ZU5lb25MYXNlclN5c3RlbSB9IGZyb20gJ0Avd2VhcG9ucy9uZW9uTGFzZXInXG5pbXBvcnQgeyBjcmVhdGVCb21iU3lzdGVtIH0gZnJvbSAnQC93ZWFwb25zL2JvbWInXG5pbXBvcnQgeyBjcmVhdGVIb21pbmdNaXNzaWxlVmlzdWFsIH0gZnJvbSAnQC93ZWFwb25zL3Zpc3VhbHMvaG9taW5nTWlzc2lsZVZpc3VhbCdcbmltcG9ydCB7IGNyZWF0ZU5lb25MYXNlclZpc3VhbCB9IGZyb20gJ0Avd2VhcG9ucy92aXN1YWxzL25lb25MYXNlclZpc3VhbCdcbmltcG9ydCB7IGNyZWF0ZU1ldGVvck1pc3NpbGVTeXN0ZW0gfSBmcm9tICdAL3dlYXBvbnMvbWV0ZW9yTWlzc2lsZSdcbmltcG9ydCB0eXBlIHsgV2VhcG9uQ29udGV4dCwgV2VhcG9uVGFyZ2V0IH0gZnJvbSAnQC93ZWFwb25zL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udHJvbGxlcihncm91cDogVEhSRUUuR3JvdXAsIHNjZW5lOiBUSFJFRS5TY2VuZSl7XG4gIGNvbnN0IHZlbCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsMCw2MClcbiAgY29uc3QgZm9yd2FyZCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwtMSlcbiAgY29uc3Qgd2VhcG9uQ29udGV4dDogV2VhcG9uQ29udGV4dCA9IHtcbiAgICBwb3NpdGlvbjogbmV3IFRIUkVFLlZlY3RvcjMoKSxcbiAgICBmb3J3YXJkOiBuZXcgVEhSRUUuVmVjdG9yMygwLDAsLTEpLFxuICAgIGR0OiAwLFxuICAgIHRhcmdldHM6IFtdXG4gIH1cbiAgbGV0IHRhcmdldFByb3ZpZGVyOiAoKSA9PiBXZWFwb25UYXJnZXRbXSA9ICgpID0+IFtdXG5cbiAgY29uc3QgZ2F0bGluZyA9IGNyZWF0ZUdhdGxpbmdTeXN0ZW0oe1xuICAgIGZpcmVSYXRlOiAyNSxcbiAgICBzcHJlYWQ6IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZCgxLjUpLFxuICAgIG1heFRyYWNlcnM6IDMyLFxuICAgIHRyYWNlckxpZmVNczogMjUwLFxuICAgIGFtbW86IDEyMDAsXG4gICAgaGVhdFBlclNob3Q6IDEsXG4gICAgY29vbFJhdGU6IDEyLFxuICAgIG92ZXJoZWF0VGhyZXNob2xkOiAxMjAsXG4gIH0pXG5cbiAgY29uc3QgbWlzc2lsZXNTeXN0ZW0gPSBjcmVhdGVIb21pbmdNaXNzaWxlU3lzdGVtKHtcbiAgICBtYXhDb25jdXJyZW50OiA0LFxuICAgIGNvb2xkb3duTXM6IDEyMDAsXG4gICAgYW1tbzogNCxcbiAgICBzcGVlZDogMTgwLFxuICAgIG5hdmlnYXRpb25Db25zdGFudDogMyxcbiAgICBsb2NrQ29uZURlZzogNDUsXG4gICAgc21va2VUcmFpbEludGVydmFsTXM6IDgwLFxuICAgIGRldG9uYXRpb25SYWRpdXM6IDQsXG4gICAgbWF4TGlmZXRpbWVNczogMTIwMDAsXG4gIH0pXG5cbiAgY29uc3QgbWlzc2lsZVZpc3VhbHMgPSBjcmVhdGVIb21pbmdNaXNzaWxlVmlzdWFsKHNjZW5lKVxuXG4gIGNvbnN0IG1ldGVvclN5c3RlbSA9IGNyZWF0ZU1ldGVvck1pc3NpbGVTeXN0ZW0oe1xuICAgIG1heENvbmN1cnJlbnQ6IDIsXG4gICAgY29vbGRvd25NczogMjUwMCxcbiAgICBhbW1vOiAyLFxuICAgIGVqZWN0aW9uRHVyYXRpb25NczogMTAwMCxcbiAgICBlamVjdGlvblNwZWVkOiA0MCxcbiAgICBidXJuU3BlZWQ6IDIyMCxcbiAgICBuYXZpZ2F0aW9uQ29uc3RhbnQ6IDMuNSxcbiAgICBkZXRvbmF0aW9uUmFkaXVzOiA2LFxuICAgIHNtb2tlVHJhaWxJbnRlcnZhbE1zOiA3MCxcbiAgICBtYXhMaWZldGltZU1zOiAxNTAwMCxcbiAgfSlcblxuICBjb25zdCBtZXRlb3JWaXN1YWxzID0gY3JlYXRlSG9taW5nTWlzc2lsZVZpc3VhbChzY2VuZSlcblxuICBjb25zdCBsYXNlclN5c3RlbSA9IGNyZWF0ZU5lb25MYXNlclN5c3RlbSh7XG4gICAgY29vbGRvd25NczogMjAwMCxcbiAgICBkdXJhdGlvbk1zOiA2MDAsXG4gICAgcmFuZ2U6IDgwMCxcbiAgICBhdHRlbnVhdGlvbjogMC4wMDIsXG4gIH0pXG5cbiAgY29uc3QgbGFzZXJWaXN1YWwgPSBjcmVhdGVOZW9uTGFzZXJWaXN1YWwoc2NlbmUpXG5cbiAgY29uc3QgYm9tYlN5c3RlbSA9IGNyZWF0ZUJvbWJTeXN0ZW0oe1xuICAgIG1heENvbmN1cnJlbnQ6IDIsXG4gICAgYW1tbzogNixcbiAgICBmdXNlTXM6IDI1MDAsXG4gICAgY29vbGRvd25NczogMTUwMCxcbiAgICBhb2VSYWRpdXM6IDQwLFxuICAgIGNyYXRlclJhZGl1czogMTgsXG4gICAgZGVicmlzQ291bnQ6IDgsXG4gICAgZ3Jhdml0eTogMzAsXG4gIH0pXG5cbiAgbGV0IHNwZWVkID0gNjBcbiAgbGV0IHdlYXBvbk5hbWUgPSAnR0FUTElORydcbiAgbGV0IGFtbW8gPSBnYXRsaW5nLmFtbW9cbiAgbGV0IG1pc3NpbGVzID0gbWlzc2lsZXNTeXN0ZW0uYW1tb1xuICBsZXQgbWV0ZW9yQW1tbyA9IG1ldGVvclN5c3RlbS5hbW1vXG4gIGxldCBsYXNlckNvb2xkb3duTXMgPSBsYXNlclN5c3RlbS5jb29sZG93bk1zXG4gIGxldCBib21iQXJtZWQgPSBib21iU3lzdGVtLmlzQXJtZWRcbiAgbGV0IGZpcmVIZWxkID0gZmFsc2VcbiAgbGV0IGZpcmVKdXN0UHJlc3NlZCA9IGZhbHNlXG4gIGxldCBmaXJlSnVzdFJlbGVhc2VkID0gZmFsc2VcbiAgbGV0IG1ldGVvckhlbGQgPSBmYWxzZVxuICBsZXQgbWV0ZW9ySnVzdFByZXNzZWQgPSBmYWxzZVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShkdDpudW1iZXIsIGlucHV0OmFueSwgcXVlcnlIZWlnaHQ6KHg6bnVtYmVyLHo6bnVtYmVyKT0+bnVtYmVyKXtcbiAgICAvLyBNb3VzZSBzdGVlcmluZzogYWltIHJldGljbGUgaW4gTkRDIGNvbnRyb2xzIHlhdy9waXRjaFxuICAgIGNvbnN0IHRhcmdldFlhdyA9IGlucHV0Lm1vdXNlLnggKiAwLjZcbiAgICBjb25zdCB0YXJnZXRQaXRjaCA9IGlucHV0Lm1vdXNlLnkgKiAwLjRcbiAgICBncm91cC5yb3RhdGlvbi55ICs9ICh0YXJnZXRZYXcgLSBncm91cC5yb3RhdGlvbi55KSAqICgxIC0gTWF0aC5leHAoLTYqZHQpKVxuICAgIGdyb3VwLnJvdGF0aW9uLnggKz0gKHRhcmdldFBpdGNoIC0gZ3JvdXAucm90YXRpb24ueCkgKiAoMSAtIE1hdGguZXhwKC02KmR0KSlcblxuICAgIC8vIEtleXNcbiAgICBpZiAoaW5wdXQucHJlc3NlZCgnS2V5VycpKSBzcGVlZCArPSA0MCpkdFxuICAgIGlmIChpbnB1dC5wcmVzc2VkKCdLZXlTJykpIHNwZWVkIC09IDQwKmR0XG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ1NoaWZ0TGVmdCcpKSBzcGVlZCArPSA4MCpkdFxuICAgIGlmIChpbnB1dC5wcmVzc2VkKCdLZXlRJykpIGdyb3VwLnJvdGF0aW9uLnogKz0gMS4yKmR0XG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0tleUUnKSkgZ3JvdXAucm90YXRpb24ueiAtPSAxLjIqZHRcbiAgICBzcGVlZCA9IE1hdGgubWF4KDEwLCBNYXRoLm1pbigxNjAsIHNwZWVkKSlcblxuICAgIC8vIEludGVncmF0ZVxuICAgIGZvcndhcmQuc2V0KDAsMCwtMSkuYXBwbHlFdWxlcihncm91cC5yb3RhdGlvbilcbiAgICB2ZWwuY29weShmb3J3YXJkKS5tdWx0aXBseVNjYWxhcihzcGVlZClcbiAgICBncm91cC5wb3NpdGlvbi5hZGRTY2FsZWRWZWN0b3IodmVsLCBkdClcbiAgICA7KGdyb3VwIGFzIGFueSkudXNlckRhdGEuc3BlZWQgPSBzcGVlZFxuXG4gICAgLy8gVGVycmFpbiBmbG9vciBjb25zdHJhaW50XG4gICAgY29uc3QgZmxvb3IgPSBxdWVyeUhlaWdodChncm91cC5wb3NpdGlvbi54LCBncm91cC5wb3NpdGlvbi56KSArIDZcbiAgICBpZiAoZ3JvdXAucG9zaXRpb24ueSA8IGZsb29yKSB7XG4gICAgICBncm91cC5wb3NpdGlvbi55ID0gZmxvb3JcbiAgICAgIHZlbC55ID0gTWF0aC5hYnModmVsLnkpKjAuMlxuICAgIH1cblxuICAgIC8vIENlaWxpbmcgY2xhbXBcbiAgICBjb25zdCBjZWlsaW5nID0gMjAwMFxuICAgIGlmIChncm91cC5wb3NpdGlvbi55ID4gY2VpbGluZykgZ3JvdXAucG9zaXRpb24ueSA9IGNlaWxpbmdcblxuICAgIGNvbnN0IHByZXZpb3VzbHlIZWxkID0gZmlyZUhlbGRcbiAgICBmaXJlSGVsZCA9IEJvb2xlYW4oaW5wdXQucHJlc3NlZCgnU3BhY2UnKSlcbiAgICBmaXJlSnVzdFByZXNzZWQgPSBmaXJlSGVsZCAmJiAhcHJldmlvdXNseUhlbGRcbiAgICBmaXJlSnVzdFJlbGVhc2VkID0gIWZpcmVIZWxkICYmIHByZXZpb3VzbHlIZWxkXG5cbiAgICBjb25zdCBwcmV2aW91c2x5TWV0ZW9ySGVsZCA9IG1ldGVvckhlbGRcbiAgICBtZXRlb3JIZWxkID0gQm9vbGVhbihpbnB1dC5wcmVzc2VkKCdEaWdpdDEnKSlcbiAgICBtZXRlb3JKdXN0UHJlc3NlZCA9IG1ldGVvckhlbGQgJiYgIXByZXZpb3VzbHlNZXRlb3JIZWxkXG5cbiAgICAvLyBXZWFwb25zIGlucHV0IChwbGFjZWhvbGRlcnMpXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0MScpKSB3ZWFwb25OYW1lID0gJ0dBVExJTkcnXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0MicpKSB3ZWFwb25OYW1lID0gJ01JU1NJTEUnXG4gICAgaWYgKGlucHV0LnByZXNzZWQoJ0RpZ2l0MycpKSB3ZWFwb25OYW1lID0gJ0xBU0VSJ1xuICAgIGlmIChpbnB1dC5wcmVzc2VkKCdEaWdpdDQnKSkgd2VhcG9uTmFtZSA9ICdCT01CJ1xuXG4gICAgd2VhcG9uQ29udGV4dC5wb3NpdGlvbi5jb3B5KGdyb3VwLnBvc2l0aW9uKVxuICAgIHdlYXBvbkNvbnRleHQuZm9yd2FyZC5jb3B5KGZvcndhcmQpXG4gICAgd2VhcG9uQ29udGV4dC5kdCA9IGR0XG4gICAgd2VhcG9uQ29udGV4dC50YXJnZXRzID0gdGFyZ2V0UHJvdmlkZXIoKVxuXG4gICAgaWYgKG1ldGVvckp1c3RQcmVzc2VkKXtcbiAgICAgIC8vMS4tIEtpY2sgdGhlIE1ldGVvciBjYW5pc3RlciBjbGVhciBvZiB0aGUgZnVzZWxhZ2Ugd2hlbiB0aGUgcGlsb3QgdGFwcyBzbG90IG9uZS5cbiAgICAgIG1ldGVvclN5c3RlbS50cnlGaXJlKHdlYXBvbkNvbnRleHQpXG4gICAgfVxuICAgIG1ldGVvclN5c3RlbS51cGRhdGUod2VhcG9uQ29udGV4dClcbiAgICAvLzIuLSBTeW5jIHRoZSBzbG93LWJ1cm4gbGF1bmNoIHZpc3VhbHMgc28gdGhlIGNhbmlzdGVyIGFuZCBwbHVtZSByZW1haW4gYXV0aG9yaXRhdGl2ZS5cbiAgICBtZXRlb3JWaXN1YWxzLnVwZGF0ZShtZXRlb3JTeXN0ZW0ubWlzc2lsZXMpXG5cbiAgICBpZiAod2VhcG9uTmFtZSA9PT0gJ0dBVExJTkcnKXtcbiAgICAgIC8vMy4tIEFkdmFuY2UgdGhlIGhpdHNjYW4gZ3VuIGFuZCByZXNwZWN0IHRyaWdnZXIgc3RhdGUuXG4gICAgICBnYXRsaW5nLnVwZGF0ZSh3ZWFwb25Db250ZXh0LCBmaXJlSGVsZClcbiAgICB9IGVsc2Uge1xuICAgICAgZ2F0bGluZy51cGRhdGUod2VhcG9uQ29udGV4dCwgZmFsc2UpXG4gICAgfVxuXG4gICAgaWYgKHdlYXBvbk5hbWUgPT09ICdNSVNTSUxFJyAmJiBmaXJlSnVzdFByZXNzZWQpe1xuICAgICAgLy80Li0gTGF1bmNoIGhvbWluZyBtaXNzaWxlcyB3aGVuIGFtbW8gYW5kIHBvb2wgY29uc3RyYWludHMgYWxsb3cuXG4gICAgICBtaXNzaWxlc1N5c3RlbS50cnlGaXJlKHdlYXBvbkNvbnRleHQpXG4gICAgfVxuICAgIG1pc3NpbGVzU3lzdGVtLnVwZGF0ZSh3ZWFwb25Db250ZXh0KVxuICAgIC8vNS4tIE1pcnJvciB0aGUgZ3VpZGFuY2UgcmVzdWx0cyBpbnRvIHRoZSBzY2VuZSBzbyBlYWNoIG1pc3NpbGUgZ2FpbnMgYSB2aXNpYmxlIHNoZWxsLlxuICAgIG1pc3NpbGVWaXN1YWxzLnVwZGF0ZShtaXNzaWxlc1N5c3RlbS5taXNzaWxlcylcblxuICAgIGlmICh3ZWFwb25OYW1lID09PSAnTEFTRVInKXtcbiAgICAgIGlmIChmaXJlSnVzdFByZXNzZWQpe1xuICAgICAgICBsYXNlclN5c3RlbS5maXJlKHdlYXBvbkNvbnRleHQpXG4gICAgICB9XG4gICAgICBpZiAoZmlyZUhlbGQpe1xuICAgICAgICBsYXNlclN5c3RlbS5zdXN0YWluKHdlYXBvbkNvbnRleHQpXG4gICAgICB9XG4gICAgICBpZiAoZmlyZUp1c3RSZWxlYXNlZCl7XG4gICAgICAgIGxhc2VyU3lzdGVtLnJlbGVhc2UoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobGFzZXJTeXN0ZW0uc3RhdGUuYWN0aXZlKXtcbiAgICAgICAgbGFzZXJTeXN0ZW0ucmVsZWFzZSgpXG4gICAgICB9XG4gICAgfVxuICAgIGxhc2VyU3lzdGVtLnVwZGF0ZSh3ZWFwb25Db250ZXh0KVxuICAgIC8vNi4tIFN0cmV0Y2ggYW5kIG9yaWVudCB0aGUgbmVvbiBiZWFtIGFjY29yZGluZyB0byB0aGUgZnJlc2hseSBzYW1wbGVkIHdlYXBvbiBzdGF0ZS5cbiAgICBsYXNlclZpc3VhbC51cGRhdGUobGFzZXJTeXN0ZW0uc3RhdGUpXG5cbiAgICBpZiAod2VhcG9uTmFtZSA9PT0gJ0JPTUInICYmIGZpcmVKdXN0UHJlc3NlZCl7XG4gICAgICAvLzcuLSBEcm9wIGEgYm9tYiB3aGlsZSByZWxheWluZyB0aGUgdGVycmFpbiBzYW1wbGVyIHRvIHRyaWdnZXIgZ3JvdW5kIGRldG9uYXRpb24uXG4gICAgICBib21iU3lzdGVtLmZpcmUoeyAuLi53ZWFwb25Db250ZXh0LCBzYW1wbGVHcm91bmRIZWlnaHQ6IHF1ZXJ5SGVpZ2h0IH0pXG4gICAgfVxuICAgIGJvbWJTeXN0ZW0udXBkYXRlKHsgLi4ud2VhcG9uQ29udGV4dCwgc2FtcGxlR3JvdW5kSGVpZ2h0OiBxdWVyeUhlaWdodCB9KVxuXG4gICAgLy8gQ29vbGRvd25zXG4gICAgYW1tbyA9IGdhdGxpbmcuYW1tb1xuICAgIG1pc3NpbGVzID0gbWlzc2lsZXNTeXN0ZW0uYW1tb1xuICAgIG1ldGVvckFtbW8gPSBtZXRlb3JTeXN0ZW0uYW1tb1xuICAgIGxhc2VyQ29vbGRvd25NcyA9IGxhc2VyU3lzdGVtLmNvb2xkb3duTXNcbiAgICBib21iQXJtZWQgPSBib21iU3lzdGVtLmlzQXJtZWRcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3Bvc2UoKXtcbiAgICAvLzguLSBUZWFyIGRvd24gdHJhbnNpZW50IHdlYXBvbiBtZXNoZXMgc28gaG90IHN3YXBzIGJldHdlZW4gdmVoaWNsZXMgc3RheSBzYWZlLlxuICAgIG1pc3NpbGVWaXN1YWxzLmRpc3Bvc2UoKVxuICAgIG1ldGVvclZpc3VhbHMuZGlzcG9zZSgpXG4gICAgbGFzZXJWaXN1YWwuZGlzcG9zZSgpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHVwZGF0ZSxcbiAgICBnZXQgc3BlZWQoKXsgcmV0dXJuIHNwZWVkIH0sXG4gICAgZ2V0IHdlYXBvbk5hbWUoKXsgcmV0dXJuIHdlYXBvbk5hbWUgfSxcbiAgICBnZXQgYW1tbygpeyByZXR1cm4gYW1tbyB9LFxuICAgIGdldCBtaXNzaWxlcygpeyByZXR1cm4gbWlzc2lsZXMgfSxcbiAgICBnZXQgbWV0ZW9yQW1tbygpeyByZXR1cm4gbWV0ZW9yQW1tbyB9LFxuICAgIGdldCBsYXNlckNvb2xkb3duTXMoKXsgcmV0dXJuIGxhc2VyQ29vbGRvd25NcyB9LFxuICAgIGdldCBib21iQXJtZWQoKXsgcmV0dXJuIGJvbWJBcm1lZCB9LFxuICAgIHNldFRhcmdldFByb3ZpZGVyKHByb3ZpZGVyOiAoKSA9PiBXZWFwb25UYXJnZXRbXSl7XG4gICAgICB0YXJnZXRQcm92aWRlciA9IHByb3ZpZGVyXG4gICAgfSxcbiAgICBkaXNwb3NlLFxuICB9XG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJjcmVhdGVHYXRsaW5nU3lzdGVtIiwiY3JlYXRlSG9taW5nTWlzc2lsZVN5c3RlbSIsImNyZWF0ZU5lb25MYXNlclN5c3RlbSIsImNyZWF0ZUJvbWJTeXN0ZW0iLCJjcmVhdGVIb21pbmdNaXNzaWxlVmlzdWFsIiwiY3JlYXRlTmVvbkxhc2VyVmlzdWFsIiwiY3JlYXRlTWV0ZW9yTWlzc2lsZVN5c3RlbSIsImNyZWF0ZUNvbnRyb2xsZXIiLCJncm91cCIsInNjZW5lIiwidmVsIiwiVmVjdG9yMyIsImZvcndhcmQiLCJ3ZWFwb25Db250ZXh0IiwicG9zaXRpb24iLCJkdCIsInRhcmdldHMiLCJ0YXJnZXRQcm92aWRlciIsImdhdGxpbmciLCJmaXJlUmF0ZSIsInNwcmVhZCIsIk1hdGhVdGlscyIsImRlZ1RvUmFkIiwibWF4VHJhY2VycyIsInRyYWNlckxpZmVNcyIsImFtbW8iLCJoZWF0UGVyU2hvdCIsImNvb2xSYXRlIiwib3ZlcmhlYXRUaHJlc2hvbGQiLCJtaXNzaWxlc1N5c3RlbSIsIm1heENvbmN1cnJlbnQiLCJjb29sZG93bk1zIiwic3BlZWQiLCJuYXZpZ2F0aW9uQ29uc3RhbnQiLCJsb2NrQ29uZURlZyIsInNtb2tlVHJhaWxJbnRlcnZhbE1zIiwiZGV0b25hdGlvblJhZGl1cyIsIm1heExpZmV0aW1lTXMiLCJtaXNzaWxlVmlzdWFscyIsIm1ldGVvclN5c3RlbSIsImVqZWN0aW9uRHVyYXRpb25NcyIsImVqZWN0aW9uU3BlZWQiLCJidXJuU3BlZWQiLCJtZXRlb3JWaXN1YWxzIiwibGFzZXJTeXN0ZW0iLCJkdXJhdGlvbk1zIiwicmFuZ2UiLCJhdHRlbnVhdGlvbiIsImxhc2VyVmlzdWFsIiwiYm9tYlN5c3RlbSIsImZ1c2VNcyIsImFvZVJhZGl1cyIsImNyYXRlclJhZGl1cyIsImRlYnJpc0NvdW50IiwiZ3Jhdml0eSIsIndlYXBvbk5hbWUiLCJtaXNzaWxlcyIsIm1ldGVvckFtbW8iLCJsYXNlckNvb2xkb3duTXMiLCJib21iQXJtZWQiLCJpc0FybWVkIiwiZmlyZUhlbGQiLCJmaXJlSnVzdFByZXNzZWQiLCJmaXJlSnVzdFJlbGVhc2VkIiwibWV0ZW9ySGVsZCIsIm1ldGVvckp1c3RQcmVzc2VkIiwidXBkYXRlIiwiaW5wdXQiLCJxdWVyeUhlaWdodCIsInRhcmdldFlhdyIsIm1vdXNlIiwieCIsInRhcmdldFBpdGNoIiwieSIsInJvdGF0aW9uIiwiTWF0aCIsImV4cCIsInByZXNzZWQiLCJ6IiwibWF4IiwibWluIiwic2V0IiwiYXBwbHlFdWxlciIsImNvcHkiLCJtdWx0aXBseVNjYWxhciIsImFkZFNjYWxlZFZlY3RvciIsInVzZXJEYXRhIiwiZmxvb3IiLCJhYnMiLCJjZWlsaW5nIiwicHJldmlvdXNseUhlbGQiLCJCb29sZWFuIiwicHJldmlvdXNseU1ldGVvckhlbGQiLCJ0cnlGaXJlIiwiZmlyZSIsInN1c3RhaW4iLCJyZWxlYXNlIiwic3RhdGUiLCJhY3RpdmUiLCJzYW1wbGVHcm91bmRIZWlnaHQiLCJkaXNwb3NlIiwic2V0VGFyZ2V0UHJvdmlkZXIiLCJwcm92aWRlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/vehicles/shared/simpleController.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/weapons/meteorMissile.ts":
/*!**************************************!*\
  !*** ./src/weapons/meteorMissile.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMeteorMissileSystem: () => (/* binding */ createMeteorMissileSystem)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(app-pages-browser)/./node_modules/three/build/three.module.js\");\n\nfunction createMeteorMissileSystem(options) {\n    const missiles = [];\n    let ammo = options.ammo;\n    let cooldownMs = 0;\n    let idCounter = 0;\n    const forwardTmp = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const los = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const relVel = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    const navAccel = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    //1.- Provide a cheap lookup so ignition always latches onto the same first viable target.\n    function acquireFirstTarget(targets) {\n        for (const target of targets){\n            if (target.alive) {\n                return target;\n            }\n        }\n        return null;\n    }\n    function detonate(index) {\n        missiles.splice(index, 1);\n    }\n    function update(context) {\n        //2.- Reduce cooldown in real time so callers know when the launcher is ready again.\n        if (cooldownMs > 0) {\n            cooldownMs = Math.max(0, cooldownMs - context.dt * 1000);\n        }\n        for(let i = missiles.length - 1; i >= 0; i--){\n            const missile = missiles[i];\n            missile.lifetimeMs += context.dt * 1000;\n            missile.stageMs += context.dt * 1000;\n            if (missile.lifetimeMs > options.maxLifetimeMs) {\n                detonate(i);\n                continue;\n            }\n            if (missile.stage === 'ejecting' && missile.stageMs >= options.ejectionDurationMs) {\n                //3.- On ignition, grab the earliest living target and switch to the powered flight profile.\n                const target = acquireFirstTarget(context.targets);\n                if (!target) {\n                    detonate(i);\n                    continue;\n                }\n                missile.stage = 'burning';\n                missile.stageMs = 0;\n                missile.targetId = target.id;\n                los.copy(target.position).sub(missile.position);\n                if (los.lengthSq() > 0.0001) {\n                    los.normalize();\n                    missile.velocity.copy(los).multiplyScalar(options.burnSpeed);\n                } else {\n                    missile.velocity.set(0, 0, -options.burnSpeed);\n                }\n            }\n            if (missile.stage === 'burning') {\n                var _context_targets_find;\n                let target = (_context_targets_find = context.targets.find((t)=>t.id === missile.targetId && t.alive)) !== null && _context_targets_find !== void 0 ? _context_targets_find : null;\n                if (!target) {\n                    //4.- If the locked contact vanishes, immediately bind to the next available target.\n                    target = acquireFirstTarget(context.targets);\n                    if (!target) {\n                        detonate(i);\n                        continue;\n                    }\n                    missile.targetId = target.id;\n                }\n                los.copy(target.position).sub(missile.position);\n                const distance = los.length();\n                if (distance < options.detonationRadius) {\n                    detonate(i);\n                    continue;\n                }\n                los.normalize();\n                relVel.copy(target.velocity).sub(missile.velocity);\n                navAccel.copy(relVel.cross(los).cross(los)).multiplyScalar(options.navigationConstant);\n                missile.velocity.addScaledVector(navAccel, context.dt);\n                missile.velocity.setLength(options.burnSpeed);\n            }\n            missile.position.addScaledVector(missile.velocity, context.dt);\n            missile.smokeAccumulatorMs += context.dt * 1000;\n            const shouldEmit = missile.stage === 'burning';\n            if (shouldEmit && missile.smokeAccumulatorMs >= options.smokeTrailIntervalMs) {\n                //5.- Drop contrail markers to draw the powered flight path with a simple line strip.\n                missile.smokeAccumulatorMs = 0;\n                missile.smokeTrail.push(missile.position.clone());\n                if (missile.smokeTrail.length > 32) {\n                    missile.smokeTrail.shift();\n                }\n            }\n        }\n    }\n    function tryFire(context) {\n        if (ammo <= 0) return {\n            fired: false,\n            reason: 'empty'\n        };\n        if (cooldownMs > 0) return {\n            fired: false,\n            reason: 'cooldown'\n        };\n        if (missiles.length >= options.maxConcurrent) return {\n            fired: false,\n            reason: 'pool'\n        };\n        const missile = {\n            id: ++idCounter,\n            position: context.position.clone(),\n            velocity: forwardTmp.copy(context.forward).multiplyScalar(options.ejectionSpeed),\n            targetId: null,\n            lifetimeMs: 0,\n            smokeTrail: [],\n            smokeAccumulatorMs: 0,\n            stage: 'ejecting',\n            stageMs: 0\n        };\n        missiles.push(missile);\n        ammo -= 1;\n        cooldownMs = options.cooldownMs;\n        return {\n            fired: true,\n            missile\n        };\n    }\n    return {\n        update,\n        tryFire,\n        get ammo () {\n            return ammo;\n        },\n        get cooldownMs () {\n            return cooldownMs;\n        },\n        get activeCount () {\n            return missiles.length;\n        },\n        get missiles () {\n            return missiles;\n        }\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy93ZWFwb25zL21ldGVvck1pc3NpbGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEI7QUFrQ3ZCLFNBQVNDLDBCQUEwQkMsT0FBNkI7SUFDckUsTUFBTUMsV0FBaUMsRUFBRTtJQUN6QyxJQUFJQyxPQUFPRixRQUFRRSxJQUFJO0lBQ3ZCLElBQUlDLGFBQWE7SUFDakIsSUFBSUMsWUFBWTtJQUVoQixNQUFNQyxhQUFhLElBQUlQLDBDQUFhO0lBQ3BDLE1BQU1TLE1BQU0sSUFBSVQsMENBQWE7SUFDN0IsTUFBTVUsU0FBUyxJQUFJViwwQ0FBYTtJQUNoQyxNQUFNVyxXQUFXLElBQUlYLDBDQUFhO0lBRWxDLDBGQUEwRjtJQUMxRixTQUFTWSxtQkFBbUJDLE9BQXVCO1FBQ2pELEtBQUssTUFBTUMsVUFBVUQsUUFBUTtZQUMzQixJQUFJQyxPQUFPQyxLQUFLLEVBQUM7Z0JBQ2YsT0FBT0Q7WUFDVDtRQUNGO1FBQ0EsT0FBTztJQUNUO0lBRUEsU0FBU0UsU0FBU0MsS0FBYTtRQUM3QmQsU0FBU2UsTUFBTSxDQUFDRCxPQUFPO0lBQ3pCO0lBRUEsU0FBU0UsT0FBT0MsT0FBc0I7UUFDcEMsb0ZBQW9GO1FBQ3BGLElBQUlmLGFBQWEsR0FBRTtZQUNqQkEsYUFBYWdCLEtBQUtDLEdBQUcsQ0FBQyxHQUFHakIsYUFBYWUsUUFBUUcsRUFBRSxHQUFHO1FBQ3JEO1FBRUEsSUFBSyxJQUFJQyxJQUFJckIsU0FBU3NCLE1BQU0sR0FBRyxHQUFHRCxLQUFLLEdBQUdBLElBQUk7WUFDNUMsTUFBTUUsVUFBVXZCLFFBQVEsQ0FBQ3FCLEVBQUU7WUFDM0JFLFFBQVFDLFVBQVUsSUFBSVAsUUFBUUcsRUFBRSxHQUFHO1lBQ25DRyxRQUFRRSxPQUFPLElBQUlSLFFBQVFHLEVBQUUsR0FBRztZQUVoQyxJQUFJRyxRQUFRQyxVQUFVLEdBQUd6QixRQUFRMkIsYUFBYSxFQUFDO2dCQUM3Q2IsU0FBU1E7Z0JBQ1Q7WUFDRjtZQUVBLElBQUlFLFFB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QyxRQUFRO1FBQVE7UUFDdEQsSUFBSXZELGFBQWEsR0FBRyxPQUFPO1lBQUVzRCxPQUFPO1lBQU9DLFFBQVE7UUFBVztRQUM5RCxJQUFJekQsU0FBU3NCLE1BQU0sSUFBSXZCLFFBQVEyRCxhQUFhLEVBQUUsT0FBTztZQUFFRixPQUFPO1lBQU9DLFFBQVE7UUFBTztRQUVwRixNQUFNbEMsVUFBOEI7WUFDbENPLElBQUksRUFBRTNCO1lBQ042QixVQUFVZixRQUFRZSxRQUFRLENBQUNxQixLQUFLO1lBQ2hDakIsVUFBVWhDLFdBQVcyQixJQUFJLENBQUNkLFFBQVEwQyxPQUFPLEVBQUV0QixjQUFjLENBQUN0QyxRQUFRNkQsYUFBYTtZQUMvRS9CLFVBQVU7WUFDVkwsWUFBWTtZQUNaMkIsWUFBWSxFQUFFO1lBQ2RILG9CQUFvQjtZQUNwQnJCLE9BQU87WUFDUEYsU0FBUztRQUNYO1FBRUF6QixTQUFTb0QsSUFBSSxDQUFDN0I7UUFDZHRCLFFBQVE7UUFDUkMsYUFBYUgsUUFBUUcsVUFBVTtRQUMvQixPQUFPO1lBQUVzRCxPQUFPO1lBQU1qQztRQUFRO0lBQ2hDO0lBRUEsT0FBTztRQUNMUDtRQUNBdUM7UUFDQSxJQUFJdEQsUUFBTTtZQUFFLE9BQU9BO1FBQUs7UUFDeEIsSUFBSUMsY0FBWTtZQUFFLE9BQU9BO1FBQVc7UUFDcEMsSUFBSTJELGVBQWE7WUFBRSxPQUFPN0QsU0FBU3NCLE1BQU07UUFBQztRQUMxQyxJQUFJdEIsWUFBVTtZQUFFLE9BQU9BO1FBQVM7SUFDbEM7QUFDRiIsInNvdXJjZXMiOlsiL2FwcC9zcmMvd2VhcG9ucy9tZXRlb3JNaXNzaWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgV2VhcG9uQ29udGV4dCwgV2VhcG9uVGFyZ2V0IH0gZnJvbSAnQC93ZWFwb25zL3R5cGVzJ1xuXG5leHBvcnQgdHlwZSBNZXRlb3JNaXNzaWxlT3B0aW9ucyA9IHtcbiAgbWF4Q29uY3VycmVudDogbnVtYmVyXG4gIGNvb2xkb3duTXM6IG51bWJlclxuICBhbW1vOiBudW1iZXJcbiAgZWplY3Rpb25EdXJhdGlvbk1zOiBudW1iZXJcbiAgZWplY3Rpb25TcGVlZDogbnVtYmVyXG4gIGJ1cm5TcGVlZDogbnVtYmVyXG4gIG5hdmlnYXRpb25Db25zdGFudDogbnVtYmVyXG4gIGRldG9uYXRpb25SYWRpdXM6IG51bWJlclxuICBzbW9rZVRyYWlsSW50ZXJ2YWxNczogbnVtYmVyXG4gIG1heExpZmV0aW1lTXM6IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBNZXRlb3JNaXNzaWxlU3RhdGUgPSB7XG4gIGlkOiBudW1iZXJcbiAgcG9zaXRpb246IFRIUkVFLlZlY3RvcjNcbiAgdmVsb2NpdHk6IFRIUkVFLlZlY3RvcjNcbiAgdGFyZ2V0SWQ6IHN0cmluZyB8IG51bGxcbiAgbGlmZXRpbWVNczogbnVtYmVyXG4gIHNtb2tlVHJhaWw6IFRIUkVFLlZlY3RvcjNbXVxuICBzbW9rZUFjY3VtdWxhdG9yTXM6IG51bWJlclxuICBzdGFnZTogJ2VqZWN0aW5nJyB8ICdidXJuaW5nJ1xuICBzdGFnZU1zOiBudW1iZXJcbn1cblxuZXhwb3J0IHR5cGUgTWV0ZW9yTWlzc2lsZUZpcmVSZXN1bHQgPSB7XG4gIGZpcmVkOiBib29sZWFuXG4gIG1pc3NpbGU/OiBNZXRlb3JNaXNzaWxlU3RhdGVcbiAgcmVhc29uPzogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNZXRlb3JNaXNzaWxlU3lzdGVtKG9wdGlvbnM6IE1ldGVvck1pc3NpbGVPcHRpb25zKXtcbiAgY29uc3QgbWlzc2lsZXM6IE1ldGVvck1pc3NpbGVTdGF0ZVtdID0gW11cbiAgbGV0IGFtbW8gPSBvcHRpb25zLmFtbW9cbiAgbGV0IGNvb2xkb3duTXMgPSAwXG4gIGxldCBpZENvdW50ZXIgPSAwXG5cbiAgY29uc3QgZm9yd2FyZFRtcCA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgY29uc3QgbG9zID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuICBjb25zdCByZWxWZWwgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG4gIGNvbnN0IG5hdkFjY2VsID0gbmV3IFRIUkVFLlZlY3RvcjMoKVxuXG4gIC8vMS4tIFByb3ZpZGUgYSBjaGVhcCBsb29rdXAgc28gaWduaXRpb24gYWx3YXlzIGxhdGNoZXMgb250byB0aGUgc2FtZSBmaXJzdCB2aWFibGUgdGFyZ2V0LlxuICBmdW5jdGlvbiBhY3F1aXJlRmlyc3RUYXJnZXQodGFyZ2V0czogV2VhcG9uVGFyZ2V0W10pOiBXZWFwb25UYXJnZXQgfCBudWxse1xuICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIHRhcmdldHMpe1xuICAgICAgaWYgKHRhcmdldC5hbGl2ZSl7XG4gICAgICAgIHJldHVybiB0YXJnZXRcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGZ1bmN0aW9uIGRldG9uYXRlKGluZGV4OiBudW1iZXIpe1xuICAgIG1pc3NpbGVzLnNwbGljZShpbmRleCwgMSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShjb250ZXh0OiBXZWFwb25Db250ZXh0KXtcbiAgICAvLzIuLSBSZWR1Y2UgY29vbGRvd24gaW4gcmVhbCB0aW1lIHNvIGNhbGxlcnMga25vdyB3aGVuIHRoZSBsYXVuY2hlciBpcyByZWFkeSBhZ2Fpbi5cbiAgICBpZiAoY29vbGRvd25NcyA+IDApe1xuICAgICAgY29vbGRvd25NcyA9IE1hdGgubWF4KDAsIGNvb2xkb3duTXMgLSBjb250ZXh0LmR0ICogMTAwMClcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gbWlzc2lsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgY29uc3QgbWlzc2lsZSA9IG1pc3NpbGVzW2ldXG4gICAgICBtaXNzaWxlLmxpZmV0aW1lTXMgKz0gY29udGV4dC5kdCAqIDEwMDBcbiAgICAgIG1pc3NpbGUuc3RhZ2VNcyArPSBjb250ZXh0LmR0ICogMTAwMFxuXG4gICAgICBpZiAobWlzc2lsZS5saWZldGltZU1zID4gb3B0aW9ucy5tYXhMaWZldGltZU1zKXtcbiAgICAgICAgZGV0b25hdGUoaSlcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKG1pc3NpbGUuc3RhZ2UgPT09ICdlamVjdGluZycgJiYgbWlzc2lsZS5zdGFnZU1zID49IG9wdGlvbnMuZWplY3Rpb25EdXJhdGlvbk1zKXtcbiAgICAgICAgLy8zLi0gT24gaWduaXRpb24sIGdyYWIgdGhlIGVhcmxpZXN0IGxpdmluZyB0YXJnZXQgYW5kIHN3aXRjaCB0byB0aGUgcG93ZXJlZCBmbGlnaHQgcHJvZmlsZS5cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gYWNxdWlyZUZpcnN0VGFyZ2V0KGNvbnRleHQudGFyZ2V0cylcbiAgICAgICAgaWYgKCF0YXJnZXQpe1xuICAgICAgICAgIGRldG9uYXRlKGkpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBtaXNzaWxlLnN0YWdlID0gJ2J1cm5pbmcnXG4gICAgICAgIG1pc3NpbGUuc3RhZ2VNcyA9IDBcbiAgICAgICAgbWlzc2lsZS50YXJnZXRJZCA9IHRhcmdldC5pZFxuICAgICAgICBsb3MuY29weSh0YXJnZXQucG9zaXRpb24pLnN1YihtaXNzaWxlLnBvc2l0aW9uKVxuICAgICAgICBpZiAobG9zLmxlbmd0aFNxKCkgPiAwLjAwMDEpe1xuICAgICAgICAgIGxvcy5ub3JtYWxpemUoKVxuICAgICAgICAgIG1pc3NpbGUudmVsb2NpdHkuY29weShsb3MpLm11bHRpcGx5U2NhbGFyKG9wdGlvbnMuYnVyblNwZWVkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NpbGUudmVsb2NpdHkuc2V0KDAsIDAsIC1vcHRpb25zLmJ1cm5TcGVlZClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobWlzc2lsZS5zdGFnZSA9PT0gJ2J1cm5pbmcnKXtcbiAgICAgICAgbGV0IHRhcmdldCA9IGNvbnRleHQudGFyZ2V0cy5maW5kKHQgPT4gdC5pZCA9PT0gbWlzc2lsZS50YXJnZXRJZCAmJiB0LmFsaXZlKSA/PyBudWxsXG4gICAgICAgIGlmICghdGFyZ2V0KXtcbiAgICAgICAgICAvLzQuLSBJZiB0aGUgbG9ja2VkIGNvbnRhY3QgdmFuaXNoZXMsIGltbWVkaWF0ZWx5IGJpbmQgdG8gdGhlIG5leHQgYXZhaWxhYmxlIHRhcmdldC5cbiAgICAgICAgICB0YXJnZXQgPSBhY3F1aXJlRmlyc3RUYXJnZXQoY29udGV4dC50YXJnZXRzKVxuICAgICAgICAgIGlmICghdGFyZ2V0KXtcbiAgICAgICAgICAgIGRldG9uYXRlKGkpXG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBtaXNzaWxlLnRhcmdldElkID0gdGFyZ2V0LmlkXG4gICAgICAgIH1cblxuICAgICAgICBsb3MuY29weSh0YXJnZXQucG9zaXRpb24pLnN1YihtaXNzaWxlLnBvc2l0aW9uKVxuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGxvcy5sZW5ndGgoKVxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBvcHRpb25zLmRldG9uYXRpb25SYWRpdXMpe1xuICAgICAgICAgIGRldG9uYXRlKGkpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBsb3Mubm9ybWFsaXplKClcbiAgICAgICAgcmVsVmVsLmNvcHkodGFyZ2V0LnZlbG9jaXR5KS5zdWIobWlzc2lsZS52ZWxvY2l0eSlcbiAgICAgICAgbmF2QWNjZWwuY29weShyZWxWZWwuY3Jvc3MobG9zKS5jcm9zcyhsb3MpKS5tdWx0aXBseVNjYWxhcihvcHRpb25zLm5hdmlnYXRpb25Db25zdGFudClcbiAgICAgICAgbWlzc2lsZS52ZWxvY2l0eS5hZGRTY2FsZWRWZWN0b3IobmF2QWNjZWwsIGNvbnRleHQuZHQpXG4gICAgICAgIG1pc3NpbGUudmVsb2NpdHkuc2V0TGVuZ3RoKG9wdGlvbnMuYnVyblNwZWVkKVxuICAgICAgfVxuXG4gICAgICBtaXNzaWxlLnBvc2l0aW9uLmFkZFNjYWxlZFZlY3RvcihtaXNzaWxlLnZlbG9jaXR5LCBjb250ZXh0LmR0KVxuXG4gICAgICBtaXNzaWxlLnNtb2tlQWNjdW11bGF0b3JNcyArPSBjb250ZXh0LmR0ICogMTAwMFxuICAgICAgY29uc3Qgc2hvdWxkRW1pdCA9IG1pc3NpbGUuc3RhZ2UgPT09ICdidXJuaW5nJ1xuICAgICAgaWYgKHNob3VsZEVtaXQgJiYgbWlzc2lsZS5zbW9rZUFjY3VtdWxhdG9yTXMgPj0gb3B0aW9ucy5zbW9rZVRyYWlsSW50ZXJ2YWxNcyl7XG4gICAgICAgIC8vNS4tIERyb3AgY29udHJhaWwgbWFya2VycyB0byBkcmF3IHRoZSBwb3dlcmVkIGZsaWdodCBwYXRoIHdpdGggYSBzaW1wbGUgbGluZSBzdHJpcC5cbiAgICAgICAgbWlzc2lsZS5zbW9rZUFjY3VtdWxhdG9yTXMgPSAwXG4gICAgICAgIG1pc3NpbGUuc21va2VUcmFpbC5wdXNoKG1pc3NpbGUucG9zaXRpb24uY2xvbmUoKSlcbiAgICAgICAgaWYgKG1pc3NpbGUuc21va2VUcmFpbC5sZW5ndGggPiAzMil7XG4gICAgICAgICAgbWlzc2lsZS5zbW9rZVRyYWlsLnNoaWZ0KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeUZpcmUoY29udGV4dDogV2VhcG9uQ29udGV4dCk6IE1ldGVvck1pc3NpbGVGaXJlUmVzdWx0e1xuICAgIGlmIChhbW1vIDw9IDApIHJldHVybiB7IGZpcmVkOiBmYWxzZSwgcmVhc29uOiAnZW1wdHknIH1cbiAgICBpZiAoY29vbGRvd25NcyA+IDApIHJldHVybiB7IGZpcmVkOiBmYWxzZSwgcmVhc29uOiAnY29vbGRvd24nIH1cbiAgICBpZiAobWlzc2lsZXMubGVuZ3RoID49IG9wdGlvbnMubWF4Q29uY3VycmVudCkgcmV0dXJuIHsgZmlyZWQ6IGZhbHNlLCByZWFzb246ICdwb29sJyB9XG5cbiAgICBjb25zdCBtaXNzaWxlOiBNZXRlb3JNaXNzaWxlU3RhdGUgPSB7XG4gICAgICBpZDogKytpZENvdW50ZXIsXG4gICAgICBwb3NpdGlvbjogY29udGV4dC5wb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgdmVsb2NpdHk6IGZvcndhcmRUbXAuY29weShjb250ZXh0LmZvcndhcmQpLm11bHRpcGx5U2NhbGFyKG9wdGlvbnMuZWplY3Rpb25TcGVlZCksXG4gICAgICB0YXJnZXRJZDogbnVsbCxcbiAgICAgIGxpZmV0aW1lTXM6IDAsXG4gICAgICBzbW9rZVRyYWlsOiBbXSxcbiAgICAgIHNtb2tlQWNjdW11bGF0b3JNczogMCxcbiAgICAgIHN0YWdlOiAnZWplY3RpbmcnLFxuICAgICAgc3RhZ2VNczogMCxcbiAgICB9XG5cbiAgICBtaXNzaWxlcy5wdXNoKG1pc3NpbGUpXG4gICAgYW1tbyAtPSAxXG4gICAgY29vbGRvd25NcyA9IG9wdGlvbnMuY29vbGRvd25Nc1xuICAgIHJldHVybiB7IGZpcmVkOiB0cnVlLCBtaXNzaWxlIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdXBkYXRlLFxuICAgIHRyeUZpcmUsXG4gICAgZ2V0IGFtbW8oKXsgcmV0dXJuIGFtbW8gfSxcbiAgICBnZXQgY29vbGRvd25NcygpeyByZXR1cm4gY29vbGRvd25NcyB9LFxuICAgIGdldCBhY3RpdmVDb3VudCgpeyByZXR1cm4gbWlzc2lsZXMubGVuZ3RoIH0sXG4gICAgZ2V0IG1pc3NpbGVzKCl7IHJldHVybiBtaXNzaWxlcyB9LFxuICB9XG59XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJjcmVhdGVNZXRlb3JNaXNzaWxlU3lzdGVtIiwib3B0aW9ucyIsIm1pc3NpbGVzIiwiYW1tbyIsImNvb2xkb3duTXMiLCJpZENvdW50ZXIiLCJmb3J3YXJkVG1wIiwiVmVjdG9yMyIsImxvcyIsInJlbFZlbCIsIm5hdkFjY2VsIiwiYWNxdWlyZUZpcnN0VGFyZ2V0IiwidGFyZ2V0cyIsInRhcmdldCIsImFsaXZlIiwiZGV0b25hdGUiLCJpbmRleCIsInNwbGljZSIsInVwZGF0ZSIsImNvbnRleHQiLCJNYXRoIiwibWF4IiwiZHQiLCJpIiwibGVuZ3RoIiwibWlzc2lsZSIsImxpZmV0aW1lTXMiLCJzdGFnZU1zIiwibWF4TGlmZXRpbWVNcyIsInN0YWdlIiwiZWplY3Rpb25EdXJhdGlvbk1zIiwidGFyZ2V0SWQiLCJpZCIsImNvcHkiLCJwb3NpdGlvbiIsInN1YiIsImxlbmd0aFNxIiwibm9ybWFsaXplIiwidmVsb2NpdHkiLCJtdWx0aXBseVNjYWxhciIsImJ1cm5TcGVlZCIsInNldCIsImZpbmQiLCJ0IiwiZGlzdGFuY2UiLCJkZXRvbmF0aW9uUmFkaXVzIiwiY3Jvc3MiLCJuYXZpZ2F0aW9uQ29uc3RhbnQiLCJhZGRTY2FsZWRWZWN0b3IiLCJzZXRMZW5ndGgiLCJzbW9rZUFjY3VtdWxhdG9yTXMiLCJzaG91bGRFbWl0Iiwic21va2VUcmFpbEludGVydmFsTXMiLCJzbW9rZVRyYWlsIiwicHVzaCIsImNsb25lIiwic2hpZnQiLCJ0cnlGaXJlIiwiZmlyZWQiLCJyZWFzb24iLCJtYXhDb25jdXJyZW50IiwiZm9yd2FyZCIsImVqZWN0aW9uU3BlZWQiLCJhY3RpdmVDb3VudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/weapons/meteorMissile.ts\n"));

/***/ })

});